<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10. データの構造 | 私たちのR: ベストプラクティスの探究</title>
  <meta name="description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="10. データの構造 | 私たちのR: ベストプラクティスの探究" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="github-repo" content="JaehyunSong/RBook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10. データの構造 | 私たちのR: ベストプラクティスの探究" />
  
  <meta name="twitter:description" content="R Not for Everyone: An Esoteric Guide." />
  

<meta name="author" content="宋財泫 (Jaehyun Song)・矢内勇生 (Yuki Yanai)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="HTML/apple-favicon.png" />
  <link rel="shortcut icon" href="HTML/favicon.png" type="image/x-icon" />
<link rel="prev" href="datatype.html"/>
<link rel="next" href="programming.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165592410-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-165592410-1');
  gtag('set', {'user_id': 'USER_ID'}); 
</script>

<meta name="google-site-verification" content="QJouPRaPKBPU1jDp6VaBuFbVV5imTI-Aazl_ScJwVgU" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="HTML/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">私たちのR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 紹介</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#progress"><i class="fa fa-check"></i><b>1.1</b> 進捗状況</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> 本書の目的と対象</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-author"><i class="fa fa-check"></i><b>1.3</b> 著者紹介</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-download"><i class="fa fa-check"></i><b>1.4</b> データのダウンロード</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#about-howtoread"><i class="fa fa-check"></i><b>1.5</b> 本書における表記法</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#about-copyright"><i class="fa fa-check"></i><b>1.6</b> 著作権</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aboutR.html"><a href="aboutR.html"><i class="fa fa-check"></i><b>2</b> R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="aboutR.html"><a href="aboutR.html#WhatIsR"><i class="fa fa-check"></i><b>2.1</b> Rとは</a></li>
<li class="chapter" data-level="2.2" data-path="aboutR.html"><a href="aboutR.html#WhyR"><i class="fa fa-check"></i><b>2.2</b> Why R?</a></li>
<li class="chapter" data-level="2.3" data-path="aboutR.html"><a href="aboutR.html#GUI_IDE"><i class="fa fa-check"></i><b>2.3</b> GUIとIDE</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="aboutR.html"><a href="aboutR.html#gui"><i class="fa fa-check"></i><b>2.3.1</b> GUI</a></li>
<li class="chapter" data-level="2.3.2" data-path="aboutR.html"><a href="aboutR.html#aboutR-IDE"><i class="fa fa-check"></i><b>2.3.2</b> IDE</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Rのインストール</a>
<ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#install-package"><i class="fa fa-check"></i><b>3.1</b> パッケージのインストール</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="installation.html"><a href="installation.html#パッケージのインストール"><i class="fa fa-check"></i><b>3.1.1</b> パッケージのインストール</a></li>
<li class="chapter" data-level="3.1.2" data-path="installation.html"><a href="installation.html#パッケージの読み込み"><i class="fa fa-check"></i><b>3.1.2</b> パッケージの読み込み</a></li>
<li class="chapter" data-level="3.1.3" data-path="installation.html"><a href="installation.html#必須パッケージのインストール"><i class="fa fa-check"></i><b>3.1.3</b> 必須パッケージのインストール</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ide.html"><a href="ide.html"><i class="fa fa-check"></i><b>4</b> IDEの導入</a></li>
<li class="chapter" data-level="5" data-path="R-Customize.html"><a href="R-Customize.html"><i class="fa fa-check"></i><b>5</b> 分析環境のカスタマイズ</a></li>
<li class="chapter" data-level="6" data-path="process.html"><a href="process.html"><i class="fa fa-check"></i><b>6</b> 分析の手順</a></li>
<li class="chapter" data-level="7" data-path="rbasic.html"><a href="rbasic.html"><i class="fa fa-check"></i><b>7</b> 基本的な操作</a>
<ul>
<li class="chapter" data-level="" data-path="rbasic.html"><a href="rbasic.html#目次"><i class="fa fa-check"></i>目次</a></li>
<li class="chapter" data-level="7.1" data-path="rbasic.html"><a href="rbasic.html#rbasic-compbasic"><i class="fa fa-check"></i><b>7.1</b> コンピュータの基礎知識</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rbasic.html"><a href="rbasic.html#ファイル名"><i class="fa fa-check"></i><b>7.1.1</b> ファイル名</a></li>
<li class="chapter" data-level="7.1.2" data-path="rbasic.html"><a href="rbasic.html#ファイルシステムとパス"><i class="fa fa-check"></i><b>7.1.2</b> ファイルシステムとパス</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rbasic.html"><a href="rbasic.html#rbasic-project"><i class="fa fa-check"></i><b>7.2</b> 「プロジェクト」のすゝめ</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rbasic.html"><a href="rbasic.html#プロジェクト"><i class="fa fa-check"></i><b>7.2.1</b> プロジェクト</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rbasic.html"><a href="rbasic.html#rbasic-calc"><i class="fa fa-check"></i><b>7.3</b> 電卓としてのR</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="rbasic.html"><a href="rbasic.html#算術演算子"><i class="fa fa-check"></i><b>7.3.1</b> 算術演算子</a></li>
<li class="chapter" data-level="7.3.2" data-path="rbasic.html"><a href="rbasic.html#論理演算子"><i class="fa fa-check"></i><b>7.3.2</b> 論理演算子</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="rbasic.html"><a href="rbasic.html#rbasic-input"><i class="fa fa-check"></i><b>7.4</b> 格納とオブジェクトの作成</a></li>
<li class="chapter" data-level="7.5" data-path="rbasic.html"><a href="rbasic.html#rbasic-extract"><i class="fa fa-check"></i><b>7.5</b> 要素の抽出</a></li>
<li class="chapter" data-level="7.6" data-path="rbasic.html"><a href="rbasic.html#rbasic-exercise"><i class="fa fa-check"></i><b>7.6</b> 演習問題</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i><b>8</b> データの入出力</a>
<ul>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#目次-1"><i class="fa fa-check"></i>目次</a></li>
<li class="chapter" data-level="8.1" data-path="io.html"><a href="io.html#io-read"><i class="fa fa-check"></i><b>8.1</b> データの読み込み</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="io.html"><a href="io.html#csvファイルの場合"><i class="fa fa-check"></i><b>8.1.1</b> csvファイルの場合</a></li>
<li class="chapter" data-level="8.1.2" data-path="io.html"><a href="io.html#その他のフォーマット"><i class="fa fa-check"></i><b>8.1.2</b> その他のフォーマット</a></li>
<li class="chapter" data-level="8.1.3" data-path="io.html"><a href="io.html#rdataファイルの場合"><i class="fa fa-check"></i><b>8.1.3</b> RDataファイルの場合</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="io.html"><a href="io.html#io-export"><i class="fa fa-check"></i><b>8.2</b> データの書き出し</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="io.html"><a href="io.html#csvファイル"><i class="fa fa-check"></i><b>8.2.1</b> csvファイル</a></li>
<li class="chapter" data-level="8.2.2" data-path="io.html"><a href="io.html#rdataファイル"><i class="fa fa-check"></i><b>8.2.2</b> RDataファイル</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="datatype.html"><a href="datatype.html"><i class="fa fa-check"></i><b>9</b> データの型</a>
<ul>
<li class="chapter" data-level="9.1" data-path="datatype.html"><a href="datatype.html#WhatIsDatatype"><i class="fa fa-check"></i><b>9.1</b> データ型とは</a></li>
<li class="chapter" data-level="9.2" data-path="datatype.html"><a href="datatype.html#type-logical"><i class="fa fa-check"></i><b>9.2</b> Logical</a></li>
<li class="chapter" data-level="9.3" data-path="datatype.html"><a href="datatype.html#type-numeric"><i class="fa fa-check"></i><b>9.3</b> Numeric</a></li>
<li class="chapter" data-level="9.4" data-path="datatype.html"><a href="datatype.html#type-complex"><i class="fa fa-check"></i><b>9.4</b> Complex</a></li>
<li class="chapter" data-level="9.5" data-path="datatype.html"><a href="datatype.html#type-character"><i class="fa fa-check"></i><b>9.5</b> Character</a></li>
<li class="chapter" data-level="9.6" data-path="datatype.html"><a href="datatype.html#type-factor"><i class="fa fa-check"></i><b>9.6</b> Factor</a></li>
<li class="chapter" data-level="9.7" data-path="datatype.html"><a href="datatype.html#type-date"><i class="fa fa-check"></i><b>9.7</b> Date</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="datatype.html"><a href="datatype.html#なぜdate型があるのか"><i class="fa fa-check"></i><b>9.7.1</b> なぜDate型があるのか</a></li>
<li class="chapter" data-level="9.7.2" data-path="datatype.html"><a href="datatype.html#date型の作り方"><i class="fa fa-check"></i><b>9.7.2</b> Date型の作り方</a></li>
<li class="chapter" data-level="9.7.3" data-path="datatype.html"><a href="datatype.html#posixctposixlt型について"><i class="fa fa-check"></i><b>9.7.3</b> POSIXct、POSIXlt型について</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="datatype.html"><a href="datatype.html#type-na"><i class="fa fa-check"></i><b>9.8</b> NA</a></li>
<li class="chapter" data-level="9.9" data-path="datatype.html"><a href="datatype.html#type-null"><i class="fa fa-check"></i><b>9.9</b> NULL</a></li>
<li class="chapter" data-level="9.10" data-path="datatype.html"><a href="datatype.html#type-nan"><i class="fa fa-check"></i><b>9.10</b> NaN</a></li>
<li class="chapter" data-level="9.11" data-path="datatype.html"><a href="datatype.html#type-inf"><i class="fa fa-check"></i><b>9.11</b> Inf</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datastructure.html"><a href="datastructure.html"><i class="fa fa-check"></i><b>10</b> データの構造</a>
<ul>
<li class="chapter" data-level="10.1" data-path="datastructure.html"><a href="datastructure.html#WhatIsDatastructure"><i class="fa fa-check"></i><b>10.1</b> データ構造とは</a></li>
<li class="chapter" data-level="10.2" data-path="datastructure.html"><a href="datastructure.html#structure-vector"><i class="fa fa-check"></i><b>10.2</b> ベクトル (vector)</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="datastructure.html"><a href="datastructure.html#ベクトルの作り方"><i class="fa fa-check"></i><b>10.2.1</b> ベクトルの作り方</a></li>
<li class="chapter" data-level="10.2.2" data-path="datastructure.html"><a href="datastructure.html#ベクトルの操作"><i class="fa fa-check"></i><b>10.2.2</b> ベクトルの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="datastructure.html"><a href="datastructure.html#structure-matrix"><i class="fa fa-check"></i><b>10.3</b> 行列 (matrix)</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="datastructure.html"><a href="datastructure.html#行列の作り方"><i class="fa fa-check"></i><b>10.3.1</b> 行列の作り方</a></li>
<li class="chapter" data-level="10.3.2" data-path="datastructure.html"><a href="datastructure.html#行列の操作"><i class="fa fa-check"></i><b>10.3.2</b> 行列の操作</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="datastructure.html"><a href="datastructure.html#structure-dataframe"><i class="fa fa-check"></i><b>10.4</b> データフレーム (data.frame)</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="datastructure.html"><a href="datastructure.html#データフレームの作成"><i class="fa fa-check"></i><b>10.4.1</b> データフレームの作成</a></li>
<li class="chapter" data-level="10.4.2" data-path="datastructure.html"><a href="datastructure.html#データフレームの操作"><i class="fa fa-check"></i><b>10.4.2</b> データフレームの操作</a></li>
<li class="chapter" data-level="10.4.3" data-path="datastructure.html"><a href="datastructure.html#tibble型"><i class="fa fa-check"></i><b>10.4.3</b> tibble型</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="datastructure.html"><a href="datastructure.html#structure-list"><i class="fa fa-check"></i><b>10.5</b> リスト (list)</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="datastructure.html"><a href="datastructure.html#リスト型データの作成"><i class="fa fa-check"></i><b>10.5.1</b> リスト型データの作成</a></li>
<li class="chapter" data-level="10.5.2" data-path="datastructure.html"><a href="datastructure.html#リスト型データの操作"><i class="fa fa-check"></i><b>10.5.2</b> リスト型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="datastructure.html"><a href="datastructure.html#structure-array"><i class="fa fa-check"></i><b>10.6</b> 配列 (array)</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="datastructure.html"><a href="datastructure.html#配列型データの作成"><i class="fa fa-check"></i><b>10.6.1</b> 配列型データの作成</a></li>
<li class="chapter" data-level="10.6.2" data-path="datastructure.html"><a href="datastructure.html#配列型データの操作"><i class="fa fa-check"></i><b>10.6.2</b> 配列型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="datastructure.html"><a href="datastructure.html#structure-exercise"><i class="fa fa-check"></i><b>10.7</b> 練習問題</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="datastructure.html"><a href="datastructure.html#ベクトル"><i class="fa fa-check"></i><b>10.7.1</b> ベクトル</a></li>
<li class="chapter" data-level="10.7.2" data-path="datastructure.html"><a href="datastructure.html#行列"><i class="fa fa-check"></i><b>10.7.2</b> 行列</a></li>
<li class="chapter" data-level="10.7.3" data-path="datastructure.html"><a href="datastructure.html#データフレーム"><i class="fa fa-check"></i><b>10.7.3</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datastructure.html"><a href="datastructure.html#目次-2"><i class="fa fa-check"></i>目次</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>11</b> Rプログラミングの基礎</a>
<ul>
<li class="chapter" data-level="11.1" data-path="programming.html"><a href="programming.html#programming-intro"><i class="fa fa-check"></i><b>11.1</b> R言語の基礎概念</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="programming.html"><a href="programming.html#オブジェクト"><i class="fa fa-check"></i><b>11.1.1</b> オブジェクト</a></li>
<li class="chapter" data-level="11.1.2" data-path="programming.html"><a href="programming.html#クラス"><i class="fa fa-check"></i><b>11.1.2</b> クラス</a></li>
<li class="chapter" data-level="11.1.3" data-path="programming.html"><a href="programming.html#関数と引数"><i class="fa fa-check"></i><b>11.1.3</b> 関数と引数</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="programming.html"><a href="programming.html#programming-style"><i class="fa fa-check"></i><b>11.2</b> Rのコーディングスタイル</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="programming.html"><a href="programming.html#オブジェクト名"><i class="fa fa-check"></i><b>11.2.1</b> オブジェクト名</a></li>
<li class="chapter" data-level="11.2.2" data-path="programming.html"><a href="programming.html#改行"><i class="fa fa-check"></i><b>11.2.2</b> 改行</a></li>
<li class="chapter" data-level="11.2.3" data-path="programming.html"><a href="programming.html#スペースとインデント"><i class="fa fa-check"></i><b>11.2.3</b> スペースとインデント</a></li>
<li class="chapter" data-level="11.2.4" data-path="programming.html"><a href="programming.html#代入"><i class="fa fa-check"></i><b>11.2.4</b> 代入</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="programming.html"><a href="programming.html#programming-iteration"><i class="fa fa-check"></i><b>11.3</b> 反復</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="programming.html"><a href="programming.html#for-による反復"><i class="fa fa-check"></i><b>11.3.1</b> <code>for</code> による反復</a></li>
<li class="chapter" data-level="11.3.2" data-path="programming.html"><a href="programming.html#whileによる反復"><i class="fa fa-check"></i><b>11.3.2</b> <code>while</code>による反復</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="programming.html"><a href="programming.html#programming-condition"><i class="fa fa-check"></i><b>11.4</b> 条件分岐</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="programming.html"><a href="programming.html#ifelse-ifelse-による条件分岐"><i class="fa fa-check"></i><b>11.4.1</b> <code>if</code>、<code>else if</code>、<code>else</code> による条件分岐</a></li>
<li class="chapter" data-level="11.4.2" data-path="programming.html"><a href="programming.html#ifelseによる条件分岐"><i class="fa fa-check"></i><b>11.4.2</b> <code>ifelse()</code>による条件分岐</a></li>
<li class="chapter" data-level="11.4.3" data-path="programming.html"><a href="programming.html#switchによる条件分岐"><i class="fa fa-check"></i><b>11.4.3</b> <code>switch()</code>による条件分岐</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="programming.html"><a href="programming.html#programming-exercise"><i class="fa fa-check"></i><b>11.5</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> 関数の自作</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#func-intro"><i class="fa fa-check"></i><b>12.1</b> 関数の作成</a></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#func-adv"><i class="fa fa-check"></i><b>12.2</b> ちょっと複雑な関数</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#func-in-func"><i class="fa fa-check"></i><b>12.3</b> 関数 in 関数</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#func-exercise"><i class="fa fa-check"></i><b>12.4</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datahandling1.html"><a href="datahandling1.html"><i class="fa fa-check"></i><b>13</b> データハンドリング [基礎編: 抽出]</a>
<ul>
<li class="chapter" data-level="13.1" data-path="datahandling1.html"><a href="datahandling1.html#handling1-intro"><i class="fa fa-check"></i><b>13.1</b> データハンドリングとtidyverse</a></li>
<li class="chapter" data-level="13.2" data-path="datahandling1.html"><a href="datahandling1.html#handling1-pipe"><i class="fa fa-check"></i><b>13.2</b> パイプ演算子 (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="13.3" data-path="datahandling1.html"><a href="datahandling1.html#handling1-select"><i class="fa fa-check"></i><b>13.3</b> 列の抽出</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出する"><i class="fa fa-check"></i><b>13.3.1</b> 特定の列を抽出する</a></li>
<li class="chapter" data-level="13.3.2" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出し列名を変更する"><i class="fa fa-check"></i><b>13.3.2</b> 特定の列を抽出し、列名を変更する</a></li>
<li class="chapter" data-level="13.3.3" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を除外する"><i class="fa fa-check"></i><b>13.3.3</b> 特定の列を除外する</a></li>
<li class="chapter" data-level="13.3.4" data-path="datahandling1.html"><a href="datahandling1.html#隣接した列を指定する"><i class="fa fa-check"></i><b>13.3.4</b> 隣接した列を指定する</a></li>
<li class="chapter" data-level="13.3.5" data-path="datahandling1.html"><a href="datahandling1.html#一部の列の順番だけを変える"><i class="fa fa-check"></i><b>13.3.5</b> 一部の列の順番だけを変える</a></li>
<li class="chapter" data-level="13.3.6" data-path="datahandling1.html"><a href="datahandling1.html#selectの便利な機能"><i class="fa fa-check"></i><b>13.3.6</b> <code>select()</code>の便利な機能</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="datahandling1.html"><a href="datahandling1.html#handling1-filter"><i class="fa fa-check"></i><b>13.4</b> 行の抽出</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="datahandling1.html"><a href="datahandling1.html#指定した行を抽出する"><i class="fa fa-check"></i><b>13.4.1</b> 指定した行を抽出する</a></li>
<li class="chapter" data-level="13.4.2" data-path="datahandling1.html"><a href="datahandling1.html#条件に合致する行を抽出する"><i class="fa fa-check"></i><b>13.4.2</b> 条件に合致する行を抽出する</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="datahandling1.html"><a href="datahandling1.html#handling1-arrange"><i class="fa fa-check"></i><b>13.5</b> 行のソート</a></li>
<li class="chapter" data-level="13.6" data-path="datahandling1.html"><a href="datahandling1.html#handling1-exercise"><i class="fa fa-check"></i><b>13.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="datahandling2.html"><a href="datahandling2.html"><i class="fa fa-check"></i><b>14</b> データハンドリング [基礎編: 拡張]</a>
<ul>
<li class="chapter" data-level="14.1" data-path="datahandling2.html"><a href="datahandling2.html#handling2-summarise"><i class="fa fa-check"></i><b>14.1</b> 記述統計量の計算</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="datahandling2.html"><a href="datahandling2.html#summariseによる記述統計量の計算"><i class="fa fa-check"></i><b>14.1.1</b> <code>summarise()</code>による記述統計量の計算</a></li>
<li class="chapter" data-level="14.1.2" data-path="datahandling2.html"><a href="datahandling2.html#summariseに使える便利な関数"><i class="fa fa-check"></i><b>14.1.2</b> <code>summarise()</code>に使える便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="datahandling2.html"><a href="datahandling2.html#handling2-group"><i class="fa fa-check"></i><b>14.2</b> グルーピング</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="datahandling2.html"><a href="datahandling2.html#group_byによるグループ化"><i class="fa fa-check"></i><b>14.2.1</b> <code>group_by()</code>によるグループ化</a></li>
<li class="chapter" data-level="14.2.2" data-path="datahandling2.html"><a href="datahandling2.html#複数の変数を用いたグループ化"><i class="fa fa-check"></i><b>14.2.2</b> 複数の変数を用いたグループ化</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="datahandling2.html"><a href="datahandling2.html#handling2-mutate"><i class="fa fa-check"></i><b>14.3</b> 変数の計算</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="datahandling2.html"><a href="datahandling2.html#mutate関数の使い方"><i class="fa fa-check"></i><b>14.3.1</b> <code>mutate()</code>関数の使い方</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="datahandling2.html"><a href="datahandling2.html#handling2-rowwise"><i class="fa fa-check"></i><b>14.4</b> 行単位の操作</a></li>
<li class="chapter" data-level="14.5" data-path="datahandling2.html"><a href="datahandling2.html#handling2-merge"><i class="fa fa-check"></i><b>14.5</b> データの結合</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="datahandling2.html"><a href="datahandling2.html#行の結合"><i class="fa fa-check"></i><b>14.5.1</b> 行の結合</a></li>
<li class="chapter" data-level="14.5.2" data-path="datahandling2.html"><a href="datahandling2.html#列の結合"><i class="fa fa-check"></i><b>14.5.2</b> 列の結合</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="datahandling2.html"><a href="datahandling2.html#handling2-exercise"><i class="fa fa-check"></i><b>14.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>15</b> データハンドリング [基礎編: factor型]</a>
<ul>
<li class="chapter" data-level="15.1" data-path="factor.html"><a href="factor.html#名目変数を含むグラフを作成する際の注意点"><i class="fa fa-check"></i><b>15.1</b> 名目変数を含むグラフを作成する際の注意点</a></li>
<li class="chapter" data-level="15.2" data-path="factor.html"><a href="factor.html#forcatsパッケージについて"><i class="fa fa-check"></i><b>15.2</b> <code>forcats</code>パッケージについて</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="factor.html"><a href="factor.html#fct_relevel-水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.1</b> <code>fct_relevel()</code>: 水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.2" data-path="factor.html"><a href="factor.html#fct_recode-水準のラベルを変更する"><i class="fa fa-check"></i><b>15.2.2</b> <code>fct_recode()</code>: 水準のラベルを変更する</a></li>
<li class="chapter" data-level="15.2.3" data-path="factor.html"><a href="factor.html#fct_rev-水準の順番を反転させる"><i class="fa fa-check"></i><b>15.2.3</b> <code>fct_rev()</code>: 水準の順番を反転させる</a></li>
<li class="chapter" data-level="15.2.4" data-path="factor.html"><a href="factor.html#fct_infreq-頻度順に順番を変更する"><i class="fa fa-check"></i><b>15.2.4</b> <code>fct_infreq()</code>: 頻度順に順番を変更する</a></li>
<li class="chapter" data-level="15.2.5" data-path="factor.html"><a href="factor.html#fct_inorder-データ内の出現順番に順番を変更する"><i class="fa fa-check"></i><b>15.2.5</b> <code>fct_inorder()</code>: データ内の出現順番に順番を変更する</a></li>
<li class="chapter" data-level="15.2.6" data-path="factor.html"><a href="factor.html#fct_shift-水準の順番をずらす"><i class="fa fa-check"></i><b>15.2.6</b> <code>fct_shift()</code>: 水準の順番をずらす</a></li>
<li class="chapter" data-level="15.2.7" data-path="factor.html"><a href="factor.html#fct_shuffle-水準の順番をランダム化する"><i class="fa fa-check"></i><b>15.2.7</b> <code>fct_shuffle()</code>: 水準の順番をランダム化する</a></li>
<li class="chapter" data-level="15.2.8" data-path="factor.html"><a href="factor.html#fct_reorder-別の1変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.8</b> <code>fct_reorder()</code>: 別の1変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.9" data-path="factor.html"><a href="factor.html#fct_reorder2-別の2変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.9</b> <code>fct_reorder2()</code>: 別の2変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.10" data-path="factor.html"><a href="factor.html#fct_collapse-水準を統合する"><i class="fa fa-check"></i><b>15.2.10</b> <code>fct_collapse()</code>: 水準を統合する</a></li>
<li class="chapter" data-level="15.2.11" data-path="factor.html"><a href="factor.html#fct_drop-使われていない水準を除去する"><i class="fa fa-check"></i><b>15.2.11</b> <code>fct_drop()</code>: 使われていない水準を除去する</a></li>
<li class="chapter" data-level="15.2.12" data-path="factor.html"><a href="factor.html#fct_expand-水準を追加する"><i class="fa fa-check"></i><b>15.2.12</b> <code>fct_expand()</code>: 水準を追加する</a></li>
<li class="chapter" data-level="15.2.13" data-path="factor.html"><a href="factor.html#fct_explicit_na-欠損値に水準を与える"><i class="fa fa-check"></i><b>15.2.13</b> <code>fct_explicit_na()</code>: 欠損値に水準を与える</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="factor.html"><a href="factor.html#factor-excersie"><i class="fa fa-check"></i><b>15.3</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>16</b> 整然データ構造</a>
<ul>
<li class="chapter" data-level="16.1" data-path="tidydata.html"><a href="tidydata.html#tidydata-intro"><i class="fa fa-check"></i><b>16.1</b> 整然データ (tidy data)とは</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="tidydata.html"><a href="tidydata.html#つの列は1つの変数を表す"><i class="fa fa-check"></i><b>16.1.1</b> 1つの列は、1つの変数を表す</a></li>
<li class="chapter" data-level="16.1.2" data-path="tidydata.html"><a href="tidydata.html#つの行は1つの観測を表す"><i class="fa fa-check"></i><b>16.1.2</b> 1つの行は、1つの観測を表す</a></li>
<li class="chapter" data-level="16.1.3" data-path="tidydata.html"><a href="tidydata.html#つのセルは1つの値を表す"><i class="fa fa-check"></i><b>16.1.3</b> 1つのセルは、1つの値を表す</a></li>
<li class="chapter" data-level="16.1.4" data-path="tidydata.html"><a href="tidydata.html#つの表は1つの観測単位をもつ"><i class="fa fa-check"></i><b>16.1.4</b> 1つの表は、1つの観測単位をもつ</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="tidydata.html"><a href="tidydata.html#tidydata-gather"><i class="fa fa-check"></i><b>16.2</b> Wide型からLong型へ</a></li>
<li class="chapter" data-level="16.3" data-path="tidydata.html"><a href="tidydata.html#tidydata-spread"><i class="fa fa-check"></i><b>16.3</b> Long型からWide型へ</a></li>
<li class="chapter" data-level="16.4" data-path="tidydata.html"><a href="tidydata.html#tidydata-separate"><i class="fa fa-check"></i><b>16.4</b> 列の操作</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="visualization1.html"><a href="visualization1.html"><i class="fa fa-check"></i><b>17</b> 可視化[理論]</a>
<ul>
<li class="chapter" data-level="17.1" data-path="visualization1.html"><a href="visualization1.html#visual-packages"><i class="fa fa-check"></i><b>17.1</b> 可視化のためのパッケージ</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="visualization1.html"><a href="visualization1.html#base-r"><i class="fa fa-check"></i><b>17.1.1</b> Base R</a></li>
<li class="chapter" data-level="17.1.2" data-path="visualization1.html"><a href="visualization1.html#latticeパッケージ"><i class="fa fa-check"></i><b>17.1.2</b> {lattice}パッケージ</a></li>
<li class="chapter" data-level="17.1.3" data-path="visualization1.html"><a href="visualization1.html#ggplot2パッケージ"><i class="fa fa-check"></i><b>17.1.3</b> {ggplot2}パッケージ</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="visualization1.html"><a href="visualization1.html#visual-ggplot"><i class="fa fa-check"></i><b>17.2</b> グラフィックの文法</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="visualization1.html"><a href="visualization1.html#グラフィックの文法"><i class="fa fa-check"></i><b>17.2.1</b> グラフィックの文法</a></li>
<li class="chapter" data-level="17.2.2" data-path="visualization1.html"><a href="visualization1.html#ggplot2のイメージ"><i class="fa fa-check"></i><b>17.2.2</b> ggplot2のイメージ</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="visualization1.html"><a href="visualization1.html#グラフィックの構成要素"><i class="fa fa-check"></i><b>17.3</b> グラフィックの構成要素</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="visualization1.html"><a href="visualization1.html#データ"><i class="fa fa-check"></i><b>17.3.1</b> データ</a></li>
<li class="chapter" data-level="17.3.2" data-path="visualization1.html"><a href="visualization1.html#幾何オブジェクト"><i class="fa fa-check"></i><b>17.3.2</b> 幾何オブジェクト</a></li>
<li class="chapter" data-level="17.3.3" data-path="visualization1.html"><a href="visualization1.html#マッピング"><i class="fa fa-check"></i><b>17.3.3</b> マッピング</a></li>
<li class="chapter" data-level="17.3.4" data-path="visualization1.html"><a href="visualization1.html#マッピング-その他"><i class="fa fa-check"></i><b>17.3.4</b> マッピング: その他</a></li>
<li class="chapter" data-level="17.3.5" data-path="visualization1.html"><a href="visualization1.html#座標系"><i class="fa fa-check"></i><b>17.3.5</b> 座標系</a></li>
<li class="chapter" data-level="17.3.6" data-path="visualization1.html"><a href="visualization1.html#スケール"><i class="fa fa-check"></i><b>17.3.6</b> スケール</a></li>
<li class="chapter" data-level="17.3.7" data-path="visualization1.html"><a href="visualization1.html#ファセット"><i class="fa fa-check"></i><b>17.3.7</b> ファセット</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="visualization1.html"><a href="visualization1.html#visual-principal"><i class="fa fa-check"></i><b>17.4</b> 良いグラフとは</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="visualization1.html"><a href="visualization1.html#データインク比"><i class="fa fa-check"></i><b>17.4.1</b> データ・インク比</a></li>
<li class="chapter" data-level="17.4.2" data-path="visualization1.html"><a href="visualization1.html#次元プロット"><i class="fa fa-check"></i><b>17.4.2</b> 3次元プロット</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="visualization2.html"><a href="visualization2.html"><i class="fa fa-check"></i><b>18</b> 可視化[基礎]</a>
<ul>
<li class="chapter" data-level="18.1" data-path="visualization2.html"><a href="visualization2.html#本章の内容"><i class="fa fa-check"></i><b>18.1</b> 本章の内容</a></li>
<li class="chapter" data-level="18.2" data-path="visualization2.html"><a href="visualization2.html#visual2-data"><i class="fa fa-check"></i><b>18.2</b> 実習用データ</a></li>
<li class="chapter" data-level="18.3" data-path="visualization2.html"><a href="visualization2.html#visual2-barplot"><i class="fa fa-check"></i><b>18.3</b> 棒グラフ</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="visualization2.html"><a href="visualization2.html#ケース数のグラフ"><i class="fa fa-check"></i><b>18.3.1</b> ケース数のグラフ</a></li>
<li class="chapter" data-level="18.3.2" data-path="visualization2.html"><a href="visualization2.html#記述統計量のグラフ"><i class="fa fa-check"></i><b>18.3.2</b> 記述統計量のグラフ</a></li>
<li class="chapter" data-level="18.3.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する"><i class="fa fa-check"></i><b>18.3.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="visualization2.html"><a href="visualization2.html#visual2-histogram"><i class="fa fa-check"></i><b>18.4</b> ヒストグラム</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="visualization2.html"><a href="visualization2.html#ヒストグラムの棒の大きさを調整する"><i class="fa fa-check"></i><b>18.4.1</b> ヒストグラムの棒の大きさを調整する</a></li>
<li class="chapter" data-level="18.4.2" data-path="visualization2.html"><a href="visualization2.html#密度を追加する"><i class="fa fa-check"></i><b>18.4.2</b> 密度を追加する</a></li>
<li class="chapter" data-level="18.4.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-1"><i class="fa fa-check"></i><b>18.4.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="visualization2.html"><a href="visualization2.html#visual2-box"><i class="fa fa-check"></i><b>18.5</b> 箱ひげ図</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="visualization2.html"><a href="visualization2.html#個別のデータを表示する"><i class="fa fa-check"></i><b>18.5.1</b> 個別のデータを表示する</a></li>
<li class="chapter" data-level="18.5.2" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-2"><i class="fa fa-check"></i><b>18.5.2</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.5.3" data-path="visualization2.html"><a href="visualization2.html#複数の変数の場合"><i class="fa fa-check"></i><b>18.5.3</b> 複数の変数の場合</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="visualization2.html"><a href="visualization2.html#visual2-scatter"><i class="fa fa-check"></i><b>18.6</b> 散布図</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-3"><i class="fa fa-check"></i><b>18.6.1</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.6.2" data-path="visualization2.html"><a href="visualization2.html#一部の点をハイライトする"><i class="fa fa-check"></i><b>18.6.2</b> 一部の点をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="visualization2.html"><a href="visualization2.html#visual2-line"><i class="fa fa-check"></i><b>18.7</b> 折れ線グラフ</a>
<ul>
<li class="chapter" data-level="18.7.1" data-path="visualization2.html"><a href="visualization2.html#一部の線をハイライトする"><i class="fa fa-check"></i><b>18.7.1</b> 一部の線をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="visualization2.html"><a href="visualization2.html#図の保存"><i class="fa fa-check"></i><b>18.8</b> 図の保存</a>
<ul>
<li class="chapter" data-level="18.8.1" data-path="visualization2.html"><a href="visualization2.html#ggsaveを利用した図の保存"><i class="fa fa-check"></i><b>18.8.1</b> <code>ggsave()</code>を利用した図の保存</a></li>
<li class="chapter" data-level="18.8.2" data-path="visualization2.html"><a href="visualization2.html#quartzを利用した図の保存"><i class="fa fa-check"></i><b>18.8.2</b> <code>quartz()</code>を利用した図の保存</a></li>
</ul></li>
<li class="chapter" data-level="18.9" data-path="visualization2.html"><a href="visualization2.html#まとめ"><i class="fa fa-check"></i><b>18.9</b> まとめ</a></li>
<li class="chapter" data-level="18.10" data-path="visualization2.html"><a href="visualization2.html#visual2-excersie"><i class="fa fa-check"></i><b>18.10</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="visualization3.html"><a href="visualization3.html"><i class="fa fa-check"></i><b>19</b> 可視化[応用]</a>
<ul>
<li class="chapter" data-level="19.1" data-path="visualization3.html"><a href="visualization3.html#visual3-labs"><i class="fa fa-check"></i><b>19.1</b> <code>labs()</code>: ラベルの修正</a></li>
<li class="chapter" data-level="19.2" data-path="visualization3.html"><a href="visualization3.html#visual3-coordinate"><i class="fa fa-check"></i><b>19.2</b> <code>coord_*()</code>: 座標系の調整</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="visualization3.html"><a href="visualization3.html#直交座標系の操作"><i class="fa fa-check"></i><b>19.2.1</b> 直交座標系の操作</a></li>
<li class="chapter" data-level="19.2.2" data-path="visualization3.html"><a href="visualization3.html#座標系の変換"><i class="fa fa-check"></i><b>19.2.2</b> 座標系の変換</a></li>
<li class="chapter" data-level="19.2.3" data-path="visualization3.html"><a href="visualization3.html#座標系の回転"><i class="fa fa-check"></i><b>19.2.3</b> 座標系の回転</a></li>
<li class="chapter" data-level="19.2.4" data-path="visualization3.html"><a href="visualization3.html#座標系の固定"><i class="fa fa-check"></i><b>19.2.4</b> 座標系の固定</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="visualization3.html"><a href="visualization3.html#visual3-scale"><i class="fa fa-check"></i><b>19.3</b> <code>scale_*_*()</code>: スケールの調整</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="visualization3.html"><a href="visualization3.html#横軸縦軸スケールの調整"><i class="fa fa-check"></i><b>19.3.1</b> 横軸・縦軸スケールの調整</a></li>
<li class="chapter" data-level="19.3.2" data-path="visualization3.html"><a href="visualization3.html#colorスケールの調整"><i class="fa fa-check"></i><b>19.3.2</b> <code>color</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.3" data-path="visualization3.html"><a href="visualization3.html#alphaスケールの調整"><i class="fa fa-check"></i><b>19.3.3</b> <code>alpha</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.4" data-path="visualization3.html"><a href="visualization3.html#sizeスケールの調整"><i class="fa fa-check"></i><b>19.3.4</b> <code>size</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.5" data-path="visualization3.html"><a href="visualization3.html#shapelinetypeスケールの調整"><i class="fa fa-check"></i><b>19.3.5</b> <code>shape</code>、<code>linetype</code>スケールの調整</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="visualization3.html"><a href="visualization3.html#visual3-theme"><i class="fa fa-check"></i><b>19.4</b> <code>theme_*()</code>と<code>theme()</code>: テーマの指定</a></li>
<li class="chapter" data-level="19.5" data-path="visualization3.html"><a href="visualization3.html#visual3-merge"><i class="fa fa-check"></i><b>19.5</b> 図の結合</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="visualization4.html"><a href="visualization4.html"><i class="fa fa-check"></i><b>20</b> 可視化[発展]</a>
<ul>
<li class="chapter" data-level="20.1" data-path="visualization4.html"><a href="visualization4.html#visual4-violin"><i class="fa fa-check"></i><b>20.1</b> バイオリンプロット</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="datahandling3.html"><a href="datahandling3.html"><i class="fa fa-check"></i><b>21</b> データハンドリング[応用編]</a></li>
<li class="chapter" data-level="22" data-path="string.html"><a href="string.html"><i class="fa fa-check"></i><b>22</b> 文字列の処理</a></li>
<li class="chapter" data-level="23" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>23</b> スクレイピング</a></li>
<li class="chapter" data-level="24" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>24</b> 反復処理</a>
<ul>
<li class="chapter" data-level="24.1" data-path="iteration.html"><a href="iteration.html#iteration-abstract"><i class="fa fa-check"></i><b>24.1</b> 概要</a></li>
<li class="chapter" data-level="24.2" data-path="iteration.html"><a href="iteration.html#iteration-intro"><i class="fa fa-check"></i><b>24.2</b> <code>*apply()</code>関数群と<code>map_*()</code>関数群</a></li>
<li class="chapter" data-level="24.3" data-path="iteration.html"><a href="iteration.html#iteration-two-arguments"><i class="fa fa-check"></i><b>24.3</b> 引数が2つ以上の場合</a></li>
<li class="chapter" data-level="24.4" data-path="iteration.html"><a href="iteration.html#iteration-df"><i class="fa fa-check"></i><b>24.4</b> データフレームと{purrr}</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="iteration.html"><a href="iteration.html#iteration-tibble"><i class="fa fa-check"></i><b>24.4.1</b> tibbleの話</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="iteration.html"><a href="iteration.html#iteration-model1"><i class="fa fa-check"></i><b>24.5</b> モデルの反復推定</a>
<ul>
<li class="chapter" data-level="24.5.1" data-path="iteration.html"><a href="iteration.html#iteration-split1"><i class="fa fa-check"></i><b>24.5.1</b> サンプルの分割とモデル推定（<code>split()</code>利用）</a></li>
<li class="chapter" data-level="24.5.2" data-path="iteration.html"><a href="iteration.html#iteration-split2"><i class="fa fa-check"></i><b>24.5.2</b> サンプルの分割とモデル推定（<code>nest()</code>利用）</a></li>
<li class="chapter" data-level="24.5.3" data-path="iteration.html"><a href="iteration.html#iteration-range"><i class="fa fa-check"></i><b>24.5.3</b> データの範囲を指定したモデル推定</a></li>
<li class="chapter" data-level="24.5.4" data-path="iteration.html"><a href="iteration.html#iteration-variables"><i class="fa fa-check"></i><b>24.5.4</b> 説明・応答変数を指定したモデル推定</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>25</b> R Markdown [基礎]</a>
<ul>
<li class="chapter" data-level="25.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-intro"><i class="fa fa-check"></i><b>25.1</b> R Markdownとは</a></li>
<li class="chapter" data-level="25.2" data-path="rmarkdown.html"><a href="rmarkdown.html#とりあえずknit"><i class="fa fa-check"></i><b>25.2</b> とりあえずKnit</a></li>
<li class="chapter" data-level="25.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-grammar"><i class="fa fa-check"></i><b>25.3</b> Markdown文法の基本</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#改行-1"><i class="fa fa-check"></i><b>25.3.1</b> 改行</a></li>
<li class="chapter" data-level="25.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#強調"><i class="fa fa-check"></i><b>25.3.2</b> 強調</a></li>
<li class="chapter" data-level="25.3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#箇条書き"><i class="fa fa-check"></i><b>25.3.3</b> 箇条書き</a></li>
<li class="chapter" data-level="25.3.4" data-path="rmarkdown.html"><a href="rmarkdown.html#見出し"><i class="fa fa-check"></i><b>25.3.4</b> 見出し</a></li>
<li class="chapter" data-level="25.3.5" data-path="rmarkdown.html"><a href="rmarkdown.html#区切り線"><i class="fa fa-check"></i><b>25.3.5</b> 区切り線</a></li>
<li class="chapter" data-level="25.3.6" data-path="rmarkdown.html"><a href="rmarkdown.html#表"><i class="fa fa-check"></i><b>25.3.6</b> 表</a></li>
<li class="chapter" data-level="25.3.7" data-path="rmarkdown.html"><a href="rmarkdown.html#画像"><i class="fa fa-check"></i><b>25.3.7</b> 画像</a></li>
<li class="chapter" data-level="25.3.8" data-path="rmarkdown.html"><a href="rmarkdown.html#リンク"><i class="fa fa-check"></i><b>25.3.8</b> リンク</a></li>
<li class="chapter" data-level="25.3.9" data-path="rmarkdown.html"><a href="rmarkdown.html#脚注"><i class="fa fa-check"></i><b>25.3.9</b> 脚注</a></li>
<li class="chapter" data-level="25.3.10" data-path="rmarkdown.html"><a href="rmarkdown.html#数式"><i class="fa fa-check"></i><b>25.3.10</b> 数式</a></li>
<li class="chapter" data-level="25.3.11" data-path="rmarkdown.html"><a href="rmarkdown.html#引用"><i class="fa fa-check"></i><b>25.3.11</b> 引用</a></li>
<li class="chapter" data-level="25.3.12" data-path="rmarkdown.html"><a href="rmarkdown.html#コメント"><i class="fa fa-check"></i><b>25.3.12</b> コメント</a></li>
<li class="chapter" data-level="25.3.13" data-path="rmarkdown.html"><a href="rmarkdown.html#コード"><i class="fa fa-check"></i><b>25.3.13</b> コード</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-chunk"><i class="fa fa-check"></i><b>25.4</b> チャンクのオプション</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#チャンク名とチャンク間依存関係"><i class="fa fa-check"></i><b>25.4.1</b> チャンク名とチャンク間依存関係</a></li>
<li class="chapter" data-level="25.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードまたは結果の表示非常時"><i class="fa fa-check"></i><b>25.4.2</b> コードまたは結果の表示/非常時</a></li>
<li class="chapter" data-level="25.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#プロット"><i class="fa fa-check"></i><b>25.4.3</b> プロット</a></li>
<li class="chapter" data-level="25.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#コードの見栄"><i class="fa fa-check"></i><b>25.4.4</b> コードの見栄</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-header"><i class="fa fa-check"></i><b>25.5</b> ヘッダーのオプション</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="rmarkdown.html"><a href="rmarkdown.html#目次の追加"><i class="fa fa-check"></i><b>25.5.1</b> 目次の追加</a></li>
<li class="chapter" data-level="25.5.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードのハイライト"><i class="fa fa-check"></i><b>25.5.2</b> コードのハイライト</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-japanese"><i class="fa fa-check"></i><b>25.6</b> 日本語が含まれているPDFの出力</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="rmarkdown2.html"><a href="rmarkdown2.html"><i class="fa fa-check"></i><b>26</b> R Markdown [応用]</a>
<ul>
<li class="chapter" data-level="26.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmarkdown2-table"><i class="fa fa-check"></i><b>26.1</b> 表の作成</a></li>
<li class="chapter" data-level="26.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-slide"><i class="fa fa-check"></i><b>26.2</b> R Markdownを用いたスライド作成</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-brak"><i class="fa fa-check"></i><b>26.2.1</b> スライド区分</a></li>
<li class="chapter" data-level="26.2.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-chunk"><i class="fa fa-check"></i><b>26.2.2</b> コード</a></li>
<li class="chapter" data-level="26.2.3" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-highlight"><i class="fa fa-check"></i><b>26.2.3</b> ハイライト</a></li>
<li class="chapter" data-level="26.2.4" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-operation"><i class="fa fa-check"></i><b>26.2.4</b> Xaringanスライドの操作</a></li>
<li class="chapter" data-level="26.2.5" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-japanese"><i class="fa fa-check"></i><b>26.2.5</b> 日本語フォントの指定</a></li>
<li class="chapter" data-level="26.2.6" data-path="rmarkdown2.html"><a href="rmarkdown2.html#スライドのpdf出力"><i class="fa fa-check"></i><b>26.2.6</b> スライドのPDF出力</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>27</b> 演習問題の回答</a>
<ul>
<li class="chapter" data-level="27.1" data-path="solution.html"><a href="solution.html#solution-rbasic"><i class="fa fa-check"></i><b>27.1</b> 基本的な操作</a></li>
<li class="chapter" data-level="27.2" data-path="solution.html"><a href="solution.html#solution-datastructure"><i class="fa fa-check"></i><b>27.2</b> データの構造</a>
<ul>
<li class="chapter" data-level="27.2.1" data-path="solution.html"><a href="solution.html#ベクトル-1"><i class="fa fa-check"></i><b>27.2.1</b> ベクトル</a></li>
<li class="chapter" data-level="27.2.2" data-path="solution.html"><a href="solution.html#行列-1"><i class="fa fa-check"></i><b>27.2.2</b> 行列</a></li>
<li class="chapter" data-level="27.2.3" data-path="solution.html"><a href="solution.html#データフレーム-1"><i class="fa fa-check"></i><b>27.2.3</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="solution.html"><a href="solution.html#rプログラミングの基礎"><i class="fa fa-check"></i><b>27.3</b> Rプログラミングの基礎</a></li>
<li class="chapter" data-level="27.4" data-path="solution.html"><a href="solution.html#関数の自作"><i class="fa fa-check"></i><b>27.4</b> 関数の自作</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>28</b> 本書の執筆環境</a></li>
<li class="chapter" data-level="29" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>29</b> 参考資料</a></li>
<li class="divider"></li>
<p style = "text-align:center;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></p>
<p style = "text-align:center;"><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">私たちのR: ベストプラクティスの探究</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datastructure" class="section level1" number="10">
<h1><span class="header-section-number">10.</span> データの構造</h1>
<h2>
目次
</h2>
<ul>
<li>第<a href="datastructure.html#WhatIsDatastructure">10.1</a>章: データ構造とは</li>
<li>第<a href="datastructure.html#structure-vector">10.2</a>章: ベクトル</li>
<li>第<a href="datastructure.html#structure-matrix">10.3</a>章: 行列</li>
<li>第<a href="datastructure.html#structure-dataframe">10.4</a>章: データフレーム</li>
<li>第<a href="datastructure.html#structure-list">10.5</a>章: リスト</li>
<li>第<a href="datastructure.html#structure-array">10.6</a>章: 配列</li>
<li>第<a href="datastructure.html#structure-exercise">10.7</a>章: 練習問題</li>
</ul>
<div id="WhatIsDatastructure" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> データ構造とは</h2>
<p>データ構造 (data structure)とは最小単位であるベクトルを何らかの形で集めたものです。ベクトル自体もデータ構造であり、同じデータ型のベクトルを積み重ねた行列、異なるデータ型の縦ベクトルを横に並べたデータフレームなど、Rでは様々なデータ構造を提供しています。また、R内臓のデータ構造以外にも、パッケージ等で提供される独自のデータ構造もあります。ここではRが基本的に提供している代表的なデータ構造について、その作り方と操作方法について解説します。</p>
<hr />
</div>
<div id="structure-vector" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> ベクトル (vector)</h2>
<div id="ベクトルの作り方" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> ベクトルの作り方</h3>
<p>Rにおいてベクトルとは<em>同じデータ型が一つ以上格納されているオブジェクト</em>を意味します。たとえば、以下の<code>myVec1</code>は長さ1のベクトルです。</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="datastructure.html#cb307-1"></a>myVec1 &lt;-<span class="st"> &quot;R is fun!&quot;</span></span>
<span id="cb307-2"><a href="datastructure.html#cb307-2"></a>myVec1</span></code></pre></div>
<pre><code>## [1] &quot;R is fun!&quot;</code></pre>
<p>むろん、2つ以上の文字列、または数字を格納することも可能です。以下の<code>myVec2</code>は長さ5のベクトルです。</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="datastructure.html#cb309-1"></a>myVec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb309-2"><a href="datastructure.html#cb309-2"></a>myVec2</span></code></pre></div>
<pre><code>## [1] 1 3 5 6 7</code></pre>
<p>注意すべきところは、ベクトル内の要素は必ず同じデータ型である必要があるということです。たとえば、数字と文字が混在した<code>myVec3</code>を考えてみましょう。</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="datastructure.html#cb311-1"></a>myVec3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb311-2"><a href="datastructure.html#cb311-2"></a>myVec3</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<p>数字であるはずの1, 2, 3が<code>"</code>で囲まれ、文字列に自動的に変換されていることが分かります。実際に、デーが型を確認してみましょう。</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="datastructure.html#cb313-1"></a><span class="kw">class</span>(myVec3)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p><code>"character"</code>、つまりデータ型が文字列になっていることが分かります。これは<code>character</code>型が<code>numeric</code>型よりも優先順位が高いからです。それでは<code>numeric</code>と<code>logical</code>型はどうでしょうか。</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="datastructure.html#cb315-1"></a>myVec4 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb315-2"><a href="datastructure.html#cb315-2"></a>myVec4</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 0</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="datastructure.html#cb317-1"></a><span class="kw">class</span>(myVec4)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><code>TRUE</code>が1、<code>FALSE</code>が0となり、自動的に<code>numeric</code>型になりました。一般的によく使われるデータ型は<code>logical</code>、<code>numeric</code>、<code>character</code>ですが、優先順位は<code>logical &lt; numeric &lt; character</code>の関係になります。ここで重要なのは優先順位ではなく、異なるデータ型が含まれるベクトルの場合、自動的にデータ型が統一されるということです。ベクトルを作成する際は、全ての要素が同じ型になるようにしましょう。</p>
</div>
<div id="ベクトルの操作" class="section level3" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> ベクトルの操作</h3>
<p><strong>ベクトルの長さ</strong></p>
<p>ベクトルの長さはベクトルに含まれている要素の数です。ベクトルの長さは<code>length()</code>関数で調べることができます。それでは前節で作成した4つのベクトルの長さを調べてみましょう。</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="datastructure.html#cb319-1"></a><span class="kw">length</span>(myVec1) <span class="co"># &quot;R is fun!&quot;</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="datastructure.html#cb321-1"></a><span class="kw">length</span>(myVec2) <span class="co"># c(1, 3, 5, 6, 7)</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="datastructure.html#cb323-1"></a><span class="kw">length</span>(myVec3) <span class="co"># c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;)</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="datastructure.html#cb325-1"></a><span class="kw">length</span>(myVec4) <span class="co"># c(1, 2, 3, 1, 0)</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>それぞれのベクトルの長さは1、5、6、5ということが分かりますね。</p>
<p><strong>要素の抽出</strong></p>
<p>これは既に説明しましたので、<a href="rbasic.html#rbasic-extract">7.5</a>を参照してください。</p>
<p><strong>ベクトルの加減乗除</strong></p>
<p>ここではnumeric型のベクトルを用いた加減乗除について考えたいと思います。Rにおいてベクトルは自動的に反復作業を行います。たとえば、<code>c(1, 2, 3, 4)</code>というベクトルがあり、ここに5を足すと、ベクトルの全ての要素に対して同じ計算を行います。これは引き算でも、掛け算でも、割り算でも同じです。むろん、べき乗などの様々な操作に対しても同じです。それでは<code>myVec2</code>に対して、5を足したり、引いたり、色々してみましょう。</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="datastructure.html#cb327-1"></a>myVec2 <span class="op">+</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  6  8 10 11 12</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="datastructure.html#cb329-1"></a>myVec2 <span class="op">-</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] -4 -2  0  1  2</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="datastructure.html#cb331-1"></a>myVec2 <span class="op">*</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  5 15 25 30 35</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="datastructure.html#cb333-1"></a>myVec2 <span class="op">/</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 0.2 0.6 1.0 1.2 1.4</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="datastructure.html#cb335-1"></a>myVec2 <span class="op">^</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]     1   243  3125  7776 16807</code></pre>
<p>また、ベクトル同士の演算も可能です。まず、<code>myVec2</code>と同じ長さを持つ<code>myVec4</code>との計算を考えてみましょう。これは長さが同じであるため、それぞれ同じ位置の要素同士の計算となります。つまり、足し算の場合、<code>myVec2[1]</code>と<code>myVec4[1]</code>の和、<code>myVec2[2]</code>と<code>myVec4[2]</code>の和、…といった形です。</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="datastructure.html#cb337-1"></a>myVec2 <span class="op">+</span><span class="st"> </span>myVec4</span></code></pre></div>
<pre><code>## [1] 2 5 8 7 7</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="datastructure.html#cb339-1"></a>myVec2 <span class="op">-</span><span class="st"> </span>myVec4</span></code></pre></div>
<pre><code>## [1] 0 1 2 5 7</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="datastructure.html#cb341-1"></a>myVec2 <span class="op">*</span><span class="st"> </span>myVec4</span></code></pre></div>
<pre><code>## [1]  1  6 15  6  0</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="datastructure.html#cb343-1"></a>myVec2 <span class="op">/</span><span class="st"> </span>myVec4</span></code></pre></div>
<pre><code>## [1] 1.000000 1.500000 1.666667 6.000000      Inf</code></pre>
<p>もし、ベクトルの長さが異なる場合はどうなるでしょう。たとえば、長さ2のベクトル<code>myVec5</code>と<code>myVec2</code>の足し算を考えてみましょう。</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="datastructure.html#cb345-1"></a>(myVec5 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span></code></pre></div>
<pre><code>## [1]  1 10</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="datastructure.html#cb347-1"></a>(myVec6 &lt;-<span class="st"> </span>myVec2 <span class="op">+</span><span class="st"> </span>myVec5)</span></code></pre></div>
<pre><code>## Warning in myVec2 + myVec5: 長いオブジェクトの長
## さが短いオブジェクトの長さの倍数になっていません</code></pre>
<pre><code>## [1]  2 13  6 16  8</code></pre>
<p>警告メッセージは表示されますが、計算自体はできます。同じ長さのベクトル同士なら、同じ位置の要素同士の計算になりますが、この場合は、短い方のベクトルを繰り返すことにより、長さを合わせることになります。<code>myVec5</code>の例だと、<code>c(1, 10, 1, 10, 1)</code>のように扱われます。具体的には以下の表のような関係となります。</p>
<table>
<thead>
<tr class="header">
<th align="center"><code>myVec6[1]</code></th>
<th align="center"><code>myVec6[2]</code></th>
<th align="center"><code>myVec6[3]</code></th>
<th align="center"><code>myVec6[4]</code></th>
<th align="center"><code>myVec6[5]</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>myVec2[1]</code></td>
<td align="center"><code>myVec2[2]</code></td>
<td align="center"><code>myVec2[3]</code></td>
<td align="center"><code>myVec2[4]</code></td>
<td align="center"><code>myVec2[5]</code></td>
</tr>
<tr class="even">
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
</tr>
<tr class="odd">
<td align="center"><code>myVec5[1]</code></td>
<td align="center"><code>myVec5[2]</code></td>
<td align="center"><code>myVec5[1]</code></td>
<td align="center"><code>myVec5[2]</code></td>
<td align="center"><code>myVec5[1]</code></td>
</tr>
</tbody>
</table>
<p>実際は長さが異なるベクトル同士の計算を行うことは滅多にありません。例外としては長さ1のベクトルの計算くらいですね。</p>
<p>文字列ベクトルの扱い方はより複雑ですので、第<a href="string.html#string">22</a>章で詳細に解説します。</p>
<hr />
</div>
</div>
<div id="structure-matrix" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> 行列 (matrix)</h2>
<p>行列は名前とおり、行と列で構成されたデータ構造です。ただし、我々が一般に考える「表」とは異なる点があります。それは行列内部の要素に制約がある点です。具体的に、行列の要素となり得るデータ型はnumeric、complex、NA型のみです。ここではnumeric型のみで構成された行列の作成および操作方法について解説します。</p>
<div id="行列の作り方" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> 行列の作り方</h3>
<p>行列を作成するには<code>matrix()</code>関数を使います。引数として、行列に入る数値と行または列の数は必須です。数値はベクトルであり、行・列の数は整数です。以下のような行列を作るにはいくつかの方法があります。</p>
<p><span class="math display">\[
\left[
\begin{matrix} 
1 &amp; 2 &amp; 3 &amp; 4 \\ 
5 &amp; 6 &amp; 7 &amp; 8 \\
9 &amp; 10 &amp; 11 &amp; 12
\end{matrix}
\right]
\]</span></p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="datastructure.html#cb350-1"></a><span class="co"># 方法1: 行数を指定する</span></span>
<span id="cb350-2"><a href="datastructure.html#cb350-2"></a>Matrix1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">12</span>), <span class="dt">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb350-3"><a href="datastructure.html#cb350-3"></a>Matrix1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="datastructure.html#cb352-1"></a><span class="co"># 方法2: 列数を指定する</span></span>
<span id="cb352-2"><a href="datastructure.html#cb352-2"></a>Matrix2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">12</span>), <span class="dt">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb352-3"><a href="datastructure.html#cb352-3"></a>Matrix2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>いずれも同じ結果が得られます。注意してもらいたいところは、第一引数の書き方です。我々は「左から右へ、そして上から下へ」という順番で読むのになれていますが、<strong>Rの行列は「上から下へ、そして左から右へ」の順番</strong>です。もし、「左から右へ、そして上から下へ」のような、より我々にとって読みやすい書き方をするためにはもう一つの引数が必要であり、それが<code>byrow =</code>です。</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="datastructure.html#cb354-1"></a>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>むろん、初項1、公差1、最大値12の等差数列ですのて、<code>1:12</code>のような書き方も可能です。</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="datastructure.html#cb356-1"></a>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>データ構造も確認してみましょう。</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="datastructure.html#cb358-1"></a><span class="kw">class</span>(Matrix1)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>R 4.0.0からの仕様変更により行列型はmatrix構造以外にもarrayの構造も持つようになりました。array型については第<a href="datastructure.html#structure-array">10.6</a>章で解説します。</p>
<p><strong>単位行列</strong></p>
<p>最後にちょっと特殊な行列である単位行列 (indetity matrix)の作り方について説明します。単位行列とは行と列の数が同じである正方形の行列ですが、対角線上は全て1、その他は全て0となっている行列です。たとえば大きさが4の単位行列は、</p>
<p><span class="math display">\[
\left[
\begin{matrix} 
1 &amp; 0 &amp; 0 &amp; 0 \\ 
0 &amp; 1 &amp; 0 &amp; 0 \\ 
0 &amp; 0 &amp; 1 &amp; 0 \\ 
0 &amp; 0 &amp; 0 &amp; 1 \\ 
\end{matrix}
\right]
\]</span></p>
<p>です。これは<code>matrix(c(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), nrow = 4)</code>で作成することも可能ですが、<code>diag()</code>関数を使えば簡単に出来ます。サイズが4の単位行列は<code>diag(4)</code>です。</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="datastructure.html#cb360-1"></a>(<span class="kw">diag</span>(<span class="dv">4</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    0    0    0
## [2,]    0    1    0    0
## [3,]    0    0    1    0
## [4,]    0    0    0    1</code></pre>
</div>
<div id="行列の操作" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> 行列の操作</h3>
<p>まず、以下のような行列<code>A</code>を作ってみましょう。</p>
<p><span class="math display">\[
A = \left[
\begin{matrix} 
1 &amp; 2 &amp; 3 &amp; 4 \\ 
5 &amp; 6 &amp; 7 &amp; 8 \\
9 &amp; 10 &amp; 11 &amp; 12
\end{matrix}
\right]
\]</span></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="datastructure.html#cb362-1"></a>A &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>), </span>
<span id="cb362-2"><a href="datastructure.html#cb362-2"></a>            <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><strong>行列のサイズ</strong></p>
<p>行列の大きさ (行と列の数)を求める際は<code>dim()</code>関数を使います。</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="datastructure.html#cb363-1"></a><span class="kw">dim</span>(A)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<p>結果は長さ2のベクトルですが、1番目の要素が行数、2番目の要素が列数になります。もし、行列の行数のみ確認したい場合は<code>dim(A)[1]</code>、列数なら<code>dim(A)[2]</code>で確認することができます。また、全く同じ機能を持つ関数があり、それが<code>nrow()</code>と<code>ncol()</code>関数です。</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="datastructure.html#cb365-1"></a><span class="kw">nrow</span>(A) <span class="co"># 行列の行数を確認: dim(A)[1]と同じ</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="datastructure.html#cb367-1"></a><span class="kw">ncol</span>(A) <span class="co"># 列列の列数を確認: dim(A)[2]と同じ</span></span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p><code>dim()</code>および<code>nrow()</code>、<code>ncol()</code>関数は第<a href="datastructure.html#structure-dataframe">10.4</a>章で紹介するデータフレームでも使用可能です。</p>
<p><strong>要素の抽出</strong></p>
<p>ベクトルと同様、要素の抽出は<code>[]</code>を使います。ただし、行列は横と縦の2次元構成となりますので、行と列のそれぞれの位置を指定する必要があります。たとえば、<code>A</code>の2行目、3列目の要素を抽出するためには、</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="datastructure.html#cb369-1"></a>A[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>のように書きます。行か列の位置を省略した場合、指定した列・行全てが抽出されます。2行目の要素全てを抽出するなら<code>A[2, ]</code>、3列目の要素全てを抽出するなら<code>A[, 3]</code>となります。</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="datastructure.html#cb371-1"></a>A[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## [1] 5 6 7 8</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="datastructure.html#cb373-1"></a>A[, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<p>この場合、返される値のデータ構造はいずれも<strong>行列でなく、ベクトル</strong>です。確認してみましょう。</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="datastructure.html#cb375-1"></a><span class="kw">is.vector</span>(A[<span class="dv">2</span>, <span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="datastructure.html#cb377-1"></a><span class="kw">is.vector</span>(A[<span class="dv">2</span>, ])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="datastructure.html#cb379-1"></a><span class="kw">is.vector</span>(A[, <span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>例外は複数の行と複数の列を同時に抽出した場合です。たとえば、行列<code>A</code>の1・2行目と2・3列目の要素を全て抽出するとします。その場合は<code>A[1:2, 2:3]</code>のように書きます。むろん、<code>:</code>を使わずに<code>A[c(1, 2), c(2, 3)]</code>のような書き方も可能です。抽出後、返された結果のデータ構造も確認してみましょう。</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="datastructure.html#cb381-1"></a>A[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    3    4
## [2,]    7    8</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="datastructure.html#cb383-1"></a><span class="kw">class</span>(A[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>この場合、返された結果のデータ構造は行列であることが分かります。</p>
<p><strong>行列の足し算と引き算</strong></p>
<p>行列の足し算 (引き算)には</p>
<ol style="list-style-type: decimal">
<li>行列内の全要素に対して同じ数字を足す (引く)</li>
<li>同じサイズの2つの行列から対応する要素を足す (引く)</li>
</ol>
<p>2パタンがあります。例えば、行列<code>A</code>の全要素に5を足す場合は以下のように入力します。</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="datastructure.html#cb385-1"></a>(A_plus_<span class="dv">5</span> &lt;-<span class="st"> </span>A <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    6    7    8    9
## [2,]   10   11   12   13
## [3,]   14   15   16   17</code></pre>
<p>同様に、<code>A</code>から10を引く場合は<code>-</code>演算子を使います。</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="datastructure.html#cb387-1"></a>(A_minus_<span class="dv">10</span> &lt;-<span class="st"> </span>A <span class="op">-</span><span class="st"> </span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]   -9   -8   -7   -6
## [2,]   -5   -4   -3   -2
## [3,]   -1    0    1    2</code></pre>
<p>二つ目は同じサイズの行列同士の足し算と引き算です。行列<code>A</code>は3 <span class="math inline">\(\times\)</span> 4の行列ですので、同じサイズの行列<code>B</code>を作成してみましょう。</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="datastructure.html#cb389-1"></a>(B &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">10</span>), </span>
<span id="cb389-2"><a href="datastructure.html#cb389-2"></a>             <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    3    2    1    4
## [2,]    5    9    7   11
## [3,]    6   12    8   10</code></pre>
<p>この行列<code>A</code>と<code>B</code>の足し算はそれぞれ同じ位置の要素同士の和を行列をして返し、これは引き算も同じです。</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="datastructure.html#cb391-1"></a>A <span class="op">+</span><span class="st"> </span>B</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    4    4    4    8
## [2,]   10   15   14   19
## [3,]   15   22   19   22</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="datastructure.html#cb393-1"></a>A <span class="op">-</span><span class="st"> </span>B</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]   -2    0    2    0
## [2,]    0   -3    0   -3
## [3,]    3   -2    3    2</code></pre>
<p>注意すべき点は、2つの行列は同じ大きさでなければならない点です。たとえば、行列<code>B</code>の1列から3列までを抽出した3 <span class="math inline">\(\times\)</span> 3行列<code>C</code>を作成し、<code>A + C</code>をしてみましょう。</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="datastructure.html#cb395-1"></a>(C &lt;-<span class="st"> </span>B[, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    2    1
## [2,]    5    9    7
## [3,]    6   12    8</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="datastructure.html#cb397-1"></a>A <span class="op">+</span><span class="st"> </span>C</span></code></pre></div>
<pre><code>## Error in A + C:  適切な配列ではありません</code></pre>
<p>このように足し算ができなくなり、これは引き算でも同じです。</p>
<p><strong>行列の掛け算</strong></p>
<p>やや特殊なのは行列の掛け算です。行列<code>A</code>の全要素を2倍にしたい場合、これは足し算・引き算と同じやり方で十分です。</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="datastructure.html#cb399-1"></a>A <span class="op">*</span><span class="st"> </span><span class="dv">2</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    2    4    6    8
## [2,]   10   12   14   16
## [3,]   18   20   22   24</code></pre>
<p>ただし、問題は行列同士の掛け算です。行列<code>A</code>と<code>B</code>の掛け算といえば、直感的には足し算や引き算同様、同じ位置の要素の積と考えるかも知れません。実際<code>A * B</code>はそのように計算を行います。</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="datastructure.html#cb401-1"></a>A <span class="op">*</span><span class="st"> </span>B</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    3    4    3   16
## [2,]   25   54   49   88
## [3,]   54  120   88  120</code></pre>
<p>ただし、このような掛け算は「アダマール積 (Hadamard product)」と呼ばれる計算方法であり<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a>、一般的に使う掛け算ではありません。実際、数学において<span class="math inline">\(A \times B\)</span>はアダマール積を意味すのではなく、アダマール積は<span class="math inline">\(A \circ B\)</span>または<span class="math inline">\(A \odot B\)</span>と表記します。</p>
<p>それでは一般的な行列の積は何でしょう。詳しいことは線形代数の入門書に譲りますが、以下のような2つの行列<code>C</code>と<code>D</code>を考えてみましょう。</p>
<p><span class="math display">\[
C = \left[
\begin{matrix} 
1 &amp; 2 &amp; 3 \\ 
4 &amp; 5 &amp; 6 
\end{matrix}
\right],
D = \left[
\begin{matrix} 
2 &amp; 7  &amp; 17 \\ 
3 &amp; 11 &amp; 19 \\
5 &amp; 13 &amp; 23
\end{matrix}
\right]
\]</span></p>
<p>行列の大きさが異なりますね。行列<code>C</code>の大きさは2 <span class="math inline">\(\times\)</span> 3、<code>D</code>は3 <span class="math inline">\(\times\)</span> 3です。実はこれが正しいです。行列の積は<span class="math inline">\(n \times m\)</span>の行列と<span class="math inline">\(m \times p\)</span>の行列同士でないと計算できません。<span class="math inline">\(n\)</span>と<span class="math inline">\(p\)</span>は同じでも、同じでなくても構いません。その意味で<span class="math inline">\(C \times D\)</span>は計算可能でも、<span class="math inline">\(D \times C\)</span>は計算できません。そして、2つの行列の積の大きさは<span class="math inline">\(n \times p\)</span>です。したがって、<span class="math inline">\(C \times D\)</span>の大きさは<span class="math inline">\(2 \times 3\)</span>です。</p>
<p>行列の積がどのように求められるかを確認するために、まず行列<code>C</code>と<code>D</code>を作成してみましょう。</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="datastructure.html#cb403-1"></a>(C &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>,<span class="dt">byrow =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="datastructure.html#cb405-1"></a>(D &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">17</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">5</span>, <span class="dv">13</span>, <span class="dv">23</span>), <span class="dt">nrow =</span> <span class="dv">3</span>,<span class="dt">byrow =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2    7   17
## [2,]    3   11   19
## [3,]    5   13   23</code></pre>
<p>この2つの積は<code>%*%</code>演算子で計算されますが、まずその結果から見ましょう。</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="datastructure.html#cb407-1"></a>(E &lt;-<span class="st"> </span>C <span class="op">%*%</span><span class="st"> </span>D)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   23   68  124
## [2,]   53  161  301</code></pre>
<p>2行2列の行列ができました。これらの数字、どうやった計算されたのでしょうか。<code>E</code>の<code>[1, 1]</code>は23であり、<code>[1, 2]</code>は68、<code>[2, 1]</code>は53、<code>[2, 2]</code>は161です。各値は以下のように求まります。</p>
<ul>
<li><code>E[1, 1]</code> = (<code>C[1, 1]</code> * <code>D[1, 1]</code>) + (<code>C[1, 2]</code> * <code>D[2, 1]</code>) + (<code>C[1, 3]</code> * <code>D[3, 1]</code>) = 23</li>
<li><code>E[1, 2]</code> = (<code>C[1, 1]</code> * <code>D[1, 2]</code>) + (<code>C[1, 2]</code> * <code>D[2, 2]</code>) + (<code>C[1, 3]</code> * <code>D[3, 2]</code>) = 68</li>
<li><code>E[1, 3]</code> = (<code>C[1, 1]</code> * <code>D[1, 3]</code>) + (<code>C[1, 2]</code> * <code>D[2, 3]</code>) + (<code>C[1, 3]</code> * <code>D[3, 3]</code>) = 124</li>
<li><code>E[2, 1]</code> = (<code>C[2, 1]</code> * <code>D[1, 1]</code>) + (<code>C[2, 2]</code> * <code>D[2, 1]</code>) + (<code>C[2, 3]</code> * <code>D[3, 1]</code>) = 53</li>
<li><code>E[2, 2]</code> = (<code>C[2, 1]</code> * <code>D[1, 2]</code>) + (<code>C[2, 2]</code> * <code>D[2, 2]</code>) + (<code>C[2, 3]</code> * <code>D[3, 2]</code>) = 161</li>
<li><code>E[2, 3]</code> = (<code>C[2, 1]</code> * <code>D[1, 3]</code>) + (<code>C[2, 2]</code> * <code>D[2, 3]</code>) + (<code>C[2, 3]</code> * <code>D[3, 3]</code>) = 301</li>
</ul>
<p>大きさ<span class="math inline">\(n \times m\)</span>行列<code>C</code>の<code>i</code>行目<code>j</code>列目の要素を<span class="math inline">\(C_{i,j}\)</span>と表記し、大きさ<span class="math inline">\(n \times p\)</span>行列<code>D</code>の<code>i</code>行目<code>j</code>列目の要素を<span class="math inline">\(D_{i,j}\)</span>と表記した場合、以下のような関係が成り立ちます。</p>
<p>行列<code>E</code>の<code>i</code>行目<code>j</code>列目の要素を<span class="math inline">\(e_{i,j}\)</span>と表記した場合、以下のような関係が成り立ちます。</p>
<p><span class="math display">\[
e_{i, j} = \sum_{k = 1}^m C_{i, k} \cdot D_{k, j}.
\]</span></p>
<p>したがって、行列<span class="math inline">\(C\)</span>と<span class="math inline">\(D\)</span>の積は</p>
<p><span class="math display">\[\begin{align} 
CD = E &amp; = \left[
\begin{matrix} 
e_{1, 1} &amp; e_{1, 2} &amp; e_{1, 3} \\ 
e_{2, 1} &amp; e_{2, 2} &amp; e_{2, 3}
\end{matrix}
\right] \\
&amp; = \left[
\begin{matrix} 
\sum_{k = 1}^m C_{1, k} \cdot D_{k, 1} &amp; \sum_{k = 1}^m C_{1, k} \cdot D_{k, 2} &amp; \sum_{k = 1}^m C_{1, k} \cdot D_{k, 3} \\ 
\sum_{k = 1}^m C_{2, k} \cdot D_{k, 1} &amp; \sum_{k = 1}^m C_{2, k} \cdot D_{k, 2} &amp; \sum_{k = 1}^m C_{2, k} \cdot D_{k, 3}
\end{matrix}
\right].
\end{align}\]</span></p>
<p>このように業績同士の積はかなり求めるのが面倒ですが、Rを使えば一瞬で終わります。</p>
<p><strong>行列式</strong></p>
<p>行列式 (determinant)は<span class="math inline">\(n \times n\)</span>の正方行列のみに対して定義される値の一つです。主に一次方程式において解が存在するか否かを判断するために用いられる数値ですが<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a>、その詳しい意味や求め方については線形代数の入門書を参照してください。</p>
<p>行列<span class="math inline">\(A\)</span>の行列式は一般的に<span class="math inline">\(\text{det}(A)\)</span>、または<span class="math inline">\(|A|\)</span>と表記されます。行列式を求めるRの関数は<code>det()</code>です。それでは適当に正方行列<code>F</code>を作成し、その行列を求めてみましょう。</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="datastructure.html#cb409-1"></a>(F &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">-6</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">-1</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2   -6    4
## [2,]    7    2    3
## [3,]    8    5   -1</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="datastructure.html#cb411-1"></a><span class="kw">det</span>(F)</span></code></pre></div>
<pre><code>## [1] -144</code></pre>
<p>行列<code>F</code>の行列式は-144です。この場合、以下の一次方程式に何らかの一組の解が存在することを意味します (<span class="math inline">\(p\)</span>, <span class="math inline">\(q\)</span>, <span class="math inline">\(r\)</span>は任意の実数)。</p>
<p><span class="math display">\[\begin{align}
2x - 6y + 4z = &amp; p, \\
7x + 2y + 3z = &amp; q, \\
8x + 5y - 1z = &amp; r.
\end{align}\]</span></p>
<p>しかし、以下のような連立方程式はいかがでしょう。これは二組以上の解が存在する方程式です<a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a>。</p>
<p><span class="math display">\[\begin{align}
2x - 6y + 4z = &amp; p, \\
1x - 3y + 2z = &amp; q, \\
5x + 9y + 3z = &amp; r.
\end{align}\]</span></p>
<p>実際に行列<code>G</code>を作成し、<code>det(G)</code>を計算してみましょう。</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="datastructure.html#cb413-1"></a>(G &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">-6</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">-3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">3</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2   -6    4
## [2,]    1   -3    2
## [3,]    5    9    3</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="datastructure.html#cb415-1"></a><span class="kw">det</span>(G)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p><span class="math inline">\(|G|\)</span>は0であることが分かりますね。</p>
<p><strong>階数</strong></p>
<p>行列の特徴を表す代表的な数値の一つが階数 (rank)です。詳しい説明は省きますが、一次方程式の例だと、階数が行列の行数と一致する場合、一組の解が存在することを意味します。階数を求める方法は<code>qr(行列)$rank</code>であり、行列<code>F</code>と<code>G</code>の階数を確認してみましょう。</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="datastructure.html#cb417-1"></a><span class="kw">qr</span>(F)<span class="op">$</span>rank</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="datastructure.html#cb419-1"></a><span class="kw">qr</span>(G)<span class="op">$</span>rank</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>どれも3行の行列ですが、行列<code>F</code>の階数は3、行列<code>G</code>の階数は2です。<code>G</code>の階数は<code>G</code>の行数より小さいため、連立方程式に一組の解がないことが分かります。</p>
<p>階数の活用先は様々であり、行列式とは違って、正方行列でなくても計算可能です。</p>
<p><strong>逆行列</strong></p>
<p>逆行列とは掛け算すると単位行列となる行列を意味します。行列<span class="math inline">\(A\)</span>の逆行列は一般的に<span class="math inline">\(A^{\prime}\)</span>と表記し、<span class="math inline">\(A \times A^{\prime} = I\)</span>となります。この逆行列の求め方は非常に複雑であり、一定以上の大きさの行列になると手計算で解くのはほぼ不可能です。しかし、Rでは逆行列を計算する<code>solve()</code>関数が内蔵されております。</p>
<p>以下の行列<span class="math inline">\(A\)</span> (<code>A</code>)の逆行列、<span class="math inline">\(A^{\prime}\)</span> (<code>Ap</code>)を求めてみましょう。そして<span class="math inline">\(A \times A^{\prime}\)</span>が単位行列になるかまで確認してみます。</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="datastructure.html#cb421-1"></a><span class="co"># 行列Aの作成</span></span>
<span id="cb421-2"><a href="datastructure.html#cb421-2"></a>(A  &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">-2</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">-1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    1
## [2,]   -2    1    0
## [3,]    2   -1    1</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="datastructure.html#cb423-1"></a><span class="co"># 行列Aの逆行列を計算し、Apに格納</span></span>
<span id="cb423-2"><a href="datastructure.html#cb423-2"></a>(Ap &lt;-<span class="st"> </span><span class="kw">solve</span>(A))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1   -1   -1
## [2,]    2   -1   -2
## [3,]    0    1    1</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="datastructure.html#cb425-1"></a><span class="co"># AとApの積が単位行列であることを確認</span></span>
<span id="cb425-2"><a href="datastructure.html#cb425-2"></a>A <span class="op">%*%</span><span class="st"> </span>Ap</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    0    1    0
## [3,]    0    0    1</code></pre>
<p>ちゃんと単位行列ができましたね。</p>
<p><strong>転置</strong></p>
<p>行列<span class="math inline">\(A\)</span>の転置行列は<span class="math inline">\(A^T\)</span>と表記され、以下のような関係となります。</p>
<p><span class="math display">\[
A = \left[
\begin{matrix} 
1 &amp; 2 &amp; 3 \\ 
4 &amp; 5 &amp; 6 \\
7 &amp; 8 &amp; 9
\end{matrix}
\right],
A^T = \left[
\begin{matrix} 
1 &amp; 4 &amp; 7 \\ 
2 &amp; 5 &amp; 8 \\
3 &amp; 6 &amp; 9
\end{matrix}
\right]
\]</span></p>
<p>正方行列の場合、対角成分を除き、全ての要素が対角成分を中心に反転していることが分かりますね。このような転置行列の作成には<code>t()</code>関数を使います。それでは行列<code>A</code>とその転置行列<code>At</code>を作ってみましょう。</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="datastructure.html#cb427-1"></a>A  &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb427-2"><a href="datastructure.html#cb427-2"></a>A</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="datastructure.html#cb429-1"></a>At &lt;-<span class="st"> </span><span class="kw">t</span>(A)</span></code></pre></div>
<p>ちなみに転置行列は正方行列でなくても作成できます。</p>
<hr />
</div>
</div>
<div id="structure-dataframe" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> データフレーム (data.frame)</h2>
<p>データフレームはデータ分析の際に最もよく見るデータ構造です。我々が一般的に考える表形式のデータはデータフレームです。行列も見た目は表に近いですが、行列は中身の要素がnumericまたはcomplex型に限定されるに対して<a href="#fn43" class="footnote-ref" id="fnref43"><sup>43</sup></a>、データフレームはcharacterやfactor、Dateなど様々なデータ型が許容されます。</p>
<div id="データフレームの作成" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> データフレームの作成</h3>
<p>まずは、表<a href="datastructure.html#tab:dataframeExample1">10.1</a>のようなデータフレームを作成して見ましょう。データフレームを作成する際は<code>data.frame()</code>関数を使います。</p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:dataframeExample1">表 10.1: </span><code>myDF</code>の中身
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Math
</th>
<th style="text-align:right;">
Stat
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Yanai
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Song
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shigemura
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Tani
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
85
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="datastructure.html#cb430-1"></a>myDF &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb430-2"><a href="datastructure.html#cb430-2"></a>    <span class="dt">ID   =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,</span>
<span id="cb430-3"><a href="datastructure.html#cb430-3"></a>    <span class="dt">Name =</span> <span class="kw">c</span>(<span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Shigemura&quot;</span>, <span class="st">&quot;Tani&quot;</span>),</span>
<span id="cb430-4"><a href="datastructure.html#cb430-4"></a>    <span class="dt">Math =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="dv">80</span>),</span>
<span id="cb430-5"><a href="datastructure.html#cb430-5"></a>    <span class="dt">Stat =</span> <span class="kw">c</span>(<span class="dv">25</span>, <span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">85</span>)</span>
<span id="cb430-6"><a href="datastructure.html#cb430-6"></a>    )</span>
<span id="cb430-7"><a href="datastructure.html#cb430-7"></a></span>
<span id="cb430-8"><a href="datastructure.html#cb430-8"></a>myDF</span></code></pre></div>
<pre><code>##   ID      Name Math Stat
## 1  1     Yanai   50   25
## 2  2      Song   90    5
## 3  3 Shigemura  100  100
## 4  4      Tani   80   85</code></pre>
<p>データ構造を確認してみましょう。</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="datastructure.html#cb432-1"></a><span class="kw">class</span>(myDF)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>データフレームを作成する際、事前にベクトルを用意してから作成することも可能です。</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="datastructure.html#cb434-1"></a>myDF.ID   &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></span>
<span id="cb434-2"><a href="datastructure.html#cb434-2"></a>myDF.Name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Shigemura&quot;</span>, <span class="st">&quot;Tani&quot;</span>)</span>
<span id="cb434-3"><a href="datastructure.html#cb434-3"></a>myDF.Math &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="dv">80</span>)</span>
<span id="cb434-4"><a href="datastructure.html#cb434-4"></a>myDF.Stat &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">25</span>, <span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">85</span>)</span>
<span id="cb434-5"><a href="datastructure.html#cb434-5"></a></span>
<span id="cb434-6"><a href="datastructure.html#cb434-6"></a>myDF2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(myDF.ID, myDF.Name, myDF.Math, myDF.Stat)</span>
<span id="cb434-7"><a href="datastructure.html#cb434-7"></a></span>
<span id="cb434-8"><a href="datastructure.html#cb434-8"></a>myDF2</span></code></pre></div>
<pre><code>##   myDF.ID myDF.Name myDF.Math myDF.Stat
## 1       1     Yanai        50        25
## 2       2      Song        90         5
## 3       3 Shigemura       100       100
## 4       4      Tani        80        85</code></pre>
<p>この場合、列の名前はベクトル名そのままになります。もし、列名を指定したい場合は以下のように作成します。</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="datastructure.html#cb436-1"></a>myDF3 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb436-2"><a href="datastructure.html#cb436-2"></a>    <span class="dt">ID   =</span> myDF.ID, </span>
<span id="cb436-3"><a href="datastructure.html#cb436-3"></a>    <span class="dt">Name =</span> myDF.Name, </span>
<span id="cb436-4"><a href="datastructure.html#cb436-4"></a>    <span class="dt">Math =</span> myDF.Math, </span>
<span id="cb436-5"><a href="datastructure.html#cb436-5"></a>    <span class="dt">Stat =</span> myDF.Stat</span>
<span id="cb436-6"><a href="datastructure.html#cb436-6"></a>    )</span>
<span id="cb436-7"><a href="datastructure.html#cb436-7"></a></span>
<span id="cb436-8"><a href="datastructure.html#cb436-8"></a>myDF3</span></code></pre></div>
<pre><code>##   ID      Name Math Stat
## 1  1     Yanai   50   25
## 2  2      Song   90    5
## 3  3 Shigemura  100  100
## 4  4      Tani   80   85</code></pre>
<p>以上をコードを考えてみると、データフレームは複数のベクトルを横方向にくっつけたものになります。注意すべき点としては各ベクトルの長さが一致している点です。<code>myDF</code>の場合、4つのベクトルで構成されていますが、全てのベクトルの長さは4です。むろん、長さが異なる場合もデータフレームは作成できます。この場合、長さが足りないベクトルは最も長さが長いベクトルに合わせて繰り返されます。例として<code>myDF4</code>を作ってみましょう。</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="datastructure.html#cb438-1"></a>myDF4 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb438-2"><a href="datastructure.html#cb438-2"></a>    <span class="dt">ID   =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,</span>
<span id="cb438-3"><a href="datastructure.html#cb438-3"></a>    <span class="dt">Name =</span> <span class="kw">c</span>(<span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Shigemura&quot;</span>, <span class="st">&quot;Tani&quot;</span>),</span>
<span id="cb438-4"><a href="datastructure.html#cb438-4"></a>    <span class="dt">Math =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="dv">80</span>),</span>
<span id="cb438-5"><a href="datastructure.html#cb438-5"></a>    <span class="dt">Stat =</span> <span class="kw">c</span>(<span class="dv">25</span>, <span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">85</span>),</span>
<span id="cb438-6"><a href="datastructure.html#cb438-6"></a>    <span class="dt">City =</span> <span class="st">&quot;Kobe&quot;</span>,</span>
<span id="cb438-7"><a href="datastructure.html#cb438-7"></a>    <span class="dt">Food =</span> <span class="kw">c</span>(<span class="st">&quot;Ramen&quot;</span>, <span class="st">&quot;Udon&quot;</span>)</span>
<span id="cb438-8"><a href="datastructure.html#cb438-8"></a>    )</span>
<span id="cb438-9"><a href="datastructure.html#cb438-9"></a></span>
<span id="cb438-10"><a href="datastructure.html#cb438-10"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat City  Food
## 1  1     Yanai   50   25 Kobe Ramen
## 2  2      Song   90    5 Kobe  Udon
## 3  3 Shigemura  100  100 Kobe Ramen
## 4  4      Tani   80   85 Kobe  Udon</code></pre>
<p><code>City</code>列はすべて<code>"Kobe"</code>が入り、<code>Food</code>列は長さが足りない3, 4番目の要素に1, 2番目の要素が代入されます。実際はあまり使わない使い方ですが、ある列の要素が全て同じ場合、このような使い方をすることがあります。</p>
</div>
<div id="データフレームの操作" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> データフレームの操作</h3>
<p><strong>データフレームの大きさ</strong></p>
<p>行列と同じ</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="datastructure.html#cb440-1"></a><span class="kw">dim</span>(myDF4)</span></code></pre></div>
<pre><code>## [1] 4 6</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="datastructure.html#cb442-1"></a><span class="kw">nrow</span>(myDF4)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="datastructure.html#cb444-1"></a><span class="kw">ncol</span>(myDF4)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p><strong>要素の抽出</strong></p>
<p>まず、データフレーム内要素の抽出についてですが、行列型と同じやり方で問題ありません。つまり、<code>[行番号, 列番号]</code>で要素の抽出が可能です。これに加え、データフレームには<code>$</code>を使った抽出方法があります。</p>
<p>まず、行列と同じやり方で<code>myDF4</code>の2行目、6列目の要素を抽出してみましょう。</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="datastructure.html#cb446-1"></a>myDF4[<span class="dv">2</span>, <span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Udon&quot;</code></pre>
<p>行を丸ごと抽出したい場合は、列を指定しません。<code>myDF4</code>の3, 4行目を抽出してみましょう。</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="datastructure.html#cb448-1"></a>myDF4[<span class="dv">3</span><span class="op">:</span><span class="dv">4</span>, ] <span class="co"># myDF4[c(3, 4), ]も同じ</span></span></code></pre></div>
<pre><code>##   ID      Name Math Stat City  Food
## 3  3 Shigemura  100  100 Kobe Ramen
## 4  4      Tani   80   85 Kobe  Udon</code></pre>
<p>同じやり方で列を抽出すことも可能です。好きな食べ物 (<code>Food</code>)列を抽出してみましょう。</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="datastructure.html#cb450-1"></a>myDF4[, <span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Ramen&quot; &quot;Udon&quot;  &quot;Ramen&quot; &quot;Udon&quot;</code></pre>
<p>列を抽出する場合は、列名を指定することも可能です。やり方は<code>[, "列名"]</code>による方法、<code>$列名</code>による方法があります。<code>Name</code>列を抽出してみましょう。</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="datastructure.html#cb452-1"></a>myDF4[, <span class="st">&quot;Name&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Yanai&quot;     &quot;Song&quot;      &quot;Shigemura&quot;
## [4] &quot;Tani&quot;</code></pre>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="datastructure.html#cb454-1"></a>myDF4<span class="op">$</span>Name</span></code></pre></div>
<pre><code>## [1] &quot;Yanai&quot;     &quot;Song&quot;      &quot;Shigemura&quot;
## [4] &quot;Tani&quot;</code></pre>
<p>どれも同じ結果が返されます。後者の方が簡単ですが、一つの列しか抽出できない限界があります。それに比べ、前者は<code>c()</code>を使うことで複数の列を同時に抽出することも可能です。それぞれの場面に応じて使い分けていきましょう。</p>
<p>また、<code>$</code>で列を抽出した場合、抽出されたものはベクトル扱いになるため、<code>[]</code>を使った要素の抽出が可能です。例えば<code>myDF4</code>の<code>Name</code>列の2番目の要素を抽出してみましょう。</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="datastructure.html#cb456-1"></a>myDF4<span class="op">$</span>Name[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Song&quot;</code></pre>
<p>あまり意識する必要はありませんが、抽出後のデータ構造について簡単に説明します。データフレームから一部の要素を抽出した結果物は必ずしもデータフレームにはなりません。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>操作</th>
<th>返されるデータ型</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1行を抽出する</td>
<td>データフレーム</td>
</tr>
<tr class="even">
<td>2</td>
<td>複数の行を抽出する</td>
<td>データフレーム</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1列を抽出する</td>
<td><strong>ベクトル</strong></td>
</tr>
<tr class="even">
<td>4</td>
<td>複数の列を抽出する</td>
<td>データフレーム</td>
</tr>
</tbody>
</table>
<p>注目するのは3番目の例ですが、これはRの最小単位がベクトルであり、データフレームもベクトルの集めだからです。データフレームは「縦」ベクトルを横に並べたものです。もし、行を抽出した場合、その要素は全て同じデータ型だとは限りません。実際、<code>myDF4</code>の3行目を抽出しても、中にはcharacter型とnumeric型と混在しています。しかし、一つの列のみを抽出した場合、全ての要素は必ず同じデータ型となるため、ベクトルとして扱うことが可能です。同様に、行列型の一列を抽出した場合も結果はベクトルとなります。ただし、行列は全ての要素がNAを除き、同じであるため、一行を抽出しても結果はベクトル型となります。</p>
<p><strong>セルの修正</strong></p>
<p>特定のセルの修正する方法は簡単です。先ほど、データフレームから一つのセルを取り出すには<code>データフレーム名[行番号, 列番号]</code>だけでした。そのセルを修正するにはベクトルと同様、<code>データフレーム名[行番号, 列番号] &lt;- 新しい値</code>のように入力します。</p>
<p>たとえば、重村さんが数学試験で不正が発覚し、0点になるとします。そのためには、<code>myDF4</code>の3行・3列目の要素を<code>0</code>に修正する必要がありますが、以下のようなコマンドで修正可能です。</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="datastructure.html#cb458-1"></a>myDF4[<span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb458-2"><a href="datastructure.html#cb458-2"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat City  Food
## 1  1     Yanai   50   25 Kobe Ramen
## 2  2      Song   90    5 Kobe  Udon
## 3  3 Shigemura    0  100 Kobe Ramen
## 4  4      Tani   80   85 Kobe  Udon</code></pre>
<p>ちゃんと重村さんの数学点数が0点になりました。ざまあみろですね！</p>
<p>もう一つのやり方としては、一旦、列を取り出し、ベクトルにおける要素の置換操作を行う方法です。矢内大先生が神戸から離れ、高知県へ移住し、小物の宋は京都へ移住したとします。<code>myDF4</code>の<code>City</code>列の1・2番目要素を<code>c("Kochi", "Kyoto")</code>に修正する必要があります。そのためには以下のように入力します。</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="datastructure.html#cb460-1"></a>myDF4<span class="op">$</span>City[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Kochi&quot;</span>, <span class="st">&quot;Kyoto&quot;</span>)</span>
<span id="cb460-2"><a href="datastructure.html#cb460-2"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat  City  Food
## 1  1     Yanai   50   25 Kochi Ramen
## 2  2      Song   90    5 Kyoto  Udon
## 3  3 Shigemura    0  100  Kobe Ramen
## 4  4      Tani   80   85  Kobe  Udon</code></pre>
<p>修正した要素が反映されました。</p>
<p><strong>列の追加・修正</strong></p>
<p>まずは、データフレームに列を追加する方法について紹介します。方法は</p>
<pre><code>データフレーム名$新しい列名 &lt;- ベクトル</code></pre>
<p>のように入力するだけです。たとえば、4人を対象に英語試験を行い、それぞれの点数が95点、50点、80点、5点だとします。この英語試験の成績を<code>myDF4</code>の<code>English</code>列として追加してみましょう。</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="datastructure.html#cb463-1"></a>myDF4<span class="op">$</span>English &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">95</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>むろん、以下のように予めベクトルを作成してから代入することも可能です。</p>
<pre><code>English_Score &lt;- c(95, 50, 80, 5)
myDF4$English &lt;- English_Score</code></pre>
<p>どれも同じ結果になりますが、結果を見てみましょう。</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="datastructure.html#cb465-1"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat  City  Food English
## 1  1     Yanai   50   25 Kochi Ramen      95
## 2  2      Song   90    5 Kyoto  Udon      50
## 3  3 Shigemura    0  100  Kobe Ramen      80
## 4  4      Tani   80   85  Kobe  Udon       5</code></pre>
<p>「<code>English</code>が<code>Stat</code>の次じゃなくて気持ち悪い！」と思う方もいるかも知れませんが、列順番の変更については第<a href="datahandling1.html#datahandling1">13</a>章で解説します。まずは、これで我慢しましょう。</p>
<p>次は、列の置換についてです。実はよく考えてみるとこれは列の追加と全く同じです。たとえば、英語試験において配点が5点の問題にミスが見つかり、全生徒の英語成績に5点を上乗せるとします。そのためにはベクトル<code>myDF4$English</code>の全ての要素に5を足し、それをもう一回<code>myDf4$English</code>に代入すれば良いです。</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="datastructure.html#cb467-1"></a>myDF4<span class="op">$</span>English &lt;-<span class="st"> </span>myDF4<span class="op">$</span>English <span class="op">+</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb467-2"><a href="datastructure.html#cb467-2"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat  City  Food English
## 1  1     Yanai   50   25 Kochi Ramen     100
## 2  2      Song   90    5 Kyoto  Udon      55
## 3  3 Shigemura    0  100  Kobe Ramen      85
## 4  4      Tani   80   85  Kobe  Udon      10</code></pre>
<p>これで<code>English</code>列の修正ができました。</p>
<p><strong>行の追加・修正はなるべくしない</strong></p>
<p>行の追加はなるべくしない方が良いです。その理由について考えてみましょう。今は4人の生徒のデータがありますが、ここにもう一人の生徒のデータを追加するとします。そのためには<code>myDF4</code>の5行目に生徒のID、名前、数学・統計学の成績、居住地域、好きな食べ物、英語の成績を入れれば良いでしょう。新しい学生、吐合さんの数学・統計学・英語成績は50, 50, 50点、居住地域は芦屋、好きな食べ物は二郎だとします。早速追加してみましょう。</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="datastructure.html#cb469-1"></a>myDF4[<span class="dv">5</span>, ] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="st">&quot;Hakiai&quot;</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="st">&quot;Ashiya&quot;</span>, <span class="st">&quot;Jiro&quot;</span>, <span class="dv">50</span>)</span>
<span id="cb469-2"><a href="datastructure.html#cb469-2"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat   City  Food English
## 1  1     Yanai   50   25  Kochi Ramen     100
## 2  2      Song   90    5  Kyoto  Udon      55
## 3  3 Shigemura    0  100   Kobe Ramen      85
## 4  4      Tani   80   85   Kobe  Udon      10
## 5  5    Hakiai   50   50 Ashiya  Jiro      50</code></pre>
<p>問題なく吐合さんのデータが追加されたように見えますが、実は問題があります。<code>myDF4</code>の<code>Stat</code>列を取り出して見ましょう。</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="datastructure.html#cb471-1"></a>myDF4<span class="op">$</span>Stat</span></code></pre></div>
<pre><code>## [1] &quot;25&quot;  &quot;5&quot;   &quot;100&quot; &quot;85&quot;  &quot;50&quot;</code></pre>
<p>異常に気づきましたか。それではこのベクトルのデータ型を確認してみましょう。</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="datastructure.html#cb473-1"></a><span class="kw">class</span>(myDF4<span class="op">$</span>Stat)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>元々はnumeric型であるはずの<code>Stat</code>列がcharacter型になりました。その理由は明白です。ベクトルの要素は全て同じデータ型だからです。そして、numericとcharacter型が混在している場合は、自動的にnumeric型になります。以下の2つのコマンドが同じであることは理解できるでしょう。</p>
<pre><code># Case 1
myDF4[5, ] &lt;- c(5, &quot;Hakiai&quot;, 50, 50, &quot;Ashiya&quot;, &quot;Jiro&quot;, 50)

# Case 2
Hakiai_Data &lt;- c(5, &quot;Hakiai&quot;, 50, 50, &quot;Ashiya&quot;, &quot;Jiro&quot;, 50)
myDF4[5, ]  &lt;- Hakiai_Data</code></pre>
<p>ここのベクトル<code>Hakiai_Data</code>が強制的にcharacter型になるため、<code>myDF4</code>の5行目の要素は全てcharacter型になります。また、データフレームは縦ベクトルを横に並べたものであるなら、<code>myDF4$Math</code>列にcharacter型の要素が追加されることによって、列も全てcharacter型になってしまいます。したがって、データフレームにcharacter型とnumeric型が混在している状況において新しい行の追加は全ての要素をcharacter型に変えてしまうのです。むろん、データフレームの全要素がnumeric型であれば、このような問題は生じますが、numeric型のみで構成されたデータフレームはなかなかないでしょう。</p>
<p>5行目を消しても問題は解決しないので、結局は列のデータ型を強制的に変更する必要があります。</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="datastructure.html#cb476-1"></a>myDF4<span class="op">$</span>ID      &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(myDF4<span class="op">$</span>ID)</span>
<span id="cb476-2"><a href="datastructure.html#cb476-2"></a>myDF4<span class="op">$</span>Math    &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(myDF4<span class="op">$</span>Math)</span>
<span id="cb476-3"><a href="datastructure.html#cb476-3"></a>myDF4<span class="op">$</span>Stat    &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(myDF4<span class="op">$</span>Stat)</span>
<span id="cb476-4"><a href="datastructure.html#cb476-4"></a>myDF4<span class="op">$</span>English &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(myDF4<span class="op">$</span>English)</span>
<span id="cb476-5"><a href="datastructure.html#cb476-5"></a></span>
<span id="cb476-6"><a href="datastructure.html#cb476-6"></a><span class="kw">class</span>(myDF4<span class="op">$</span>Math)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>これでやっと元通りになりましたね。</p>
<p>どうしても行を追加したい場合は、以下のようなやり方もありますが、おすすめはできません。</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="datastructure.html#cb478-1"></a>myDF4[<span class="dv">6</span>, ] &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">7</span>) <span class="co"># myDF4の6行目を追加し、7つの欠損値を代入</span></span>
<span id="cb478-2"><a href="datastructure.html#cb478-2"></a></span>
<span id="cb478-3"><a href="datastructure.html#cb478-3"></a>myDF4<span class="op">$</span>ID[<span class="dv">6</span>]      &lt;-<span class="st"> </span><span class="dv">6</span>           <span class="co"># myDF4$IDの6番目の要素に6を代入</span></span>
<span id="cb478-4"><a href="datastructure.html#cb478-4"></a>myDF4<span class="op">$</span>Name[<span class="dv">6</span>]    &lt;-<span class="st"> &quot;Yukawa&quot;</span>    <span class="co"># myDF4$Nameの6番目の要素にYukawaを代入</span></span>
<span id="cb478-5"><a href="datastructure.html#cb478-5"></a>myDF4<span class="op">$</span>Math[<span class="dv">6</span>]    &lt;-<span class="st"> </span><span class="dv">80</span>          <span class="co"># 以下、省略</span></span>
<span id="cb478-6"><a href="datastructure.html#cb478-6"></a>myDF4<span class="op">$</span>Stat[<span class="dv">6</span>]    &lt;-<span class="st"> </span><span class="dv">30</span></span>
<span id="cb478-7"><a href="datastructure.html#cb478-7"></a>myDF4<span class="op">$</span>City[<span class="dv">6</span>]    &lt;-<span class="st"> &quot;Hiroshima&quot;</span></span>
<span id="cb478-8"><a href="datastructure.html#cb478-8"></a>myDF4<span class="op">$</span>Food[<span class="dv">6</span>]    &lt;-<span class="st"> &quot;Ramen&quot;</span></span>
<span id="cb478-9"><a href="datastructure.html#cb478-9"></a>myDF4<span class="op">$</span>English[<span class="dv">6</span>] &lt;-<span class="st"> </span><span class="dv">90</span></span>
<span id="cb478-10"><a href="datastructure.html#cb478-10"></a></span>
<span id="cb478-11"><a href="datastructure.html#cb478-11"></a>myDF4</span></code></pre></div>
<pre><code>##   ID      Name Math Stat      City  Food English
## 1  1     Yanai   50   25     Kochi Ramen     100
## 2  2      Song   90    5     Kyoto  Udon      55
## 3  3 Shigemura    0  100      Kobe Ramen      85
## 4  4      Tani   80   85      Kobe  Udon      10
## 5  5    Hakiai   50   50    Ashiya  Jiro      50
## 6  6    Yukawa   80   30 Hiroshima Ramen      90</code></pre>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="datastructure.html#cb480-1"></a><span class="kw">class</span>(myDF4<span class="op">$</span>English)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>欠損値 (<code>NA</code>)はどのようなデータ型にも対応できる特徴を利用すれば、このような操作も可能ですが、かなり面倒です。そもそも実際の分析において任意の行を追加することは滅多にないはずです。</p>
</div>
<div id="tibble型" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> tibble型</h3>
<p><code>data.frame</code>に似ているデータ型として<code>tibble</code>があります。これはR内蔵のデータ型ではありませんが、Rの必須パッケージとも言えるtidyverse内に含まれているデータ型であり、これからもどんどん普及していくでしょう。<code>tibble</code>と<code>data.frame</code>の違いを説明するために、同じデータをそれぞれのデータ型で読み込んでみましょう。</p>
<p>とりあえず<code>read_csv()</code>で読み込み、<code>VoteDF1</code>と名付けましょう。</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="datastructure.html#cb482-1"></a>VoteDF1 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/Vote.csv&quot;</span>)</span></code></pre></div>
<p>続いて<code>VoteDF1</code>を<code>as_tibble()</code>関数を使って<code>tibble</code>型にし、<code>VoteDF2</code>と名付けます。そして、それぞれのデータ構造を確認してみます。</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="datastructure.html#cb483-1"></a>VoteDF2 &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(VoteDF1)</span>
<span id="cb483-2"><a href="datastructure.html#cb483-2"></a></span>
<span id="cb483-3"><a href="datastructure.html#cb483-3"></a><span class="kw">class</span>(VoteDF1); <span class="kw">class</span>(VoteDF2)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>全く同じデータですが、<code>VoteDF2</code>には<code>tbl</code>と<code>tbl_df</code>というクラスが追加されていることが分かります。それではデータの中身を覗いてみましょう。まずは、<code>data.frame</code>がたから</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="datastructure.html#cb486-1"></a>VoteDF1</span></code></pre></div>
<pre><code>##    ID     Pref  Zaisei Over65 Under30   LDP
## 1   1   北海道 0.41903  29.09   24.70 32.82
## 2   2   青森県 0.33190  30.14   23.92 40.44
## 3   3   岩手県 0.34116  30.38   24.48 34.90
## 4   4   宮城県 0.59597  25.75   27.29 36.68
## 5   5   秋田県 0.29862  33.84   21.35 43.46
## 6   6   山形県 0.34237  30.76   24.75 42.49
## 7   7   福島県 0.50947  28.68   25.23 33.82
## 8   8   茨城県 0.63309  26.76   26.60 40.64
## 9   9   栃木県 0.62166  25.87   26.78 38.78
## 10 10   群馬県 0.60277  27.60   26.59 42.06
## 11 11   埼玉県 0.76548  24.82   27.66 32.30
## 12 12   千葉県 0.77694  25.86   26.71 37.79
## 13 13   東京都 1.00321  22.67   27.39 34.37
## 14 14 神奈川県 0.91745  23.86   27.84 34.92
## 15 15   新潟県 0.43519  29.86   25.23 43.66
## 16 16   富山県 0.45307  30.54   24.88 44.16
## 17 17   石川県 0.46812  27.87   27.25 48.09
## 18 18   福井県 0.37820  28.63   26.70 45.29
## 19 19   山梨県 0.37876  28.41   26.37 37.36
## 20 20   長野県 0.47586  30.06   25.52 35.27
## 21 21   岐阜県 0.52358  28.10   27.22 39.71
## 22 22   静岡県 0.70999  27.79   26.28 37.47
## 23 23   愛知県 0.92052  23.79   29.44 34.32
## 24 24   三重県 0.57544  27.90   26.74 33.67
## 25 25   滋賀県 0.53932  24.15   29.96 37.85
## 26 26   京都府 0.56713  27.51   27.76 31.18
## 27 27   大阪府 0.74980  26.15   27.55 22.12
## 28 28   兵庫県 0.62062  27.09   26.94 31.71
## 29 29   奈良県 0.41269  28.70   26.86 33.51
## 30 30 和歌山県 0.31955  30.89   25.08 39.61
## 31 31   鳥取県 0.25486  29.71   25.86 41.62
## 32 32   島根県 0.24170  32.48   24.59 48.24
## 33 33   岡山県 0.50096  28.66   27.44 37.87
## 34 34   広島県 0.58581  27.53   27.46 39.93
## 35 35   山口県 0.42560  32.07   24.91 46.75
## 36 36   徳島県 0.32018  30.95   24.31 38.44
## 37 37   香川県 0.46060  29.93   25.29 44.07
## 38 38   愛媛県 0.41181  30.62   24.75 43.57
## 39 39   高知県 0.24472  32.85   23.60 37.01
## 40 40   福岡県 0.61836  25.90   28.21 36.52
## 41 41   佐賀県 0.32938  27.68   27.97 43.53
## 42 42   長崎県 0.31562  29.60   25.84 41.70
## 43 43   熊本県 0.38688  28.78   27.18 46.54
## 44 44   大分県 0.35828  30.45   25.65 39.44
## 45 45   宮崎県 0.32034  29.49   26.26 40.11
## 46 46 鹿児島県 0.32140  29.43   26.04 45.97
## 47 47   沖縄県 0.31535  19.63   33.37 27.82
##      DPJ Komei Ishin   JCP   SDP
## 1  30.62 13.41  3.43 11.44  1.68
## 2  24.61 12.76  3.82  8.92  3.41
## 3  22.44  8.61  5.16 11.24  5.29
## 4  25.40 13.42  3.97  9.99  3.62
## 5  22.72 11.19  5.17  7.56  5.12
## 6  21.47 11.78  4.30  7.60  5.20
## 7  28.31 10.96  3.43 10.45  3.24
## 8  18.95 15.05  6.67 10.07  2.88
## 9  21.63 12.42 10.88  7.00  2.05
## 10 19.31 13.85  5.61 10.00  2.44
## 11 20.40 16.00  7.23 13.94  1.91
## 12 21.70 13.98  5.46 11.34  2.01
## 13 19.76 11.44  7.34 14.21  2.82
## 14 21.49 12.18  7.77 12.46  2.79
## 15 25.25  8.27  4.39  8.00  3.76
## 16 24.22  9.81  5.06  5.79  5.02
## 17 18.54 11.00  6.36  7.07  2.36
## 18 17.52 10.91 13.09  5.66  2.09
## 19 28.04 12.83  4.32  9.20  1.67
## 20 27.69 10.70  4.23 12.61  3.59
## 21 23.62 12.33  5.51  9.41  1.98
## 22 24.13 12.68  7.99  9.59  2.22
## 23 29.27 11.67  6.41  9.55  2.14
## 24 34.23 13.07  5.09  7.59  1.76
## 25 22.25  9.57 12.82 11.44  1.41
## 26 19.93 12.25 11.16 18.50  1.55
## 27  9.30 16.39 34.86 11.37  1.25
## 28 15.84 15.37 19.50 10.30  2.01
## 29 18.41 13.44 18.94  9.17  1.66
## 30 12.10 18.00 13.51 10.43  1.23
## 31 20.93 16.71  5.98  7.14  2.56
## 32 19.14 13.43  4.75  7.50  2.51
## 33 19.91 17.18 10.67  7.87  1.60
## 34 18.53 15.20  9.69  8.52  2.35
## 35 17.27 16.50  5.31  7.39  1.78
## 36 17.72 16.87  9.46  9.10  1.81
## 37 16.60 15.14  6.20  7.56  5.07
## 38 19.28 14.82  6.77  6.97  2.40
## 39 16.95 15.83  3.93 17.41  2.91
## 40 19.08 17.15  7.03 10.78  3.33
## 41 21.10 15.48  4.85  5.67  4.16
## 42 20.68 16.86  5.12  6.27  3.48
## 43 19.29 15.27  4.53  6.32  2.60
## 44 18.37 13.26  4.42  6.85 13.05
## 45 14.50 17.11  5.74  7.27  6.81
## 46 16.19 14.49  6.47  6.52  3.62
## 47 13.29 15.09  7.66 15.64 12.13</code></pre>
<p>つづいて、<code>tibble</code>型</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="datastructure.html#cb488-1"></a>VoteDF2</span></code></pre></div>
<pre><code>## # A tibble: 47 x 11
##       ID Pref   Zaisei Over65 Under30   LDP   DPJ
##    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1 北海道  0.419   29.1    24.7  32.8  30.6
##  2     2 青森県  0.332   30.1    23.9  40.4  24.6
##  3     3 岩手県  0.341   30.4    24.5  34.9  22.4
##  4     4 宮城県  0.596   25.8    27.3  36.7  25.4
##  5     5 秋田県  0.299   33.8    21.4  43.5  22.7
##  6     6 山形県  0.342   30.8    24.8  42.5  21.5
##  7     7 福島県  0.509   28.7    25.2  33.8  28.3
##  8     8 茨城県  0.633   26.8    26.6  40.6  19.0
##  9     9 栃木県  0.622   25.9    26.8  38.8  21.6
## 10    10 群馬県  0.603   27.6    26.6  42.1  19.3
## # … with 37 more rows, and 4 more variables:
## #   Komei &lt;dbl&gt;, Ishin &lt;dbl&gt;, JCP &lt;dbl&gt;,
## #   SDP &lt;dbl&gt;</code></pre>
<p>同じデータですが、表示画面がやや異なります。<code>data.frame</code>は全ての列と行が表示されましたが、<code>tibble</code>の場合、「画面に収まる」程度しか表示されません。表示されなかった行や列に関しては最後に表示されています。たとえば、<code>VoteDF2</code>の場合、下段にこのように書かれていますね (画面の大きさによって変わります)。</p>
<pre><code>## # … with 37 more rows, and 1 more variable: SDP &lt;dbl&gt;</code></pre>
<p>これは表示されなかった行が37行あり、<code>SDP</code>という変数も表示されていないということです。他の違いとしては、<code>tibble</code>の場合、最初にデータのサイズ (47行11列)が、各変数名の下にデータ型 (<code>&lt;int&gt;</code>、<code>&lt;chr&gt;</code>、<code>&lt;dbl&gt;</code>など)が表示されるという点です。</p>
<p>本書は<code>tibble</code>と<code>data.frame</code>を区別して解説はしませんが、一部の章・節においては<code>tibble</code>を念頭において解説をします。<code>tibble</code>型の作り方は先ほどのように<code>as_tibble()</code>使う方法もありますが、<code>readr::read_csv()</code>を使う方法もあります<a href="#fn44" class="footnote-ref" id="fnref44"><sup>44</sup></a>。<code>read_csv()</code>を使うと各列がどのようなデータ型として読み込まれたかも表示されるので便利です。<code>readr</code>パッケージはtidyverseに含まれているため、普段では以下のような使い方で十分です。</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="datastructure.html#cb491-1"></a>VoteDF3 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;Data/Vote.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## ─ Column specification ─────────────
## cols(
##   ID = col_double(),
##   Pref = col_character(),
##   Zaisei = col_double(),
##   Over65 = col_double(),
##   Under30 = col_double(),
##   LDP = col_double(),
##   DPJ = col_double(),
##   Komei = col_double(),
##   Ishin = col_double(),
##   JCP = col_double(),
##   SDP = col_double()
## )</code></pre>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="datastructure.html#cb493-1"></a><span class="kw">class</span>(VoteDF3) <span class="co"># VoteDF3の構造</span></span></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;        
## [4] &quot;data.frame&quot;</code></pre>
<p><code>tibble</code>と<code>data.frame</code>の最も大きな違いは、<code>data.frame</code>の一つのセルには長さ1のベクトルしか入らない一方、<code>tibble</code>は何でも入るという点です。つまり、<code>tibble</code>なら一つのセルに数字や文字列だけでなく、長さ2以上のベクトル、後述するリスト型、行列、さらには<code>tibble</code>も入れることが出来ます。これについては本書の中盤以降に解説します。</p>
<p>本書で「データフレーム」と書いた場合、それはtibbleでも適用可能です。ただし、tibbleと明示した場合、データフレームでは適用不可能です。</p>
<hr />
</div>
</div>
<div id="structure-list" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> リスト (list)</h2>
<p>リスト型は「様々なデータ構造を集めたもの」です。これは複数のデータフレームが格納されたオブジェクト、複数のベクトルが格納されたオブジェクト、行列とデータフレームが混在したオブジェクトなどを意味します。また、リスト型データはリスト型データを含むことも可能であり、非常に柔軟なデータ構造です。</p>
<div id="リスト型データの作成" class="section level3" number="10.5.1">
<h3><span class="header-section-number">10.5.1</span> リスト型データの作成</h3>
<p>ここではまず、2つのデータフレームを含むリストを作成してみます。それぞれのデータフレームはFIFA国別サッカーランキングであり<a href="#fn45" class="footnote-ref" id="fnref45"><sup>45</sup></a>、本書のサンプルデータの<code>FIFA_Women.csv</code>と<code>FIFA_Men.csv</code>です。まずは、2つのデータを読み込み、<code>Soccer_W</code>と<code>Soccer_M</code>という名のオブジェクトに格納しましょう。また、ここでは単に例を見せるだけなので、全データを利用するのではなく、最初の10行のみを利用します。</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="datastructure.html#cb495-1"></a>Soccer_W &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/FIFA_Women.csv&quot;</span>)</span>
<span id="cb495-2"><a href="datastructure.html#cb495-2"></a>Soccer_M &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/FIFA_Men.csv&quot;</span>)</span>
<span id="cb495-3"><a href="datastructure.html#cb495-3"></a></span>
<span id="cb495-4"><a href="datastructure.html#cb495-4"></a>Soccer_W &lt;-<span class="st"> </span>Soccer_W[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span>
<span id="cb495-5"><a href="datastructure.html#cb495-5"></a>Soccer_M &lt;-<span class="st"> </span>Soccer_M[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<p>リストの作成には<code>list()</code>関数に入れたいオブジェクト名を指定するだけです。それでは<code>List1</code>という名前で<code>Soccer_W</code>と<code>Soccer_M</code>データフレームを入れてみましょう。格納後は<code>List1</code>のデータ構造を<code>class()</code>で確認します</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="datastructure.html#cb496-1"></a>List1 &lt;-<span class="st"> </span><span class="kw">list</span>(Soccer_W, Soccer_M)</span>
<span id="cb496-2"><a href="datastructure.html#cb496-2"></a><span class="kw">class</span>(List1)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="datastructure.html#cb498-1"></a>List1</span></code></pre></div>
<pre><code>## [[1]]
##    ID                Team Rank Points
## 1   1             Albania   75   1325
## 2   2             Algeria   85   1271
## 3   3      American Samoa  133   1030
## 4   4             Andorra  155    749
## 5   5              Angola  121   1117
## 6   6 Antigua and Barbuda  153    787
## 7   7           Argentina   32   1659
## 8   8             Armenia  126   1103
## 9   9               Aruba  157    724
## 10 10           Australia    7   1963
##    Prev_Points Confederation
## 1         1316          UEFA
## 2         1271           CAF
## 3         1030           OFC
## 4          749          UEFA
## 5         1117           CAF
## 6          787      CONCACAF
## 7         1659      CONMEBOL
## 8         1104          UEFA
## 9          724      CONCACAF
## 10        1963           AFC
## 
## [[2]]
##    ID                Team Rank Points
## 1   1         Afghanistan  149   1052
## 2   2             Albania   66   1356
## 3   3             Algeria   35   1482
## 4   4      American Samoa  192    900
## 5   5             Andorra  135   1082
## 6   6              Angola  124   1136
## 7   7            Anguilla  210    821
## 8   8 Antigua and Barbuda  126   1127
## 9   9           Argentina    9   1623
## 10 10             Armenia  102   1213
##    Prev_Points Confederation
## 1         1052           AFC
## 2         1356          UEFA
## 3         1482           CAF
## 4          900           OFC
## 5         1082          UEFA
## 6         1136           CAF
## 7          821      CONCACAF
## 8         1127      CONCACAF
## 9         1623      CONMEBOL
## 10        1213          UEFA</code></pre>
<p>一つのオブジェクトに2つのデータフレームが入っていますね。これは2つのデータフレームで構成された長さ2のリストです。ただし、どちらが女性ランキングで、どちらが男子ランキングか区別が難しいです。この場合、各データフレームに名前を付けることも可能です。</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="datastructure.html#cb500-1"></a>List2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Women =</span> Soccer_W, <span class="dt">Men =</span> Soccer_M)</span>
<span id="cb500-2"><a href="datastructure.html#cb500-2"></a>List2</span></code></pre></div>
<pre><code>## $Women
##    ID                Team Rank Points
## 1   1             Albania   75   1325
## 2   2             Algeria   85   1271
## 3   3      American Samoa  133   1030
## 4   4             Andorra  155    749
## 5   5              Angola  121   1117
## 6   6 Antigua and Barbuda  153    787
## 7   7           Argentina   32   1659
## 8   8             Armenia  126   1103
## 9   9               Aruba  157    724
## 10 10           Australia    7   1963
##    Prev_Points Confederation
## 1         1316          UEFA
## 2         1271           CAF
## 3         1030           OFC
## 4          749          UEFA
## 5         1117           CAF
## 6          787      CONCACAF
## 7         1659      CONMEBOL
## 8         1104          UEFA
## 9          724      CONCACAF
## 10        1963           AFC
## 
## $Men
##    ID                Team Rank Points
## 1   1         Afghanistan  149   1052
## 2   2             Albania   66   1356
## 3   3             Algeria   35   1482
## 4   4      American Samoa  192    900
## 5   5             Andorra  135   1082
## 6   6              Angola  124   1136
## 7   7            Anguilla  210    821
## 8   8 Antigua and Barbuda  126   1127
## 9   9           Argentina    9   1623
## 10 10             Armenia  102   1213
##    Prev_Points Confederation
## 1         1052           AFC
## 2         1356          UEFA
## 3         1482           CAF
## 4          900           OFC
## 5         1082          UEFA
## 6         1136           CAF
## 7          821      CONCACAF
## 8         1127      CONCACAF
## 9         1623      CONMEBOL
## 10        1213          UEFA</code></pre>
<p>これでどれが女性ランキングか、男性ランキングかが区別しやすくなりました。ここでは2つのデータフレームを入れましたが、様々なデータ構造が混在したリストも可能です。様々なデータ構造が混在したリストを自分で作成する場面はあまりありません。自分で作成した独自クラスを利用するパッケージを開発する際はよく使いますが、ここでは省略します。ただし、様々なデータ構造が含まれたリスト型を見ることはよくあります。たとえば、<code>lm()</code>関数で回帰分析を行った際、その結果はリスト型であり、中にはベクトル、データフレーム、リストなどが混在しています。これについては今後詳細に解説していきたいと思います。</p>
</div>
<div id="リスト型データの操作" class="section level3" number="10.5.2">
<h3><span class="header-section-number">10.5.2</span> リスト型データの操作</h3>
<p>リスト型の中身は何でもあり得るので、なんらかの操作方法があるわけではありません。リスト型の操作というのはリスト内の要素をどのように抽出するかであり、各要素 (データフレーム、行列、ベクトルなど)の操作はこれまで説明してきた方法と同じです。したがって、ここではリストを構成する要素を抽出する方法についてのみ解説します。</p>
<p><strong>要素の番号を利用する方法</strong></p>
<p><code>List1</code>は各要素に名前が付いていないため、番号で抽出します。たとえば、あるリストの<code>i</code>番目の要素を抽出するには<code>リスト名[[i]]</code>で抽出します。<code>[]</code>ではなく、<code>[[]]</code>であることに注意してください。それでは<code>List1</code>の1番目の要素を抽出してみましょう。</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="datastructure.html#cb502-1"></a>List1[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##    ID                Team Rank Points
## 1   1             Albania   75   1325
## 2   2             Algeria   85   1271
## 3   3      American Samoa  133   1030
## 4   4             Andorra  155    749
## 5   5              Angola  121   1117
## 6   6 Antigua and Barbuda  153    787
## 7   7           Argentina   32   1659
## 8   8             Armenia  126   1103
## 9   9               Aruba  157    724
## 10 10           Australia    7   1963
##    Prev_Points Confederation
## 1         1316          UEFA
## 2         1271           CAF
## 3         1030           OFC
## 4          749          UEFA
## 5         1117           CAF
## 6          787      CONCACAF
## 7         1659      CONMEBOL
## 8         1104          UEFA
## 9          724      CONCACAF
## 10        1963           AFC</code></pre>
<p>このように<code>List1</code>内の1番目のデータが抽出されました。こちらのデータ構造は何でしょうか。</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="datastructure.html#cb504-1"></a><span class="kw">class</span>(List1[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>既に予想したかと思いますが、データフレームとして抽出されました。ここから更に、3行目のデータを抽出するには、<code>[[]]</code>の後に<code>[3, ]</code>を付けます。</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="datastructure.html#cb506-1"></a>List1[[<span class="dv">1</span>]][<span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   ID           Team Rank Points Prev_Points
## 3  3 American Samoa  133   1030        1030
##   Confederation
## 3           OFC</code></pre>
<p>先ほどリストの要素の抽出には「<code>[]</code>でなく、<code>[[]]</code>です」と申しましたが、実は<code>[]</code>も使用可能です。やってみましょう。</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="datastructure.html#cb508-1"></a>List1[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [[1]]
##    ID                Team Rank Points
## 1   1             Albania   75   1325
## 2   2             Algeria   85   1271
## 3   3      American Samoa  133   1030
## 4   4             Andorra  155    749
## 5   5              Angola  121   1117
## 6   6 Antigua and Barbuda  153    787
## 7   7           Argentina   32   1659
## 8   8             Armenia  126   1103
## 9   9               Aruba  157    724
## 10 10           Australia    7   1963
##    Prev_Points Confederation
## 1         1316          UEFA
## 2         1271           CAF
## 3         1030           OFC
## 4          749          UEFA
## 5         1117           CAF
## 6          787      CONCACAF
## 7         1659      CONMEBOL
## 8         1104          UEFA
## 9          724      CONCACAF
## 10        1963           AFC</code></pre>
<p><code>[[]]</code>を使った抽出とあまり変わらないですね。しかし、重要な違いが一つあります。それはデータ構造です。</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="datastructure.html#cb510-1"></a><span class="kw">class</span>(List1[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p><code>[]</code>で抽出したリストの要素のデータ構造もまたリスト型です。この場合、先ほどのように<code>[x, ]</code>を使って、<code>x</code>行目のデータを抽出することはできません。なぜなら、<code>[行, 列]</code>による要素の抽出はデータフレームのためのものであって、リスト型のためのものではないからです。</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="datastructure.html#cb512-1"></a>List1[<span class="dv">1</span>][<span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>## Error in List1[1][3, ]:  次元数が正しくありません</code></pre>
<p>このようにエラーが表示されます。</p>
<p><strong>要素の名前を利用する方法</strong></p>
<p><code>List2</code>のようにリストの要素に名前を付けた場合、これまでの方法に加え<code>[["要素名"]]</code>と<code>$要素名</code>を使った操作が可能です<a href="#fn46" class="footnote-ref" id="fnref46"><sup>46</sup></a>。<code>List2</code>から男子ランキング (<code>Men</code>)を抽出してみましょう。</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="datastructure.html#cb514-1"></a>List2[[<span class="st">&quot;Men&quot;</span>]]</span></code></pre></div>
<pre><code>##    ID                Team Rank Points
## 1   1         Afghanistan  149   1052
## 2   2             Albania   66   1356
## 3   3             Algeria   35   1482
## 4   4      American Samoa  192    900
## 5   5             Andorra  135   1082
## 6   6              Angola  124   1136
## 7   7            Anguilla  210    821
## 8   8 Antigua and Barbuda  126   1127
## 9   9           Argentina    9   1623
## 10 10             Armenia  102   1213
##    Prev_Points Confederation
## 1         1052           AFC
## 2         1356          UEFA
## 3         1482           CAF
## 4          900           OFC
## 5         1082          UEFA
## 6         1136           CAF
## 7          821      CONCACAF
## 8         1127      CONCACAF
## 9         1623      CONMEBOL
## 10        1213          UEFA</code></pre>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="datastructure.html#cb516-1"></a>List2<span class="op">$</span>Men</span></code></pre></div>
<pre><code>##    ID                Team Rank Points
## 1   1         Afghanistan  149   1052
## 2   2             Albania   66   1356
## 3   3             Algeria   35   1482
## 4   4      American Samoa  192    900
## 5   5             Andorra  135   1082
## 6   6              Angola  124   1136
## 7   7            Anguilla  210    821
## 8   8 Antigua and Barbuda  126   1127
## 9   9           Argentina    9   1623
## 10 10             Armenia  102   1213
##    Prev_Points Confederation
## 1         1052           AFC
## 2         1356          UEFA
## 3         1482           CAF
## 4          900           OFC
## 5         1082          UEFA
## 6         1136           CAF
## 7          821      CONCACAF
## 8         1127      CONCACAF
## 9         1623      CONMEBOL
## 10        1213          UEFA</code></pre>
<p>どれも結果は同じです。また、それぞれのデータ構造もデータフレームです。</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="datastructure.html#cb518-1"></a><span class="kw">class</span>(List2[[<span class="st">&quot;Men&quot;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="datastructure.html#cb520-1"></a><span class="kw">class</span>(List2<span class="op">$</span>Men)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>したがって、<code>[行番号, 列番号]</code>のようにデータフレームの操作が可能です。<code>Men</code>要素から10行目のデータを抽出してみましょう。</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="datastructure.html#cb522-1"></a>List2[[<span class="st">&quot;Men&quot;</span>]][<span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##    ID    Team Rank Points Prev_Points
## 10 10 Armenia  102   1213        1213
##    Confederation
## 10          UEFA</code></pre>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="datastructure.html#cb524-1"></a>List2<span class="op">$</span>Men[<span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##    ID    Team Rank Points Prev_Points
## 10 10 Armenia  102   1213        1213
##    Confederation
## 10          UEFA</code></pre>
<p>もちろん、名前を付けた場合であっても、要素の番号を利用した操作も可能です。自分でリスト型を作成する際には各要素に名前を付けた方が分かりやすくて良いでしょう。</p>
<hr />
</div>
</div>
<div id="structure-array" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> 配列 (array)</h2>
<p>配列は行列の拡張版であり、行列は配列の特殊な形です。これまでのRでは行列と配列は区別されてきましたが、R 4.0.0以降、行列は配列の属するデータ構造となりました。</p>
<p>配列型は簡単にいうと、同じサイズの行列を数枚重ねたものです。図<a href="datastructure.html#fig:array1">10.1</a>は配列型のイメージを表したものです。</p>
<div class="figure" style="text-align: center"><span id="fig:array1"></span>
<img src="figures/DataStructure/array001.png" alt="配列型データのイメージ" width="100%" />
<p class="caption">
図 10.1: 配列型データのイメージ
</p>
</div>
<p>したがって、配列型は行と列以外にも、層の要素も持つことになります。複数の行列で構成されている点では、リスト型と類似していますが、配列型は<strong>同じサイズ</strong>の<strong>行列</strong>のみで構成されている点が特徴です。</p>
<p>配列型は普段、扱う機会があまりありませんが、マルコフ連鎖モンテカルロ法 (MCMC)でベイジアン推定を行った後の事後分布データは配列型で格納される場合があります。</p>
<div id="配列型データの作成" class="section level3" number="10.6.1">
<h3><span class="header-section-number">10.6.1</span> 配列型データの作成</h3>
<p>各行列は3行4列とし、4層構造とします。まずは、同じサイズの行列を作成し、それぞれ<code>Mat1</code>、<code>Mat2</code>、<code>Mat3</code>、<code>Mat4</code>と名付けます。</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="datastructure.html#cb526-1"></a>Mat1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dv">12</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb526-2"><a href="datastructure.html#cb526-2"></a>Mat2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dv">12</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb526-3"><a href="datastructure.html#cb526-3"></a>Mat3 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dv">12</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb526-4"><a href="datastructure.html#cb526-4"></a>Mat4 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dv">12</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><code>sample()</code>関数は初めてですね。これは与えられたベクトルの要素から無作為に要素を抽出する関数です。<code>sample(1:12, n)</code>なら<code>c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,1 2)</code>から無作為に<code>n</code>個の要素を抽出するという意味です。<code>replace = TRUE</code>を指定すると、反復抽出、つまり、一回抽出された要素であっても抽出される可能性があることを意味します。デフォルトは<code>FALSE</code>ですが、この場合、一旦抽出された要素は二度と抽出されません。それではそれぞれの行列の中身を見てみましょう。</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="datastructure.html#cb527-1"></a>Mat1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    3    9    7   10
## [2,]    1    7    8    2
## [3,]    4    3    4    6</code></pre>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="datastructure.html#cb529-1"></a>Mat2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    5    3   12    9
## [2,]    6   12    9   10
## [3,]    4   12    2    4</code></pre>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="datastructure.html#cb531-1"></a>Mat3</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    2    2    8    5
## [2,]    4    5    3    8
## [3,]   10    5    3    9</code></pre>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="datastructure.html#cb533-1"></a>Mat4</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    9    8    9    5
## [2,]    6    2    1    4
## [3,]    7    7    3   12</code></pre>
<p>配列型データを作成するには<code>array()</code>関数を使います。引数としては行列名を<code>c()</code>で繋ぎ<a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a>、<code>dim =</code>でarrayの大きさを指定するだけです。配列を作成した後はそのデータ構造も確認してみましょう。</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="datastructure.html#cb535-1"></a>Array1 &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">c</span>(Mat1, Mat2, Mat3, Mat4), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>))</span>
<span id="cb535-2"><a href="datastructure.html#cb535-2"></a><span class="kw">class</span>(Array1)</span></code></pre></div>
<pre><code>## [1] &quot;array&quot;</code></pre>
<p><code>dim = c(m, n, z)</code>の部分ですが、これは「<code>m</code>行<code>n</code>列の行列が<code>z</code>枚重ねる」という意味です。今回は3行4列の行列を4枚重ねるので<code>dim = c(3, 4, 4)</code>です。それでは<code>Array1</code>の中身を見てみます。</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="datastructure.html#cb537-1"></a>Array1</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    3    9    7   10
## [2,]    1    7    8    2
## [3,]    4    3    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]    5    3   12    9
## [2,]    6   12    9   10
## [3,]    4   12    2    4
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4]
## [1,]    2    2    8    5
## [2,]    4    5    3    8
## [3,]   10    5    3    9
## 
## , , 4
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9    8    9    5
## [2,]    6    2    1    4
## [3,]    7    7    3   12</code></pre>
<p>このように一つのオブジェクト内に複数の行列が格納されたオブジェクトが生成されます。</p>
</div>
<div id="配列型データの操作" class="section level3" number="10.6.2">
<h3><span class="header-section-number">10.6.2</span> 配列型データの操作</h3>
<p>配列型データの操作は行列型に似ていますが、層というもう一つの次元があるため、<code>行列名[行番号, 列番号]</code>ではなく、<code>配列名[行番号, 列番号, 層番号]</code>を使います。たとえば、<code>Array1</code>の3番目の行列を抽出したい場合、<code>Array1[, , 3]</code>と入力します。</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="datastructure.html#cb539-1"></a>Array1[, , <span class="dv">3</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    2    2    8    5
## [2,]    4    5    3    8
## [3,]   10    5    3    9</code></pre>
<p>また、2番目の行列の3行目・1列目の要素を抽出するなら<code>Array1[3, 1, 2]</code>と入力します。</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="datastructure.html#cb541-1"></a>Array1[<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>配列型における操作の特徴の一つは全ての行列が同じ大きさを持つため、層を貫通した操作ができるという点です。たとえば、全ての層の2行目を抽出するなら、層番号を指定せず、行番号のみで抽出します。</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="datastructure.html#cb543-1"></a>Array1[<span class="dv">2</span>, , ]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    6    4    6
## [2,]    7   12    5    2
## [3,]    8    9    3    1
## [4,]    2   10    8    4</code></pre>
<p>ただ、返された結果は配列型でなく行列型であることに注意しましょう。たとえば、1番目の行列の2行目の要素は1, 7, 8, 2ですが、これは先ほど抽出された行列の1列目に該当します。また、2番目の行列の2行目の要素は6, 12, 9, 10であり、これは先ほどの抽出された行列の2列目となります。全層において特定の一列を抽出しても同じです。これは各層において抽出されたデータが行列でなく、ベクトルだからです。</p>
<p>一方、<strong>複数</strong>の行または列を抽出した場合、結果は配列型です。<code>Array1</code>の各層から1・2行目と1・2列目の要素、つまり大きさが2 <span class="math inline">\(\times\)</span> 2の行列を抽出してみましょう。</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="datastructure.html#cb545-1"></a>Array1[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    3    9
## [2,]    1    7
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    5    3
## [2,]    6   12
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    2    2
## [2,]    4    5
## 
## , , 4
## 
##      [,1] [,2]
## [1,]    9    8
## [2,]    6    2</code></pre>
<p>このように各層において抽出されたデータが行列だからです。自分の操作から得られた結果がどのようなデータ型・データ構造かを予め知っておくことで分析の効率が上がるでしょう。</p>
<p><strong>行列に名前を付けたい</strong></p>
<p>今回は各行列に1, 2, 3, 4という番号のみ割り当てましたが、実は行列に名前を付けることも可能です。そのためには配列データ作成時、<code>dimnames =</code>引数を指定する必要があります。</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="datastructure.html#cb547-1"></a>Array2 &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">c</span>(Mat1, Mat2, Mat3, Mat4), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>),</span>
<span id="cb547-2"><a href="datastructure.html#cb547-2"></a>                <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="ot">NULL</span>, </span>
<span id="cb547-3"><a href="datastructure.html#cb547-3"></a>                                <span class="ot">NULL</span>, </span>
<span id="cb547-4"><a href="datastructure.html#cb547-4"></a>                                <span class="kw">c</span>(<span class="st">&quot;M1&quot;</span>, <span class="st">&quot;M2&quot;</span>, <span class="st">&quot;M3&quot;</span>, <span class="st">&quot;M4&quot;</span>))</span>
<span id="cb547-5"><a href="datastructure.html#cb547-5"></a>                )</span></code></pre></div>
<p><code>dimnames =</code>引数は必ず長さ3のリスト型である必要があります。1番目と2番目の要素は行名と列名ですが、行列において一般的に使われないため、ここでは<code>NULL</code>にし、3番目の要素、つまり各層の名前だけを指定します。ここではそれぞれの層を<code>M1</code>、<code>M2</code>、<code>M3</code>、<code>M4</code>と名付けました。ここで<code>M4</code>のみを抽出する場合は、以下のように操作します。</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="datastructure.html#cb548-1"></a>Array2[, , <span class="st">&quot;M4&quot;</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    9    8    9    5
## [2,]    6    2    1    4
## [3,]    7    7    3   12</code></pre>
<p>むろん、これまでと同様、番号で抽出することも可能です。</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="datastructure.html#cb550-1"></a>Array2[, , <span class="dv">4</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    9    8    9    5
## [2,]    6    2    1    4
## [3,]    7    7    3   12</code></pre>
<hr />
</div>
</div>
<div id="structure-exercise" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> 練習問題</h2>
<p>リストと配列は要素の抽出が主な操作となるため、練習問題は掲載しておりません。</p>
<div id="ベクトル" class="section level3" number="10.7.1">
<h3><span class="header-section-number">10.7.1</span> ベクトル</h3>
<p><strong>問1</strong> 1から10までの公差1の等差数列 (1, 2, 3, …, 10)を作成し、<code>myVec1</code>と名付けよ。</p>
<p><strong>問2</strong> <code>myVec1</code>の長さを求めよ。</p>
<p><strong>問3</strong> <code>myVec1</code>から偶数のみを抽出せよ</p>
<p><strong>問4</strong> <code>myVec1</code>を<code>myVec2</code>という名でコピーし、<code>myVec2</code>の偶数を全て0に置換せよ。</p>
<p><strong>問5</strong> <code>myVec1</code>の全要素から1を引し、<code>myVec3</code>と名付けよ。</p>
<p><strong>問6</strong> <code>myVec1</code>の奇数番目の要素には1を、偶数番目の要素には2を足し、<code>myVec4</code>と名付けよ。</p>
<p><strong>問7</strong> <code>myVec4</code>から<code>myVec1</code>を引け。</p>
</div>
<div id="行列" class="section level3" number="10.7.2">
<h3><span class="header-section-number">10.7.2</span> 行列</h3>
<p><strong>問1</strong> 以下のような2つの行列を作成し、それぞれ<code>myMat1</code>、<code>myMat2</code>と名付けよ。</p>
<p><span class="math display">\[
\text{myMat1} = \left[
\begin{matrix} 
1 &amp; 2 &amp; 3 \\ 
4 &amp; 5 &amp; 6 
\end{matrix}
\right],
\text{myMat2} = \left[
\begin{matrix} 
1 &amp; 4 &amp; 7 \\ 
2 &amp; 5 &amp; 8 \\
3 &amp; 6 &amp; 9
\end{matrix}
\right]
\]</span></p>
<p><strong>問2</strong> <code>myMat1</code>と<code>myMat2</code>の掛け算を行い、<code>myMat3</code>と名付けよ。掛け算はアダマール積でなく、一般的な行列間の積を求めること。</p>
<p><strong>問3</strong> 以下のような連立方程式を解くケースを考える。</p>
<p><span class="math display">\[\begin{align}
3x -  y + 2z &amp; = 12, \\
 x + 2y + 3z &amp; = 11, \\
2x -  y -  z &amp; =  2.
\end{align}\]</span></p>
<ol style="list-style-type: decimal">
<li>以下のような2つの行列を作成し、それぞれ<code>myMat4</code>、<code>myMat5</code>と名付けよ。</li>
</ol>
<p><span class="math display">\[
\text{myMat4} = \left[
\begin{matrix} 
3 &amp; -1 &amp; 2 \\
1 &amp; 2 &amp; 3 \\
2 &amp; -1 &amp; -1
\end{matrix}
\right],
\text{myMat5} = \left[
\begin{matrix} 
12 \\
11 \\
2
\end{matrix}
\right]
\]</span></p>
<ol start="2" style="list-style-type: decimal">
<li><code>myMat4</code>の逆行列を求めよ。</li>
<li><code>myMat4</code>の逆行列と<code>myMat5</code>の積を求め、<code>myMat6</code>と名付けよ。
<ul>
<li>これが連立方程式の解である。</li>
</ul></li>
<li><code>myMat4</code>と<code>myMat6</code>の積を求めよ。</li>
</ol>
</div>
<div id="データフレーム" class="section level3" number="10.7.3">
<h3><span class="header-section-number">10.7.3</span> データフレーム</h3>
<p><strong>問1</strong> 以下のようなデータフレームを作成し、<code>myDF1</code>と名付けよ<a href="#fn48" class="footnote-ref" id="fnref48"><sup>48</sup></a>。</p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Rank
</th>
<th style="text-align:right;">
Socre
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Japan
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
1500
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Iran
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
1489
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
South Korea
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
1464
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
1457
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Qatar
</td>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
1396
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Saudi Arabia
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
1351
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Iraq
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
1344
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
UAE
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
1334
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
1323
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Syria
</td>
<td style="text-align:right;">
79
</td>
<td style="text-align:right;">
1314
</td>
</tr>
</tbody>
</table>
<p><strong>問2</strong> <code>myDF1</code>から<code>Name</code>列を抽出せよ。</p>
<p><strong>問3</strong> <code>myDF1</code>の<code>Name</code>列から3番目の要素を抽出せよ。</p>
<p><strong>問4</strong> <code>myDF1</code>の3行目を抽出せよ。</p>
<p><strong>問5</strong> <a href="Data/FIFA_Women.csv"><code>FIFA_Women.csv</code></a>をtibble型として読み込み、<code>myTbl1</code>と名付けよ<a href="#fn49" class="footnote-ref" id="fnref49"><sup>49</sup></a>。</p>
<p><strong>問6</strong> <code>myTbl1</code>の<code>Rank</code>列を抽出し、それぞれの要素が20より小さいかを判定せよ。</p>
<p><strong>問7</strong> <code>myTbl1</code>の<code>Rank</code>が20より小さい<strong>国名</strong>を抽出せよ。</p>
<p><strong>問8</strong> <code>myTbl1</code>からランキングが20より上位の<strong>行</strong>を抽出せよ。</p>

</div>
</div>
<div id="目次-2" class="section level2 unnumbered" number="">
<h2>目次</h2>
<p>この章で使うパッケージを読み込む。</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="datastructure.html#cb552-1"></a>pacman<span class="op">::</span><span class="kw">p_load</span>(tidyverse)</span></code></pre></div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="40">
<li id="fn40"><p>他にも要素ごとの積 (element-wise product)、シューア積 (Schur product)と呼ばれたりします。<a href="datastructure.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p>行列式が0でない場合において一次方程式には一組の解があります。<a href="datastructure.html#fnref41" class="footnote-back">↩︎</a></p></li>
<li id="fn42"><p>なぜなら2行目が1行目の0.5倍になっているからです。<a href="datastructure.html#fnref42" class="footnote-back">↩︎</a></p></li>
<li id="fn43"><p><code>NA</code>も可能です。<a href="datastructure.html#fnref43" class="footnote-back">↩︎</a></p></li>
<li id="fn44"><p><code>tibble</code>型を直接作成するには<code>tibble()</code>関数を使いますが、<code>data.frame()</code>と同じ使い方で問題ありません。他にも<code>tribble()</code>関数を使った方法もありますが、詳細は<code>?tribble</code>で確認してください。<a href="datastructure.html#fnref44" class="footnote-back">↩︎</a></p></li>
<li id="fn45"><p>厳密には国別ではありません。イギリスの場合、イングランド、スコットランド、北アイルランド、ウェールズがそれぞれ独立したチームとしてFIFAに加盟しています。<a href="datastructure.html#fnref45" class="footnote-back">↩︎</a></p></li>
<li id="fn46"><p><code>["要素名"]</code>で抽出することも可能ですが、この場合、返される結果はリスト型になります。<a href="datastructure.html#fnref46" class="footnote-back">↩︎</a></p></li>
<li id="fn47"><p>元々はベクトルを入力しますが、行列を<code>c()</code>で繋ぐと自動的にベクトルに変換されます。<a href="datastructure.html#fnref47" class="footnote-back">↩︎</a></p></li>
<li id="fn48"><p>2020年4月9日現在のFIFA男子サッカーランキングである。データはAFC (アジアサッカー連盟)所属の上位10カ国である。データ源は(<a href="https://www.fifa.com/fifa-world-ranking/ranking-table/men/rank/id12882/)である" class="uri">https://www.fifa.com/fifa-world-ranking/ranking-table/men/rank/id12882/)である</a> (アクセス日: 2020年4月11日)。<a href="datastructure.html#fnref48" class="footnote-back">↩︎</a></p></li>
<li id="fn49"><p>2020年3月27日現在のFIFA女子サッカーランキングである。データ源は(www.fifa.com/fifa-world-ranking/ranking-table/women/)である (アクセス日: 2020年4月11日)。それぞれの変数は<code>ID</code>: 国名のID (アルファベット順)、<code>Team</code>: チーム名、<code>Rank</code>: FIFAランキング、<code>Points</code>: 2020年3月27日のポイント、<code>Prev_Points</code>: 2019年12月13日のポイント、<code>Confederation</code>: 所属しているサッカー連盟である。<a href="datastructure.html#fnref49" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datatype.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R_Not_for_Everyone.pdf", "R_Not_for_Everyone.epub"],
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
