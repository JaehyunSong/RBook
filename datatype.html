<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7. データの型 | 私たちのR: あなたのために書いたわけじゃない</title>
  <meta name="description" content="R Not for Everyone: It’s not for you." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="7. データの型 | 私たちのR: あなたのために書いたわけじゃない" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Not for Everyone: It’s not for you." />
  <meta name="github-repo" content="JaehyunSong/RBook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7. データの型 | 私たちのR: あなたのために書いたわけじゃない" />
  
  <meta name="twitter:description" content="R Not for Everyone: It’s not for you." />
  

<meta name="author" content="宋財泫 (Jaehyun Song)・矢内勇生 (Yuki Yanai)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="HTML/apple-favicon.png" />
  <link rel="shortcut icon" href="HTML/favicon.png" type="image/x-icon" />
<link rel="prev" href="rbasic.html"/>
<link rel="next" href="datastructure.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165592410-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-165592410-1');
  gtag('set', {'user_id': 'USER_ID'}); 
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="HTML/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">私たちのR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 紹介</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-purpose"><i class="fa fa-check"></i><b>1.1</b> 本書の目的と対象</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-author"><i class="fa fa-check"></i><b>1.2</b> 著者たち</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-toc"><i class="fa fa-check"></i><b>1.3</b> 本書の構成</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-download"><i class="fa fa-check"></i><b>1.4</b> データのダウンロード</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#about-copyright"><i class="fa fa-check"></i><b>1.5</b> 著作権</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aboutR.html"><a href="aboutR.html"><i class="fa fa-check"></i><b>2</b> R?</a><ul>
<li class="chapter" data-level="2.1" data-path="aboutR.html"><a href="aboutR.html#WhatIsR"><i class="fa fa-check"></i><b>2.1</b> Rとは</a></li>
<li class="chapter" data-level="2.2" data-path="aboutR.html"><a href="aboutR.html#WhyR"><i class="fa fa-check"></i><b>2.2</b> Why R?</a></li>
<li class="chapter" data-level="2.3" data-path="aboutR.html"><a href="aboutR.html#GUI_IDE"><i class="fa fa-check"></i><b>2.3</b> GUIとIDE</a><ul>
<li class="chapter" data-level="2.3.1" data-path="aboutR.html"><a href="aboutR.html#gui"><i class="fa fa-check"></i><b>2.3.1</b> GUI</a></li>
<li class="chapter" data-level="2.3.2" data-path="aboutR.html"><a href="aboutR.html#aboutR-IDE"><i class="fa fa-check"></i><b>2.3.2</b> IDE</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Rのインストール</a><ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#install-R"><i class="fa fa-check"></i><b>3.1</b> Rのインストール</a><ul>
<li class="chapter" data-level="3.1.1" data-path="installation.html"><a href="installation.html#macosの場合"><i class="fa fa-check"></i><b>3.1.1</b> macOSの場合</a></li>
<li class="chapter" data-level="3.1.2" data-path="installation.html"><a href="installation.html#linuxの場合"><i class="fa fa-check"></i><b>3.1.2</b> Linuxの場合</a></li>
<li class="chapter" data-level="3.1.3" data-path="installation.html"><a href="installation.html#windowsの場合"><i class="fa fa-check"></i><b>3.1.3</b> Windowsの場合</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="installation.html"><a href="installation.html#rbasic-profile"><i class="fa fa-check"></i><b>3.2</b> .Rprofileの設定</a></li>
<li class="chapter" data-level="3.3" data-path="installation.html"><a href="installation.html#install-rstudio"><i class="fa fa-check"></i><b>3.3</b> RStudio</a><ul>
<li class="chapter" data-level="3.3.1" data-path="installation.html"><a href="installation.html#rstudioのインストール"><i class="fa fa-check"></i><b>3.3.1</b> RStudioのインストール</a></li>
<li class="chapter" data-level="3.3.2" data-path="installation.html"><a href="installation.html#rstudioの起動と設定"><i class="fa fa-check"></i><b>3.3.2</b> RStudioの起動と設定</a></li>
<li class="chapter" data-level="3.3.3" data-path="installation.html"><a href="installation.html#rstudioの設定"><i class="fa fa-check"></i><b>3.3.3</b> RStudioの設定</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="installation.html"><a href="installation.html#install-package"><i class="fa fa-check"></i><b>3.4</b> パッケージのインストール</a><ul>
<li class="chapter" data-level="3.4.1" data-path="installation.html"><a href="installation.html#パッケージのインストール"><i class="fa fa-check"></i><b>3.4.1</b> パッケージのインストール</a></li>
<li class="chapter" data-level="3.4.2" data-path="installation.html"><a href="installation.html#パッケージの読み込み"><i class="fa fa-check"></i><b>3.4.2</b> パッケージの読み込み</a></li>
<li class="chapter" data-level="3.4.3" data-path="installation.html"><a href="installation.html#必須パッケージのインストール"><i class="fa fa-check"></i><b>3.4.3</b> 必須パッケージのインストール</a></li>
<li class="chapter" data-level="3.4.4" data-path="installation.html"><a href="installation.html#パッケージのインストールが出来ない場合-ubuntu"><i class="fa fa-check"></i><b>3.4.4</b> パッケージのインストールが出来ない場合 (Ubuntu)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ide.html"><a href="ide.html"><i class="fa fa-check"></i><b>4</b> IDEの導入</a><ul>
<li class="chapter" data-level="4.1" data-path="ide.html"><a href="ide.html#ide-install"><i class="fa fa-check"></i><b>4.1</b> RStudioのインストールと起動</a><ul>
<li class="chapter" data-level="4.1.1" data-path="installation.html"><a href="installation.html#macosの場合"><i class="fa fa-check"></i><b>4.1.1</b> macOSの場合</a></li>
<li class="chapter" data-level="4.1.2" data-path="ide.html"><a href="ide.html#linux-ubuntuの場合"><i class="fa fa-check"></i><b>4.1.2</b> Linux (Ubuntu)の場合</a></li>
<li class="chapter" data-level="4.1.3" data-path="installation.html"><a href="installation.html#windowsの場合"><i class="fa fa-check"></i><b>4.1.3</b> Windowsの場合</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ide.html"><a href="ide.html#ide-setting"><i class="fa fa-check"></i><b>4.2</b> RStudioの設定</a><ul>
<li class="chapter" data-level="4.2.1" data-path="ide.html"><a href="ide.html#設定画面の開き方"><i class="fa fa-check"></i><b>4.2.1</b> 設定画面の開き方</a></li>
<li class="chapter" data-level="4.2.2" data-path="ide.html"><a href="ide.html#私たちのrstudio"><i class="fa fa-check"></i><b>4.2.2</b> 私たちのRStudio</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ide.html"><a href="ide.html#rstudio-cloudについて"><i class="fa fa-check"></i><b>4.3</b> RStudio Cloudについて</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="process.html"><a href="process.html"><i class="fa fa-check"></i><b>5</b> 分析の手順</a></li>
<li class="chapter" data-level="6" data-path="rbasic.html"><a href="rbasic.html"><i class="fa fa-check"></i><b>6</b> 基本的な操作</a><ul>
<li class="chapter" data-level="6.1" data-path="rbasic.html"><a href="rbasic.html#rbasic-project"><i class="fa fa-check"></i><b>6.1</b> 「プロジェクト」のすゝめ</a></li>
<li class="chapter" data-level="6.2" data-path="rbasic.html"><a href="rbasic.html#rbasic-calc"><i class="fa fa-check"></i><b>6.2</b> 電卓としてのR</a><ul>
<li class="chapter" data-level="6.2.1" data-path="rbasic.html"><a href="rbasic.html#算術演算子"><i class="fa fa-check"></i><b>6.2.1</b> 算術演算子</a></li>
<li class="chapter" data-level="6.2.2" data-path="rbasic.html"><a href="rbasic.html#論理演算子"><i class="fa fa-check"></i><b>6.2.2</b> 論理演算子</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rbasic.html"><a href="rbasic.html#rbasic-input"><i class="fa fa-check"></i><b>6.3</b> 格納（代入）</a></li>
<li class="chapter" data-level="6.4" data-path="rbasic.html"><a href="rbasic.html#rbasic-extract"><i class="fa fa-check"></i><b>6.4</b> 要素の抽出</a></li>
<li class="chapter" data-level="6.5" data-path="rbasic.html"><a href="rbasic.html#rbasic-read"><i class="fa fa-check"></i><b>6.5</b> データの読み込み</a><ul>
<li class="chapter" data-level="6.5.1" data-path="rbasic.html"><a href="rbasic.html#csvファイルの場合"><i class="fa fa-check"></i><b>6.5.1</b> csvファイルの場合</a></li>
<li class="chapter" data-level="6.5.2" data-path="rbasic.html"><a href="rbasic.html#その他のフォーマット"><i class="fa fa-check"></i><b>6.5.2</b> その他のフォーマット</a></li>
<li class="chapter" data-level="6.5.3" data-path="rbasic.html"><a href="rbasic.html#rdataファイルの場合"><i class="fa fa-check"></i><b>6.5.3</b> RDataファイルの場合</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="rbasic.html"><a href="rbasic.html#rbasic-export"><i class="fa fa-check"></i><b>6.6</b> データの書き出し</a><ul>
<li class="chapter" data-level="6.6.1" data-path="rbasic.html"><a href="rbasic.html#csvファイル"><i class="fa fa-check"></i><b>6.6.1</b> csvファイル</a></li>
<li class="chapter" data-level="6.6.2" data-path="rbasic.html"><a href="rbasic.html#rdataファイル"><i class="fa fa-check"></i><b>6.6.2</b> RDataファイル</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rbasic.html"><a href="rbasic.html#rbasic-exercise"><i class="fa fa-check"></i><b>6.7</b> 演習問題</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="datatype.html"><a href="datatype.html"><i class="fa fa-check"></i><b>7</b> データの型</a><ul>
<li class="chapter" data-level="7.1" data-path="datatype.html"><a href="datatype.html#WhatIsDatatype"><i class="fa fa-check"></i><b>7.1</b> データ型とは</a></li>
<li class="chapter" data-level="7.2" data-path="datatype.html"><a href="datatype.html#type-logical"><i class="fa fa-check"></i><b>7.2</b> Logical</a></li>
<li class="chapter" data-level="7.3" data-path="datatype.html"><a href="datatype.html#type-numeric"><i class="fa fa-check"></i><b>7.3</b> Numeric</a></li>
<li class="chapter" data-level="7.4" data-path="datatype.html"><a href="datatype.html#type-complex"><i class="fa fa-check"></i><b>7.4</b> Complex</a></li>
<li class="chapter" data-level="7.5" data-path="datatype.html"><a href="datatype.html#type-character"><i class="fa fa-check"></i><b>7.5</b> Character</a></li>
<li class="chapter" data-level="7.6" data-path="datatype.html"><a href="datatype.html#type-factor"><i class="fa fa-check"></i><b>7.6</b> Factor</a></li>
<li class="chapter" data-level="7.7" data-path="datatype.html"><a href="datatype.html#type-date"><i class="fa fa-check"></i><b>7.7</b> Date</a><ul>
<li class="chapter" data-level="7.7.1" data-path="datatype.html"><a href="datatype.html#なぜdate型があるのか"><i class="fa fa-check"></i><b>7.7.1</b> なぜDate型があるのか</a></li>
<li class="chapter" data-level="7.7.2" data-path="datatype.html"><a href="datatype.html#date型の作り方"><i class="fa fa-check"></i><b>7.7.2</b> Date型の作り方</a></li>
<li class="chapter" data-level="7.7.3" data-path="datatype.html"><a href="datatype.html#posixctposixlt型について"><i class="fa fa-check"></i><b>7.7.3</b> POSIXct、POSIXlt型について</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="datatype.html"><a href="datatype.html#type-na"><i class="fa fa-check"></i><b>7.8</b> NA</a></li>
<li class="chapter" data-level="7.9" data-path="datatype.html"><a href="datatype.html#type-null"><i class="fa fa-check"></i><b>7.9</b> NULL</a></li>
<li class="chapter" data-level="7.10" data-path="datatype.html"><a href="datatype.html#type-nan"><i class="fa fa-check"></i><b>7.10</b> NaN</a></li>
<li class="chapter" data-level="7.11" data-path="datatype.html"><a href="datatype.html#type-inf"><i class="fa fa-check"></i><b>7.11</b> Inf</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="datastructure.html"><a href="datastructure.html"><i class="fa fa-check"></i><b>8</b> データの構造</a><ul>
<li class="chapter" data-level="8.1" data-path="datastructure.html"><a href="datastructure.html#WhatIsDatastructure"><i class="fa fa-check"></i><b>8.1</b> データ構造とは</a></li>
<li class="chapter" data-level="8.2" data-path="datastructure.html"><a href="datastructure.html#structure-vector"><i class="fa fa-check"></i><b>8.2</b> ベクトル (vector)</a><ul>
<li class="chapter" data-level="8.2.1" data-path="datastructure.html"><a href="datastructure.html#ベクトルの作り方"><i class="fa fa-check"></i><b>8.2.1</b> ベクトルの作り方</a></li>
<li class="chapter" data-level="8.2.2" data-path="datastructure.html"><a href="datastructure.html#ベクトルの操作"><i class="fa fa-check"></i><b>8.2.2</b> ベクトルの操作</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="datastructure.html"><a href="datastructure.html#structure-matrix"><i class="fa fa-check"></i><b>8.3</b> 行列 (matrix)</a><ul>
<li class="chapter" data-level="8.3.1" data-path="datastructure.html"><a href="datastructure.html#行列の作り方"><i class="fa fa-check"></i><b>8.3.1</b> 行列の作り方</a></li>
<li class="chapter" data-level="8.3.2" data-path="datastructure.html"><a href="datastructure.html#行列の操作"><i class="fa fa-check"></i><b>8.3.2</b> 行列の操作</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="datastructure.html"><a href="datastructure.html#structure-dataframe"><i class="fa fa-check"></i><b>8.4</b> データフレーム (data.frame)</a><ul>
<li class="chapter" data-level="8.4.1" data-path="datastructure.html"><a href="datastructure.html#データフレームの作成"><i class="fa fa-check"></i><b>8.4.1</b> データフレームの作成</a></li>
<li class="chapter" data-level="8.4.2" data-path="datastructure.html"><a href="datastructure.html#データフレームの操作"><i class="fa fa-check"></i><b>8.4.2</b> データフレームの操作</a></li>
<li class="chapter" data-level="8.4.3" data-path="datastructure.html"><a href="datastructure.html#tibble型"><i class="fa fa-check"></i><b>8.4.3</b> tibble型</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="datastructure.html"><a href="datastructure.html#structure-list"><i class="fa fa-check"></i><b>8.5</b> リスト (list)</a><ul>
<li class="chapter" data-level="8.5.1" data-path="datastructure.html"><a href="datastructure.html#リスト型データの作成"><i class="fa fa-check"></i><b>8.5.1</b> リスト型データの作成</a></li>
<li class="chapter" data-level="8.5.2" data-path="datastructure.html"><a href="datastructure.html#リスト型データの操作"><i class="fa fa-check"></i><b>8.5.2</b> リスト型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="datastructure.html"><a href="datastructure.html#structure-array"><i class="fa fa-check"></i><b>8.6</b> 配列 (array)</a><ul>
<li class="chapter" data-level="8.6.1" data-path="datastructure.html"><a href="datastructure.html#配列型データの作成"><i class="fa fa-check"></i><b>8.6.1</b> 配列型データの作成</a></li>
<li class="chapter" data-level="8.6.2" data-path="datastructure.html"><a href="datastructure.html#配列型データの操作"><i class="fa fa-check"></i><b>8.6.2</b> 配列型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="datastructure.html"><a href="datastructure.html#structure-exercise"><i class="fa fa-check"></i><b>8.7</b> 練習問題</a><ul>
<li class="chapter" data-level="8.7.1" data-path="datastructure.html"><a href="datastructure.html#ベクトル"><i class="fa fa-check"></i><b>8.7.1</b> ベクトル</a></li>
<li class="chapter" data-level="8.7.2" data-path="datastructure.html"><a href="datastructure.html#行列"><i class="fa fa-check"></i><b>8.7.2</b> 行列</a></li>
<li class="chapter" data-level="8.7.3" data-path="datastructure.html"><a href="datastructure.html#データフレーム"><i class="fa fa-check"></i><b>8.7.3</b> データフレーム</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>9</b> Rプログラミングの基礎</a><ul>
<li class="chapter" data-level="9.1" data-path="programming.html"><a href="programming.html#programming-intro"><i class="fa fa-check"></i><b>9.1</b> R言語の基礎概念</a></li>
<li class="chapter" data-level="9.2" data-path="programming.html"><a href="programming.html#programming-style"><i class="fa fa-check"></i><b>9.2</b> スクリプトの書き方</a><ul>
<li class="chapter" data-level="9.2.1" data-path="programming.html"><a href="programming.html#オブジェクト名"><i class="fa fa-check"></i><b>9.2.1</b> オブジェクト名</a></li>
<li class="chapter" data-level="9.2.2" data-path="programming.html"><a href="programming.html#改行"><i class="fa fa-check"></i><b>9.2.2</b> 改行</a></li>
<li class="chapter" data-level="9.2.3" data-path="programming.html"><a href="programming.html#スペースとインデント"><i class="fa fa-check"></i><b>9.2.3</b> スペースとインデント</a></li>
<li class="chapter" data-level="9.2.4" data-path="programming.html"><a href="programming.html#代入"><i class="fa fa-check"></i><b>9.2.4</b> 代入</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="programming.html"><a href="programming.html#programming-iteration"><i class="fa fa-check"></i><b>9.3</b> 反復</a><ul>
<li class="chapter" data-level="9.3.1" data-path="programming.html"><a href="programming.html#forによる反復"><i class="fa fa-check"></i><b>9.3.1</b> <code>for()</code>による反復</a></li>
<li class="chapter" data-level="9.3.2" data-path="programming.html"><a href="programming.html#whileによる反復"><i class="fa fa-check"></i><b>9.3.2</b> <code>while()</code>による反復</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="programming.html"><a href="programming.html#programming-condition"><i class="fa fa-check"></i><b>9.4</b> 条件分岐</a><ul>
<li class="chapter" data-level="9.4.1" data-path="programming.html"><a href="programming.html#ifelse-ifelseによる条件分岐"><i class="fa fa-check"></i><b>9.4.1</b> <code>if()</code>、<code>else if()</code>、<code>else()</code>による条件分岐</a></li>
<li class="chapter" data-level="9.4.2" data-path="programming.html"><a href="programming.html#ifelseによる条件分岐"><i class="fa fa-check"></i><b>9.4.2</b> <code>ifelse()</code>による条件分岐</a></li>
<li class="chapter" data-level="9.4.3" data-path="programming.html"><a href="programming.html#switchによる条件分岐"><i class="fa fa-check"></i><b>9.4.3</b> <code>switch()</code>による条件分岐</a></li>
<li class="chapter" data-level="9.4.4" data-path="programming.html"><a href="programming.html#上級者向け"><i class="fa fa-check"></i><b>9.4.4</b> 上級者向け</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="programming.html"><a href="programming.html#programming-function"><i class="fa fa-check"></i><b>9.5</b> 関数の作成</a><ul>
<li class="chapter" data-level="9.5.1" data-path="programming.html"><a href="programming.html#関数-in-関数"><i class="fa fa-check"></i><b>9.5.1</b> 関数 in 関数</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="programming.html"><a href="programming.html#programming-exercise"><i class="fa fa-check"></i><b>9.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datahandling1.html"><a href="datahandling1.html"><i class="fa fa-check"></i><b>10</b> データハンドリング [基礎編: 抽出]</a><ul>
<li class="chapter" data-level="10.1" data-path="datahandling1.html"><a href="datahandling1.html#handling1-intro"><i class="fa fa-check"></i><b>10.1</b> データハンドリングとtidyverse</a></li>
<li class="chapter" data-level="10.2" data-path="datahandling1.html"><a href="datahandling1.html#handling1-pipe"><i class="fa fa-check"></i><b>10.2</b> パイプ演算子 (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="10.3" data-path="datahandling1.html"><a href="datahandling1.html#handling1-select"><i class="fa fa-check"></i><b>10.3</b> 列の抽出</a><ul>
<li class="chapter" data-level="10.3.1" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出する"><i class="fa fa-check"></i><b>10.3.1</b> 特定の列を抽出する</a></li>
<li class="chapter" data-level="10.3.2" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出し列名を変更する"><i class="fa fa-check"></i><b>10.3.2</b> 特定の列を抽出し、列名を変更する</a></li>
<li class="chapter" data-level="10.3.3" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を除外する"><i class="fa fa-check"></i><b>10.3.3</b> 特定の列を除外する</a></li>
<li class="chapter" data-level="10.3.4" data-path="datahandling1.html"><a href="datahandling1.html#隣接した列を指定する"><i class="fa fa-check"></i><b>10.3.4</b> 隣接した列を指定する</a></li>
<li class="chapter" data-level="10.3.5" data-path="datahandling1.html"><a href="datahandling1.html#一部の列の順番だけを変える"><i class="fa fa-check"></i><b>10.3.5</b> 一部の列の順番だけを変える</a></li>
<li class="chapter" data-level="10.3.6" data-path="datahandling1.html"><a href="datahandling1.html#selectの便利な機能"><i class="fa fa-check"></i><b>10.3.6</b> <code>select()</code>の便利な機能</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="datahandling1.html"><a href="datahandling1.html#handling1-filter"><i class="fa fa-check"></i><b>10.4</b> 行の抽出</a><ul>
<li class="chapter" data-level="10.4.1" data-path="datahandling1.html"><a href="datahandling1.html#指定した行を抽出する"><i class="fa fa-check"></i><b>10.4.1</b> 指定した行を抽出する</a></li>
<li class="chapter" data-level="10.4.2" data-path="datahandling1.html"><a href="datahandling1.html#条件に合致する行を抽出する"><i class="fa fa-check"></i><b>10.4.2</b> 条件に合致する行を抽出する</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="datahandling1.html"><a href="datahandling1.html#handling1-arrange"><i class="fa fa-check"></i><b>10.5</b> 行のソート</a></li>
<li class="chapter" data-level="10.6" data-path="datahandling1.html"><a href="datahandling1.html#handling1-exercise"><i class="fa fa-check"></i><b>10.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="datahandling2.html"><a href="datahandling2.html"><i class="fa fa-check"></i><b>11</b> データハンドリング [基礎編: 拡張]</a><ul>
<li class="chapter" data-level="11.1" data-path="datahandling2.html"><a href="datahandling2.html#handling2-summarise"><i class="fa fa-check"></i><b>11.1</b> 記述統計量の計算</a><ul>
<li class="chapter" data-level="11.1.1" data-path="datahandling2.html"><a href="datahandling2.html#summariseによる記述統計量の計算"><i class="fa fa-check"></i><b>11.1.1</b> <code>summarise()</code>による記述統計量の計算</a></li>
<li class="chapter" data-level="11.1.2" data-path="datahandling2.html"><a href="datahandling2.html#summariseに使える便利な関数"><i class="fa fa-check"></i><b>11.1.2</b> <code>summarise()</code>に使える便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="datahandling2.html"><a href="datahandling2.html#handling2-group"><i class="fa fa-check"></i><b>11.2</b> グルーピング</a><ul>
<li class="chapter" data-level="11.2.1" data-path="datahandling2.html"><a href="datahandling2.html#group_byによるグループ化"><i class="fa fa-check"></i><b>11.2.1</b> <code>group_by()</code>によるグループ化</a></li>
<li class="chapter" data-level="11.2.2" data-path="datahandling2.html"><a href="datahandling2.html#複数の変数を用いたグループ化"><i class="fa fa-check"></i><b>11.2.2</b> 複数の変数を用いたグループ化</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="datahandling2.html"><a href="datahandling2.html#handling2-mutate"><i class="fa fa-check"></i><b>11.3</b> 変数の計算</a><ul>
<li class="chapter" data-level="11.3.1" data-path="datahandling2.html"><a href="datahandling2.html#mutate関数の使い方"><i class="fa fa-check"></i><b>11.3.1</b> <code>mutate()</code>関数の使い方</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="datahandling2.html"><a href="datahandling2.html#handling2-rowwise"><i class="fa fa-check"></i><b>11.4</b> 行単位の操作</a></li>
<li class="chapter" data-level="11.5" data-path="datahandling2.html"><a href="datahandling2.html#handling2-merge"><i class="fa fa-check"></i><b>11.5</b> データの結合</a><ul>
<li class="chapter" data-level="11.5.1" data-path="datahandling2.html"><a href="datahandling2.html#行の結合"><i class="fa fa-check"></i><b>11.5.1</b> 行の結合</a></li>
<li class="chapter" data-level="11.5.2" data-path="datahandling2.html"><a href="datahandling2.html#列の結合"><i class="fa fa-check"></i><b>11.5.2</b> 列の結合</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="datahandling2.html"><a href="datahandling2.html#handling2-exercise"><i class="fa fa-check"></i><b>11.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>12</b> データハンドリング [基礎編: factor型]</a><ul>
<li class="chapter" data-level="12.1" data-path="factor.html"><a href="factor.html#名目変数を含むグラフを作成する際の注意点"><i class="fa fa-check"></i><b>12.1</b> 名目変数を含むグラフを作成する際の注意点</a></li>
<li class="chapter" data-level="12.2" data-path="factor.html"><a href="factor.html#forcatsパッケージについて"><i class="fa fa-check"></i><b>12.2</b> <code>forcats</code>パッケージについて</a><ul>
<li class="chapter" data-level="12.2.1" data-path="factor.html"><a href="factor.html#fct_relevel-水準の順番を変更する"><i class="fa fa-check"></i><b>12.2.1</b> <code>fct_relevel()</code>: 水準の順番を変更する</a></li>
<li class="chapter" data-level="12.2.2" data-path="factor.html"><a href="factor.html#fct_recode-水準のラベルを変更する"><i class="fa fa-check"></i><b>12.2.2</b> <code>fct_recode()</code>: 水準のラベルを変更する</a></li>
<li class="chapter" data-level="12.2.3" data-path="factor.html"><a href="factor.html#fct_rev-水準の順番を反転させる"><i class="fa fa-check"></i><b>12.2.3</b> <code>fct_rev()</code>: 水準の順番を反転させる</a></li>
<li class="chapter" data-level="12.2.4" data-path="factor.html"><a href="factor.html#fct_infreq-頻度順に順番を変更する"><i class="fa fa-check"></i><b>12.2.4</b> <code>fct_infreq()</code>: 頻度順に順番を変更する</a></li>
<li class="chapter" data-level="12.2.5" data-path="factor.html"><a href="factor.html#fct_inorder-データ内の出現順番に順番を変更する"><i class="fa fa-check"></i><b>12.2.5</b> <code>fct_inorder()</code>: データ内の出現順番に順番を変更する</a></li>
<li class="chapter" data-level="12.2.6" data-path="factor.html"><a href="factor.html#fct_shift-水準の順番をずらす"><i class="fa fa-check"></i><b>12.2.6</b> <code>fct_shift()</code>: 水準の順番をずらす</a></li>
<li class="chapter" data-level="12.2.7" data-path="factor.html"><a href="factor.html#fct_shuffle-水準の順番をランダム化する"><i class="fa fa-check"></i><b>12.2.7</b> <code>fct_shuffle()</code>: 水準の順番をランダム化する</a></li>
<li class="chapter" data-level="12.2.8" data-path="factor.html"><a href="factor.html#fct_reorder-別の1変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>12.2.8</b> <code>fct_reorder()</code>: 別の1変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="12.2.9" data-path="factor.html"><a href="factor.html#fct_reorder2-別の2変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>12.2.9</b> <code>fct_reorder2()</code>: 別の2変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="12.2.10" data-path="factor.html"><a href="factor.html#fct_collapse-水準を統合する"><i class="fa fa-check"></i><b>12.2.10</b> <code>fct_collapse()</code>: 水準を統合する</a></li>
<li class="chapter" data-level="12.2.11" data-path="factor.html"><a href="factor.html#fct_drop-使われていない水準を除去する"><i class="fa fa-check"></i><b>12.2.11</b> <code>fct_drop()</code>: 使われていない水準を除去する</a></li>
<li class="chapter" data-level="12.2.12" data-path="factor.html"><a href="factor.html#fct_expand-水準を追加する"><i class="fa fa-check"></i><b>12.2.12</b> <code>fct_expand()</code>: 水準を追加する</a></li>
<li class="chapter" data-level="12.2.13" data-path="factor.html"><a href="factor.html#fct_explicit_na-欠損値に水準を与える"><i class="fa fa-check"></i><b>12.2.13</b> <code>fct_explicit_na()</code>: 欠損値に水準を与える</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="factor.html"><a href="factor.html#factor-excersie"><i class="fa fa-check"></i><b>12.3</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>13</b> 可視化</a><ul>
<li class="chapter" data-level="13.1" data-path="visualization.html"><a href="visualization.html#visual-packages"><i class="fa fa-check"></i><b>13.1</b> 可視化のためのパッケージ</a></li>
<li class="chapter" data-level="13.2" data-path="visualization.html"><a href="visualization.html#visual-principal"><i class="fa fa-check"></i><b>13.2</b> 良いグラフとは</a></li>
<li class="chapter" data-level="13.3" data-path="visualization.html"><a href="visualization.html#visual-ggplot"><i class="fa fa-check"></i><b>13.3</b> グラフィックの文法</a></li>
<li class="chapter" data-level="13.4" data-path="visualization.html"><a href="visualization.html#visual-data"><i class="fa fa-check"></i><b>13.4</b> 実習用データ</a></li>
<li class="chapter" data-level="13.5" data-path="visualization.html"><a href="visualization.html#visual-barplot"><i class="fa fa-check"></i><b>13.5</b> 棒グラフ</a><ul>
<li class="chapter" data-level="13.5.1" data-path="visualization.html"><a href="visualization.html#ケース数の棒グラフ"><i class="fa fa-check"></i><b>13.5.1</b> ケース数の棒グラフ</a></li>
<li class="chapter" data-level="13.5.2" data-path="visualization.html"><a href="visualization.html#記述統計量のグラフ"><i class="fa fa-check"></i><b>13.5.2</b> 記述統計量のグラフ</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="visualization.html"><a href="visualization.html#visual-histogram"><i class="fa fa-check"></i><b>13.6</b> ヒストグラム</a></li>
<li class="chapter" data-level="13.7" data-path="visualization.html"><a href="visualization.html#visual-scatter"><i class="fa fa-check"></i><b>13.7</b> 散布図</a></li>
<li class="chapter" data-level="13.8" data-path="visualization.html"><a href="visualization.html#visual-customize"><i class="fa fa-check"></i><b>13.8</b> 図のカスタマイズ</a><ul>
<li class="chapter" data-level="13.8.1" data-path="visualization.html"><a href="visualization.html#ラベルの位置を変更する"><i class="fa fa-check"></i><b>13.8.1</b> ラベルの位置を変更する</a></li>
<li class="chapter" data-level="13.8.2" data-path="visualization.html"><a href="visualization.html#グループごとに異なるプロットとして出力したい"><i class="fa fa-check"></i><b>13.8.2</b> グループごとに異なるプロットとして出力したい</a></li>
<li class="chapter" data-level="13.8.3" data-path="visualization.html"><a href="visualization.html#section"><i class="fa fa-check"></i><b>13.8.3</b> </a></li>
<li class="chapter" data-level="13.8.4" data-path="visualization.html"><a href="visualization.html#複数のグラフを一つにまとめたい"><i class="fa fa-check"></i><b>13.8.4</b> 複数のグラフを一つにまとめたい</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="visualization.html"><a href="visualization.html#visual-excersie"><i class="fa fa-check"></i><b>13.9</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>14</b> 簡潔データ構造</a><ul>
<li class="chapter" data-level="14.1" data-path="tidydata.html"><a href="tidydata.html#tidydata-intro"><i class="fa fa-check"></i><b>14.1</b> 簡潔データ (tidy data)とは</a></li>
<li class="chapter" data-level="14.2" data-path="tidydata.html"><a href="tidydata.html#tidydata-merge"><i class="fa fa-check"></i><b>14.2</b> データの結合</a></li>
<li class="chapter" data-level="14.3" data-path="tidydata.html"><a href="tidydata.html#tidydata-gather"><i class="fa fa-check"></i><b>14.3</b> Wide型からLong型へ</a></li>
<li class="chapter" data-level="14.4" data-path="tidydata.html"><a href="tidydata.html#tidydata-spread"><i class="fa fa-check"></i><b>14.4</b> Long型からWide型へ</a></li>
<li class="chapter" data-level="14.5" data-path="tidydata.html"><a href="tidydata.html#tidydata-separate"><i class="fa fa-check"></i><b>14.5</b> 列の分割</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="datahandling3.html"><a href="datahandling3.html"><i class="fa fa-check"></i><b>15</b> データハンドリング[応用編]</a></li>
<li class="chapter" data-level="16" data-path="string.html"><a href="string.html"><i class="fa fa-check"></i><b>16</b> 文字列の処理</a></li>
<li class="chapter" data-level="17" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>17</b> スクレイピング</a></li>
<li class="chapter" data-level="18" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>18</b> R Markdown</a><ul>
<li class="chapter" data-level="18.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-intro"><i class="fa fa-check"></i><b>18.1</b> R Markdown</a></li>
<li class="chapter" data-level="18.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-grammar"><i class="fa fa-check"></i><b>18.2</b> Markdown文法の基本</a></li>
<li class="chapter" data-level="18.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-chunk"><i class="fa fa-check"></i><b>18.3</b> チャンクのオプション</a></li>
<li class="chapter" data-level="18.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-header"><i class="fa fa-check"></i><b>18.4</b> ヘッダーのオプション</a></li>
<li class="chapter" data-level="18.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-japanese"><i class="fa fa-check"></i><b>18.5</b> 日本語が含まれているPDFの出力</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>19</b> 演習問題の回答</a><ul>
<li class="chapter" data-level="19.1" data-path="solution.html"><a href="solution.html#solution-rbasic"><i class="fa fa-check"></i><b>19.1</b> 基本的な操作</a></li>
<li class="chapter" data-level="19.2" data-path="solution.html"><a href="solution.html#solution-datastructure"><i class="fa fa-check"></i><b>19.2</b> データの構造</a><ul>
<li class="chapter" data-level="19.2.1" data-path="datastructure.html"><a href="datastructure.html#ベクトル"><i class="fa fa-check"></i><b>19.2.1</b> ベクトル</a></li>
<li class="chapter" data-level="19.2.2" data-path="datastructure.html"><a href="datastructure.html#行列"><i class="fa fa-check"></i><b>19.2.2</b> 行列</a></li>
<li class="chapter" data-level="19.2.3" data-path="datastructure.html"><a href="datastructure.html#データフレーム"><i class="fa fa-check"></i><b>19.2.3</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="solution.html"><a href="solution.html#rプログラミングの基礎"><i class="fa fa-check"></i><b>19.3</b> Rプログラミングの基礎</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>20</b> 本書の執筆環境</a></li>
<li class="chapter" data-level="21" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>21</b> 参考資料</a></li>
<li class="divider"></li>
<p style = "text-align:center;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></p>
<p style = "text-align:center;"><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">私たちのR: あなたのために書いたわけじゃない</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datatype" class="section level1">
<h1><span class="header-section-number">7.</span> データの型</h1>
<h2>
目次
</h2>
<ul>
<li>第<a href="datatype.html#WhatIsDatatype">7.1</a>章: データ型とは</li>
<li>第<a href="datatype.html#type-logical">7.2</a>章: Logical型</li>
<li>第<a href="datatype.html#type-numeric">7.3</a>章: Numeric型</li>
<li>第<a href="datatype.html#type-complex">7.4</a>章: Complex型</li>
<li>第<a href="datatype.html#type-character">7.5</a>章: Character型</li>
<li>第<a href="datatype.html#type-factor">7.6</a>章: Factor型</li>
<li>第<a href="datatype.html#type-date">7.7</a>章: Date型</li>
<li>第<a href="datatype.html#type-na">7.8</a>章: NA型</li>
<li>第<a href="datatype.html#type-null">7.9</a>章: NULL型</li>
<li>第<a href="datatype.html#type-nan">7.10</a>章: NaN型</li>
<li>第<a href="datatype.html#type-inf">7.11</a>章: Inf型</li>
</ul>
<div id="WhatIsDatatype" class="section level2">
<h2><span class="header-section-number">7.1</span> データ型とは</h2>
<p>ここではRにおけるデータ型について説明します。第<a href="datastructure.html#datastructure">8</a>章で説明するデータ「構造」とデータ「型」は異なる概念です。次章でも説明しますが、Rにおけるデータの最小単位はベクトルです。<code>c(1, 2, 3, 4, 5)</code>や<code>c("Yanai", "Song", "Hadley")</code>もベクトルですが、<code>30</code>とか<code>"R"</code>もベクトルです。後者のように要素が1つのベクトルは原子ベクトル (atomic vector)とも呼ばれますが、本質的には普通ベクトルです。このベクトルの要素の性質がデータ型です。たとえば<code>c(2, 3, 5, 7, 11)</code>は数値型ですし、<code>c("R", "Python", "Julia")</code>は文字型です。他にも第<a href="rbasic.html#rbasic">6</a>章で紹介した<code>FALSE</code>や<code>TRUE</code>は論理型と呼ばれています。一つのベクトルは複数の要素で構成されることも可能ですが、必ず<strong>同じデータ型</strong>である必要があります。</p>
<p>しかし、データ分析を行う際はベクトル以外のデータも多いです。行列や表がその典型例です。しかし、行列でも表でも中身の一つ一つの要素は長さ1のベクトルに過ぎません。たとえば、以下のような2行5列のベクトルがあるとします。ここで1行3列目の要素は<code>11</code>であり、長さ1の数値型ベクトルです。あるいは5列目は<code>c(23, 29)</code>であり、長さ2の数値型ベクトルです。</p>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    2    5   11   17   23
## [2,]    3    7   13   19   29</code></pre>
<p>表についても考えてみましょう。以下の表の3行2列目の要素は<code>"American Samoa"</code>という長さ1の文字型ベクトルです。また、6列目は<code>c("UEFA", "CAF", "OFC", "UEFA", "CAF", "CONCACAF")</code>であり、これは長さ6の文字型ベクトルです。このようにRで扱う全てのデータは複数のベクトルが集まっているものです。</p>
<pre><code>##   ID                Team Rank Points Prev_Points Confederation
## 1  1             Albania   75   1325        1316          UEFA
## 2  2             Algeria   85   1271        1271           CAF
## 3  3      American Samoa  133   1030        1030           OFC
## 4  4             Andorra  155    749         749          UEFA
## 5  5              Angola  121   1117        1117           CAF
## 6  6 Antigua and Barbuda  153    787         787      CONCACAF</code></pre>
<p>つまり、複数のベクトルを綺麗に、または分析しやすく集めたのが行列や表であり、これがデータ構造に該当します。データ型ごとの処理方法については本書を通じて紹介して行きますので、本章は軽く読んで頂いても構いません。ただし、Factor型とDate &amp; Datetime型の処理はやや特殊ですので、手を動かしながら読み進めることをおすすめします。</p>
<p>ここではデータ型について紹介し、次章ではデータ構造について解説します。</p>
<hr />
</div>
<div id="type-logical" class="section level2">
<h2><span class="header-section-number">7.2</span> Logical</h2>
<p>Logical型は<code>TRUE</code>と<code>FALSE</code>のみで構成されたデータ型です。練習としてなにかの長さ5の論理型ベクトルを作ってみましょう。</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="datatype.html#cb100-1"></a>Logical.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb100-2"><a href="datatype.html#cb100-2"></a></span>
<span id="cb100-3"><a href="datatype.html#cb100-3"></a>Logical.Vec1</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE FALSE</code></pre>
<p>注意すべきこととしては、<code>TRUE</code>と<code>FALSE</code>は<code>"</code>で囲まないことです。<code>"TRUE"</code>、<code>"FALSE"</code>と入力してしまえばlogical 型として認識されません。もし、一つ間違えて2番目の要素である<code>FALSE</code>を<code>"FALSE"</code>と入力したらどうなるでしょうか。</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="datatype.html#cb102-1"></a>Logical.Vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb102-2"><a href="datatype.html#cb102-2"></a></span>
<span id="cb102-3"><a href="datatype.html#cb102-3"></a>Logical.Vec2</span></code></pre></div>
<pre><code>## [1] &quot;TRUE&quot;  &quot;FALSE&quot; &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;FALSE&quot;</code></pre>
<p>2番目の要素だけでなく、他の全ての要素も<code>"</code>で囲まれるようになりました。実際に、この2つのベクトルのデータ型を確認してみましょう。ベクトルのデータ型を確認する関数は<code>class()</code>関数です。</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="datatype.html#cb104-1"></a><span class="kw">class</span>(Logical.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="datatype.html#cb106-1"></a><span class="kw">class</span>(Logical.Vec2)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p><code>Logical.Vec1</code>はlogical型ですが、<code>Logical.Vec2</code>はcharacter型と認識されます。</p>
<p>他にも、<code>is.logical()</code>関数を使ってあるベクトルがlogical型か否かを判定することも可能です。もし、ベクトルがlogical型なら<code>TRUE</code>が、logical型以外なら<code>FALSE</code>が返って来ます。</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="datatype.html#cb108-1"></a><span class="kw">is.logical</span>(Logical.Vec1)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="datatype.html#cb110-1"></a><span class="kw">is.logical</span>(Logical.Vec2)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Logical型は様々な場面で使われますが、代表的な使い方は第<a href="rbasic.html#rbasic-calc">6.2</a>章で紹介しました要素の抽出と第<a href="programming.html#programming">9</a>章で紹介する予定の条件分岐 (<code>if()</code>や<code>ifelse()</code>)、条件反復 (<code>while()</code>)があります。</p>
<hr />
</div>
<div id="type-numeric" class="section level2">
<h2><span class="header-section-number">7.3</span> Numeric</h2>
<p>Numeric型は数値型ですが、まずはnumeric型のベクトル<code>Numeric.Vec1</code>を作成し、データ型を確認してみましょう。</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="datatype.html#cb112-1"></a>Numeric.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb112-2"><a href="datatype.html#cb112-2"></a></span>
<span id="cb112-3"><a href="datatype.html#cb112-3"></a><span class="kw">class</span>(Numeric.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><code>is.logical()</code>に似た関数<code>is.numeric()</code>も使用可能です。</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="datatype.html#cb114-1"></a><span class="kw">is.numeric</span>(Numeric.Vec1)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="datatype.html#cb116-1"></a><span class="kw">is.numeric</span>(Logical.Vec1)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>もうちょっと詳しく分けるとinteger型とdouble型があります。以下の内容はあまり意識的に区分して使う場面が稀ですので、(読み)飛ばしても構いません。</p>
<p>integerは整数型であり、doubleは実数型です。これは<code>class()</code>関数では確認できず、<code>typeof()</code>関すを使います。</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="datatype.html#cb118-1"></a><span class="kw">typeof</span>(Numeric.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>一般的に作成するnumeric型のベクトルは全てdouble型です。もし、整数型のベクトルを作成したい場合、数値の後ろに<code>L</code>を付けます。</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="datatype.html#cb120-1"></a>Integer.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(2L, 0L, 0L, 1L, 3L)</span>
<span id="cb120-2"><a href="datatype.html#cb120-2"></a><span class="kw">typeof</span>(Integer.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>ここでも注意すべき点としては、一つでも<code>L</code>が付かない要素が含まれる場合、自動的にdouble型に変換されるという点です。</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="datatype.html#cb122-1"></a>Integer.Vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(2L, 0L, <span class="dv">0</span>, 1L, 3L)</span>
<span id="cb122-2"><a href="datatype.html#cb122-2"></a><span class="kw">typeof</span>(Integer.Vec2)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>もちろんですが、小数点のある数値に<code>L</code>を付けてもinteger型にはならず、勝手にdouble型になります。また、integer型同士の割り算の結果もdouble型になります。これは<code>2L/1L</code>のような場合でも同じです。足し算、引き算、掛け算はinteger型になります。</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="datatype.html#cb124-1"></a><span class="kw">typeof</span>(<span class="fl">2.3</span>L)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="datatype.html#cb126-1"></a><span class="kw">typeof</span>(3L <span class="op">/</span><span class="st"> </span>12L)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="datatype.html#cb128-1"></a><span class="kw">typeof</span>(3L <span class="op">/</span><span class="st"> </span>1L)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="datatype.html#cb130-1"></a><span class="kw">typeof</span>(3L <span class="op">+</span><span class="st"> </span>1L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="datatype.html#cb132-1"></a><span class="kw">typeof</span>(3L <span class="op">-</span><span class="st"> </span>4L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="datatype.html#cb134-1"></a><span class="kw">typeof</span>(3L <span class="op">*</span><span class="st"> </span>6L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>一般的な分析において整数と実数を厳格に区別して使う場面は多くないと考えられますので、今のところはあまり気にしなくても問題ないでしょう。</p>
<hr />
</div>
<div id="type-complex" class="section level2">
<h2><span class="header-section-number">7.4</span> Complex</h2>
<p>Complex型は複素数を表すデータ型であり、<code>実数部+虚数部i</code>のように表記します。まず、複素数のベクトル<code>Complex.Vec1</code>を作成し、データ型を確認してみましょう。</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="datatype.html#cb136-1"></a>Complex.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">+</span>3i, <span class="dv">3</span><span class="op">+</span>2i, <span class="fl">2.5</span><span class="op">+</span>7i)</span>
<span id="cb136-2"><a href="datatype.html#cb136-2"></a>Complex.Vec1</span></code></pre></div>
<pre><code>## [1] 1.0+3i 3.0+2i 2.5+7i</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="datatype.html#cb138-1"></a><span class="kw">class</span>(Complex.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<p>あまりおすすめはできませんが、<code>虚数部i+実数部</code>のような書き方も可能です。</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="datatype.html#cb140-1"></a>Complex.Vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(3i<span class="op">+</span><span class="dv">1</span>, 2i<span class="op">+</span><span class="dv">3</span>, 7i<span class="fl">+2.5</span>)</span>
<span id="cb140-2"><a href="datatype.html#cb140-2"></a>Complex.Vec2</span></code></pre></div>
<pre><code>## [1] 1.0+3i 3.0+2i 2.5+7i</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="datatype.html#cb142-1"></a><span class="kw">class</span>(Complex.Vec2)</span></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<p><code>Complex.Vec1</code>と<code>Complex.Vec2</code>は同じベクトルであることを確認してみましょう。</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="datatype.html#cb144-1"></a>Complex.Vec1 <span class="op">==</span><span class="st"> </span>Complex.Vec2</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<p>もし、ベクトル内にnumeric型とcomplex型が混在している場合、強制的にcomplex型に変換されます。変換された後の値は<code>実数部+0i</code>のようになります。</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="datatype.html#cb146-1"></a>Complex.Vec3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span><span class="op">+</span>7i, <span class="dv">5</span>, <span class="dv">13</span><span class="op">+</span>1i)</span>
<span id="cb146-2"><a href="datatype.html#cb146-2"></a>Complex.Vec3</span></code></pre></div>
<pre><code>## [1]  2+7i  5+0i 13+1i</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="datatype.html#cb148-1"></a><span class="kw">class</span>(Complex.Vec3)</span></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<hr />
</div>
<div id="type-character" class="section level2">
<h2><span class="header-section-number">7.5</span> Character</h2>
<p>Character型は文字列で構成されているデータ型です。Rを含む多くの言語は文字列を表現するために、中身を<code>"</code>で囲みます。<code>"abc"</code>はcharacter型ですが、<code>"1"</code>や<code>"3+5i"</code>もcharacter型です。数字であっても<code>"</code>で囲んだらそれは文字列となります。それではいくつかのcharacter型ベクトルを作っていみましょう。</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="datatype.html#cb150-1"></a>Char.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Shigemura&quot;</span>, <span class="st">&quot;Tani&quot;</span>)</span>
<span id="cb150-2"><a href="datatype.html#cb150-2"></a>Char.Vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb150-3"><a href="datatype.html#cb150-3"></a>Char.Vec3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>)</span>
<span id="cb150-4"><a href="datatype.html#cb150-4"></a></span>
<span id="cb150-5"><a href="datatype.html#cb150-5"></a>Char.Vec1</span></code></pre></div>
<pre><code>## [1] &quot;Yanai&quot;     &quot;Song&quot;      &quot;Shigemura&quot; &quot;Tani&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="datatype.html#cb152-1"></a>Char.Vec2</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="datatype.html#cb154-1"></a>Char.Vec3</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;</code></pre>
<p><code>Char.Vec2</code>と<code>Char.Vec3</code>の違いは通じを<code>"</code>で囲んだか否かです。ベクトルの中身を見ても、<code>Char.Vec2</code>は<code>"</code>で囲まれていません。データ型を見てみましょう。</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="datatype.html#cb156-1"></a><span class="kw">class</span>(Char.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="datatype.html#cb158-1"></a><span class="kw">class</span>(Char.Vec2)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="datatype.html#cb160-1"></a><span class="kw">class</span>(Char.Vec3)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>やはり<code>Char.Vec3</code>もcharacter型になっていることが分かります。</p>
<hr />
</div>
<div id="type-factor" class="section level2">
<h2><span class="header-section-number">7.6</span> Factor</h2>
<p>Factor型はラベル付きの数値型データです。Factor型の見た目はcharacter型とほぼ同じですし、分析の場面においてもcharacter型とほぼ同じ扱いになります。Factor型とcharacter型との違いは、「順序が付いている」点です。例えば、以下の質問文に対するアンケートの結果を考えてみましょう。</p>
<ul>
<li>あなたは猫がすきですか。
<ol style="list-style-type: decimal">
<li>めちゃめちゃ好き</li>
<li>めちゃ好き</li>
<li>好き</li>
<li>どちらかといえば好き</li>
</ol></li>
</ul>
<p>以下の表<a href="datatype.html#tab:Cat">7.1</a>は5人の結果です。</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Cat">表 7.1: </span>猫好きの度合い
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Cat
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Yanai
</td>
<td style="text-align:left;">
めちゃめちゃ好き
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Song
</td>
<td style="text-align:left;">
めちゃめちゃ好き
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shigemura
</td>
<td style="text-align:left;">
どちらかといえば好き
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Tani
</td>
<td style="text-align:left;">
めちゃ好き
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Hadley
</td>
<td style="text-align:left;">
好き
</td>
</tr>
</tbody>
</table>
<p>人間としてはこの表から、<a href="https://soheishigemura.com">重村</a>という人がどれだけ猫が嫌いなのかが分かります。ただし、Rはそうではありません。Rは日本語どころか、人間の言葉は理解できません。各項目ごとに順番を付けてあげる必要がありますが、そのために使われるのがfactor型です。</p>
<p>実習のために表<a href="datatype.html#tab:Cat">7.1</a>の<code>Cat</code>列のみのベクトルを作ってみましょう。</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="datatype.html#cb162-1"></a>Factor.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;めちゃめちゃ好き&quot;</span>, <span class="st">&quot;めちゃめちゃ好き&quot;</span>, </span>
<span id="cb162-2"><a href="datatype.html#cb162-2"></a>                 <span class="st">&quot;どちらかといえば好き&quot;</span>, <span class="st">&quot;めちゃ好き&quot;</span>, <span class="st">&quot;好き&quot;</span>)</span>
<span id="cb162-3"><a href="datatype.html#cb162-3"></a></span>
<span id="cb162-4"><a href="datatype.html#cb162-4"></a>Factor.Vec1</span></code></pre></div>
<pre><code>## [1] &quot;めちゃめちゃ好き&quot;     &quot;めちゃめちゃ好き&quot;     &quot;どちらかといえば好き&quot;
## [4] &quot;めちゃ好き&quot;           &quot;好き&quot;</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="datatype.html#cb164-1"></a><span class="kw">class</span>(Factor.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p><code>Factor.Vec1</code>は普通の文字列ベクトルであることが分かります。これをfactor型に変換するためには<code>factor()</code>関数を使います。</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="datatype.html#cb166-1"></a>Factor.Vec2 &lt;-<span class="st"> </span><span class="kw">factor</span>(Factor.Vec1, <span class="dt">ordered =</span> <span class="ot">TRUE</span>,</span>
<span id="cb166-2"><a href="datatype.html#cb166-2"></a>                      <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;どちらかといえば好き&quot;</span>, <span class="st">&quot;好き&quot;</span>,</span>
<span id="cb166-3"><a href="datatype.html#cb166-3"></a>                                 <span class="st">&quot;めちゃ好き&quot;</span>, <span class="st">&quot;めちゃめちゃ好き&quot;</span>))</span>
<span id="cb166-4"><a href="datatype.html#cb166-4"></a><span class="kw">class</span>(Factor.Vec2)</span></code></pre></div>
<pre><code>## [1] &quot;ordered&quot; &quot;factor&quot;</code></pre>
<p>データ型がfactor型に変換されています。<code>"ordered"</code>というものも付いていますが、これについては後ほど説明します。それでは中身をみましょう。</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="datatype.html#cb168-1"></a>Factor.Vec2</span></code></pre></div>
<pre><code>## [1] めちゃめちゃ好き     めちゃめちゃ好き     どちらかといえば好き めちゃ好き          
## [5] 好き                
## Levels: どちらかといえば好き &lt; 好き &lt; めちゃ好き &lt; めちゃめちゃ好き</code></pre>
<p>いくつかの点で異なります。まず、文字列であるにもかかわらず、<code>"</code>で囲まれていいない点です。そして3行目に<code>4 Levels:</code>というのが追加されている点です。このlevelは「水準」と呼ばれるものです。<code>4 Levels</code>ですから、<code>Factor.Vec2</code>は4つの水準で構成されていることを意味します。Factor型の値は予め指定された水準以外の値を取ることはできません。たとえば、2番目の要素を「超好き」に変えてみましょう。</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="datatype.html#cb170-1"></a>Factor.Vec2[<span class="dv">2</span>] &lt;-<span class="st"> &quot;超好き&quot;</span></span></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 2, value = &quot;超好き&quot;): invalid factor level, NA generated</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="datatype.html#cb172-1"></a>Factor.Vec2</span></code></pre></div>
<pre><code>## [1] めちゃめちゃ好き     &lt;NA&gt;                 どちらかといえば好き めちゃ好き          
## [5] 好き                
## Levels: どちらかといえば好き &lt; 好き &lt; めちゃ好き &lt; めちゃめちゃ好き</code></pre>
<p>警告が表示され、2番目の要素が後ほど紹介する欠損値となっていることが分かります。それでは普通に「好き」を入れてみましょう。</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="datatype.html#cb174-1"></a>Factor.Vec2[<span class="dv">2</span>] &lt;-<span class="st"> &quot;好き&quot;</span></span>
<span id="cb174-2"><a href="datatype.html#cb174-2"></a>Factor.Vec2</span></code></pre></div>
<pre><code>## [1] めちゃめちゃ好き     好き                 どちらかといえば好き めちゃ好き          
## [5] 好き                
## Levels: どちらかといえば好き &lt; 好き &lt; めちゃ好き &lt; めちゃめちゃ好き</code></pre>
<p>今回は問題なく置換できましたね。このようにfactor型の取りうる値は既に指定されています。また、<code>## 4 Levels: どちらかといえば好き &lt; 好き &lt; ... &lt; めちゃめちゃ好き</code>からも分かるように、その大小関係の情報も含まれています。猫好きの度合いは「どちらかといえば好き-好き-めちゃ好き-めちゃめちゃ好き」の順で高くなることをRも認識できるようになりました。</p>
<p>Factor型はこのように順序付きデータを扱う際に便利なデータ型ですが、順序情報を含まないfactor型もあります。これは<code>factor()</code>を使う際、<code>ordered = TRUE</code>引数を削除するだけでできます。</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="datatype.html#cb176-1"></a>Factor.Vec3 &lt;-<span class="st"> </span><span class="kw">factor</span>(Factor.Vec1,</span>
<span id="cb176-2"><a href="datatype.html#cb176-2"></a>                      <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;どちらかといえば好き&quot;</span>, <span class="st">&quot;好き&quot;</span>,</span>
<span id="cb176-3"><a href="datatype.html#cb176-3"></a>                                 <span class="st">&quot;めちゃ好き&quot;</span>, <span class="st">&quot;めちゃめちゃ好き&quot;</span>))</span>
<span id="cb176-4"><a href="datatype.html#cb176-4"></a>Factor.Vec3</span></code></pre></div>
<pre><code>## [1] めちゃめちゃ好き     めちゃめちゃ好き     どちらかといえば好き めちゃ好き          
## [5] 好き                
## Levels: どちらかといえば好き 好き めちゃ好き めちゃめちゃ好き</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="datatype.html#cb178-1"></a><span class="kw">class</span>(Factor.Vec3)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>今回は3行目が<code>## Levels: どちらかといえば好き 好き めちゃ好き めちゃめちゃ好き</code>となり、順序に関する情報がなくなりました。また、<code>class()</code>で確認しましたデータ型に<code>"ordered"</code>が付いていません。これは順序なしfactor型であることを意味します。「順序付けしないならfactor型は要らないのでは…?」と思うかも知れませんが、これはこれで便利です。その例を考えてみましょう。</p>
<p>分析においてfactor型はcharacter型に近い役割を果たしますが、factor型なりの長所もあります。それは図や表を作成する際です。例えば、横軸が都道府県名で、縦軸がその都道府県の財政力指数を表す棒グラフを作成するとします。元になるデータは表<a href="datatype.html#tab:Zaisei">7.2</a>の<code>Zaisei.df</code>です。</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Zaisei">表 7.2: </span>5都道府県のH29財政力指数
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
Pref
</th>
<th style="text-align:right;">
Zaisei
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Hokkaido
</td>
<td style="text-align:right;">
0.44396
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Tokyo
</td>
<td style="text-align:right;">
1.19157
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Aichi
</td>
<td style="text-align:right;">
0.92840
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Osaka
</td>
<td style="text-align:right;">
0.78683
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Fukuoka
</td>
<td style="text-align:right;">
0.64322
</td>
</tr>
</tbody>
</table>
<p>可視化については第<a href="visualization.html#visualization">13</a>で詳しく解説しますが、この<code>Pref</code>列をcharacter型にしたままグラフにしますと図<a href="datatype.html#fig:ZaiseiFig">7.1</a>のようになります。</p>
<div class="figure" style="text-align: center"><span id="fig:ZaiseiFig"></span>
<img src="R_Not_for_Everyone_files/figure-html/ZaiseiFig-1.png" alt="5都道府県のH29財政力指数" width="672" />
<p class="caption">
図 7.1: 5都道府県のH29財政力指数
</p>
</div>
<p>このようにアルファベット順で横軸が並び替えられます。別にこれでも問題ないと思う方もいるかも知れませんが、基本的に日本の都道府県は北から南の方へ並べるのが一般的な作法です<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>。北海道と東京、大阪の間には順序関係はありません。しかし、表示される順番は固定したい。この場合、順序なしfactor型が活躍します。これを修正するためには<code>Pref</code>列を順序なしfactor型にすれば良いです<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>。データフレームの列を修正する方法は第<a href="datastructure.html#datastructure">8</a>章で詳しく説明します。</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="datatype.html#cb180-1"></a>Zaisei.df<span class="op">$</span>Pref &lt;-<span class="st"> </span><span class="kw">factor</span>(Zaisei.df<span class="op">$</span>Pref,</span>
<span id="cb180-2"><a href="datatype.html#cb180-2"></a>                         <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Hokkaido&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>, <span class="st">&quot;Aichi&quot;</span>, <span class="st">&quot;Osaka&quot;</span>, <span class="st">&quot;Fukuoka&quot;</span>))</span></code></pre></div>
<p><code>Zaisei.df</code>の<code>Pref</code>列を順序付きfactor型にしてから同じ図を描くと図<a href="datatype.html#fig:ZaiseiFig2">7.2</a>のようになります。</p>
<div class="figure" style="text-align: center"><span id="fig:ZaiseiFig2"></span>
<img src="R_Not_for_Everyone_files/figure-html/ZaiseiFig2-1.png" alt="5都道府県のH29財政力指数" width="672" />
<p class="caption">
図 7.2: 5都道府県のH29財政力指数
</p>
</div>
<p>都道府県以外にもこのような例は多くあります。順序尺度で測定された変数が代表的な例です。他にも政党名を議席数順で表示させたい場合もfactor型は有効でしょう。</p>
<hr />
</div>
<div id="type-date" class="section level2">
<h2><span class="header-section-number">7.7</span> Date</h2>
<div id="なぜdate型があるのか" class="section level3">
<h3><span class="header-section-number">7.7.1</span> なぜDate型があるのか</h3>
<p>Date型は年月日を表すデータ型<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>です。この2つのデータ型はかなり複雑ですが、ここでは簡単に説明します。Date型は日付の情報を含むため、順序関係が成立します。その意味では順序付きFactor型とあまり挙動は変わらないかもしれませんが、実際はそうではありません。</p>
<p>たとえば、Songの1週間<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a>の睡眠時間を記録したデータ<code>SongSleep</code>があるとします。<code>Date</code>という列には日付が、<code>Sleep</code>列には睡眠時間が記録されています。睡眠時間の単位は「分」です。</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="datatype.html#cb181-1"></a>SongSleep &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb181-2"><a href="datatype.html#cb181-2"></a>    <span class="dt">Date  =</span> <span class="kw">c</span>(<span class="st">&quot;2017-06-17&quot;</span>, <span class="st">&quot;2017-06-18&quot;</span>, <span class="st">&quot;2017-06-19&quot;</span>, <span class="st">&quot;2017-06-20&quot;</span>, </span>
<span id="cb181-3"><a href="datatype.html#cb181-3"></a>              <span class="st">&quot;2017-06-21&quot;</span>, <span class="st">&quot;2017-06-22&quot;</span>, <span class="st">&quot;2017-06-23&quot;</span>),</span>
<span id="cb181-4"><a href="datatype.html#cb181-4"></a>    <span class="dt">Sleep =</span> <span class="kw">c</span>(<span class="dv">173</span>, <span class="dv">192</span>, <span class="dv">314</span>, <span class="dv">259</span>, <span class="dv">210</span>, <span class="dv">214</span>, <span class="dv">290</span>)   </span>
<span id="cb181-5"><a href="datatype.html#cb181-5"></a>)</span></code></pre></div>
<p>中身をみると、以下のようになります。</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="datatype.html#cb182-1"></a>SongSleep</span></code></pre></div>
<pre><code>##         Date Sleep
## 1 2017-06-17   173
## 2 2017-06-18   192
## 3 2017-06-19   314
## 4 2017-06-20   259
## 5 2017-06-21   210
## 6 2017-06-22   214
## 7 2017-06-23   290</code></pre>
<p>日付を横軸に、睡眠時間を縦軸にした散布図を描くと図@ref{fig:sleep1}このようになります。ggplot2を利用した作図については第@ref{visualization}章で解説しますので、ここではDate型の特徴のみ理解してもらえたら十分です。</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="datatype.html#cb184-1"></a><span class="kw">ggplot</span>(SongSleep, </span>
<span id="cb184-2"><a href="datatype.html#cb184-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> Sleep)) <span class="op">+</span></span>
<span id="cb184-3"><a href="datatype.html#cb184-3"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb184-4"><a href="datatype.html#cb184-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;日付&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;睡眠時間 (分)&quot;</span>) <span class="op">+</span></span>
<span id="cb184-5"><a href="datatype.html#cb184-5"></a><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:sleep1"></span>
<img src="R_Not_for_Everyone_files/figure-html/sleep1-1.png" alt="Songの睡眠時間" width="672" />
<p class="caption">
図 7.3: Songの睡眠時間
</p>
</div>
<p>この図は全く問題ないように見えます。それでは、<code>Date</code>列をそれぞれDate型に変換し、<code>SoongSleep</code>データの<code>DateD</code>としてみます。データフレームの列追加については第<a href="datastructure.html#structure-dataframe">8.4</a>章で解説します。</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="datatype.html#cb185-1"></a>SongSleep<span class="op">$</span>DateD &lt;-<span class="st"> </span><span class="kw">as.Date</span>(SongSleep<span class="op">$</span>Date)</span></code></pre></div>
<p>中身を見てみますが、あまり変わっていないようです。<code>Date</code>と<code>DateD</code>列は全く同じように見えますね。</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="datatype.html#cb186-1"></a>SongSleep</span></code></pre></div>
<pre><code>##         Date Sleep      DateD
## 1 2017-06-17   173 2017-06-17
## 2 2017-06-18   192 2017-06-18
## 3 2017-06-19   314 2017-06-19
## 4 2017-06-20   259 2017-06-20
## 5 2017-06-21   210 2017-06-21
## 6 2017-06-22   214 2017-06-22
## 7 2017-06-23   290 2017-06-23</code></pre>
<p>図にすると実は先ほどの図と同じものが得られます。</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="datatype.html#cb188-1"></a><span class="kw">ggplot</span>(SongSleep, </span>
<span id="cb188-2"><a href="datatype.html#cb188-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> DateD, <span class="dt">y =</span> Sleep)) <span class="op">+</span></span>
<span id="cb188-3"><a href="datatype.html#cb188-3"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb188-4"><a href="datatype.html#cb188-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;日付&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;睡眠時間 (分)&quot;</span>) <span class="op">+</span></span>
<span id="cb188-5"><a href="datatype.html#cb188-5"></a><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:sleep2"></span>
<img src="R_Not_for_Everyone_files/figure-html/sleep2-1.png" alt="Songの睡眠時間" width="672" />
<p class="caption">
図 7.4: Songの睡眠時間
</p>
</div>
<p>しかし、Songがうっかり6月19日に記録するのを忘れたとします。つまり、<code>SongSleep</code>データの3行目が抜けている状況を考えてみましょう。データフレームの要素抽出については第<a href="datastructure.html#structure-dataframe">8.4</a>章で解説します。</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="datatype.html#cb189-1"></a>SongSleep2 &lt;-<span class="st"> </span>SongSleep[<span class="op">-</span><span class="dv">3</span>, ]</span></code></pre></div>
<p>中身をみると、以下のようになります。<code>Date</code>も<code>DateD</code>も同じように見えます。</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="datatype.html#cb190-1"></a>SongSleep2</span></code></pre></div>
<pre><code>##         Date Sleep      DateD
## 1 2017-06-17   173 2017-06-17
## 2 2017-06-18   192 2017-06-18
## 4 2017-06-20   259 2017-06-20
## 5 2017-06-21   210 2017-06-21
## 6 2017-06-22   214 2017-06-22
## 7 2017-06-23   290 2017-06-23</code></pre>
<p>この状態で横軸を<code>Date</code>にしたらどうなるでしょうか（図<a href="datatype.html#fig:sleep3">7.5</a>）。</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="datatype.html#cb192-1"></a><span class="kw">ggplot</span>(SongSleep2, </span>
<span id="cb192-2"><a href="datatype.html#cb192-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> Sleep)) <span class="op">+</span></span>
<span id="cb192-3"><a href="datatype.html#cb192-3"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb192-4"><a href="datatype.html#cb192-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;日付&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;睡眠時間 (分)&quot;</span>) <span class="op">+</span></span>
<span id="cb192-5"><a href="datatype.html#cb192-5"></a><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:sleep3"></span>
<img src="R_Not_for_Everyone_files/figure-html/sleep3-1.png" alt="Songの睡眠時間" width="672" />
<p class="caption">
図 7.5: Songの睡眠時間
</p>
</div>
<p>一方、横軸を<code>DateD</code>にしたものが図<a href="datatype.html#fig:sleep4">7.6</a>です。</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="datatype.html#cb193-1"></a><span class="kw">ggplot</span>(SongSleep2, </span>
<span id="cb193-2"><a href="datatype.html#cb193-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> DateD, <span class="dt">y =</span> Sleep)) <span class="op">+</span></span>
<span id="cb193-3"><a href="datatype.html#cb193-3"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb193-4"><a href="datatype.html#cb193-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;日付&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;睡眠時間 (分)&quot;</span>) <span class="op">+</span></span>
<span id="cb193-5"><a href="datatype.html#cb193-5"></a><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:sleep4"></span>
<img src="R_Not_for_Everyone_files/figure-html/sleep4-1.png" alt="Songの睡眠時間" width="672" />
<p class="caption">
図 7.6: Songの睡眠時間
</p>
</div>
<p>違いが分かりますかね。違いは抜けている6月19日です。図<a href="datatype.html#fig:sleep3">7.5</a>を見ると、横軸の6月18日の次が20日になっています。一方、図<a href="datatype.html#fig:sleep4">7.6</a>は19日になっており、ちゃんと空けてくれますね。これはDate型でない場合、データにないものは図に表示されないことを意味します。一方、Date型は抜けている日があっても、図に表示表示されます。一般のcharacter型またはfactor型でこのようなことを再現するためには、6月19日の列を追加し、睡眠時間を欠損値として指定する必要があります。たとえば、<code>SongSleep</code>データにおいて6月19日の行は温存したまま、睡眠時間だけを欠損値にしてみましょう。</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="datatype.html#cb194-1"></a>SongSleep3 &lt;-<span class="st"> </span>SongSleep</span>
<span id="cb194-2"><a href="datatype.html#cb194-2"></a>SongSleep3<span class="op">$</span>Sleep[SongSleep<span class="op">$</span>Date <span class="op">==</span><span class="st"> &quot;2017-06-19&quot;</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb194-3"><a href="datatype.html#cb194-3"></a></span>
<span id="cb194-4"><a href="datatype.html#cb194-4"></a>SongSleep3</span></code></pre></div>
<pre><code>##         Date Sleep      DateD
## 1 2017-06-17   173 2017-06-17
## 2 2017-06-18   192 2017-06-18
## 3 2017-06-19    NA 2017-06-19
## 4 2017-06-20   259 2017-06-20
## 5 2017-06-21   210 2017-06-21
## 6 2017-06-22   214 2017-06-22
## 7 2017-06-23   290 2017-06-23</code></pre>
<p>このように日付はあるが、睡眠時間が欠損している場合、図にしたものが図<a href="datatype.html#fig:sleep5">7.7</a>です。</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="datatype.html#cb196-1"></a><span class="kw">ggplot</span>(SongSleep3, </span>
<span id="cb196-2"><a href="datatype.html#cb196-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> Sleep)) <span class="op">+</span></span>
<span id="cb196-3"><a href="datatype.html#cb196-3"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb196-4"><a href="datatype.html#cb196-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;日付&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;睡眠時間 (分)&quot;</span>) <span class="op">+</span></span>
<span id="cb196-5"><a href="datatype.html#cb196-5"></a><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<div class="figure"><span id="fig:sleep5"></span>
<img src="R_Not_for_Everyone_files/figure-html/sleep5-1.png" alt="Songの睡眠時間" width="672" />
<p class="caption">
図 7.7: Songの睡眠時間
</p>
</div>
<p>警告が表示されましたが、横軸上に6月19日が表示されます。このようにDate型でなくてもDate型と同じように動かすことは可能ですが、非常に面倒です。その意味でDate型は時系列データを扱う際に非常に便利なデータ型です。</p>
</div>
<div id="date型の作り方" class="section level3">
<h3><span class="header-section-number">7.7.2</span> Date型の作り方</h3>
<p>Date型を作成方法はいくつかあります。</p>
<ol style="list-style-type: decimal">
<li>character型をDate型にする</li>
<li>numeric型をDate型にする</li>
</ol>
<p>主に使う方法は1であり、既に前節でお見せしました<code>as.Date()</code>関数を使います。方法2もまた<code>as.Date()</code>を使いますが、これは「xxxx年xx月xx日から何日目」という書き方となり、起点となる日付 (<code>origin</code>)<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>を指定する必要があります。</p>
<p>ここでは方法1について解説します。日付を表すいくつかのベクトルを作ってみましょう。</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="datatype.html#cb198-1"></a>Date1 &lt;-<span class="st"> &quot;2020-05-21&quot;</span></span>
<span id="cb198-2"><a href="datatype.html#cb198-2"></a>Date2 &lt;-<span class="st"> &quot;2020-5-21&quot;</span></span>
<span id="cb198-3"><a href="datatype.html#cb198-3"></a>Date3 &lt;-<span class="st"> &quot;2020/5/21&quot;</span></span>
<span id="cb198-4"><a href="datatype.html#cb198-4"></a>Date4 &lt;-<span class="st"> &quot;20/05/21&quot;</span></span>
<span id="cb198-5"><a href="datatype.html#cb198-5"></a>Date5 &lt;-<span class="st"> &quot;20200521&quot;</span></span>
<span id="cb198-6"><a href="datatype.html#cb198-6"></a>Date6 &lt;-<span class="st"> &quot;2020 05 21&quot;</span></span>
<span id="cb198-7"><a href="datatype.html#cb198-7"></a>Date7 &lt;-<span class="st"> &quot;2020.05.21&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="datatype.html#cb199-1"></a><span class="kw">as.Date</span>(Date1)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="datatype.html#cb201-1"></a><span class="kw">as.Date</span>(Date2)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="datatype.html#cb203-1"></a><span class="kw">as.Date</span>(Date3)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="datatype.html#cb205-1"></a><span class="kw">as.Date</span>(Date4, <span class="st">&quot;%y/%m/%d&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="datatype.html#cb207-1"></a><span class="kw">as.Date</span>(Date5, <span class="st">&quot;%Y%m%d&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="datatype.html#cb209-1"></a><span class="kw">as.Date</span>(Date6, <span class="st">&quot;%Y %m %d&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="datatype.html#cb211-1"></a><span class="kw">as.Date</span>(Date7, <span class="st">&quot;%Y.%m.%d&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<p><code>Date1</code>、<code>Date2</code>、<code>Date3</code>のようなベクトルの場合、<code>as.Date()</code>のみでDate型に変換できます。つまり、日付が数字のみで構成され、年が4桁となっており、年月日が<code>-</code>または<code>/</code>で区切られている場合はこれでだけで十分です。しかし、年が2桁になっていたり、その他の記号が使われたり、区切られていない場合は、<code>fotmat =</code>引数を指定する必要があります。たとえば<code>Date4</code>は年が2桁となっているます。2桁の年は<code>%y</code>と表記します。この表記法の一部を以下の表で紹介します。</p>
<table>
<thead>
<tr class="header">
<th>表記</th>
<th>説明</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%y</td>
<td>年 (2桁)</td>
<td>20</td>
</tr>
<tr class="even">
<td>%Y</td>
<td>年 (4桁)</td>
<td>2020</td>
</tr>
<tr class="odd">
<td>%m</td>
<td>月 (数字)</td>
<td>5, 10</td>
</tr>
<tr class="even">
<td>%b</td>
<td>月 (文字)</td>
<td>Jan</td>
</tr>
<tr class="odd">
<td>%B</td>
<td>月 (文字)</td>
<td>January</td>
</tr>
<tr class="even">
<td>%d</td>
<td>日</td>
<td>5, 05, 13</td>
</tr>
</tbody>
</table>
<p>他にも様々な表記法がありますが、詳細は<code>?strptime</code>で確認してみてください。</p>
<p>他にも、日本では使わない表記法ですが、月を英語で表記したり、日月年の順で表記する場合があります。後者は<code>format =</code>引数の順番を変えるだけで問題有りませんが、問題は前者です。そこで使うのが<code>%b</code>または<code>%B</code>です。<code>%b</code>は3文字の月表記で、<code>%B</code>はフルネームです。</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="datatype.html#cb213-1"></a><span class="kw">as.Date</span>(<span class="st">&quot;21may2020&quot;</span>,   <span class="dt">format =</span> <span class="st">&quot;%d%b%Y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="datatype.html#cb215-1"></a><span class="kw">as.Date</span>(<span class="st">&quot;May/21/2020&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;%b/%d/%Y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>うまくいかないですね。これはシステムの時間ロケールが日本になっているのが原因です。ロケール設定は<code>Sys.getlocale()</code>で確認できます。</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="datatype.html#cb217-1"></a><span class="kw">Sys.getlocale</span>(<span class="dt">category =</span> <span class="st">&quot;LC_TIME&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ja_JP.UTF-8&quot;</code></pre>
<p>これを<code>Sys.setlocale()</code>を使って、<code>"C"</code>に変更します。</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="datatype.html#cb219-1"></a><span class="kw">Sys.setlocale</span>(<span class="dt">category =</span> <span class="st">&quot;LC_TIME&quot;</span>, <span class="dt">locale =</span> <span class="st">&quot;C&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p>それではもう一回やってみましょう。</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="datatype.html#cb221-1"></a><span class="kw">as.Date</span>(<span class="st">&quot;21may2020&quot;</span>,   <span class="dt">format =</span> <span class="st">&quot;%d%b%Y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="datatype.html#cb223-1"></a><span class="kw">as.Date</span>(<span class="st">&quot;May/21/2020&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;%b/%d/%Y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-05-21&quot;</code></pre>
<p>うまく動くことが確認できました。念の為に、ロケールを戻しておきます。</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="datatype.html#cb225-1"></a><span class="kw">Sys.setlocale</span>(<span class="dt">category =</span> <span class="st">&quot;LC_TIME&quot;</span>, <span class="dt">locale =</span> <span class="st">&quot;ja_JP.UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ja_JP.UTF-8&quot;</code></pre>
</div>
<div id="posixctposixlt型について" class="section level3">
<h3><span class="header-section-number">7.7.3</span> POSIXct、POSIXlt型について</h3>
<p>POSIXct、POSIXlt型は日付だけでなく時間の情報も含むデータがたです。これらは<code>as.POSIXct()</code>、<code>as.POSIXlt()</code>関数で作成することができます。どちらも見た目は同じデータ型ですが、内部構造がことなります<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a>。詳細は<code>?as.POSIXct</code>または<code>?as.POSIXlt</code>を参照してください。</p>
<hr />
</div>
</div>
<div id="type-na" class="section level2">
<h2><span class="header-section-number">7.8</span> NA</h2>
<p>NAは欠損値と呼ばれます。これは本来は値があるはずなのがなんらかの理由で欠損していることを意味します。表<a href="datatype.html#tab:NAExample1">7.3</a>の例を考えてみましょう。</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:NAExample1">表 7.3: </span>4人の支持政党
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
名前
</th>
<th style="text-align:left;">
支持政党あり
</th>
<th style="text-align:left;">
政党名
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Yanai
</td>
<td style="text-align:left;">
ない
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Song
</td>
<td style="text-align:left;">
ある
</td>
<td style="text-align:left;">
ラーメン大好き党
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shigemura
</td>
<td style="text-align:left;">
ある
</td>
<td style="text-align:left;">
鹿児島第一党
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Tani
</td>
<td style="text-align:left;">
ない
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>3列目で支持政党があるケースのみ、4列目に値があります。YanaiとTaniの場合、支持する政党がないため、政治政党名が欠損しています。実際、多くのデータには欠損値が含まれています。世論調査データの場合はもっと多いです。理由としては「Q2で“はい”を選んだ場合のみQ3に進み、それ以外はQ4へ飛ばす」のようなのもありますが、単に回答を拒否した場合もあります。</p>
<p>まずは欠損値が含まれたベクトル<code>NA.Vec1</code>を作ってみましょう。</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="datatype.html#cb227-1"></a>NA.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb227-2"><a href="datatype.html#cb227-2"></a>NA.Vec1</span></code></pre></div>
<pre><code>## [1]  1 NA  3 NA  5  6</code></pre>
<p>つづいて、データ型を確認してみましょう。</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="datatype.html#cb229-1"></a><span class="kw">class</span>(NA.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>NAが含まれていてもデータ型はnumericのままです。これは「一応、欠損しているが、ここに何らかの値が割り当てられるとしたらそれはnumeric型だろう」とRが判断しているからです。ある要素がNAか否かを判定するには<code>is.na()</code>関数を使います。</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="datatype.html#cb231-1"></a><span class="kw">is.na</span>(NA.Vec1)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<p>2番目と4番目の要素が欠損していることが分かります。</p>
<p>欠損値も要素の一つとしてカウントされるため、ベクトルの長さは6になります。ベクトルの長さは<code>length()</code>関数で確認できます。</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="datatype.html#cb233-1"></a><span class="kw">length</span>(NA.Vec1)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p><strong>欠損値の取り扱い</strong></p>
<p>欠損値を含むデータの処理方法はやや特殊です。まず、<code>NA.Vec1</code>の要素全てに1を足してみましょう。</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="datatype.html#cb235-1"></a>NA.Vec1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span></code></pre></div>
<pre><code>## [1]  2 NA  4 NA  6  7</code></pre>
<p>この場合、欠損値の箇所には1が足されず、それ以外の要素のみに1を足した結果が返ってきます。これは直感的に考えると自然です。問題になるのは欠損値が含まれるベクトルを関数に入れた場合です。たとえば、numeric型ベクトル内の要素の総和を求めるには<code>sum()</code>関数を使います。<code>sum(c(1, 3, 5))</code>を入力すると9が返されます。<code>NA.Vec1</code>は欠損していない要素が1, 3, 5, 6であるため、総和は15のはずです。確認してみましょう。</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="datatype.html#cb237-1"></a><span class="kw">sum</span>(NA.Vec1)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>このように欠損値を含むベクトルの総和はNAとなります。もし、欠損値を除いた要素の総和を求めるには、まずベクトルから欠損値を除去する必要があります。そのためには<code>is.na()</code>関数を使って<code>NA.Vec1</code>の要素を抽出します。ただし、<code>is.na()</code>を使うと、欠損値であるところが<code>TRUE</code>になるため、これを反転する必要があります。この場合は<code>!is.na()</code>関数を使います。それでは<code>is.na()</code>と<code>!is.na()</code>を使って要素を抽出してみましょう。</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="datatype.html#cb239-1"></a>NA.Vec1[<span class="kw">is.na</span>(NA.Vec1)]</span></code></pre></div>
<pre><code>## [1] NA NA</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="datatype.html#cb241-1"></a>NA.Vec1[<span class="op">!</span><span class="kw">is.na</span>(NA.Vec1)]</span></code></pre></div>
<pre><code>## [1] 1 3 5 6</code></pre>
<p><code>!is.na()</code>を使うことで欠損値を除いた要素のみを取り出すことができました。これなら<code>sum()</code>関数も使えるでしょう。</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="datatype.html#cb243-1"></a><span class="kw">sum</span>(NA.Vec1[<span class="op">!</span><span class="kw">is.na</span>(NA.Vec1)])</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>これで欠損値を除いた要素の総和を求めることができました。ただし、一部の関数には欠損値を自動的に除去するオプションを持つ場合があります。<code>sum()</code>関数のその一部であり、<code>na.rm = TRUE</code>オプションを付けると、欠損値を除いた総和を返します。</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="datatype.html#cb245-1"></a><span class="kw">sum</span>(NA.Vec1, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p><strong>欠損値の使い方</strong></p>
<p>主に欠損値を扱うのは入手したデータに含まれる欠損値に対してですが、NAをこちらから生成することもあります。それは空ベクトルを用意する時です。第<a href="programming.html#programming">9</a>章では関数の作り方について解説します。関数内で何らかの処理を行い、その結果を返すことになりますが、その結果を格納するベクトルを事前に作っておくこともできます。こちらの方がメモリの観点からは効率的です。以下は第<a href="programming.html#programming">9</a>章を読んでから読んでも構いません。</p>
<p>もし、長さ10のベクトル<code>Result.Vec1</code>を返すとします。ベクトルの要素として1から10の数字が入るとします。一つ目の方法としてはまず、<code>Result.Vec1</code>に1を代入し、次は<code>c()</code>を使って要素を一つずつ足して行く手順です。</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="datatype.html#cb247-1"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb247-2"><a href="datatype.html#cb247-2"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">2</span>)</span>
<span id="cb247-3"><a href="datatype.html#cb247-3"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">3</span>)</span>
<span id="cb247-4"><a href="datatype.html#cb247-4"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">4</span>)</span>
<span id="cb247-5"><a href="datatype.html#cb247-5"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">5</span>)</span>
<span id="cb247-6"><a href="datatype.html#cb247-6"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">6</span>)</span>
<span id="cb247-7"><a href="datatype.html#cb247-7"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">7</span>)</span>
<span id="cb247-8"><a href="datatype.html#cb247-8"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">8</span>)</span>
<span id="cb247-9"><a href="datatype.html#cb247-9"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">9</span>)</span>
<span id="cb247-10"><a href="datatype.html#cb247-10"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, <span class="dv">10</span>)</span></code></pre></div>
<p>二つ目の方法はまず、10個のNAが格納されたベクトル<code>Reuslt.Vec2</code>を作っておいて、その中に要素を置換してく方法です。</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="datatype.html#cb248-1"></a>Result.Vec2     &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">10</span>)</span>
<span id="cb248-2"><a href="datatype.html#cb248-2"></a>Result.Vec2[<span class="dv">1</span>]  &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb248-3"><a href="datatype.html#cb248-3"></a>Result.Vec2[<span class="dv">2</span>]  &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb248-4"><a href="datatype.html#cb248-4"></a>Result.Vec2[<span class="dv">3</span>]  &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb248-5"><a href="datatype.html#cb248-5"></a>Result.Vec2[<span class="dv">4</span>]  &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb248-6"><a href="datatype.html#cb248-6"></a>Result.Vec2[<span class="dv">5</span>]  &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb248-7"><a href="datatype.html#cb248-7"></a>Result.Vec2[<span class="dv">6</span>]  &lt;-<span class="st"> </span><span class="dv">6</span></span>
<span id="cb248-8"><a href="datatype.html#cb248-8"></a>Result.Vec2[<span class="dv">7</span>]  &lt;-<span class="st"> </span><span class="dv">7</span></span>
<span id="cb248-9"><a href="datatype.html#cb248-9"></a>Result.Vec2[<span class="dv">8</span>]  &lt;-<span class="st"> </span><span class="dv">8</span></span>
<span id="cb248-10"><a href="datatype.html#cb248-10"></a>Result.Vec2[<span class="dv">9</span>]  &lt;-<span class="st"> </span><span class="dv">9</span></span>
<span id="cb248-11"><a href="datatype.html#cb248-11"></a>Result.Vec2[<span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">10</span></span></code></pre></div>
<p>以上の手順を<code>for()</code>を使って反復処理するとしたら、以下のようなコードになります。</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="datatype.html#cb249-1"></a><span class="co"># 方法1</span></span>
<span id="cb249-2"><a href="datatype.html#cb249-2"></a>Result.Vec1 &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb249-3"><a href="datatype.html#cb249-3"></a></span>
<span id="cb249-4"><a href="datatype.html#cb249-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb249-5"><a href="datatype.html#cb249-5"></a>    Result.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(Result.Vec1, i)</span>
<span id="cb249-6"><a href="datatype.html#cb249-6"></a>}</span>
<span id="cb249-7"><a href="datatype.html#cb249-7"></a></span>
<span id="cb249-8"><a href="datatype.html#cb249-8"></a><span class="co"># 方法2</span></span>
<span id="cb249-9"><a href="datatype.html#cb249-9"></a>Result.Vec2 &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">10</span>)</span>
<span id="cb249-10"><a href="datatype.html#cb249-10"></a></span>
<span id="cb249-11"><a href="datatype.html#cb249-11"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb249-12"><a href="datatype.html#cb249-12"></a>    Result.Vec2[i] &lt;-<span class="st"> </span>i</span>
<span id="cb249-13"><a href="datatype.html#cb249-13"></a>}</span></code></pre></div>
<p>結果を確認してみましょう。</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="datatype.html#cb250-1"></a>Result.Vec1</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="datatype.html#cb252-1"></a>Result.Vec2</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>コードの書き方は異なりますが、どれも結果は同じです。また、どちらが早いかというと、これくらいの計算ならどの方法でも同じです。ただし、より大規模の反復作業を行う場合、後者の方が時間が節約でき、コードの可読性も高いです。</p>
<hr />
</div>
<div id="type-null" class="section level2">
<h2><span class="header-section-number">7.9</span> NULL</h2>
<p>NULLは「存在しない」、空っぽであることを意味します。先ほどのNAはデータは存在するはずなのに、何らかの理由で値が存在しない、または割り当てられていないことを意味しますが、NULLは「存在しません」。したがって、NULLが含まれたベクトルを作成しても表示されません。NULLが含まれた<code>NULL.Vec1</code>を作ってみましょう。</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="datatype.html#cb254-1"></a>NULL.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="ot">NULL</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb254-2"><a href="datatype.html#cb254-2"></a>NULL.Vec1</span></code></pre></div>
<pre><code>## [1]  1  3  5 10</code></pre>
<p>3番目の要素であるNULLは表示されません。ということはNAと違って、データの長さも5ではなく4でしょう。確認してみます。</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="datatype.html#cb256-1"></a><span class="kw">length</span>(NULL.Vec1)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>この<code>NULL.Vec1</code>のデータ型は何でしょう。</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="datatype.html#cb258-1"></a><span class="kw">class</span>(NULL.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><code>is.null()</code>関数もありますが、どうでしょうか。</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="datatype.html#cb260-1"></a><span class="kw">is.null</span>(NULL.Vec1)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>NULLは存在しないことを意味するため、<code>NULL.Vec1</code>は要素が4のnumeric型ベクトルです。<code>is.null()</code>でNULLが判定できるのは<code>is.null(NULL)</code>のようなケースです。このNULLはいつ使うのでしょうか。実際、使う機会はあまりありません。強いて言えば、空っぽのリストを作成する際に使うケースがあります。リストについては第<a href="datastructure.html#datastructure">8</a>章で説明します。以下の例は第<a href="datastructure.html#datastructure">8</a>章を読み終わってから目を通して下さい。</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="datatype.html#cb262-1"></a>NULL.List1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Room1 =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</span>
<span id="cb262-2"><a href="datatype.html#cb262-2"></a>                   <span class="dt">Room2 =</span> <span class="kw">c</span>(<span class="st">&quot;Yuki&quot;</span>, <span class="st">&quot;Jaehyun&quot;</span>, <span class="st">&quot;Hadley&quot;</span>),</span>
<span id="cb262-3"><a href="datatype.html#cb262-3"></a>                   <span class="dt">Room3 =</span> <span class="ot">NULL</span>)</span>
<span id="cb262-4"><a href="datatype.html#cb262-4"></a></span>
<span id="cb262-5"><a href="datatype.html#cb262-5"></a>NULL.List1</span></code></pre></div>
<pre><code>## $Room1
## [1] 1 2 3
## 
## $Room2
## [1] &quot;Yuki&quot;    &quot;Jaehyun&quot; &quot;Hadley&quot; 
## 
## $Room3
## NULL</code></pre>
<p>このように予めリストの要素は作っておきたいが、とりあえず空けておく際に使います。続く分析の段階で<code>NULL.List1[["Room3"]]</code>に何かを格納したりすることに使えるでしょう。ちなみにこの場合は<code>is.null()</code>が使用可能です。</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="datatype.html#cb264-1"></a><span class="kw">is.null</span>(NULL.List1[[<span class="st">&quot;Room3&quot;</span>]])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<hr />
</div>
<div id="type-nan" class="section level2">
<h2><span class="header-section-number">7.10</span> NaN</h2>
<p>NaNはnumeric型、中でもdouble型の一種ですが、これは計算できない値を意味します。つまり、NaN値を直接入力することはめったにありませんが、計算の結果として<code>NaN</code>が返されるケースがあります。代表的な例が0を0で割った場合です。実際、0を0で割ることはできません。ここでは0を0で割った値を含む<code>NaN.Vec1</code>作ってみましょう。</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="datatype.html#cb266-1"></a>NaN.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span><span class="op">/</span><span class="dv">5</span>, <span class="dv">0</span><span class="op">/</span><span class="dv">12</span>, <span class="dv">0</span><span class="op">/</span><span class="dv">0</span>)</span>
<span id="cb266-2"><a href="datatype.html#cb266-2"></a>NaN.Vec1</span></code></pre></div>
<pre><code>## [1] 0.4 0.0 NaN</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="datatype.html#cb268-1"></a><span class="kw">class</span>(NaN.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>先ほどせつめいしましたように、NaNはnumeric型の一部ですので、データ型としてはnumeircになります。ある値がNaNか否かを判定するには<code>is.nan()</code>関数を使います。</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="datatype.html#cb270-1"></a><span class="kw">is.nan</span>(NaN.Vec1)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<hr />
</div>
<div id="type-inf" class="section level2">
<h2><span class="header-section-number">7.11</span> Inf</h2>
<p>Infもまたnumeric型、中でもdouble型の一部ですが、これは無限大を意味します。Infも通常、自分から作成するケースはあまりなく、結果として帰ってくる場合があります。一つの例が0以外の数値を0で割った場合です。それではなんらかの数値を0を割った値が含まれるベクトル<code>Inf.Vec1</code>を作ってみましょう。</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="datatype.html#cb272-1"></a>Inf.Vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">28</span><span class="op">/</span><span class="dv">95</span>, <span class="dv">3</span><span class="op">/</span><span class="dv">0</span>, <span class="dv">-12</span><span class="op">/</span><span class="dv">0</span>, <span class="dv">0</span><span class="op">/</span><span class="dv">0</span>)</span>
<span id="cb272-2"><a href="datatype.html#cb272-2"></a>Inf.Vec1</span></code></pre></div>
<pre><code>## [1] 0.2947368       Inf      -Inf       NaN</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="datatype.html#cb274-1"></a><span class="kw">class</span>(Inf.Vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>正の値を0で割ったら<code>Inf</code>が負の値を0で割ったら<code>-Inf</code>が返ってきます。これは正の無限大、負の無限大を意味します。データ型はNaNと同様、numeric型ですが、<code>is.infinite()</code>を使うと、無限大か否かが判定できます。</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="datatype.html#cb276-1"></a><span class="kw">is.infinite</span>(Inf.Vec1)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="27">
<li id="fn27"><p>アメリカの州ならアルファベット順ですね。<a href="datatype.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>むろん、「北から南へ」という規則もあるので、順序付きfactor型にしても問題ありません。ただし、今回はあくまでも表示順番を設定したいだけですので、<code>ordered = TRUE</code>は省略しました。<a href="datatype.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>他にも時間まで表すDateTime型があります。<a href="datatype.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>実際は2017年6月17日から11月15日まで記録しましたが、ここでは1週間分のみお見せします。<a href="datatype.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>主に使う<code>origin</code>は1970年1月1日です。<a href="datatype.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>POSIXct型は基準日 (1970年1月1日 00時00分00秒 = UNIX時間)からの符号付き経過秒数であり、POSIXlt型は日付、時間などがそれぞれ数字として格納されています。可読性の観点からはPOSIXlt型が優れていますが、データ処理の観点から見るとPOSIXct型の方が優れていると言われます。<a href="datatype.html#fnref32" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://aruaruaru.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="rbasic.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="datastructure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R_Not_for_Everyone.pdf", "R_Not_for_Everyone.epub"],
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
