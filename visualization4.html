<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>20. 可視化[発展] | 私たちのR: ベストプラクティスの探究</title>
  <meta name="description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="20. 可視化[発展] | 私たちのR: ベストプラクティスの探究" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="github-repo" content="JaehyunSong/RBook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="20. 可視化[発展] | 私たちのR: ベストプラクティスの探究" />
  
  <meta name="twitter:description" content="R Not for Everyone: An Esoteric Guide." />
  

<meta name="author" content="宋財泫 (Jaehyun Song)・矢内勇生 (Yuki Yanai)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="HTML/apple-favicon.png" />
  <link rel="shortcut icon" href="HTML/favicon.png" type="image/x-icon" />
<link rel="prev" href="visualization3.html"/>
<link rel="next" href="datahandling3.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165592410-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-165592410-1');
  gtag('set', {'user_id': 'USER_ID'}); 
</script>

<meta name="google-site-verification" content="QJouPRaPKBPU1jDp6VaBuFbVV5imTI-Aazl_ScJwVgU" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="HTML/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">私たちのR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 紹介</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#progress"><i class="fa fa-check"></i><b>1.1</b> 進捗状況</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> 本書の目的と対象</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-author"><i class="fa fa-check"></i><b>1.3</b> 著者紹介</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-download"><i class="fa fa-check"></i><b>1.4</b> データのダウンロード</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#about-howtoread"><i class="fa fa-check"></i><b>1.5</b> 本書における表記法</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#about-copyright"><i class="fa fa-check"></i><b>1.6</b> 著作権</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aboutR.html"><a href="aboutR.html"><i class="fa fa-check"></i><b>2</b> R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="aboutR.html"><a href="aboutR.html#WhatIsR"><i class="fa fa-check"></i><b>2.1</b> Rとは</a></li>
<li class="chapter" data-level="2.2" data-path="aboutR.html"><a href="aboutR.html#WhyR"><i class="fa fa-check"></i><b>2.2</b> Why R?</a></li>
<li class="chapter" data-level="2.3" data-path="aboutR.html"><a href="aboutR.html#GUI_IDE"><i class="fa fa-check"></i><b>2.3</b> GUIとIDE</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="aboutR.html"><a href="aboutR.html#gui"><i class="fa fa-check"></i><b>2.3.1</b> GUI</a></li>
<li class="chapter" data-level="2.3.2" data-path="aboutR.html"><a href="aboutR.html#aboutR-IDE"><i class="fa fa-check"></i><b>2.3.2</b> IDE</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Rのインストール</a>
<ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#install-package"><i class="fa fa-check"></i><b>3.1</b> パッケージのインストール</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="installation.html"><a href="installation.html#パッケージのインストール"><i class="fa fa-check"></i><b>3.1.1</b> パッケージのインストール</a></li>
<li class="chapter" data-level="3.1.2" data-path="installation.html"><a href="installation.html#パッケージの読み込み"><i class="fa fa-check"></i><b>3.1.2</b> パッケージの読み込み</a></li>
<li class="chapter" data-level="3.1.3" data-path="installation.html"><a href="installation.html#必須パッケージのインストール"><i class="fa fa-check"></i><b>3.1.3</b> 必須パッケージのインストール</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ide.html"><a href="ide.html"><i class="fa fa-check"></i><b>4</b> IDEの導入</a></li>
<li class="chapter" data-level="5" data-path="R-Customize.html"><a href="R-Customize.html"><i class="fa fa-check"></i><b>5</b> 分析環境のカスタマイズ</a>
<ul>
<li class="chapter" data-level="5.1" data-path="R-Customize.html"><a href="R-Customize.html#Customize-rprofile"><i class="fa fa-check"></i><b>5.1</b> .Rprofileの設定</a></li>
<li class="chapter" data-level="5.2" data-path="R-Customize.html"><a href="R-Customize.html#Customize-rstudio"><i class="fa fa-check"></i><b>5.2</b> RStudioのカスタマイズ</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="process.html"><a href="process.html"><i class="fa fa-check"></i><b>6</b> 分析の手順</a></li>
<li class="chapter" data-level="7" data-path="rbasic.html"><a href="rbasic.html"><i class="fa fa-check"></i><b>7</b> 基本的な操作</a>
<ul>
<li class="chapter" data-level="" data-path="rbasic.html"><a href="rbasic.html#目次"><i class="fa fa-check"></i>目次</a></li>
<li class="chapter" data-level="7.1" data-path="rbasic.html"><a href="rbasic.html#rbasic-compbasic"><i class="fa fa-check"></i><b>7.1</b> コンピュータの基礎知識</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rbasic.html"><a href="rbasic.html#ファイル名"><i class="fa fa-check"></i><b>7.1.1</b> ファイル名</a></li>
<li class="chapter" data-level="7.1.2" data-path="rbasic.html"><a href="rbasic.html#ファイルシステムとパス"><i class="fa fa-check"></i><b>7.1.2</b> ファイルシステムとパス</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rbasic.html"><a href="rbasic.html#rbasic-project"><i class="fa fa-check"></i><b>7.2</b> 「プロジェクト」のすゝめ</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rbasic.html"><a href="rbasic.html#プロジェクト"><i class="fa fa-check"></i><b>7.2.1</b> プロジェクト</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rbasic.html"><a href="rbasic.html#rbasic-calc"><i class="fa fa-check"></i><b>7.3</b> 電卓としてのR</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="rbasic.html"><a href="rbasic.html#算術演算子"><i class="fa fa-check"></i><b>7.3.1</b> 算術演算子</a></li>
<li class="chapter" data-level="7.3.2" data-path="rbasic.html"><a href="rbasic.html#論理演算子"><i class="fa fa-check"></i><b>7.3.2</b> 論理演算子</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="rbasic.html"><a href="rbasic.html#rbasic-input"><i class="fa fa-check"></i><b>7.4</b> 格納とオブジェクトの作成</a></li>
<li class="chapter" data-level="7.5" data-path="rbasic.html"><a href="rbasic.html#rbasic-extract"><i class="fa fa-check"></i><b>7.5</b> 要素の抽出</a></li>
<li class="chapter" data-level="7.6" data-path="rbasic.html"><a href="rbasic.html#rbasic-exercise"><i class="fa fa-check"></i><b>7.6</b> 演習問題</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i><b>8</b> データの入出力</a>
<ul>
<li class="chapter" data-level="8.1" data-path="io.html"><a href="io.html#io-toc"><i class="fa fa-check"></i><b>8.1</b> 目次</a></li>
<li class="chapter" data-level="8.2" data-path="io.html"><a href="io.html#io-read"><i class="fa fa-check"></i><b>8.2</b> データの読み込み</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="io.html"><a href="io.html#csvファイルの場合"><i class="fa fa-check"></i><b>8.2.1</b> csvファイルの場合</a></li>
<li class="chapter" data-level="8.2.2" data-path="io.html"><a href="io.html#エンコーディングの話"><i class="fa fa-check"></i><b>8.2.2</b> エンコーディングの話</a></li>
<li class="chapter" data-level="8.2.3" data-path="io.html"><a href="io.html#その他のフォーマット"><i class="fa fa-check"></i><b>8.2.3</b> その他のフォーマット</a></li>
<li class="chapter" data-level="8.2.4" data-path="io.html"><a href="io.html#rdataファイルの場合"><i class="fa fa-check"></i><b>8.2.4</b> RDataファイルの場合</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="io.html"><a href="io.html#io-export"><i class="fa fa-check"></i><b>8.3</b> データの書き出し</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="io.html"><a href="io.html#csvファイル"><i class="fa fa-check"></i><b>8.3.1</b> csvファイル</a></li>
<li class="chapter" data-level="8.3.2" data-path="io.html"><a href="io.html#rdataファイル"><i class="fa fa-check"></i><b>8.3.2</b> RDataファイル</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="datatype.html"><a href="datatype.html"><i class="fa fa-check"></i><b>9</b> データの型</a>
<ul>
<li class="chapter" data-level="9.1" data-path="datatype.html"><a href="datatype.html#WhatIsDatatype"><i class="fa fa-check"></i><b>9.1</b> データ型とは</a></li>
<li class="chapter" data-level="9.2" data-path="datatype.html"><a href="datatype.html#type-logical"><i class="fa fa-check"></i><b>9.2</b> Logical</a></li>
<li class="chapter" data-level="9.3" data-path="datatype.html"><a href="datatype.html#type-numeric"><i class="fa fa-check"></i><b>9.3</b> Numeric</a></li>
<li class="chapter" data-level="9.4" data-path="datatype.html"><a href="datatype.html#type-complex"><i class="fa fa-check"></i><b>9.4</b> Complex</a></li>
<li class="chapter" data-level="9.5" data-path="datatype.html"><a href="datatype.html#type-character"><i class="fa fa-check"></i><b>9.5</b> Character</a></li>
<li class="chapter" data-level="9.6" data-path="datatype.html"><a href="datatype.html#type-factor"><i class="fa fa-check"></i><b>9.6</b> Factor</a></li>
<li class="chapter" data-level="9.7" data-path="datatype.html"><a href="datatype.html#type-date"><i class="fa fa-check"></i><b>9.7</b> Date</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="datatype.html"><a href="datatype.html#なぜdate型があるのか"><i class="fa fa-check"></i><b>9.7.1</b> なぜDate型があるのか</a></li>
<li class="chapter" data-level="9.7.2" data-path="datatype.html"><a href="datatype.html#date型の作り方"><i class="fa fa-check"></i><b>9.7.2</b> Date型の作り方</a></li>
<li class="chapter" data-level="9.7.3" data-path="datatype.html"><a href="datatype.html#posixctposixlt型について"><i class="fa fa-check"></i><b>9.7.3</b> POSIXct、POSIXlt型について</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="datatype.html"><a href="datatype.html#type-na"><i class="fa fa-check"></i><b>9.8</b> NA</a></li>
<li class="chapter" data-level="9.9" data-path="datatype.html"><a href="datatype.html#type-null"><i class="fa fa-check"></i><b>9.9</b> NULL</a></li>
<li class="chapter" data-level="9.10" data-path="datatype.html"><a href="datatype.html#type-nan"><i class="fa fa-check"></i><b>9.10</b> NaN</a></li>
<li class="chapter" data-level="9.11" data-path="datatype.html"><a href="datatype.html#type-inf"><i class="fa fa-check"></i><b>9.11</b> Inf</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datastructure.html"><a href="datastructure.html"><i class="fa fa-check"></i><b>10</b> データの構造</a>
<ul>
<li class="chapter" data-level="10.1" data-path="datastructure.html"><a href="datastructure.html#structure-intro"><i class="fa fa-check"></i><b>10.1</b> 目次</a></li>
<li class="chapter" data-level="10.2" data-path="datastructure.html"><a href="datastructure.html#WhatIsDatastructure"><i class="fa fa-check"></i><b>10.2</b> データ構造とは</a></li>
<li class="chapter" data-level="10.3" data-path="datastructure.html"><a href="datastructure.html#structure-vector"><i class="fa fa-check"></i><b>10.3</b> ベクトル (vector)</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="datastructure.html"><a href="datastructure.html#ベクトルの作り方"><i class="fa fa-check"></i><b>10.3.1</b> ベクトルの作り方</a></li>
<li class="chapter" data-level="10.3.2" data-path="datastructure.html"><a href="datastructure.html#ベクトルの操作"><i class="fa fa-check"></i><b>10.3.2</b> ベクトルの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="datastructure.html"><a href="datastructure.html#structure-matrix"><i class="fa fa-check"></i><b>10.4</b> 行列 (matrix)</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="datastructure.html"><a href="datastructure.html#行列の作り方"><i class="fa fa-check"></i><b>10.4.1</b> 行列の作り方</a></li>
<li class="chapter" data-level="10.4.2" data-path="datastructure.html"><a href="datastructure.html#行列の操作"><i class="fa fa-check"></i><b>10.4.2</b> 行列の操作</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="datastructure.html"><a href="datastructure.html#structure-dataframe"><i class="fa fa-check"></i><b>10.5</b> データフレーム (data.frame)</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="datastructure.html"><a href="datastructure.html#データフレームの作成"><i class="fa fa-check"></i><b>10.5.1</b> データフレームの作成</a></li>
<li class="chapter" data-level="10.5.2" data-path="datastructure.html"><a href="datastructure.html#データフレームの操作"><i class="fa fa-check"></i><b>10.5.2</b> データフレームの操作</a></li>
<li class="chapter" data-level="10.5.3" data-path="datastructure.html"><a href="datastructure.html#tibble型"><i class="fa fa-check"></i><b>10.5.3</b> tibble型</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="datastructure.html"><a href="datastructure.html#structure-list"><i class="fa fa-check"></i><b>10.6</b> リスト (list)</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="datastructure.html"><a href="datastructure.html#リスト型データの作成"><i class="fa fa-check"></i><b>10.6.1</b> リスト型データの作成</a></li>
<li class="chapter" data-level="10.6.2" data-path="datastructure.html"><a href="datastructure.html#リスト型データの操作"><i class="fa fa-check"></i><b>10.6.2</b> リスト型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="datastructure.html"><a href="datastructure.html#structure-array"><i class="fa fa-check"></i><b>10.7</b> 配列 (array)</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="datastructure.html"><a href="datastructure.html#配列型データの作成"><i class="fa fa-check"></i><b>10.7.1</b> 配列型データの作成</a></li>
<li class="chapter" data-level="10.7.2" data-path="datastructure.html"><a href="datastructure.html#配列型データの操作"><i class="fa fa-check"></i><b>10.7.2</b> 配列型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="datastructure.html"><a href="datastructure.html#structure-exercise"><i class="fa fa-check"></i><b>10.8</b> 練習問題</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="datastructure.html"><a href="datastructure.html#ベクトル"><i class="fa fa-check"></i><b>10.8.1</b> ベクトル</a></li>
<li class="chapter" data-level="10.8.2" data-path="datastructure.html"><a href="datastructure.html#行列"><i class="fa fa-check"></i><b>10.8.2</b> 行列</a></li>
<li class="chapter" data-level="10.8.3" data-path="datastructure.html"><a href="datastructure.html#データフレーム"><i class="fa fa-check"></i><b>10.8.3</b> データフレーム</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>11</b> Rプログラミングの基礎</a>
<ul>
<li class="chapter" data-level="11.1" data-path="programming.html"><a href="programming.html#programming-intro"><i class="fa fa-check"></i><b>11.1</b> R言語の基礎概念</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="programming.html"><a href="programming.html#オブジェクト"><i class="fa fa-check"></i><b>11.1.1</b> オブジェクト</a></li>
<li class="chapter" data-level="11.1.2" data-path="programming.html"><a href="programming.html#クラス"><i class="fa fa-check"></i><b>11.1.2</b> クラス</a></li>
<li class="chapter" data-level="11.1.3" data-path="programming.html"><a href="programming.html#関数と引数"><i class="fa fa-check"></i><b>11.1.3</b> 関数と引数</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="programming.html"><a href="programming.html#programming-style"><i class="fa fa-check"></i><b>11.2</b> Rのコーディングスタイル</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="programming.html"><a href="programming.html#オブジェクト名"><i class="fa fa-check"></i><b>11.2.1</b> オブジェクト名</a></li>
<li class="chapter" data-level="11.2.2" data-path="programming.html"><a href="programming.html#改行"><i class="fa fa-check"></i><b>11.2.2</b> 改行</a></li>
<li class="chapter" data-level="11.2.3" data-path="programming.html"><a href="programming.html#スペースとインデント"><i class="fa fa-check"></i><b>11.2.3</b> スペースとインデント</a></li>
<li class="chapter" data-level="11.2.4" data-path="programming.html"><a href="programming.html#代入"><i class="fa fa-check"></i><b>11.2.4</b> 代入</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="programming.html"><a href="programming.html#programming-iteration"><i class="fa fa-check"></i><b>11.3</b> 反復</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="programming.html"><a href="programming.html#for-による反復"><i class="fa fa-check"></i><b>11.3.1</b> <code>for</code> による反復</a></li>
<li class="chapter" data-level="11.3.2" data-path="programming.html"><a href="programming.html#whileによる反復"><i class="fa fa-check"></i><b>11.3.2</b> <code>while</code>による反復</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="programming.html"><a href="programming.html#programming-condition"><i class="fa fa-check"></i><b>11.4</b> 条件分岐</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="programming.html"><a href="programming.html#ifelse-ifelse-による条件分岐"><i class="fa fa-check"></i><b>11.4.1</b> <code>if</code>、<code>else if</code>、<code>else</code> による条件分岐</a></li>
<li class="chapter" data-level="11.4.2" data-path="programming.html"><a href="programming.html#ifelseによる条件分岐"><i class="fa fa-check"></i><b>11.4.2</b> <code>ifelse()</code>による条件分岐</a></li>
<li class="chapter" data-level="11.4.3" data-path="programming.html"><a href="programming.html#switchによる条件分岐"><i class="fa fa-check"></i><b>11.4.3</b> <code>switch()</code>による条件分岐</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="programming.html"><a href="programming.html#programming-exercise"><i class="fa fa-check"></i><b>11.5</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> 関数の自作</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#func-intro"><i class="fa fa-check"></i><b>12.1</b> 関数の作成</a></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#func-adv"><i class="fa fa-check"></i><b>12.2</b> ちょっと複雑な関数</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#func-in-func"><i class="fa fa-check"></i><b>12.3</b> 関数 in 関数</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#func-exercise"><i class="fa fa-check"></i><b>12.4</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datahandling1.html"><a href="datahandling1.html"><i class="fa fa-check"></i><b>13</b> データハンドリング [基礎編: 抽出]</a>
<ul>
<li class="chapter" data-level="13.1" data-path="datahandling1.html"><a href="datahandling1.html#handling1-intro"><i class="fa fa-check"></i><b>13.1</b> データハンドリングとtidyverse</a></li>
<li class="chapter" data-level="13.2" data-path="datahandling1.html"><a href="datahandling1.html#handling1-pipe"><i class="fa fa-check"></i><b>13.2</b> パイプ演算子 (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="13.3" data-path="datahandling1.html"><a href="datahandling1.html#handling1-select"><i class="fa fa-check"></i><b>13.3</b> 列の抽出</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出する"><i class="fa fa-check"></i><b>13.3.1</b> 特定の列を抽出する</a></li>
<li class="chapter" data-level="13.3.2" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出し列名を変更する"><i class="fa fa-check"></i><b>13.3.2</b> 特定の列を抽出し、列名を変更する</a></li>
<li class="chapter" data-level="13.3.3" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を除外する"><i class="fa fa-check"></i><b>13.3.3</b> 特定の列を除外する</a></li>
<li class="chapter" data-level="13.3.4" data-path="datahandling1.html"><a href="datahandling1.html#隣接した列を指定する"><i class="fa fa-check"></i><b>13.3.4</b> 隣接した列を指定する</a></li>
<li class="chapter" data-level="13.3.5" data-path="datahandling1.html"><a href="datahandling1.html#一部の列の順番だけを変える"><i class="fa fa-check"></i><b>13.3.5</b> 一部の列の順番だけを変える</a></li>
<li class="chapter" data-level="13.3.6" data-path="datahandling1.html"><a href="datahandling1.html#selectの便利な機能"><i class="fa fa-check"></i><b>13.3.6</b> <code>select()</code>の便利な機能</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="datahandling1.html"><a href="datahandling1.html#handling1-filter"><i class="fa fa-check"></i><b>13.4</b> 行の抽出</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="datahandling1.html"><a href="datahandling1.html#指定した行を抽出する"><i class="fa fa-check"></i><b>13.4.1</b> 指定した行を抽出する</a></li>
<li class="chapter" data-level="13.4.2" data-path="datahandling1.html"><a href="datahandling1.html#条件に合致する行を抽出する"><i class="fa fa-check"></i><b>13.4.2</b> 条件に合致する行を抽出する</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="datahandling1.html"><a href="datahandling1.html#handling1-arrange"><i class="fa fa-check"></i><b>13.5</b> 行のソート</a></li>
<li class="chapter" data-level="13.6" data-path="datahandling1.html"><a href="datahandling1.html#handling1-exercise"><i class="fa fa-check"></i><b>13.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="datahandling2.html"><a href="datahandling2.html"><i class="fa fa-check"></i><b>14</b> データハンドリング [基礎編: 拡張]</a>
<ul>
<li class="chapter" data-level="14.1" data-path="datahandling2.html"><a href="datahandling2.html#handling2-summarise"><i class="fa fa-check"></i><b>14.1</b> 記述統計量の計算</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="datahandling2.html"><a href="datahandling2.html#summariseによる記述統計量の計算"><i class="fa fa-check"></i><b>14.1.1</b> <code>summarise()</code>による記述統計量の計算</a></li>
<li class="chapter" data-level="14.1.2" data-path="datahandling2.html"><a href="datahandling2.html#summariseに使える便利な関数"><i class="fa fa-check"></i><b>14.1.2</b> <code>summarise()</code>に使える便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="datahandling2.html"><a href="datahandling2.html#handling2-group"><i class="fa fa-check"></i><b>14.2</b> グルーピング</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="datahandling2.html"><a href="datahandling2.html#group_byによるグループ化"><i class="fa fa-check"></i><b>14.2.1</b> <code>group_by()</code>によるグループ化</a></li>
<li class="chapter" data-level="14.2.2" data-path="datahandling2.html"><a href="datahandling2.html#複数の変数を用いたグループ化"><i class="fa fa-check"></i><b>14.2.2</b> 複数の変数を用いたグループ化</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="datahandling2.html"><a href="datahandling2.html#handling2-mutate"><i class="fa fa-check"></i><b>14.3</b> 変数の計算</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="datahandling2.html"><a href="datahandling2.html#mutate関数の使い方"><i class="fa fa-check"></i><b>14.3.1</b> <code>mutate()</code>関数の使い方</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="datahandling2.html"><a href="datahandling2.html#handling2-rowwise"><i class="fa fa-check"></i><b>14.4</b> 行単位の操作</a></li>
<li class="chapter" data-level="14.5" data-path="datahandling2.html"><a href="datahandling2.html#handling2-merge"><i class="fa fa-check"></i><b>14.5</b> データの結合</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="datahandling2.html"><a href="datahandling2.html#行の結合"><i class="fa fa-check"></i><b>14.5.1</b> 行の結合</a></li>
<li class="chapter" data-level="14.5.2" data-path="datahandling2.html"><a href="datahandling2.html#列の結合"><i class="fa fa-check"></i><b>14.5.2</b> 列の結合</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="datahandling2.html"><a href="datahandling2.html#handling2-exercise"><i class="fa fa-check"></i><b>14.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>15</b> データハンドリング [基礎編: factor型]</a>
<ul>
<li class="chapter" data-level="15.1" data-path="factor.html"><a href="factor.html#名目変数を含むグラフを作成する際の注意点"><i class="fa fa-check"></i><b>15.1</b> 名目変数を含むグラフを作成する際の注意点</a></li>
<li class="chapter" data-level="15.2" data-path="factor.html"><a href="factor.html#forcatsパッケージについて"><i class="fa fa-check"></i><b>15.2</b> <code>forcats</code>パッケージについて</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="factor.html"><a href="factor.html#fct_relevel-水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.1</b> <code>fct_relevel()</code>: 水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.2" data-path="factor.html"><a href="factor.html#fct_recode-水準のラベルを変更する"><i class="fa fa-check"></i><b>15.2.2</b> <code>fct_recode()</code>: 水準のラベルを変更する</a></li>
<li class="chapter" data-level="15.2.3" data-path="factor.html"><a href="factor.html#fct_rev-水準の順番を反転させる"><i class="fa fa-check"></i><b>15.2.3</b> <code>fct_rev()</code>: 水準の順番を反転させる</a></li>
<li class="chapter" data-level="15.2.4" data-path="factor.html"><a href="factor.html#fct_infreq-頻度順に順番を変更する"><i class="fa fa-check"></i><b>15.2.4</b> <code>fct_infreq()</code>: 頻度順に順番を変更する</a></li>
<li class="chapter" data-level="15.2.5" data-path="factor.html"><a href="factor.html#fct_inorder-データ内の出現順番に順番を変更する"><i class="fa fa-check"></i><b>15.2.5</b> <code>fct_inorder()</code>: データ内の出現順番に順番を変更する</a></li>
<li class="chapter" data-level="15.2.6" data-path="factor.html"><a href="factor.html#fct_shift-水準の順番をずらす"><i class="fa fa-check"></i><b>15.2.6</b> <code>fct_shift()</code>: 水準の順番をずらす</a></li>
<li class="chapter" data-level="15.2.7" data-path="factor.html"><a href="factor.html#fct_shuffle-水準の順番をランダム化する"><i class="fa fa-check"></i><b>15.2.7</b> <code>fct_shuffle()</code>: 水準の順番をランダム化する</a></li>
<li class="chapter" data-level="15.2.8" data-path="factor.html"><a href="factor.html#fct_reorder-別の1変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.8</b> <code>fct_reorder()</code>: 別の1変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.9" data-path="factor.html"><a href="factor.html#fct_reorder2-別の2変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.9</b> <code>fct_reorder2()</code>: 別の2変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.10" data-path="factor.html"><a href="factor.html#fct_collapse-水準を統合する"><i class="fa fa-check"></i><b>15.2.10</b> <code>fct_collapse()</code>: 水準を統合する</a></li>
<li class="chapter" data-level="15.2.11" data-path="factor.html"><a href="factor.html#fct_drop-使われていない水準を除去する"><i class="fa fa-check"></i><b>15.2.11</b> <code>fct_drop()</code>: 使われていない水準を除去する</a></li>
<li class="chapter" data-level="15.2.12" data-path="factor.html"><a href="factor.html#fct_expand-水準を追加する"><i class="fa fa-check"></i><b>15.2.12</b> <code>fct_expand()</code>: 水準を追加する</a></li>
<li class="chapter" data-level="15.2.13" data-path="factor.html"><a href="factor.html#fct_explicit_na-欠損値に水準を与える"><i class="fa fa-check"></i><b>15.2.13</b> <code>fct_explicit_na()</code>: 欠損値に水準を与える</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="factor.html"><a href="factor.html#factor-excersie"><i class="fa fa-check"></i><b>15.3</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>16</b> 整然データ構造</a>
<ul>
<li class="chapter" data-level="16.1" data-path="tidydata.html"><a href="tidydata.html#tidydata-intro"><i class="fa fa-check"></i><b>16.1</b> 整然データ (tidy data)とは</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="tidydata.html"><a href="tidydata.html#つの列は1つの変数を表す"><i class="fa fa-check"></i><b>16.1.1</b> 1つの列は、1つの変数を表す</a></li>
<li class="chapter" data-level="16.1.2" data-path="tidydata.html"><a href="tidydata.html#つの行は1つの観測を表す"><i class="fa fa-check"></i><b>16.1.2</b> 1つの行は、1つの観測を表す</a></li>
<li class="chapter" data-level="16.1.3" data-path="tidydata.html"><a href="tidydata.html#つのセルは1つの値を表す"><i class="fa fa-check"></i><b>16.1.3</b> 1つのセルは、1つの値を表す</a></li>
<li class="chapter" data-level="16.1.4" data-path="tidydata.html"><a href="tidydata.html#つの表は1つの観測単位をもつ"><i class="fa fa-check"></i><b>16.1.4</b> 1つの表は、1つの観測単位をもつ</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="tidydata.html"><a href="tidydata.html#tidydata-gather"><i class="fa fa-check"></i><b>16.2</b> Wide型からLong型へ</a></li>
<li class="chapter" data-level="16.3" data-path="tidydata.html"><a href="tidydata.html#tidydata-spread"><i class="fa fa-check"></i><b>16.3</b> Long型からWide型へ</a></li>
<li class="chapter" data-level="16.4" data-path="tidydata.html"><a href="tidydata.html#tidydata-separate"><i class="fa fa-check"></i><b>16.4</b> 列の操作</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="visualization1.html"><a href="visualization1.html"><i class="fa fa-check"></i><b>17</b> 可視化[理論]</a>
<ul>
<li class="chapter" data-level="17.1" data-path="visualization1.html"><a href="visualization1.html#visual-packages"><i class="fa fa-check"></i><b>17.1</b> 可視化のためのパッケージ</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="visualization1.html"><a href="visualization1.html#base-r"><i class="fa fa-check"></i><b>17.1.1</b> Base R</a></li>
<li class="chapter" data-level="17.1.2" data-path="visualization1.html"><a href="visualization1.html#latticeパッケージ"><i class="fa fa-check"></i><b>17.1.2</b> {lattice}パッケージ</a></li>
<li class="chapter" data-level="17.1.3" data-path="visualization1.html"><a href="visualization1.html#ggplot2パッケージ"><i class="fa fa-check"></i><b>17.1.3</b> {ggplot2}パッケージ</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="visualization1.html"><a href="visualization1.html#visual-ggplot"><i class="fa fa-check"></i><b>17.2</b> グラフィックの文法</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="visualization1.html"><a href="visualization1.html#グラフィックの文法"><i class="fa fa-check"></i><b>17.2.1</b> グラフィックの文法</a></li>
<li class="chapter" data-level="17.2.2" data-path="visualization1.html"><a href="visualization1.html#ggplot2のイメージ"><i class="fa fa-check"></i><b>17.2.2</b> ggplot2のイメージ</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="visualization1.html"><a href="visualization1.html#グラフィックの構成要素"><i class="fa fa-check"></i><b>17.3</b> グラフィックの構成要素</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="visualization1.html"><a href="visualization1.html#データ"><i class="fa fa-check"></i><b>17.3.1</b> データ</a></li>
<li class="chapter" data-level="17.3.2" data-path="visualization1.html"><a href="visualization1.html#幾何オブジェクト"><i class="fa fa-check"></i><b>17.3.2</b> 幾何オブジェクト</a></li>
<li class="chapter" data-level="17.3.3" data-path="visualization1.html"><a href="visualization1.html#マッピング"><i class="fa fa-check"></i><b>17.3.3</b> マッピング</a></li>
<li class="chapter" data-level="17.3.4" data-path="visualization1.html"><a href="visualization1.html#マッピング-その他"><i class="fa fa-check"></i><b>17.3.4</b> マッピング: その他</a></li>
<li class="chapter" data-level="17.3.5" data-path="visualization1.html"><a href="visualization1.html#座標系"><i class="fa fa-check"></i><b>17.3.5</b> 座標系</a></li>
<li class="chapter" data-level="17.3.6" data-path="visualization1.html"><a href="visualization1.html#スケール"><i class="fa fa-check"></i><b>17.3.6</b> スケール</a></li>
<li class="chapter" data-level="17.3.7" data-path="visualization1.html"><a href="visualization1.html#ファセット"><i class="fa fa-check"></i><b>17.3.7</b> ファセット</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="visualization1.html"><a href="visualization1.html#visual-principal"><i class="fa fa-check"></i><b>17.4</b> 良いグラフとは</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="visualization1.html"><a href="visualization1.html#データインク比"><i class="fa fa-check"></i><b>17.4.1</b> データ・インク比</a></li>
<li class="chapter" data-level="17.4.2" data-path="visualization1.html"><a href="visualization1.html#次元プロット"><i class="fa fa-check"></i><b>17.4.2</b> 3次元プロット</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="visualization2.html"><a href="visualization2.html"><i class="fa fa-check"></i><b>18</b> 可視化[基礎]</a>
<ul>
<li class="chapter" data-level="18.1" data-path="visualization2.html"><a href="visualization2.html#本章の内容"><i class="fa fa-check"></i><b>18.1</b> 本章の内容</a></li>
<li class="chapter" data-level="18.2" data-path="visualization2.html"><a href="visualization2.html#visual2-data"><i class="fa fa-check"></i><b>18.2</b> 実習用データ</a></li>
<li class="chapter" data-level="18.3" data-path="visualization2.html"><a href="visualization2.html#visual2-barplot"><i class="fa fa-check"></i><b>18.3</b> 棒グラフ</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="visualization2.html"><a href="visualization2.html#ケース数のグラフ"><i class="fa fa-check"></i><b>18.3.1</b> ケース数のグラフ</a></li>
<li class="chapter" data-level="18.3.2" data-path="visualization2.html"><a href="visualization2.html#記述統計量のグラフ"><i class="fa fa-check"></i><b>18.3.2</b> 記述統計量のグラフ</a></li>
<li class="chapter" data-level="18.3.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する"><i class="fa fa-check"></i><b>18.3.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="visualization2.html"><a href="visualization2.html#visual2-histogram"><i class="fa fa-check"></i><b>18.4</b> ヒストグラム</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="visualization2.html"><a href="visualization2.html#ヒストグラムの棒の大きさを調整する"><i class="fa fa-check"></i><b>18.4.1</b> ヒストグラムの棒の大きさを調整する</a></li>
<li class="chapter" data-level="18.4.2" data-path="visualization2.html"><a href="visualization2.html#密度を追加する"><i class="fa fa-check"></i><b>18.4.2</b> 密度を追加する</a></li>
<li class="chapter" data-level="18.4.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-1"><i class="fa fa-check"></i><b>18.4.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="visualization2.html"><a href="visualization2.html#visual2-box"><i class="fa fa-check"></i><b>18.5</b> 箱ひげ図</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="visualization2.html"><a href="visualization2.html#個別のデータを表示する"><i class="fa fa-check"></i><b>18.5.1</b> 個別のデータを表示する</a></li>
<li class="chapter" data-level="18.5.2" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-2"><i class="fa fa-check"></i><b>18.5.2</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.5.3" data-path="visualization2.html"><a href="visualization2.html#複数の変数の場合"><i class="fa fa-check"></i><b>18.5.3</b> 複数の変数の場合</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="visualization2.html"><a href="visualization2.html#visual2-scatter"><i class="fa fa-check"></i><b>18.6</b> 散布図</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-3"><i class="fa fa-check"></i><b>18.6.1</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.6.2" data-path="visualization2.html"><a href="visualization2.html#一部の点をハイライトする"><i class="fa fa-check"></i><b>18.6.2</b> 一部の点をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="visualization2.html"><a href="visualization2.html#visual2-line"><i class="fa fa-check"></i><b>18.7</b> 折れ線グラフ</a>
<ul>
<li class="chapter" data-level="18.7.1" data-path="visualization2.html"><a href="visualization2.html#一部の線をハイライトする"><i class="fa fa-check"></i><b>18.7.1</b> 一部の線をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="visualization2.html"><a href="visualization2.html#図の保存"><i class="fa fa-check"></i><b>18.8</b> 図の保存</a>
<ul>
<li class="chapter" data-level="18.8.1" data-path="visualization2.html"><a href="visualization2.html#ggsaveを利用した図の保存"><i class="fa fa-check"></i><b>18.8.1</b> <code>ggsave()</code>を利用した図の保存</a></li>
<li class="chapter" data-level="18.8.2" data-path="visualization2.html"><a href="visualization2.html#quartzを利用した図の保存"><i class="fa fa-check"></i><b>18.8.2</b> <code>quartz()</code>を利用した図の保存</a></li>
</ul></li>
<li class="chapter" data-level="18.9" data-path="visualization2.html"><a href="visualization2.html#まとめ"><i class="fa fa-check"></i><b>18.9</b> まとめ</a></li>
<li class="chapter" data-level="18.10" data-path="visualization2.html"><a href="visualization2.html#visual2-excersie"><i class="fa fa-check"></i><b>18.10</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="visualization3.html"><a href="visualization3.html"><i class="fa fa-check"></i><b>19</b> 可視化[応用]</a>
<ul>
<li class="chapter" data-level="19.1" data-path="visualization3.html"><a href="visualization3.html#visual3-labs"><i class="fa fa-check"></i><b>19.1</b> <code>labs()</code>: ラベルの修正</a></li>
<li class="chapter" data-level="19.2" data-path="visualization3.html"><a href="visualization3.html#visual3-coordinate"><i class="fa fa-check"></i><b>19.2</b> <code>coord_*()</code>: 座標系の調整</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="visualization3.html"><a href="visualization3.html#直交座標系の操作"><i class="fa fa-check"></i><b>19.2.1</b> 直交座標系の操作</a></li>
<li class="chapter" data-level="19.2.2" data-path="visualization3.html"><a href="visualization3.html#座標系の変換"><i class="fa fa-check"></i><b>19.2.2</b> 座標系の変換</a></li>
<li class="chapter" data-level="19.2.3" data-path="visualization3.html"><a href="visualization3.html#座標系の回転"><i class="fa fa-check"></i><b>19.2.3</b> 座標系の回転</a></li>
<li class="chapter" data-level="19.2.4" data-path="visualization3.html"><a href="visualization3.html#座標系の固定"><i class="fa fa-check"></i><b>19.2.4</b> 座標系の固定</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="visualization3.html"><a href="visualization3.html#visual3-scale"><i class="fa fa-check"></i><b>19.3</b> <code>scale_*_*()</code>: スケールの調整</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="visualization3.html"><a href="visualization3.html#横軸縦軸スケールの調整"><i class="fa fa-check"></i><b>19.3.1</b> 横軸・縦軸スケールの調整</a></li>
<li class="chapter" data-level="19.3.2" data-path="visualization3.html"><a href="visualization3.html#colorスケールの調整"><i class="fa fa-check"></i><b>19.3.2</b> <code>color</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.3" data-path="visualization3.html"><a href="visualization3.html#alphaスケールの調整"><i class="fa fa-check"></i><b>19.3.3</b> <code>alpha</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.4" data-path="visualization3.html"><a href="visualization3.html#sizeスケールの調整"><i class="fa fa-check"></i><b>19.3.4</b> <code>size</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.5" data-path="visualization3.html"><a href="visualization3.html#shapelinetypeスケールの調整"><i class="fa fa-check"></i><b>19.3.5</b> <code>shape</code>、<code>linetype</code>スケールの調整</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="visualization3.html"><a href="visualization3.html#visual3-theme"><i class="fa fa-check"></i><b>19.4</b> <code>theme_*()</code>と<code>theme()</code>: テーマの指定</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="visualization3.html"><a href="visualization3.html#文字の大きさ"><i class="fa fa-check"></i><b>19.4.1</b> 文字の大きさ</a></li>
<li class="chapter" data-level="19.4.2" data-path="visualization3.html"><a href="visualization3.html#背景のグリッド"><i class="fa fa-check"></i><b>19.4.2</b> 背景のグリッド</a></li>
<li class="chapter" data-level="19.4.3" data-path="visualization3.html"><a href="visualization3.html#目盛りラベルの回転"><i class="fa fa-check"></i><b>19.4.3</b> 目盛りラベルの回転</a></li>
<li class="chapter" data-level="19.4.4" data-path="visualization3.html"><a href="visualization3.html#scale__を用いたラベル重複の回避"><i class="fa fa-check"></i><b>19.4.4</b> <code>scale_*_*()</code>を用いたラベル重複の回避</a></li>
<li class="chapter" data-level="19.4.5" data-path="visualization3.html"><a href="visualization3.html#凡例の表示非表示"><i class="fa fa-check"></i><b>19.4.5</b> 凡例の表示/非表示</a></li>
<li class="chapter" data-level="19.4.6" data-path="visualization3.html"><a href="visualization3.html#凡例の位置"><i class="fa fa-check"></i><b>19.4.6</b> 凡例の位置</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="visualization3.html"><a href="visualization3.html#visual3-merge"><i class="fa fa-check"></i><b>19.5</b> 図の結合</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="visualization4.html"><a href="visualization4.html"><i class="fa fa-check"></i><b>20</b> 可視化[発展]</a>
<ul>
<li class="chapter" data-level="20.1" data-path="visualization4.html"><a href="visualization4.html#visual4-intro"><i class="fa fa-check"></i><b>20.1</b> 概要</a></li>
<li class="chapter" data-level="20.2" data-path="visualization4.html"><a href="visualization4.html#visual4-violin"><i class="fa fa-check"></i><b>20.2</b> バイオリンプロット</a></li>
<li class="chapter" data-level="20.3" data-path="visualization4.html"><a href="visualization4.html#visual4-rug"><i class="fa fa-check"></i><b>20.3</b> ラグプロット</a></li>
<li class="chapter" data-level="20.4" data-path="visualization4.html"><a href="visualization4.html#visual4-ridge"><i class="fa fa-check"></i><b>20.4</b> リッジプロット</a></li>
<li class="chapter" data-level="20.5" data-path="visualization4.html"><a href="visualization4.html#visual4-pointrange"><i class="fa fa-check"></i><b>20.5</b> エラーバー付き散布図</a></li>
<li class="chapter" data-level="20.6" data-path="visualization4.html"><a href="visualization4.html#visual4-lollipop"><i class="fa fa-check"></i><b>20.6</b> ロリーポップチャート</a></li>
<li class="chapter" data-level="20.7" data-path="visualization4.html"><a href="visualization4.html#visual4-smooth"><i class="fa fa-check"></i><b>20.7</b> 平滑化ライン</a></li>
<li class="chapter" data-level="20.8" data-path="visualization4.html"><a href="visualization4.html#visual4-heatmap"><i class="fa fa-check"></i><b>20.8</b> ヒートマップ</a>
<ul>
<li class="chapter" data-level="20.8.1" data-path="visualization4.html"><a href="visualization4.html#つの離散変数の分布を表すヒートマップ"><i class="fa fa-check"></i><b>20.8.1</b> 2つの離散変数の分布を表すヒートマップ</a></li>
<li class="chapter" data-level="20.8.2" data-path="visualization4.html"><a href="visualization4.html#離散変数times離散変数における連続変数の値を示すヒートマップ"><i class="fa fa-check"></i><b>20.8.2</b> 離散変数<span class="math inline">\(\times\)</span>離散変数における連続変数の値を示すヒートマップ</a></li>
</ul></li>
<li class="chapter" data-level="20.9" data-path="visualization4.html"><a href="visualization4.html#visual4-contour"><i class="fa fa-check"></i><b>20.9</b> 等高線図</a></li>
<li class="chapter" data-level="20.10" data-path="visualization4.html"><a href="visualization4.html#visual4-map"><i class="fa fa-check"></i><b>20.10</b> 地図</a>
<ul>
<li class="chapter" data-level="20.10.1" data-path="visualization4.html"><a href="visualization4.html#世界地図"><i class="fa fa-check"></i><b>20.10.1</b> 世界地図</a></li>
<li class="chapter" data-level="20.10.2" data-path="visualization4.html"><a href="visualization4.html#日本地図全体"><i class="fa fa-check"></i><b>20.10.2</b> 日本地図（全体）</a></li>
<li class="chapter" data-level="20.10.3" data-path="visualization4.html"><a href="visualization4.html#日本地図特定の都道府県"><i class="fa fa-check"></i><b>20.10.3</b> 日本地図（特定の都道府県）</a></li>
</ul></li>
<li class="chapter" data-level="20.11" data-path="visualization4.html"><a href="visualization4.html#visual4-dag"><i class="fa fa-check"></i><b>20.11</b> 非巡回有向グラフ</a>
<ul>
<li class="chapter" data-level="20.11.1" data-path="visualization4.html"><a href="visualization4.html#ノードの位置を指定する"><i class="fa fa-check"></i><b>20.11.1</b> ノードの位置を指定する</a></li>
</ul></li>
<li class="chapter" data-level="20.12" data-path="visualization4.html"><a href="visualization4.html#visual4-bump"><i class="fa fa-check"></i><b>20.12</b> バンプチャート</a></li>
<li class="chapter" data-level="20.13" data-path="visualization4.html"><a href="visualization4.html#visual4-alluvial"><i class="fa fa-check"></i><b>20.13</b> 沖積図</a></li>
<li class="chapter" data-level="20.14" data-path="visualization4.html"><a href="visualization4.html#visual4-tree"><i class="fa fa-check"></i><b>20.14</b> ツリーマップ</a></li>
<li class="chapter" data-level="20.15" data-path="visualization4.html"><a href="visualization4.html#visual4-mosaic"><i class="fa fa-check"></i><b>20.15</b> モザイクプロット</a></li>
<li class="chapter" data-level="20.16" data-path="visualization4.html"><a href="visualization4.html#visual4-further"><i class="fa fa-check"></i><b>20.16</b> その他のグラフ</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="datahandling3.html"><a href="datahandling3.html"><i class="fa fa-check"></i><b>21</b> データハンドリング[応用編]</a></li>
<li class="chapter" data-level="22" data-path="string.html"><a href="string.html"><i class="fa fa-check"></i><b>22</b> 文字列の処理</a></li>
<li class="chapter" data-level="23" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>23</b> スクレイピング</a></li>
<li class="chapter" data-level="24" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>24</b> 反復処理</a>
<ul>
<li class="chapter" data-level="24.1" data-path="iteration.html"><a href="iteration.html#iteration-abstract"><i class="fa fa-check"></i><b>24.1</b> 概要</a></li>
<li class="chapter" data-level="24.2" data-path="iteration.html"><a href="iteration.html#iteration-intro"><i class="fa fa-check"></i><b>24.2</b> <code>*apply()</code>関数群と<code>map_*()</code>関数群</a></li>
<li class="chapter" data-level="24.3" data-path="iteration.html"><a href="iteration.html#iteration-two-arguments"><i class="fa fa-check"></i><b>24.3</b> 引数が2つ以上の場合</a></li>
<li class="chapter" data-level="24.4" data-path="iteration.html"><a href="iteration.html#iteration-df"><i class="fa fa-check"></i><b>24.4</b> データフレームと{purrr}</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="iteration.html"><a href="iteration.html#iteration-tibble"><i class="fa fa-check"></i><b>24.4.1</b> tibbleの話</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="iteration.html"><a href="iteration.html#iteration-model1"><i class="fa fa-check"></i><b>24.5</b> モデルの反復推定</a>
<ul>
<li class="chapter" data-level="24.5.1" data-path="iteration.html"><a href="iteration.html#iteration-split1"><i class="fa fa-check"></i><b>24.5.1</b> サンプルの分割とモデル推定（<code>split()</code>利用）</a></li>
<li class="chapter" data-level="24.5.2" data-path="iteration.html"><a href="iteration.html#iteration-split2"><i class="fa fa-check"></i><b>24.5.2</b> サンプルの分割とモデル推定（<code>nest()</code>利用）</a></li>
<li class="chapter" data-level="24.5.3" data-path="iteration.html"><a href="iteration.html#iteration-range"><i class="fa fa-check"></i><b>24.5.3</b> データの範囲を指定したモデル推定</a></li>
<li class="chapter" data-level="24.5.4" data-path="iteration.html"><a href="iteration.html#iteration-variables"><i class="fa fa-check"></i><b>24.5.4</b> 説明・応答変数を指定したモデル推定</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>25</b> R Markdown [基礎]</a>
<ul>
<li class="chapter" data-level="25.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-intro"><i class="fa fa-check"></i><b>25.1</b> R Markdownとは</a></li>
<li class="chapter" data-level="25.2" data-path="rmarkdown.html"><a href="rmarkdown.html#とりあえずknit"><i class="fa fa-check"></i><b>25.2</b> とりあえずKnit</a></li>
<li class="chapter" data-level="25.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-grammar"><i class="fa fa-check"></i><b>25.3</b> Markdown文法の基本</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#改行-1"><i class="fa fa-check"></i><b>25.3.1</b> 改行</a></li>
<li class="chapter" data-level="25.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#強調"><i class="fa fa-check"></i><b>25.3.2</b> 強調</a></li>
<li class="chapter" data-level="25.3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#箇条書き"><i class="fa fa-check"></i><b>25.3.3</b> 箇条書き</a></li>
<li class="chapter" data-level="25.3.4" data-path="rmarkdown.html"><a href="rmarkdown.html#見出し"><i class="fa fa-check"></i><b>25.3.4</b> 見出し</a></li>
<li class="chapter" data-level="25.3.5" data-path="rmarkdown.html"><a href="rmarkdown.html#区切り線"><i class="fa fa-check"></i><b>25.3.5</b> 区切り線</a></li>
<li class="chapter" data-level="25.3.6" data-path="rmarkdown.html"><a href="rmarkdown.html#表"><i class="fa fa-check"></i><b>25.3.6</b> 表</a></li>
<li class="chapter" data-level="25.3.7" data-path="rmarkdown.html"><a href="rmarkdown.html#画像"><i class="fa fa-check"></i><b>25.3.7</b> 画像</a></li>
<li class="chapter" data-level="25.3.8" data-path="rmarkdown.html"><a href="rmarkdown.html#リンク"><i class="fa fa-check"></i><b>25.3.8</b> リンク</a></li>
<li class="chapter" data-level="25.3.9" data-path="rmarkdown.html"><a href="rmarkdown.html#脚注"><i class="fa fa-check"></i><b>25.3.9</b> 脚注</a></li>
<li class="chapter" data-level="25.3.10" data-path="rmarkdown.html"><a href="rmarkdown.html#数式"><i class="fa fa-check"></i><b>25.3.10</b> 数式</a></li>
<li class="chapter" data-level="25.3.11" data-path="rmarkdown.html"><a href="rmarkdown.html#引用"><i class="fa fa-check"></i><b>25.3.11</b> 引用</a></li>
<li class="chapter" data-level="25.3.12" data-path="rmarkdown.html"><a href="rmarkdown.html#コメント"><i class="fa fa-check"></i><b>25.3.12</b> コメント</a></li>
<li class="chapter" data-level="25.3.13" data-path="rmarkdown.html"><a href="rmarkdown.html#コード"><i class="fa fa-check"></i><b>25.3.13</b> コード</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-chunk"><i class="fa fa-check"></i><b>25.4</b> チャンクのオプション</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#チャンク名とチャンク間依存関係"><i class="fa fa-check"></i><b>25.4.1</b> チャンク名とチャンク間依存関係</a></li>
<li class="chapter" data-level="25.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードまたは結果の表示非常時"><i class="fa fa-check"></i><b>25.4.2</b> コードまたは結果の表示/非常時</a></li>
<li class="chapter" data-level="25.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#プロット"><i class="fa fa-check"></i><b>25.4.3</b> プロット</a></li>
<li class="chapter" data-level="25.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#コードの見栄"><i class="fa fa-check"></i><b>25.4.4</b> コードの見栄</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-header"><i class="fa fa-check"></i><b>25.5</b> ヘッダーのオプション</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="rmarkdown.html"><a href="rmarkdown.html#目次の追加"><i class="fa fa-check"></i><b>25.5.1</b> 目次の追加</a></li>
<li class="chapter" data-level="25.5.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードのハイライト"><i class="fa fa-check"></i><b>25.5.2</b> コードのハイライト</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-japanese"><i class="fa fa-check"></i><b>25.6</b> 日本語が含まれているPDFの出力</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="rmarkdown2.html"><a href="rmarkdown2.html"><i class="fa fa-check"></i><b>26</b> R Markdown [応用]</a>
<ul>
<li class="chapter" data-level="26.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmarkdown2-table"><i class="fa fa-check"></i><b>26.1</b> 表の作成</a></li>
<li class="chapter" data-level="26.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-slide"><i class="fa fa-check"></i><b>26.2</b> R Markdownを用いたスライド作成</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-brak"><i class="fa fa-check"></i><b>26.2.1</b> スライド区分</a></li>
<li class="chapter" data-level="26.2.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-chunk"><i class="fa fa-check"></i><b>26.2.2</b> コード</a></li>
<li class="chapter" data-level="26.2.3" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-highlight"><i class="fa fa-check"></i><b>26.2.3</b> ハイライト</a></li>
<li class="chapter" data-level="26.2.4" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-operation"><i class="fa fa-check"></i><b>26.2.4</b> Xaringanスライドの操作</a></li>
<li class="chapter" data-level="26.2.5" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-japanese"><i class="fa fa-check"></i><b>26.2.5</b> 日本語フォントの指定</a></li>
<li class="chapter" data-level="26.2.6" data-path="rmarkdown2.html"><a href="rmarkdown2.html#スライドのpdf出力"><i class="fa fa-check"></i><b>26.2.6</b> スライドのPDF出力</a></li>
<li class="chapter" data-level="26.2.7" data-path="rmarkdown2.html"><a href="rmarkdown2.html#もっと詳しく"><i class="fa fa-check"></i><b>26.2.7</b> もっと詳しく</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="table.html"><a href="table.html"><i class="fa fa-check"></i><b>27</b> 表の作成</a></li>
<li class="chapter" data-level="28" data-path="oop.html"><a href="oop.html"><i class="fa fa-check"></i><b>28</b> オブジェクト指向型プログラミング</a>
<ul>
<li class="chapter" data-level="28.1" data-path="oop.html"><a href="oop.html#oop-intro"><i class="fa fa-check"></i><b>28.1</b> まずは例から</a></li>
<li class="chapter" data-level="28.2" data-path="oop.html"><a href="oop.html#what-is-oop"><i class="fa fa-check"></i><b>28.2</b> OOPとは</a>
<ul>
<li class="chapter" data-level="28.2.1" data-path="oop.html"><a href="oop.html#オブジェクト-1"><i class="fa fa-check"></i><b>28.2.1</b> オブジェクト</a></li>
<li class="chapter" data-level="28.2.2" data-path="oop.html"><a href="oop.html#クラス-1"><i class="fa fa-check"></i><b>28.2.2</b> クラス</a></li>
<li class="chapter" data-level="28.2.3" data-path="oop.html"><a href="oop.html#メソッドと多態性"><i class="fa fa-check"></i><b>28.2.3</b> メソッドと多態性</a></li>
<li class="chapter" data-level="28.2.4" data-path="oop.html"><a href="oop.html#継承"><i class="fa fa-check"></i><b>28.2.4</b> 継承</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="oop.html"><a href="oop.html#oop-in-r"><i class="fa fa-check"></i><b>28.3</b> RにおけるOOP</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="oop.html"><a href="oop.html#オブジェクトに任意のクラスを付ける"><i class="fa fa-check"></i><b>28.3.1</b> オブジェクトに任意のクラスを付ける</a></li>
<li class="chapter" data-level="28.3.2" data-path="oop.html"><a href="oop.html#メソッドの作り方"><i class="fa fa-check"></i><b>28.3.2</b> メソッドの作り方</a></li>
<li class="chapter" data-level="28.3.3" data-path="oop.html"><a href="oop.html#検証用関数を作る"><i class="fa fa-check"></i><b>28.3.3</b> 検証用関数を作る</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="oop.html"><a href="oop.html#oop-sample"><i class="fa fa-check"></i><b>28.4</b> 例題</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="monte.html"><a href="monte.html"><i class="fa fa-check"></i><b>29</b> モンテカルロシミュレーション</a>
<ul>
<li class="chapter" data-level="29.1" data-path="monte.html"><a href="monte.html#monte-intro"><i class="fa fa-check"></i><b>29.1</b> モンテカルロシミュレーションとは</a></li>
<li class="chapter" data-level="29.2" data-path="monte.html"><a href="monte.html#monte-rng"><i class="fa fa-check"></i><b>29.2</b> 乱数生成</a>
<ul>
<li class="chapter" data-level="29.2.1" data-path="monte.html"><a href="monte.html#sampleによるサンプリング"><i class="fa fa-check"></i><b>29.2.1</b> <code>sample()</code>によるサンプリング</a></li>
<li class="chapter" data-level="29.2.2" data-path="monte.html"><a href="monte.html#確率分布からの乱数制制"><i class="fa fa-check"></i><b>29.2.2</b> 確率分布からの乱数制制</a></li>
<li class="chapter" data-level="29.2.3" data-path="monte.html"><a href="monte.html#シードについて"><i class="fa fa-check"></i><b>29.2.3</b> シードについて</a></li>
</ul></li>
<li class="chapter" data-level="29.3" data-path="monte.html"><a href="monte.html#例-誕生日問題"><i class="fa fa-check"></i><b>29.3</b> 例: 誕生日問題</a></li>
<li class="chapter" data-level="29.4" data-path="monte.html"><a href="monte.html#応用-円周率"><i class="fa fa-check"></i><b>29.4</b> 応用: 円周率</a></li>
<li class="chapter" data-level="29.5" data-path="monte.html"><a href="monte.html#応用-ブートストラッピング法による標準誤差の推定"><i class="fa fa-check"></i><b>29.5</b> 応用: ブートストラッピング法による標準誤差の推定</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>30</b> 演習問題の回答</a>
<ul>
<li class="chapter" data-level="30.1" data-path="solution.html"><a href="solution.html#solution-rbasic"><i class="fa fa-check"></i><b>30.1</b> 基本的な操作</a></li>
<li class="chapter" data-level="30.2" data-path="solution.html"><a href="solution.html#solution-datastructure"><i class="fa fa-check"></i><b>30.2</b> データの構造</a>
<ul>
<li class="chapter" data-level="30.2.1" data-path="solution.html"><a href="solution.html#ベクトル-1"><i class="fa fa-check"></i><b>30.2.1</b> ベクトル</a></li>
<li class="chapter" data-level="30.2.2" data-path="solution.html"><a href="solution.html#行列-1"><i class="fa fa-check"></i><b>30.2.2</b> 行列</a></li>
<li class="chapter" data-level="30.2.3" data-path="solution.html"><a href="solution.html#データフレーム-1"><i class="fa fa-check"></i><b>30.2.3</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="solution.html"><a href="solution.html#rプログラミングの基礎"><i class="fa fa-check"></i><b>30.3</b> Rプログラミングの基礎</a></li>
<li class="chapter" data-level="30.4" data-path="solution.html"><a href="solution.html#関数の自作"><i class="fa fa-check"></i><b>30.4</b> 関数の自作</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>31</b> 本書の執筆環境</a></li>
<li class="chapter" data-level="32" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>32</b> 参考資料</a></li>
<li class="divider"></li>
<p style = "text-align:center;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></p>
<p style = "text-align:center;"><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">私たちのR: ベストプラクティスの探究</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization4" class="section level1" number="20">
<h1><span class="header-section-number">20.</span> 可視化[発展]</h1>
<div id="visual4-intro" class="section level2" number="20.1">
<h2><span class="header-section-number">20.1</span> 概要</h2>
<p>第<a href="visualization1.html#visualization1">17</a>章では{ggplot2}の仕組みについて、第<a href="visualization2.html#visualization2">18</a>章ではよく使われる5種類のプロット（棒グラフ、散布図、折れ線グラフ、箱ひげ図、ヒストグラム）の作り方を、第<a href="visualization3.html#visualization3">19</a>章ではスケール、座標系などの操作を通じたグラフの見た目調整について解説しました。本章では第<a href="visualization2.html#visualization2">18</a>章の延長線上に位置づけることができ、紹介しきれなかった様々なグラフの作り方について簡単に解説します。本章で紹介するグラフは以下の通りです。</p>
<ul>
<li><a href="visualization4.html#visual4-violin">バイオリンプロット</a></li>
<li><a href="visualization4.html#visual4-rug">ラグプロット</a></li>
<li><a href="visualization4.html#visual4-ridge">リッジプロット</a></li>
<li><a href="visualization4.html#visual4-pointrange">エラーバー付き散布図</a></li>
<li><a href="visualization4.html#visual4-lollipop">ロリーポップチャート</a></li>
<li><a href="visualization4.html#visual4-smooth">平滑化ライン</a></li>
<li><a href="visualization4.html#visual4-heatmap">ヒートマップ</a></li>
<li><a href="visualization4.html#visual4-contour">等高線図</a></li>
<li><a href="visualization4.html#visual4-map">地図</a></li>
<li><a href="visualization4.html#visual4-dag">非巡回有向グラフ</a></li>
<li><a href="visualization4.html#visual4-bump">バンプチャート</a></li>
<li><a href="visualization4.html#visual4-alluvial">沖積図</a></li>
<li><a href="visualization4.html#visual4-tree">ツリーマップ</a></li>
<li><a href="visualization4.html#visual4-mosaic">モザイクプロット</a></li>
</ul>
<hr />
<div class="sourceCode" id="cb1443"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1443-1"><a href="visualization4.html#cb1443-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb1444"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1444-1"><a href="visualization4.html#cb1444-1"></a>Country_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/Countries.csv&quot;</span>)</span>
<span id="cb1444-2"><a href="visualization4.html#cb1444-2"></a>COVID19_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/COVID19_Worldwide.csv&quot;</span>, <span class="at">guess_max =</span> <span class="dv">10000</span>)</span></code></pre></div>
<hr />
</div>
<div id="visual4-violin" class="section level2" number="20.2">
<h2><span class="header-section-number">20.2</span> バイオリンプロット</h2>
<p>　バイオリンプロットは連続変数の分布を可視化する際に使用するプロットの一つです。第<a href="visualization1.html#visualization1">17</a>章で紹介しましたヒストグラムや箱ひげ図と目的は同じです。それではバイオリンプロットとは何かについて例を見ながら解説します。</p>
<p>　以下の図は対数化した一人当たり購買力平価GDP（<code>PPP_per_capita</code>）のヒストグラムです。</p>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　このヒストグラムをなめらかにすると以下のような図になります。</p>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　この密度曲線を上下対称にすると以下のような図となり、これがバイオリンプロットです。ヒストグラムのようにデータの分布が分かりやすくなります。</p>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　しかし、この図の場合、ヒストグラムと同様、中央値や四分位数などの情報が含まれておりません。これらの箱ひげ図を使用した方が良いでしょう。バイオリンプロットの良い点はバイオリンの中に箱ひげ図を入れ、ヒストグラムと箱ひげ図両方の長所を取ることができる点です。たとえば、バイオリンプロットを90度回転させ、中にバイオリン図を入れると以下のようになります。</p>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　それでは実際にバイオリンプロットを作ってみましょう。使い方は箱ひげ図（<code>geom_boxplot()</code>）と同じです。たとえば、横軸は大陸（<code>Continent</code>）に、縦軸は対数化した一人当たり購買力平価GDP（<code>PPP_per_capita</code>）にしたバイオリンプロットを作るには作るには<code>geom_violin()</code>幾何オブジェクトの中にマッピングするだけです。大陸ごとに色分けしたい場合は<code>fill</code>引数に<code>Continent</code>をマッピングします。</p>
<div class="sourceCode" id="cb1445"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1445-1"><a href="visualization4.html#cb1445-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1445-2"><a href="visualization4.html#cb1445-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1445-3"><a href="visualization4.html#cb1445-3"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> PPP_per_capita, <span class="at">fill =</span> Continent)) <span class="sc">+</span></span>
<span id="cb1445-4"><a href="visualization4.html#cb1445-4"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人当たり購買力平価GDP (対数)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1445-5"><a href="visualization4.html#cb1445-5"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">10000</span>, <span class="dv">100000</span>),</span>
<span id="cb1445-6"><a href="visualization4.html#cb1445-6"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">10000</span>, <span class="dv">100000</span>),</span>
<span id="cb1445-7"><a href="visualization4.html#cb1445-7"></a>                       <span class="at">trans  =</span> <span class="st">&quot;log10&quot;</span>) <span class="sc">+</span> <span class="co"># y軸を対数化</span></span>
<span id="cb1445-8"><a href="visualization4.html#cb1445-8"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="co"># fillのマッピング情報の凡例を隠す</span></span>
<span id="cb1445-9"><a href="visualization4.html#cb1445-9"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1445-10"><a href="visualization4.html#cb1445-10"></a>                  <span class="at">base_size   =</span> <span class="dv">16</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ここに箱ひげ図も載せたい場合は、<code>geom_violin()</code>オブジェクトの後に<code>geom_boxplot()</code>オブジェクトを入れるだけで十分です。</p>
<div class="sourceCode" id="cb1446"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1446-1"><a href="visualization4.html#cb1446-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1446-2"><a href="visualization4.html#cb1446-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1446-3"><a href="visualization4.html#cb1446-3"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> PPP_per_capita, <span class="at">fill =</span> Continent)) <span class="sc">+</span></span>
<span id="cb1446-4"><a href="visualization4.html#cb1446-4"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> PPP_per_capita),</span>
<span id="cb1446-5"><a href="visualization4.html#cb1446-5"></a>                 <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb1446-6"><a href="visualization4.html#cb1446-6"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人当たり購買力平価GDP (対数)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1446-7"><a href="visualization4.html#cb1446-7"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">10000</span>, <span class="dv">100000</span>),</span>
<span id="cb1446-8"><a href="visualization4.html#cb1446-8"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">10000</span>, <span class="dv">100000</span>),</span>
<span id="cb1446-9"><a href="visualization4.html#cb1446-9"></a>                       <span class="at">trans =</span> <span class="st">&quot;log10&quot;</span>) <span class="sc">+</span></span>
<span id="cb1446-10"><a href="visualization4.html#cb1446-10"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1446-11"><a href="visualization4.html#cb1446-11"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1446-12"><a href="visualization4.html#cb1446-12"></a>                  <span class="at">base_size   =</span> <span class="dv">16</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-violin6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　箱ひげ図は四分位範囲、四分位数、最小値、最大値などの情報を素早く読み取れますが、どの値当たりが分厚いかなどの情報が欠けています。これをバイオリンプロットで補うことで、よりデータの分布を的確に把握することができます。</p>
<hr />
</div>
<div id="visual4-rug" class="section level2" number="20.3">
<h2><span class="header-section-number">20.3</span> ラグプロット</h2>
<p>　ラグプロット（rug plot）は変数の分布を示す点ではヒストグラム、箱ひげ図、バイオリンプロットと同じ目的を持ちますが、大きな違いとしてはラグプロット単体で使われるケースがない（または、非常に稀）という点です。ラグプロットは上述しましたヒストグラムや箱ひげ図、または散布図などと組み合わせて使うのが一般的です。</p>
<p>　以下は<code>Country_df</code>の<code>PPP_per_capita</code>（常用対数変換）のヒストグラムです。</p>
<div class="sourceCode" id="cb1447"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1447-1"><a href="visualization4.html#cb1447-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1447-2"><a href="visualization4.html#cb1447-2"></a>    <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1447-3"><a href="visualization4.html#cb1447-3"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1447-4"><a href="visualization4.html#cb1447-4"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> PPP_per_capita), <span class="at">bins =</span> <span class="dv">15</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb1447-5"><a href="visualization4.html#cb1447-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;PPP per capita (USD; log scale)&quot;</span>, </span>
<span id="cb1447-6"><a href="visualization4.html#cb1447-6"></a>         <span class="at">y =</span> <span class="st">&quot;Number of Countries&quot;</span>) <span class="sc">+</span></span>
<span id="cb1447-7"><a href="visualization4.html#cb1447-7"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb1447-8"><a href="visualization4.html#cb1447-8"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1447-9"><a href="visualization4.html#cb1447-9"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-rug1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　一変数の分布を確認する場合、ヒストグラムは情報量の損失が少ない方です。それでも値一つ一つの情報は失われますね。例えば、上記のヒストグラムで左端の度数は1です。左端の棒の区間はおおよそ500から780であり、一人当たりPPPがこの区間に属する国は1カ国ということです。ちなみに、その国はブルンジ共和国ですが、ブルンジ共和国の具体的な一人当たりPPPはヒストグラムから分かりません。情報量をより豊富に持たせるためには区間を細かく刻むことも出来ますが、逆に分布の全体像が読みにくくなります。</p>
<p>　ここで登場するのがラグプロットです。これは座標平面の端を使ってデータを一時現状に並べたものです。多くの場合、点ではなく、垂直線（｜）を使います。ラグプロットの幾何オブジェクトは{ggplot2}でデフォルトで提供されており、<code>geom_rug()</code>を使います。マッピングは<code>x</code>または<code>y</code>に対して行いますが、座標平面の下段にラグプロットを出力する場合は<code>x</code>に変数（ここでは<code>PPP_per_capita</code>）をマッピングします。</p>
<div class="sourceCode" id="cb1448"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1448-1"><a href="visualization4.html#cb1448-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1448-2"><a href="visualization4.html#cb1448-2"></a>    <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1448-3"><a href="visualization4.html#cb1448-3"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1448-4"><a href="visualization4.html#cb1448-4"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> PPP_per_capita), <span class="at">bins =</span> <span class="dv">15</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb1448-5"><a href="visualization4.html#cb1448-5"></a>    <span class="fu">geom_rug</span>(<span class="fu">aes</span>(<span class="at">x =</span> PPP_per_capita))  <span class="sc">+</span></span>
<span id="cb1448-6"><a href="visualization4.html#cb1448-6"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;PPP per capita (USD; log scale)&quot;</span>, </span>
<span id="cb1448-7"><a href="visualization4.html#cb1448-7"></a>         <span class="at">y =</span> <span class="st">&quot;Number of Countries&quot;</span>) <span class="sc">+</span></span>
<span id="cb1448-8"><a href="visualization4.html#cb1448-8"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb1448-9"><a href="visualization4.html#cb1448-9"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-rug2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>ラグプロットを使うと本来のヒストグラムの外見にほぼ影響を与えず、更に情報を付け加えることが可能です。点（｜）の密度でデータの分布を確認することもできますが、その密度の相対的な比較に関してはヒストグラムの方が良いでしょう。</p>
<p>ラグプロットは散布図に使うことも可能です。散布図は一つ一つの点が具体的な値がマッピングされるため、情報量の損失はほぼないでしょう。それでも散布図にラグプロットを加える意味はあります。まず、<code>Country_df</code>のフリーダムハウス指数（<code>FH_Total</code>）と一人当たりPPP（<code>PPP_per_capita</code>）の散布図を作ってみましょう。</p>
<div class="sourceCode" id="cb1449"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1449-1"><a href="visualization4.html#cb1449-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1449-2"><a href="visualization4.html#cb1449-2"></a>    <span class="fu">drop_na</span>(FH_Total, PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1449-3"><a href="visualization4.html#cb1449-3"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1449-4"><a href="visualization4.html#cb1449-4"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1449-5"><a href="visualization4.html#cb1449-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1449-6"><a href="visualization4.html#cb1449-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1449-7"><a href="visualization4.html#cb1449-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1449-8"><a href="visualization4.html#cb1449-8"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1449-9"><a href="visualization4.html#cb1449-9"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-rug3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>散布図の目的は二変量間の<strong>関係</strong>を確認することであって、それぞれの変数の分布を確認することではありません。もし、<code>FH_Total</code>と<code>PPP_per_capita</code>の分布が確認したいなら、それぞれのヒストグラムや箱ひげ図を作成した方が良いでしょう。しかし、ラグプロットを使えば、点（｜）の密度で大まかな分布は確認出来ますし、図の見た目にもほぼ影響を与えません。</p>
<p>横軸と縦軸両方のラグプロットは、<code>geom_rug()</code>に<code>x</code>と<code>y</code>両方マッピングするだけです。</p>
<div class="sourceCode" id="cb1450"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1450-1"><a href="visualization4.html#cb1450-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1450-2"><a href="visualization4.html#cb1450-2"></a>    <span class="fu">drop_na</span>(FH_Total, PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1450-3"><a href="visualization4.html#cb1450-3"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1450-4"><a href="visualization4.html#cb1450-4"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1450-5"><a href="visualization4.html#cb1450-5"></a>    <span class="fu">geom_rug</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1450-6"><a href="visualization4.html#cb1450-6"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1450-7"><a href="visualization4.html#cb1450-7"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1450-8"><a href="visualization4.html#cb1450-8"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1450-9"><a href="visualization4.html#cb1450-9"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1450-10"><a href="visualization4.html#cb1450-10"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-rug4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これで<code>FH_Total</code>はほぼ均等に分布していて、<code>PPP_per_capita</code>は2万ドル以下に多く密集していることが確認できます。</p>
<p>　{ggExtra}の<code>ggMarginal()</code>を使えば、ラグプロットでなく、箱ひげ図やヒストグラムを付けることも可能です。{ggplot2}で作図した図をオブジェクトとして格納し、<code>ggMarginal()</code>の第一引数として指定します。第一引数のみだと密度のだけ出力されるため、箱ひげ図を付けるためには<code>type = "boxplot"</code>を指定します（既定値は<code>"density"</code>）。ヒストグラムを出力する場合は<code>"histogram"</code>と指定します。</p>
<div class="sourceCode" id="cb1451"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1451-1"><a href="visualization4.html#cb1451-1"></a>Scatter_Fig1 <span class="ot">&lt;-</span> Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1451-2"><a href="visualization4.html#cb1451-2"></a>    <span class="fu">drop_na</span>(FH_Total, PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1451-3"><a href="visualization4.html#cb1451-3"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1451-4"><a href="visualization4.html#cb1451-4"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1451-5"><a href="visualization4.html#cb1451-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1451-6"><a href="visualization4.html#cb1451-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1451-7"><a href="visualization4.html#cb1451-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1451-8"><a href="visualization4.html#cb1451-8"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1451-9"><a href="visualization4.html#cb1451-9"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span>
<span id="cb1451-10"><a href="visualization4.html#cb1451-10"></a></span>
<span id="cb1451-11"><a href="visualization4.html#cb1451-11"></a>ggExtra<span class="sc">::</span><span class="fu">ggMarginal</span>(Scatter_Fig1, <span class="at">type =</span> <span class="st">&quot;boxplot&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-rug5-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-ridge" class="section level2" number="20.4">
<h2><span class="header-section-number">20.4</span> リッジプロット</h2>
<p>　リッジプロット（ridge plot）はある変数の分布をグループごとに出力する図です。大陸ごとの人間開発指数の分布を示したり、時系列データなら分布の変化を示す時にも使えます。ここでは大陸ごとの人間開発指数の分布をリッジプロットで示してみましょう。</p>
<p>　リッジプロットを作成する前に、<code>geom_density()</code>幾何オブジェクトを用い、変数の密度曲線（density curve）を作ってみます。マッピングは<code>x</code>に対し、分布を出力する変数名を指定します。また、密度曲線内部に色塗り（<code>fill</code>）をし、曲線を計算する際のバンド幅（<code>bw</code>）は0.054にします。<code>bw</code>が大きいほど、なめらかな曲線になります。</p>
<div class="sourceCode" id="cb1452"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1452-1"><a href="visualization4.html#cb1452-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1452-2"><a href="visualization4.html#cb1452-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1452-3"><a href="visualization4.html#cb1452-3"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018), <span class="at">fill =</span> <span class="st">&quot;gray70&quot;</span>, <span class="at">bw =</span> <span class="fl">0.054</span>) <span class="sc">+</span></span>
<span id="cb1452-4"><a href="visualization4.html#cb1452-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1452-5"><a href="visualization4.html#cb1452-5"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1452-6"><a href="visualization4.html#cb1452-6"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これを大陸ごとに出力する場合、ファセット分割を行います。今回は大陸ごとに1列（<code>ncol = 1</code>）でファセットを分割します。</p>
<div class="sourceCode" id="cb1453"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1453-1"><a href="visualization4.html#cb1453-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1453-2"><a href="visualization4.html#cb1453-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1453-3"><a href="visualization4.html#cb1453-3"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018), <span class="at">fill =</span> <span class="st">&quot;gray70&quot;</span>, <span class="at">bw =</span> <span class="fl">0.054</span>) <span class="sc">+</span></span>
<span id="cb1453-4"><a href="visualization4.html#cb1453-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1453-5"><a href="visualization4.html#cb1453-5"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Continent, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1453-6"><a href="visualization4.html#cb1453-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1453-7"><a href="visualization4.html#cb1453-7"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　それでは上のグラフをリッジプロットとして作図してみましょう。今回は{ggridges}パッケージを使います。</p>
<div class="sourceCode" id="cb1454"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1454-1"><a href="visualization4.html#cb1454-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(ggridges)</span></code></pre></div>
<p>　使用する幾何オブジェクトは<code>geom_density_ridges()</code>です。似たような幾何オブジェクトとして<code>geom_ridgeline()</code>がありますが、こちらは予め密度曲線の高さを計算しておく必要があります。一方、<code>geom_density_ridges()</code>は変数だけ指定すれば密度を自動的に計算してくれます。マッピングは<code>x</code>と<code>y</code>に対し、それぞれ分布を出力する変数名とグループ変数名を指定します。また、密度曲線が重なるケースもあるため、透明度（<code>alpha</code>）も0.5にしておきましょう。ここでは別途指定しませんが、ハンド幅も指定可能であり、<code>aes()</code>の外側に<code>bandwidth</code>を指定するだけです。</p>
<div class="sourceCode" id="cb1455"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1455-1"><a href="visualization4.html#cb1455-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1455-2"><a href="visualization4.html#cb1455-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1455-3"><a href="visualization4.html#cb1455-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent), </span>
<span id="cb1455-4"><a href="visualization4.html#cb1455-4"></a>                      <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb1455-5"><a href="visualization4.html#cb1455-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1455-6"><a href="visualization4.html#cb1455-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1455-7"><a href="visualization4.html#cb1455-7"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 0.054</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>先ほど作図した図と非常に似た図が出来上がりました。ファセット分割に比べ、空間を最大限に活用していることが分かります。ファセットラベルがなく、グループ名が縦軸上に位置するからです。また、リッジプロットの特徴は密度曲線がオーバラップする点ですが、以下のように<code>scale = 1</code>を指定すると、オーバラップなしで作成することも可能です。もし、<code>scale = 3</code>にすると最大2つの密度曲線が重なることになります。たとえば最下段のアフリカはアメリカの行と若干オーバラップしていますが、<code>scale = 3</code>の場合、アジアの行までオーバーラップされうることになります。</p>
<div class="sourceCode" id="cb1457"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1457-1"><a href="visualization4.html#cb1457-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1457-2"><a href="visualization4.html#cb1457-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1457-3"><a href="visualization4.html#cb1457-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent), </span>
<span id="cb1457-4"><a href="visualization4.html#cb1457-4"></a>                      <span class="at">scale =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb1457-5"><a href="visualization4.html#cb1457-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1457-6"><a href="visualization4.html#cb1457-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1457-7"><a href="visualization4.html#cb1457-7"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 0.054</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　また、横軸の値に応じて背景の色をグラデーションで表現することも可能です。この場合、<code>geom_density_ridges()</code>幾何オブジェクトでなく、<code>geom_density_ridges_gradient()</code>を使い、<code>fill</code>にもマッピングをする必要があります。横軸（<code>x</code>）の値に応じて色塗りをする場合、<code>fill = stat(x)</code>とします。デフォルトでは横軸の値が高いほど空色、低いほど黒になります。ここでは高いほど黄色、低いほど紫ににするため、色弱にも優しい<code>scale_fill_viridis_c()</code>を使い<a href="#fn89" class="footnote-ref" id="fnref89"><sup>89</sup></a>、カラーオプションはplasmaにします（<code>option = "c"</code>）。</p>
<div class="sourceCode" id="cb1459"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1459-1"><a href="visualization4.html#cb1459-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1459-2"><a href="visualization4.html#cb1459-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1459-3"><a href="visualization4.html#cb1459-3"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent, <span class="at">fill =</span> <span class="fu">stat</span>(x)), </span>
<span id="cb1459-4"><a href="visualization4.html#cb1459-4"></a>                               <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb1459-5"><a href="visualization4.html#cb1459-5"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;C&quot;</span>) <span class="sc">+</span></span>
<span id="cb1459-6"><a href="visualization4.html#cb1459-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>) <span class="sc">+</span></span>
<span id="cb1459-7"><a href="visualization4.html#cb1459-7"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1459-8"><a href="visualization4.html#cb1459-8"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1459-9"><a href="visualization4.html#cb1459-9"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 0.054</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>密度曲線は基本的にはなめらかな曲線であるため、データが存在しない箇所にも密度が高く見積もられるケースがあります。全体的な分布を俯瞰するには良いですが、情報の損失は避けられません。そこで出てくるのが点付きのリッジプロットです。<code>HDI_2018</code>の個々の値を点で出力するには<code>jittered_points = TRUE</code>を指定するだけです。これだけで密度曲線の内側に点が若干のズレ付き（jitter）で出力されます。ただし、密度曲線がオーバーラップされるリッジプロットの特徴を考えると、グループごとに点の色分けをする必要があります（同じ色になると、どのグループの点かが分からなくなるので）。この場合、<code>point_color</code>に対し、グループ変数（<code>Continent</code>）をマッピングします。また、密度曲線の色と合わせるために密度曲線の色塗りも<code>fill</code>で指定します。</p>
<div class="sourceCode" id="cb1461"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1461-1"><a href="visualization4.html#cb1461-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1461-2"><a href="visualization4.html#cb1461-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1461-3"><a href="visualization4.html#cb1461-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent, <span class="at">fill =</span> Continent,</span>
<span id="cb1461-4"><a href="visualization4.html#cb1461-4"></a>                          <span class="at">point_color =</span> Continent), </span>
<span id="cb1461-5"><a href="visualization4.html#cb1461-5"></a>                      <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">jittered_points =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1461-6"><a href="visualization4.html#cb1461-6"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>, <span class="at">point_color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="co"># 凡例を削除</span></span>
<span id="cb1461-7"><a href="visualization4.html#cb1461-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1461-8"><a href="visualization4.html#cb1461-8"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1461-9"><a href="visualization4.html#cb1461-9"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 0.054</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　他にも密度曲線の下側にラグプロットを付けることも可能です。こうすれば点ごとに色訳をする必要もなくなります。ラグプロットを付けるためには点の形（<code>point_shape</code>）を「|」にする必要があります。ただ、これだけだと「|」が密度曲線内部に散らばる（jittered）だけです。散らばりをなくす、つまり密度曲線の下段に固定する必要があり、これは<code>aes()</code>その外側に<code>position = position_points_jitter(width = 0, height = 0)</code>を指定することで出来ます。</p>
<div class="sourceCode" id="cb1463"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1463-1"><a href="visualization4.html#cb1463-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1463-2"><a href="visualization4.html#cb1463-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1463-3"><a href="visualization4.html#cb1463-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent, <span class="at">fill =</span> Continent), </span>
<span id="cb1463-4"><a href="visualization4.html#cb1463-4"></a>                      <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">jittered_points =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1463-5"><a href="visualization4.html#cb1463-5"></a>                      <span class="at">position =</span> <span class="fu">position_points_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb1463-6"><a href="visualization4.html#cb1463-6"></a>                      <span class="at">point_shape =</span> <span class="st">&quot;|&quot;</span>, <span class="at">point_size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1463-7"><a href="visualization4.html#cb1463-7"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb1463-8"><a href="visualization4.html#cb1463-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1463-9"><a href="visualization4.html#cb1463-9"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1463-10"><a href="visualization4.html#cb1463-10"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 0.054</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　最後に密度曲線でなく、ヒストグラムで示す方法を紹介します。これは<code>geom_density_ridges()</code>の内部に<code>stat = "binline"</code>を指定するだけです。</p>
<div class="sourceCode" id="cb1465"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1465-1"><a href="visualization4.html#cb1465-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1465-2"><a href="visualization4.html#cb1465-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1465-3"><a href="visualization4.html#cb1465-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> HDI_2018, <span class="at">y =</span> Continent), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb1465-4"><a href="visualization4.html#cb1465-4"></a>                      <span class="at">stat =</span> <span class="st">&quot;binline&quot;</span>) <span class="sc">+</span></span>
<span id="cb1465-5"><a href="visualization4.html#cb1465-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;2018年人間開発指数&quot;</span>, <span class="at">y =</span> <span class="st">&quot;大陸&quot;</span>) <span class="sc">+</span></span>
<span id="cb1465-6"><a href="visualization4.html#cb1465-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1465-7"><a href="visualization4.html#cb1465-7"></a>                <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `stat_binline()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-ridge9-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-pointrange" class="section level2" number="20.5">
<h2><span class="header-section-number">20.5</span> エラーバー付き散布図</h2>
<p>　エラーバー付きの散布図は推定結果の点推定値とその不確実性（信頼区間など）を示す際によく使われる図です。以下の表は<code>Country_df</code>を用い、大陸（オセアニアを除く）ごとにフリーダムハウス・スコア（<code>FH_Total</code>）を一人当たりPPP GDP（<code>PPP_per_capita</code>）に回帰させた分析から得られたフリーダムハウス・スコア（<code>FH_Total</code>）の係数（以下の式の<span class="math inline">\(\beta_1\)</span>）の点推定値と95%信頼区間です。</p>
<p><span class="math display">\[
\text{PPP per capita} = \beta_0 + \beta_1 \cdot \text{FH_Total} + \varepsilon
\]</span></p>
<div class="sourceCode" id="cb1467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1467-1"><a href="visualization4.html#cb1467-1" aria-hidden="true" tabindex="-1"></a>Pointrange_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1467-2"><a href="visualization4.html#cb1467-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">Continent =</span> <span class="fu">c</span>(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Africa&quot;</span>, <span class="st">&quot;America&quot;</span>),</span>
<span id="cb1467-3"><a href="visualization4.html#cb1467-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Coef      =</span> <span class="fu">c</span>(<span class="fl">65.3</span>, <span class="fl">588.0</span>, <span class="fl">53.4</span>, <span class="fl">316.0</span>),</span>
<span id="cb1467-4"><a href="visualization4.html#cb1467-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Conf_lwr  =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">250.0</span>, <span class="fl">376.0</span>, <span class="sc">-</span><span class="fl">14.5</span>, <span class="fl">128.0</span>),</span>
<span id="cb1467-5"><a href="visualization4.html#cb1467-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Conf_upr  =</span> <span class="fu">c</span>(<span class="fl">380.0</span>, <span class="fl">801.0</span>, <span class="fl">121.0</span>, <span class="fl">504.0</span>)</span>
<span id="cb1467-6"><a href="visualization4.html#cb1467-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb1468"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1468-1"><a href="visualization4.html#cb1468-1"></a>Pointrange_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
## # Groups:   Continent [4]
##   Continent  Coef Conf_lwr Conf_upr
##   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 Asia       65.3   -250.      380.
## 2 Europe    588.     376.      801.
## 3 Africa     53.4    -14.5     121.
## 4 America   316.     128.      504.</code></pre>
<p>　実は以上のデータは以下のようなコードで作成されています。{purrr}パッケージの使い方に慣れる必要があるので、第<a href="iteration.html#iteration">24</a>章を参照してください。</p>
<div class="sourceCode" id="cb1470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1470-1"><a href="visualization4.html#cb1470-1" aria-hidden="true" tabindex="-1"></a>Pointrange_df <span class="ot">&lt;-</span> Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1470-2"><a href="visualization4.html#cb1470-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Continent <span class="sc">!=</span> <span class="st">&quot;Oceania&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1470-3"><a href="visualization4.html#cb1470-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Continent) <span class="sc">%&gt;%</span></span>
<span id="cb1470-4"><a href="visualization4.html#cb1470-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1470-5"><a href="visualization4.html#cb1470-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span><span class="fu">lm</span>(PPP_per_capita <span class="sc">~</span> FH_Total, <span class="at">data =</span> .)),</span>
<span id="cb1470-6"><a href="visualization4.html#cb1470-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">Est =</span> <span class="fu">map</span>(Fit, broom<span class="sc">::</span>tidy, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1470-7"><a href="visualization4.html#cb1470-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(Est) <span class="sc">%&gt;%</span></span>
<span id="cb1470-8"><a href="visualization4.html#cb1470-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">&quot;FH_Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1470-9"><a href="visualization4.html#cb1470-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Continent, <span class="at">Coef =</span> estimate, </span>
<span id="cb1470-10"><a href="visualization4.html#cb1470-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">Conf_lwr =</span> conf.low, <span class="at">Conf_upr =</span> conf.high) </span></code></pre></div>
<p>この<code>Pointrange_df</code>を用いて横軸は大陸（<code>Continent</code>）、縦軸には点推定値（<code>Coef</code>）と95%信頼区間（<code>Conf_lwr</code>と<code>Conf_upr</code>）を出力します。ここで使う幾何オブジェクトは<code>geom_pointrange()</code>です。横軸<code>x</code>と点推定値<code>y</code>、95%信頼区間の下限の<code>ymin</code>、上限の<code>ymax</code>にマッピングします。エラーバー付き散布図を立てに並べたい場合は<code>y</code>と<code>x</code>、<code>xmin</code>、<code>xmax</code>にマッピングします。</p>
<div class="sourceCode" id="cb1471"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1471-1"><a href="visualization4.html#cb1471-1"></a>Pointrange_df <span class="sc">%&gt;%</span></span>
<span id="cb1471-2"><a href="visualization4.html#cb1471-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1471-3"><a href="visualization4.html#cb1471-3"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1471-4"><a href="visualization4.html#cb1471-4"></a>    <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Coef, </span>
<span id="cb1471-5"><a href="visualization4.html#cb1471-5"></a>                        <span class="at">ymin =</span> Conf_lwr, <span class="at">ymax =</span> Conf_upr),</span>
<span id="cb1471-6"><a href="visualization4.html#cb1471-6"></a>                    <span class="at">size =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb1471-7"><a href="visualization4.html#cb1471-7"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="fu">expression</span>(<span class="fu">paste</span>(beta[<span class="dv">1</span>], <span class="st">&quot; with 95% CI&quot;</span>))) <span class="sc">+</span></span>
<span id="cb1471-8"><a href="visualization4.html#cb1471-8"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-pointrage3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>ここでもう一つの次元を追加することもあるでしょう。たとえば、複数のモデルを比較した場合がそうかもしれません。以下の<code>Pointrange_df2</code>について考えてみましょう。</p>
<div class="sourceCode" id="cb1472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1472-1"><a href="visualization4.html#cb1472-1" aria-hidden="true" tabindex="-1"></a>Pointrange_df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1472-2"><a href="visualization4.html#cb1472-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">Continent =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Africa&quot;</span>, <span class="st">&quot;America&quot;</span>), <span class="at">each =</span> <span class="dv">2</span>),</span>
<span id="cb1472-3"><a href="visualization4.html#cb1472-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Term      =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Civic Liverty&quot;</span>, <span class="st">&quot;Political Right&quot;</span>), <span class="dv">4</span>),</span>
<span id="cb1472-4"><a href="visualization4.html#cb1472-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Coef      =</span> <span class="fu">c</span>(<span class="fl">207.747</span>, <span class="fl">29.188</span>, <span class="fl">1050.164</span>, <span class="fl">1284.101</span>,</span>
<span id="cb1472-5"><a href="visualization4.html#cb1472-5" aria-hidden="true" tabindex="-1"></a>                  <span class="fl">110.025</span>, <span class="fl">93.537</span>, <span class="fl">581.4593</span>, <span class="fl">646.9211</span>),</span>
<span id="cb1472-6"><a href="visualization4.html#cb1472-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Conf_lwr  =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">385.221</span>, <span class="sc">-</span><span class="fl">609.771</span>, <span class="fl">692.204</span>, <span class="fl">768.209</span>,</span>
<span id="cb1472-7"><a href="visualization4.html#cb1472-7" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">-</span><span class="fl">12.648</span>, <span class="sc">-</span><span class="fl">53.982</span>, <span class="fl">262.056</span>, <span class="fl">201.511</span>),</span>
<span id="cb1472-8"><a href="visualization4.html#cb1472-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Conf_upr  =</span> <span class="fu">c</span>(<span class="fl">800.716</span>, <span class="fl">668.147</span>, <span class="fl">1408.125</span>, <span class="fl">1801.994</span>,</span>
<span id="cb1472-9"><a href="visualization4.html#cb1472-9" aria-hidden="true" tabindex="-1"></a>                  <span class="fl">232.697</span>, <span class="fl">241.057</span>, <span class="fl">900.863</span>, <span class="fl">1092.331</span>))</span></code></pre></div>
<div class="sourceCode" id="cb1473"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1473-1"><a href="visualization4.html#cb1473-1"></a>Pointrange_df2</span></code></pre></div>
<pre><code>## # A tibble: 8 × 5
## # Groups:   Continent [4]
##   Continent Term              Coef Conf_lwr Conf_upr
##   &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 Asia      Civic Liberty    208.    -385.      801.
## 2 Asia      Political Right   29.2   -610.      668.
## 3 Europe    Civic Liberty   1050.     692.     1408.
## 4 Europe    Political Right 1285.     768.     1802.
## 5 Africa    Civic Liberty    110.     -12.6     233.
## 6 Africa    Political Right   93.5    -54.0     241.
## 7 America   Civic Liberty    581.     262.      901.
## 8 America   Political Right  647.     202.     1092.</code></pre>
<p>このデータは以下の2つのモデルを大陸ごとに推定した<span class="math inline">\(\beta_1\)</span>と<span class="math inline">\(\gamma_1\)</span>の点推定値と95%信頼区間です。</p>
<p><span class="math display">\[
\begin{aligned}
\text{PPP per capita} &amp; = \beta_0 + \beta_1 \cdot \text{FH_CL} + \varepsilon \\
\text{PPP per capita} &amp; = \gamma_0 + \gamma_1 \cdot \text{FH_PR} + \upsilon
\end{aligned}
\]</span></p>
<p>　どの説明変数を用いたかでエラーバーと点の色分けを行う場合、<code>color</code>に対して<code>Term</code>をマッピングします。</p>
<div class="sourceCode" id="cb1475"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1475-1"><a href="visualization4.html#cb1475-1"></a>Pointrange_df2 <span class="sc">%&gt;%</span></span>
<span id="cb1475-2"><a href="visualization4.html#cb1475-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1475-3"><a href="visualization4.html#cb1475-3"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1475-4"><a href="visualization4.html#cb1475-4"></a>    <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Coef, </span>
<span id="cb1475-5"><a href="visualization4.html#cb1475-5"></a>                        <span class="at">ymin =</span> Conf_lwr, <span class="at">ymax =</span> Conf_upr,</span>
<span id="cb1475-6"><a href="visualization4.html#cb1475-6"></a>                        <span class="at">color =</span> Term), <span class="at">size =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb1475-7"><a href="visualization4.html#cb1475-7"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="fu">expression</span>(<span class="fu">paste</span>(beta[<span class="dv">1</span>], <span class="st">&quot; and &quot;</span>, gamma[<span class="dv">1</span>], <span class="st">&quot; with 95% CI&quot;</span>)),</span>
<span id="cb1475-8"><a href="visualization4.html#cb1475-8"></a>         <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb1475-9"><a href="visualization4.html#cb1475-9"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1475-10"><a href="visualization4.html#cb1475-10"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-pointrage6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　何か違いますね。この2つのエラーバーと点の位置をずらす必要があるようです。これは3次元以上の棒グラフで使った<code>position</code>引数で調整可能です。今回は実引数として<code>position_dodge(0.5)</code>を指定してみましょう。</p>
<div class="sourceCode" id="cb1476"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1476-1"><a href="visualization4.html#cb1476-1"></a>Pointrange_df2 <span class="sc">%&gt;%</span></span>
<span id="cb1476-2"><a href="visualization4.html#cb1476-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1476-3"><a href="visualization4.html#cb1476-3"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1476-4"><a href="visualization4.html#cb1476-4"></a>    <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Coef, </span>
<span id="cb1476-5"><a href="visualization4.html#cb1476-5"></a>                        <span class="at">ymin =</span> Conf_lwr, <span class="at">ymax =</span> Conf_upr,</span>
<span id="cb1476-6"><a href="visualization4.html#cb1476-6"></a>                        <span class="at">color =</span> Term),</span>
<span id="cb1476-7"><a href="visualization4.html#cb1476-7"></a>                    <span class="at">size =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb1476-8"><a href="visualization4.html#cb1476-8"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="fu">expression</span>(<span class="fu">paste</span>(beta[<span class="dv">1</span>], <span class="st">&quot; and &quot;</span>, gamma[<span class="dv">1</span>], <span class="st">&quot; with 95% CI&quot;</span>)),</span>
<span id="cb1476-9"><a href="visualization4.html#cb1476-9"></a>         <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb1476-10"><a href="visualization4.html#cb1476-10"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1476-11"><a href="visualization4.html#cb1476-11"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-pointrage7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これで完成です。更に、<span class="math inline">\(\alpha = 0.05\)</span>水準で統計的に有意か否かを透明度で示し、透明度の凡例を非表示にしてみましょう。<span class="math inline">\(\alpha = 0.05\)</span>水準で統計的に有意か否かは95%信頼区間の上限と下限の積が0より大きいか否かで判定できます。<code>ggplot()</code>にデータを渡す前に統計的有意か否かを意味する<code>Sig</code>変数を作成し、<code>geom_pointrage()</code>の内部では<code>alpha</code>に<code>Sig</code>をマッピングします。</p>
<div class="sourceCode" id="cb1477"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1477-1"><a href="visualization4.html#cb1477-1"></a>Pointrange_df2 <span class="sc">%&gt;%</span></span>
<span id="cb1477-2"><a href="visualization4.html#cb1477-2"></a>    <span class="fu">mutate</span>(<span class="at">Sig =</span> <span class="fu">if_else</span>(Conf_lwr <span class="sc">*</span> Conf_upr <span class="sc">&gt;</span> <span class="dv">0</span>, </span>
<span id="cb1477-3"><a href="visualization4.html#cb1477-3"></a>                         <span class="st">&quot;Significant&quot;</span>, <span class="st">&quot;Insignificant&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1477-4"><a href="visualization4.html#cb1477-4"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1477-5"><a href="visualization4.html#cb1477-5"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1477-6"><a href="visualization4.html#cb1477-6"></a>    <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Coef, </span>
<span id="cb1477-7"><a href="visualization4.html#cb1477-7"></a>                        <span class="at">ymin =</span> Conf_lwr, <span class="at">ymax =</span> Conf_upr,</span>
<span id="cb1477-8"><a href="visualization4.html#cb1477-8"></a>                        <span class="at">color =</span> Term, <span class="at">alpha =</span> Sig),</span>
<span id="cb1477-9"><a href="visualization4.html#cb1477-9"></a>                    <span class="at">size =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb1477-10"><a href="visualization4.html#cb1477-10"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="fu">expression</span>(<span class="fu">paste</span>(beta[<span class="dv">1</span>], <span class="st">&quot; and &quot;</span>, gamma[<span class="dv">1</span>], <span class="st">&quot; with 95% CI&quot;</span>)),</span>
<span id="cb1477-11"><a href="visualization4.html#cb1477-11"></a>         <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb1477-12"><a href="visualization4.html#cb1477-12"></a>    <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Significant&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;Insignificant&quot;</span> <span class="ot">=</span> <span class="fl">0.35</span>)) <span class="sc">+</span></span>
<span id="cb1477-13"><a href="visualization4.html#cb1477-13"></a>    <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1477-14"><a href="visualization4.html#cb1477-14"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1477-15"><a href="visualization4.html#cb1477-15"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-pointrage8-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-lollipop" class="section level2" number="20.6">
<h2><span class="header-section-number">20.6</span> ロリーポップチャート</h2>
<p>　ロリーポップチャートは棒グラフの特殊な形態であり、棒がロリーポップ（チュッパチャップス）の形をしているものを指します。したがって、2つの図は本質的に同じですが、棒が多い場合はロリーポップチャートを使うケースがあります。棒が非常に多い棒グラフの場合、図を不適切に縮小すると<a href="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%82%A2%E3%83%AC">モアレ</a>が生じるケースがあるからです。</p>
<p>　まず、<code>Country_df</code>を用い、ヨーロッパ諸国の一人当たりPPP GDP（<code>PPP_per_capita</code>）の棒グラフを作るとします。<code>PPP_per_capita</code>が欠損していないヨーロッパの国は46行であり、非常に棒が多い棒グラフになります。</p>
<div class="sourceCode" id="cb1478"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1478-1"><a href="visualization4.html#cb1478-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1478-2"><a href="visualization4.html#cb1478-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1478-3"><a href="visualization4.html#cb1478-3"></a>  <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1478-4"><a href="visualization4.html#cb1478-4"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1478-5"><a href="visualization4.html#cb1478-5"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">x =</span> PPP_per_capita), <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb1478-6"><a href="visualization4.html#cb1478-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;一人あたり購買力平価GDP&quot;</span>, <span class="at">y =</span> <span class="st">&quot;国&quot;</span>) <span class="sc">+</span></span>
<span id="cb1478-7"><a href="visualization4.html#cb1478-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1478-8"><a href="visualization4.html#cb1478-8"></a>           <span class="at">base_size   =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-lollipop1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>ここで登場するのがロリーポップチャートです。ロリーポップチャートの構成要素は棒とキャンディーの部分です。棒は線になるため<code>geom_segement()</code>を、キャンディーは散布図<code>geom_point()</code>を使います。散布図については既に第<a href="visualization2.html#visualization2">18</a>章で説明しましたので、ここでは<code>geom_segment()</code>について説明します。</p>
<p>　<code>geom_segment()</code>は直線を引く幾何オブジェクトであり、線の起点（<code>x</code>と<code>y</code>）と終点（<code>xend</code>と<code>yend</code>）に対してマッピングをする必要があります。横軸上の起点は0、縦軸上の起点は<code>Country</code>です。そして横軸上の終点は<code>PPP_per_capita</code>、縦軸上のそれは<code>Country</code>です。縦軸上の起点と終点が同じということは水平線を引くことになります。</p>
<p>　<code>geom_segment()</code>で水平線を描いたら、次は散布図をオーバーラップさせます。点の横軸上の位置は<code>PPP_per_capita</code>、縦軸上の位置は<code>Country</code>です。</p>
<div class="sourceCode" id="cb1479"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1479-1"><a href="visualization4.html#cb1479-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1479-2"><a href="visualization4.html#cb1479-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1479-3"><a href="visualization4.html#cb1479-3"></a>  <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1479-4"><a href="visualization4.html#cb1479-4"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1479-5"><a href="visualization4.html#cb1479-5"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">yend =</span> Country,</span>
<span id="cb1479-6"><a href="visualization4.html#cb1479-6"></a>                   <span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1479-7"><a href="visualization4.html#cb1479-7"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">x =</span> PPP_per_capita), <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb1479-8"><a href="visualization4.html#cb1479-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;一人あたり購買力平価GDP (USD)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;国&quot;</span>) <span class="sc">+</span></span>
<span id="cb1479-9"><a href="visualization4.html#cb1479-9"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1479-10"><a href="visualization4.html#cb1479-10"></a>           <span class="at">base_size   =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1479-11"><a href="visualization4.html#cb1479-11"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1479-12"><a href="visualization4.html#cb1479-12"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1479-13"><a href="visualization4.html#cb1479-13"></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-lollipop2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これで完成です。もし一人当たりPPP GDP順で並べ替えたい場合は<code>fct_reorder()</code>を使います。<code>Country</code>を<code>PPP_per_capita</code>の低い方を先にくるようにするなら、<code>fct_reorder(Country, PPP_per_capita)</code>です。縦に並ぶの棒グラフなら最初に来る水準が下に位置されます。もし、順番を逆にしたいなら、更に<code>fct_rev()</code>で水準の順番を逆転させます。</p>
<div class="sourceCode" id="cb1480"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1480-1"><a href="visualization4.html#cb1480-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1480-2"><a href="visualization4.html#cb1480-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1480-3"><a href="visualization4.html#cb1480-3"></a>  <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1480-4"><a href="visualization4.html#cb1480-4"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_reorder</span>(Country, PPP_per_capita)) <span class="sc">%&gt;%</span> </span>
<span id="cb1480-5"><a href="visualization4.html#cb1480-5"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1480-6"><a href="visualization4.html#cb1480-6"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">yend =</span> Country,</span>
<span id="cb1480-7"><a href="visualization4.html#cb1480-7"></a>                   <span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1480-8"><a href="visualization4.html#cb1480-8"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">x =</span> PPP_per_capita), <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb1480-9"><a href="visualization4.html#cb1480-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;一人あたり購買力平価GDP (USD)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;国&quot;</span>) <span class="sc">+</span></span>
<span id="cb1480-10"><a href="visualization4.html#cb1480-10"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1480-11"><a href="visualization4.html#cb1480-11"></a>           <span class="at">base_size   =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1480-12"><a href="visualization4.html#cb1480-12"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1480-13"><a href="visualization4.html#cb1480-13"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1480-14"><a href="visualization4.html#cb1480-14"></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-lollipop3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ロリーポップロリーポップチャートで次元を追加するには点（キャンディー）の色分けが考えられます。たとえば、OECD加盟国か否かの次元を追加する場合、<code>geom_point()</code>において<code>color</code>をマッピングするだけです。</p>
<div class="sourceCode" id="cb1481"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1481-1"><a href="visualization4.html#cb1481-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1481-2"><a href="visualization4.html#cb1481-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1481-3"><a href="visualization4.html#cb1481-3"></a>  <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1481-4"><a href="visualization4.html#cb1481-4"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_reorder</span>(Country, PPP_per_capita),</span>
<span id="cb1481-5"><a href="visualization4.html#cb1481-5"></a>         <span class="at">OECD    =</span> <span class="fu">if_else</span>(OECD <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;OECD&quot;</span>, <span class="st">&quot;non-OECD&quot;</span>),</span>
<span id="cb1481-6"><a href="visualization4.html#cb1481-6"></a>         <span class="at">OECD    =</span> <span class="fu">factor</span>(OECD, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;OECD&quot;</span>, <span class="st">&quot;non-OECD&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb1481-7"><a href="visualization4.html#cb1481-7"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1481-8"><a href="visualization4.html#cb1481-8"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">yend =</span> Country,</span>
<span id="cb1481-9"><a href="visualization4.html#cb1481-9"></a>                   <span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1481-10"><a href="visualization4.html#cb1481-10"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Country, <span class="at">x =</span> PPP_per_capita, <span class="at">color =</span> OECD)) <span class="sc">+</span></span>
<span id="cb1481-11"><a href="visualization4.html#cb1481-11"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;OECD&quot;</span> <span class="ot">=</span> <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;non-OECD&quot;</span> <span class="ot">=</span> <span class="st">&quot;royalblue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1481-12"><a href="visualization4.html#cb1481-12"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;一人あたり購買力平価GDP (USD)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;国&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb1481-13"><a href="visualization4.html#cb1481-13"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1481-14"><a href="visualization4.html#cb1481-14"></a>           <span class="at">base_size   =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1481-15"><a href="visualization4.html#cb1481-15"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1481-16"><a href="visualization4.html#cb1481-16"></a>        <span class="at">panel.border       =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1481-17"><a href="visualization4.html#cb1481-17"></a>        <span class="at">axis.ticks.y       =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1481-18"><a href="visualization4.html#cb1481-18"></a>        <span class="at">legend.position    =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-lollipop4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ファセット分割ももちろんできますが、この場合、OECD加盟国の一人当たりPPP GDPが相対的に高いことを示すなら、一つのファセットにまとめた方が良いでしょう。</p>
<p>　以下のようにロリーポップを横に並べることもできますが、棒の数が多いケースがほとんどであるロリーポップチャートではラベルの回転が必要になるため、読みにくくなるかも知れません。</p>
<div class="sourceCode" id="cb1482"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1482-1"><a href="visualization4.html#cb1482-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1482-2"><a href="visualization4.html#cb1482-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1482-3"><a href="visualization4.html#cb1482-3"></a>  <span class="fu">drop_na</span>(PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1482-4"><a href="visualization4.html#cb1482-4"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_reorder</span>(Country, PPP_per_capita),</span>
<span id="cb1482-5"><a href="visualization4.html#cb1482-5"></a>         <span class="at">Country =</span> <span class="fu">fct_rev</span>(Country)) <span class="sc">%&gt;%</span> </span>
<span id="cb1482-6"><a href="visualization4.html#cb1482-6"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1482-7"><a href="visualization4.html#cb1482-7"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Country, <span class="at">xend =</span> Country,</span>
<span id="cb1482-8"><a href="visualization4.html#cb1482-8"></a>                   <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1482-9"><a href="visualization4.html#cb1482-9"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Country, <span class="at">y =</span> PPP_per_capita), <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb1482-10"><a href="visualization4.html#cb1482-10"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;国&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人あたり購買力平価GDP (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1482-11"><a href="visualization4.html#cb1482-11"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1482-12"><a href="visualization4.html#cb1482-12"></a>           <span class="at">base_size   =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1482-13"><a href="visualization4.html#cb1482-13"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1482-14"><a href="visualization4.html#cb1482-14"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1482-15"><a href="visualization4.html#cb1482-15"></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1482-16"><a href="visualization4.html#cb1482-16"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-lollipop5-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-smooth" class="section level2" number="20.7">
<h2><span class="header-section-number">20.7</span> 平滑化ライン</h2>
<p>2次元平面上に散布図をプロットし、二変数間の関係を一本の線で要約するのは平滑化ラインです。{ggplot2}では<code>geom_smooth()</code>幾何オブジェクトを重ねることで簡単に平滑化ラインをプロットすることができます。まずは、横軸をフリーダムハウス・スコア（<code>FH_Total</code>）、縦軸を一人当たり購買力平価GDP（<code>PPP_per_capita</code>）にした散布図を出力し、その上に平滑化ラインを追加してみましょう。<code>geom_smooth()</code>にもマッピングが必要で、<code>aes()</code>の内部に<code>x</code>と<code>y</code>をマッピングします。今回は<code>geom_point()</code>と<code>geom_smooth()</code>が同じマッピング情報を共有するため、<code>ggplot()</code>内部でマッピングします。</p>
<div class="sourceCode" id="cb1483"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1483-1"><a href="visualization4.html#cb1483-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1483-2"><a href="visualization4.html#cb1483-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1483-3"><a href="visualization4.html#cb1483-3"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1483-4"><a href="visualization4.html#cb1483-4"></a>    <span class="fu">geom_smooth</span>()  <span class="sc">+</span></span>
<span id="cb1483-5"><a href="visualization4.html#cb1483-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1483-6"><a href="visualization4.html#cb1483-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1483-7"><a href="visualization4.html#cb1483-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1483-8"><a href="visualization4.html#cb1483-8"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　青い線が平滑化ライン、網掛けの領域が95%信頼区間です。この線はLOESS (<strong>LO</strong>cal <strong>E</strong>stimated <strong>S</strong>catterplot <strong>S</strong>moothing)と呼ばれる非線形平滑化ラインです。どのようなラインを引くかは<code>method</code>引数で指定しますが、この<code>method</code>既定値が<code>"loess"</code>です。これを見るとフリーダムハウス・スコアが75以下の国では国の自由度と所得間の関係があまり見られませんが、75からは正の関係が確認できます。</p>
<p>　LOESS平滑化の場合、<code>span</code>引数を使って滑らかさを調整することができます。<code>span</code>の既定値は0.75ですが、これが小さいほど散布図によりフィットしたラインが引かれ、よりギザギザな線になります。たとえば、<code>span</code>を0.25にすると以下のようなグラフが得られます。</p>
<div class="sourceCode" id="cb1485"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1485-1"><a href="visualization4.html#cb1485-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1485-2"><a href="visualization4.html#cb1485-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1485-3"><a href="visualization4.html#cb1485-3"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1485-4"><a href="visualization4.html#cb1485-4"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">span =</span> <span class="fl">0.25</span>)  <span class="sc">+</span></span>
<span id="cb1485-5"><a href="visualization4.html#cb1485-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1485-6"><a href="visualization4.html#cb1485-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1485-7"><a href="visualization4.html#cb1485-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1485-8"><a href="visualization4.html#cb1485-8"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　他にも定番の回帰直線を引くこともできます。<code>method</code>の実引数を<code>"lm"</code>に変えるだけです。</p>
<div class="sourceCode" id="cb1487"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1487-1"><a href="visualization4.html#cb1487-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1487-2"><a href="visualization4.html#cb1487-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1487-3"><a href="visualization4.html#cb1487-3"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1487-4"><a href="visualization4.html#cb1487-4"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)  <span class="sc">+</span></span>
<span id="cb1487-5"><a href="visualization4.html#cb1487-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1487-6"><a href="visualization4.html#cb1487-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1487-7"><a href="visualization4.html#cb1487-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1487-8"><a href="visualization4.html#cb1487-8"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　信頼区間は既定値だと95%信頼区間が表示されますが、<code>level</code>引数で調整することができます。たとえば、99.9%信頼区間を表示したい場合、<code>level = 0.999</code>を指定します。</p>
<div class="sourceCode" id="cb1489"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1489-1"><a href="visualization4.html#cb1489-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1489-2"><a href="visualization4.html#cb1489-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1489-3"><a href="visualization4.html#cb1489-3"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1489-4"><a href="visualization4.html#cb1489-4"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">level =</span> <span class="fl">0.999</span>)  <span class="sc">+</span></span>
<span id="cb1489-5"><a href="visualization4.html#cb1489-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1489-6"><a href="visualization4.html#cb1489-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1489-7"><a href="visualization4.html#cb1489-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1489-8"><a href="visualization4.html#cb1489-8"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　信頼区間を消したい場合は<code>se = FALSE</code>を指定します（既定値は<code>TRUE</code>）。</p>
<div class="sourceCode" id="cb1491"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1491-1"><a href="visualization4.html#cb1491-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1491-2"><a href="visualization4.html#cb1491-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1491-3"><a href="visualization4.html#cb1491-3"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1491-4"><a href="visualization4.html#cb1491-4"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)  <span class="sc">+</span></span>
<span id="cb1491-5"><a href="visualization4.html#cb1491-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1491-6"><a href="visualization4.html#cb1491-6"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1491-7"><a href="visualization4.html#cb1491-7"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1491-8"><a href="visualization4.html#cb1491-8"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　最後にデータのサブセットごとに回帰直線を引く方法について説明します。散布図で色分けを行う場合、<code>aes()</code>内で<code>color</code>引数を指定しますが、これだけで十分です。今回はこれまでの散布図をOECD加盟有無ごとに色分けし、それぞれ別の回帰直線を重ねてみましょう。回帰直線も色分けしたいので<code>color</code>引数で次元を増やす必要があり、これは<code>geom_point()</code>と共通であるため、<code>ggplot()</code>内でマッピングします。</p>
<div class="sourceCode" id="cb1493"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1493-1"><a href="visualization4.html#cb1493-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1493-2"><a href="visualization4.html#cb1493-2"></a>    <span class="fu">mutate</span>(<span class="at">OECD =</span> <span class="fu">if_else</span>(OECD <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;加盟国&quot;</span>, <span class="st">&quot;非加盟国&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1493-3"><a href="visualization4.html#cb1493-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita, <span class="at">color =</span> OECD)) <span class="sc">+</span></span>
<span id="cb1493-4"><a href="visualization4.html#cb1493-4"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1493-5"><a href="visualization4.html#cb1493-5"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)  <span class="sc">+</span></span>
<span id="cb1493-6"><a href="visualization4.html#cb1493-6"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1493-7"><a href="visualization4.html#cb1493-7"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1493-8"><a href="visualization4.html#cb1493-8"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1493-9"><a href="visualization4.html#cb1493-9"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">120000</span>)) <span class="sc">+</span></span>
<span id="cb1493-10"><a href="visualization4.html#cb1493-10"></a>    <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1493-11"><a href="visualization4.html#cb1493-11"></a>             <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これを見ると、国の自由度と所得の間に関係が見られるのはOECD加盟国で、非加盟国では非常に関係が弱いことが分かります。</p>
<p>　あまりいい方法ではないと思いますが、散布図は色（<code>color</code>）で分け、回帰直線は線の種類（<code>linetype</code>）で分けるならどうすれば良いでしょうか。この場合は<code>color</code>は<code>geom_point()</code>内部で、<code>linetype</code>は<code>geom_smooth()</code>でマッピングします。</p>
<div class="sourceCode" id="cb1495"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1495-1"><a href="visualization4.html#cb1495-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1495-2"><a href="visualization4.html#cb1495-2"></a>    <span class="fu">mutate</span>(<span class="at">OECD =</span> <span class="fu">if_else</span>(OECD <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;加盟国&quot;</span>, <span class="st">&quot;非加盟国&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1495-3"><a href="visualization4.html#cb1495-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> PPP_per_capita)) <span class="sc">+</span></span>
<span id="cb1495-4"><a href="visualization4.html#cb1495-4"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> OECD)) <span class="sc">+</span></span>
<span id="cb1495-5"><a href="visualization4.html#cb1495-5"></a>    <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> OECD), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)  <span class="sc">+</span></span>
<span id="cb1495-6"><a href="visualization4.html#cb1495-6"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Freedom House Score&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PPP per capita (USD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1495-7"><a href="visualization4.html#cb1495-7"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>),</span>
<span id="cb1495-8"><a href="visualization4.html#cb1495-8"></a>                       <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">120000</span>, <span class="at">by =</span> <span class="dv">10000</span>)) <span class="sc">+</span></span>
<span id="cb1495-9"><a href="visualization4.html#cb1495-9"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">120000</span>)) <span class="sc">+</span></span>
<span id="cb1495-10"><a href="visualization4.html#cb1495-10"></a>    <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1495-11"><a href="visualization4.html#cb1495-11"></a>             <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-smooth7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　{ggplot2}が提供する平滑化ラインにはLOESSと回帰直線以外にも<code>"glm"</code>や<code>"gam"</code>などがります。詳細はRコンソール上で<code>?geom_smooth</code>を入力し、ヘルプを参照してください。</p>
<hr />
</div>
<div id="visual4-heatmap" class="section level2" number="20.8">
<h2><span class="header-section-number">20.8</span> ヒートマップ</h2>
<div id="つの離散変数の分布を表すヒートマップ" class="section level3" number="20.8.1">
<h3><span class="header-section-number">20.8.1</span> 2つの離散変数の分布を表すヒートマップ</h3>
<p>　ヒートマップ（heat map）には2つの使い方があります。まずは、離散変数<span class="math inline">\(\times\)</span>離散変数の同時分布を示す時です。これは後ほど紹介するモザイク・プロットと目的は同じですが、モザイク・プロットはセルの<strong>面積</strong>で密度や度数を表すに対し、ヒートマップは主に<strong>色</strong>で密度や度数を表します。</p>
<p>　ここでは一人当たり購買力平価GDP（<code>PPP_per_capita</code>）を「1万ドル未満」、「1万ドル以上・2万ドル未満」、「2万ドル以上、3万ドル未満」、「3万ドル以上」の離散変数に変換し、大陸ごとの国家数をヒートマップとして示してみたいと思います。まずは、変数のリコーディングをし、全てfactor化します。最後に国家名（<code>Country</code>）、大陸（<code>Continent</code>）、所得（<code>Income</code>）、フリーダム・ハウス・スコア（<code>FH_Total</code>）、人間開発指数（<code>HDI_2018</code>）列のみ抽出し、<code>Heatmap_df</code>という名のオブジェクトとして格納しておきます。</p>
<div class="sourceCode" id="cb1497"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1497-1"><a href="visualization4.html#cb1497-1"></a>Heatmap_df <span class="ot">&lt;-</span> Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1497-2"><a href="visualization4.html#cb1497-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(PPP_per_capita)) <span class="sc">%&gt;%</span></span>
<span id="cb1497-3"><a href="visualization4.html#cb1497-3"></a>  <span class="fu">mutate</span>(<span class="at">Continent =</span> <span class="fu">recode</span>(Continent,</span>
<span id="cb1497-4"><a href="visualization4.html#cb1497-4"></a>                            <span class="st">&quot;Africa&quot;</span>  <span class="ot">=</span> <span class="st">&quot;アフリカ&quot;</span>,</span>
<span id="cb1497-5"><a href="visualization4.html#cb1497-5"></a>                            <span class="st">&quot;America&quot;</span> <span class="ot">=</span> <span class="st">&quot;アメリカ&quot;</span>,</span>
<span id="cb1497-6"><a href="visualization4.html#cb1497-6"></a>                            <span class="st">&quot;Asia&quot;</span>    <span class="ot">=</span> <span class="st">&quot;アジア&quot;</span>,</span>
<span id="cb1497-7"><a href="visualization4.html#cb1497-7"></a>                            <span class="st">&quot;Europe&quot;</span>  <span class="ot">=</span> <span class="st">&quot;ヨーロッパ&quot;</span>,</span>
<span id="cb1497-8"><a href="visualization4.html#cb1497-8"></a>                            <span class="at">.default  =</span> <span class="st">&quot;オセアニア&quot;</span>),</span>
<span id="cb1497-9"><a href="visualization4.html#cb1497-9"></a>         <span class="at">Continent =</span> <span class="fu">factor</span>(Continent, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;アフリカ&quot;</span>, <span class="st">&quot;アメリカ&quot;</span>, <span class="st">&quot;アジア&quot;</span>, </span>
<span id="cb1497-10"><a href="visualization4.html#cb1497-10"></a>                                                  <span class="st">&quot;ヨーロッパ&quot;</span>, <span class="st">&quot;オセアニア&quot;</span>)),</span>
<span id="cb1497-11"><a href="visualization4.html#cb1497-11"></a>         <span class="at">Income    =</span> <span class="fu">case_when</span>(PPP_per_capita <span class="sc">&lt;</span> <span class="dv">10000</span> <span class="sc">~</span> <span class="st">&quot;1万ドル未満&quot;</span>,</span>
<span id="cb1497-12"><a href="visualization4.html#cb1497-12"></a>                               PPP_per_capita <span class="sc">&lt;</span> <span class="dv">20000</span> <span class="sc">~</span> <span class="st">&quot;1万ドル以上</span><span class="sc">\n</span><span class="st">2万ドル未満&quot;</span>,</span>
<span id="cb1497-13"><a href="visualization4.html#cb1497-13"></a>                               PPP_per_capita <span class="sc">&lt;</span> <span class="dv">30000</span> <span class="sc">~</span> <span class="st">&quot;2万ドル以上</span><span class="sc">\n</span><span class="st">3万ドル未満&quot;</span>,</span>
<span id="cb1497-14"><a href="visualization4.html#cb1497-14"></a>                               <span class="cn">TRUE</span>                   <span class="sc">~</span> <span class="st">&quot;3万ドル以上&quot;</span>),</span>
<span id="cb1497-15"><a href="visualization4.html#cb1497-15"></a>         <span class="at">Income    =</span> <span class="fu">factor</span>(Income, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;1万ドル未満&quot;</span>, <span class="st">&quot;1万ドル以上</span><span class="sc">\n</span><span class="st">2万ドル未満&quot;</span>,</span>
<span id="cb1497-16"><a href="visualization4.html#cb1497-16"></a>                                               <span class="st">&quot;2万ドル以上</span><span class="sc">\n</span><span class="st">3万ドル未満&quot;</span>, <span class="st">&quot;3万ドル以上&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1497-17"><a href="visualization4.html#cb1497-17"></a>  <span class="fu">select</span>(Country, Continent, Income, FH_Total, HDI_2018)</span>
<span id="cb1497-18"><a href="visualization4.html#cb1497-18"></a></span>
<span id="cb1497-19"><a href="visualization4.html#cb1497-19"></a>Heatmap_df</span></code></pre></div>
<pre><code>## # A tibble: 178 × 5
##    Country             Continent  Income                     FH_Total HDI_2018
##    &lt;chr&gt;               &lt;fct&gt;      &lt;fct&gt;                         &lt;dbl&gt;    &lt;dbl&gt;
##  1 Afghanistan         アジア     &quot;1万ドル未満&quot;                    27    0.496
##  2 Albania             ヨーロッパ &quot;1万ドル以上\n2万ドル未満&quot;       67    0.791
##  3 Algeria             アフリカ   &quot;1万ドル以上\n2万ドル未満&quot;       34    0.759
##  4 Angola              アフリカ   &quot;1万ドル未満&quot;                    32    0.574
##  5 Antigua and Barbuda アメリカ   &quot;2万ドル以上\n3万ドル未満&quot;       85    0.776
##  6 Argentina           アメリカ   &quot;2万ドル以上\n3万ドル未満&quot;       85    0.83 
##  7 Armenia             ヨーロッパ &quot;1万ドル以上\n2万ドル未満&quot;       53    0.76 
##  8 Australia           オセアニア &quot;3万ドル以上&quot;                    97    0.938
##  9 Austria             ヨーロッパ &quot;3万ドル以上&quot;                    93    0.914
## 10 Azerbaijan          ヨーロッパ &quot;1万ドル以上\n2万ドル未満&quot;       10    0.754
## # … with 168 more rows</code></pre>
<p>　次は<code>group_by()</code>と<code>summarise()</code>を使って、各カテゴリーに属するケース数を計算し、<code>N</code>という名の列として追加します。</p>
<div class="sourceCode" id="cb1499"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1499-1"><a href="visualization4.html#cb1499-1"></a>Heatmap_df1 <span class="ot">&lt;-</span> Heatmap_df <span class="sc">%&gt;%</span></span>
<span id="cb1499-2"><a href="visualization4.html#cb1499-2"></a>  <span class="fu">group_by</span>(Continent, Income) <span class="sc">%&gt;%</span></span>
<span id="cb1499-3"><a href="visualization4.html#cb1499-3"></a>  <span class="fu">summarise</span>(<span class="at">N       =</span> <span class="fu">n</span>(),</span>
<span id="cb1499-4"><a href="visualization4.html#cb1499-4"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb1499-5"><a href="visualization4.html#cb1499-5"></a></span>
<span id="cb1499-6"><a href="visualization4.html#cb1499-6"></a>Heatmap_df1</span></code></pre></div>
<pre><code>## # A tibble: 18 × 3
##    Continent  Income                         N
##    &lt;fct&gt;      &lt;fct&gt;                      &lt;int&gt;
##  1 アフリカ   &quot;1万ドル未満&quot;                 41
##  2 アフリカ   &quot;1万ドル以上\n2万ドル未満&quot;     9
##  3 アフリカ   &quot;2万ドル以上\n3万ドル未満&quot;     2
##  4 アメリカ   &quot;1万ドル未満&quot;                 10
##  5 アメリカ   &quot;1万ドル以上\n2万ドル未満&quot;    14
##  6 アメリカ   &quot;2万ドル以上\n3万ドル未満&quot;     6
##  7 アメリカ   &quot;3万ドル以上&quot;                  5
##  8 アジア     &quot;1万ドル未満&quot;                 17
##  9 アジア     &quot;1万ドル以上\n2万ドル未満&quot;    10
## 10 アジア     &quot;2万ドル以上\n3万ドル未満&quot;     3
## 11 アジア     &quot;3万ドル以上&quot;                 11
## 12 ヨーロッパ &quot;1万ドル未満&quot;                  1
## 13 ヨーロッパ &quot;1万ドル以上\n2万ドル未満&quot;    10
## 14 ヨーロッパ &quot;2万ドル以上\n3万ドル未満&quot;     7
## 15 ヨーロッパ &quot;3万ドル以上&quot;                 28
## 16 オセアニア &quot;1万ドル未満&quot;                  1
## 17 オセアニア &quot;1万ドル以上\n2万ドル未満&quot;     1
## 18 オセアニア &quot;3万ドル以上&quot;                  2</code></pre>
<p>　これでデータの準備は終わりました。ヒートマップを作成する幾何オブジェクトは<code>geom_tile()</code>です。同時分布を示したい変数を、それぞれ<code>x</code>と<code>y</code>にマッピングし、密度、または度数を表す変数を<code>fill</code>にマッピングします。ここでは横軸を大陸（<code>Continent</code>）、縦軸を一人当たり購買力平価GDP（<code>Income</code>）とし、<code>fill</code>には<code>N</code>変数をマッピングします。</p>
<div class="sourceCode" id="cb1501"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1501-1"><a href="visualization4.html#cb1501-1"></a>Heatmap_df1 <span class="sc">%&gt;%</span></span>
<span id="cb1501-2"><a href="visualization4.html#cb1501-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1501-3"><a href="visualization4.html#cb1501-3"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Income, <span class="at">fill =</span> N)) <span class="sc">+</span></span>
<span id="cb1501-4"><a href="visualization4.html#cb1501-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人当たり購買力平価GDP（ドル）&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;国家数&quot;</span>) <span class="sc">+</span></span>
<span id="cb1501-5"><a href="visualization4.html#cb1501-5"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1501-6"><a href="visualization4.html#cb1501-6"></a>           <span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1501-7"><a href="visualization4.html#cb1501-7"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>()) <span class="co"># グリッドラインを消す</span></span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-heatmap3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　明るいほどカテゴリーに属するケースが多く、暗いほど少ないことを意味します。これを見ると世界で最も多くの割合を占めているのは、一人当たり購買力平価GDPが1万ドル未満のアフリカの国で、次は一人当たり購買力平価GDPが3万ドル以上のヨーロッパの国であることが分かります。欠損している（ケース数が0）セルは白の空白となります。</p>
<p>　色をカスタマイズするには<code>scale_fill_gradient()</code>です。これは第<a href="visualization3.html#visualization3">19</a>章で紹介しました<code>scale_color_gradient()</code>と使い方は同じです。<code>scale_fill_gradient()</code>は中間点なし、<code>scale_fill_gradient2()</code>は中間点ありの場合に使いますが、ここでは度数が小さい場合は<span style="color:#FFF8DC;font-weight:bold;">cornsilk</span>色を、大きい場合は<span style="color:#cd3333;font-weight:bold;">brown3</span>色を使います。それぞれ<code>low</code>と<code>high</code>に色を指定するだけです。</p>
<div class="sourceCode" id="cb1502"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1502-1"><a href="visualization4.html#cb1502-1"></a>Heatmap_df1 <span class="sc">%&gt;%</span></span>
<span id="cb1502-2"><a href="visualization4.html#cb1502-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1502-3"><a href="visualization4.html#cb1502-3"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Income, <span class="at">fill =</span> N)) <span class="sc">+</span></span>
<span id="cb1502-4"><a href="visualization4.html#cb1502-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人当たり購買力平価GDP（ドル）&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;国家数&quot;</span>) <span class="sc">+</span></span>
<span id="cb1502-5"><a href="visualization4.html#cb1502-5"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low  =</span> <span class="st">&quot;cornsilk&quot;</span>, </span>
<span id="cb1502-6"><a href="visualization4.html#cb1502-6"></a>                      <span class="at">high =</span> <span class="st">&quot;brown3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1502-7"><a href="visualization4.html#cb1502-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1502-8"><a href="visualization4.html#cb1502-8"></a>           <span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1502-9"><a href="visualization4.html#cb1502-9"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>()) <span class="co"># グリッドラインを消す</span></span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-heatmap4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　気のせいかも知れませんが、先ほどよりは読みやすくなったような気がしますね。</p>
</div>
<div id="離散変数times離散変数における連続変数の値を示すヒートマップ" class="section level3" number="20.8.2">
<h3><span class="header-section-number">20.8.2</span> 離散変数<span class="math inline">\(\times\)</span>離散変数における連続変数の値を示すヒートマップ</h3>
<p>　次は、離散変数<span class="math inline">\(\times\)</span>離散変数における連続変数の値を示すヒートマップを作ってみましょう。ヒートマップにおけるそれぞれのタイル（tile）は横軸上の位置と縦軸上の位置情報を持ち、これは前回と同様、離散変数でマッピングされます。そして、タイルの色は何らかの連続変数にマッピングされます。前回作成しましたヒートマップは度数、または密度であり、これも実は連続変数だったので、図の作り方は本質的には同じです。</p>
<p>　ここでは大陸と所得ごとに人間開発指数の平均値を表すヒートマップを作ってみましょう。大陸（<code>Continent</code>）と所得（<code>Income</code>）でグループ化し、人間開発指数（<code>HDI_2018</code>）の平均値を計算したものを<code>Heatmap_df2</code>という名のオブジェクトとして格納します。</p>
<div class="sourceCode" id="cb1503"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1503-1"><a href="visualization4.html#cb1503-1"></a>Heatmap_df2 <span class="ot">&lt;-</span> Heatmap_df <span class="sc">%&gt;%</span></span>
<span id="cb1503-2"><a href="visualization4.html#cb1503-2"></a>  <span class="fu">group_by</span>(Continent, Income) <span class="sc">%&gt;%</span></span>
<span id="cb1503-3"><a href="visualization4.html#cb1503-3"></a>  <span class="fu">summarise</span>(<span class="at">HDI     =</span> <span class="fu">mean</span>(HDI_2018, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1503-4"><a href="visualization4.html#cb1503-4"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb1503-5"><a href="visualization4.html#cb1503-5"></a></span>
<span id="cb1503-6"><a href="visualization4.html#cb1503-6"></a>Heatmap_df2</span></code></pre></div>
<pre><code>## # A tibble: 18 × 3
##    Continent  Income                       HDI
##    &lt;fct&gt;      &lt;fct&gt;                      &lt;dbl&gt;
##  1 アフリカ   &quot;1万ドル未満&quot;              0.510
##  2 アフリカ   &quot;1万ドル以上\n2万ドル未満&quot; 0.697
##  3 アフリカ   &quot;2万ドル以上\n3万ドル未満&quot; 0.798
##  4 アメリカ   &quot;1万ドル未満&quot;              0.638
##  5 アメリカ   &quot;1万ドル以上\n2万ドル未満&quot; 0.752
##  6 アメリカ   &quot;2万ドル以上\n3万ドル未満&quot; 0.806
##  7 アメリカ   &quot;3万ドル以上&quot;              0.841
##  8 アジア     &quot;1万ドル未満&quot;              0.624
##  9 アジア     &quot;1万ドル以上\n2万ドル未満&quot; 0.730
## 10 アジア     &quot;2万ドル以上\n3万ドル未満&quot; 0.818
## 11 アジア     &quot;3万ドル以上&quot;              0.872
## 12 ヨーロッパ &quot;1万ドル未満&quot;              0.711
## 13 ヨーロッパ &quot;1万ドル以上\n2万ドル未満&quot; 0.776
## 14 ヨーロッパ &quot;2万ドル以上\n3万ドル未満&quot; 0.827
## 15 ヨーロッパ &quot;3万ドル以上&quot;              0.902
## 16 オセアニア &quot;1万ドル未満&quot;              0.543
## 17 オセアニア &quot;1万ドル以上\n2万ドル未満&quot; 0.724
## 18 オセアニア &quot;3万ドル以上&quot;              0.930</code></pre>
<p>　作図の方法は前回と同じですが、今回はタイルの色塗り（<code>fill</code>）を人間開発指数の平均値（<code>HDI</code>）でマッピングする必要があります。他の箇所は同じコードでも良いですが、ここでは色塗りの際、中間点を指定してみましょう。たとえば人間開発指数が0.75なら色を<span style="color:#fff8dc;font-weight:bold;background-color:#000000;">cornsilk</span>色とし、これより低いっほど<span style="color:#6495ED;font-weight:bold;">cornflowerblue</span>色に、高いほど<span style="color:#cd3333;font-weight:bold;">brown3</span>色になるように指定します。中間点を持つグラデーション色塗りは<code>scale_fill_gradient2()</code>で調整することができます。使い方は<code>scale_fill_gradient()</code>とほぼ同じですが、中間点の色（<code>mid</code>）と中間点の値（<code>midpoint</code>）をさらに指定する必要があります。</p>
<div class="sourceCode" id="cb1505"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1505-1"><a href="visualization4.html#cb1505-1"></a>Heatmap_df2 <span class="sc">%&gt;%</span></span>
<span id="cb1505-2"><a href="visualization4.html#cb1505-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1505-3"><a href="visualization4.html#cb1505-3"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> Continent, <span class="at">y =</span> Income, <span class="at">fill =</span> HDI)) <span class="sc">+</span></span>
<span id="cb1505-4"><a href="visualization4.html#cb1505-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;大陸&quot;</span>, <span class="at">y =</span> <span class="st">&quot;一人当たり購買力平価GDP（ドル）&quot;</span>, </span>
<span id="cb1505-5"><a href="visualization4.html#cb1505-5"></a>       <span class="at">fill =</span> <span class="st">&quot;人間開発指数の平均値 (2018)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1505-6"><a href="visualization4.html#cb1505-6"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low  =</span> <span class="st">&quot;cornflowerblue&quot;</span>, </span>
<span id="cb1505-7"><a href="visualization4.html#cb1505-7"></a>                       <span class="at">mid  =</span> <span class="st">&quot;cornsilk&quot;</span>,</span>
<span id="cb1505-8"><a href="visualization4.html#cb1505-8"></a>                       <span class="at">high =</span> <span class="st">&quot;brown3&quot;</span>,</span>
<span id="cb1505-9"><a href="visualization4.html#cb1505-9"></a>                       <span class="at">midpoint =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb1505-10"><a href="visualization4.html#cb1505-10"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1505-11"><a href="visualization4.html#cb1505-11"></a>           <span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1505-12"><a href="visualization4.html#cb1505-12"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb1505-13"><a href="visualization4.html#cb1505-13"></a>        <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-heatmap6-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="visual4-contour" class="section level2" number="20.9">
<h2><span class="header-section-number">20.9</span> 等高線図</h2>
<p>連続変数<span class="math inline">\(\times\)</span>連続変数の同時分布</p>
<div class="sourceCode" id="cb1506"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1506-1"><a href="visualization4.html#cb1506-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1506-2"><a href="visualization4.html#cb1506-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> HDI_2018)) <span class="sc">+</span></span>
<span id="cb1506-3"><a href="visualization4.html#cb1506-3"></a>  <span class="fu">geom_density_2d</span>() <span class="sc">+</span></span>
<span id="cb1506-4"><a href="visualization4.html#cb1506-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;フリーダム・ハウス・スコア&quot;</span>, <span class="at">y =</span> <span class="st">&quot;人間開発指数 (2018)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1506-5"><a href="visualization4.html#cb1506-5"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1506-6"><a href="visualization4.html#cb1506-6"></a>                <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-contour1-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb1507"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1507-1"><a href="visualization4.html#cb1507-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1507-2"><a href="visualization4.html#cb1507-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> HDI_2018)) <span class="sc">+</span></span>
<span id="cb1507-3"><a href="visualization4.html#cb1507-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1507-4"><a href="visualization4.html#cb1507-4"></a>  <span class="fu">geom_density_2d</span>() <span class="sc">+</span></span>
<span id="cb1507-5"><a href="visualization4.html#cb1507-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;フリーダム・ハウス・スコア&quot;</span>, <span class="at">y =</span> <span class="st">&quot;人間開発指数 (2018)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1507-6"><a href="visualization4.html#cb1507-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1507-7"><a href="visualization4.html#cb1507-7"></a>                <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-contour2-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb1508"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1508-1"><a href="visualization4.html#cb1508-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1508-2"><a href="visualization4.html#cb1508-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> HDI_2018)) <span class="sc">+</span></span>
<span id="cb1508-3"><a href="visualization4.html#cb1508-3"></a>  <span class="fu">geom_density_2d_filled</span>() <span class="sc">+</span></span>
<span id="cb1508-4"><a href="visualization4.html#cb1508-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;フリーダム・ハウス・スコア&quot;</span>, <span class="at">y =</span> <span class="st">&quot;人間開発指数 (2018)&quot;</span>,</span>
<span id="cb1508-5"><a href="visualization4.html#cb1508-5"></a>       <span class="at">fill =</span> <span class="st">&quot;密度&quot;</span>) <span class="sc">+</span></span>
<span id="cb1508-6"><a href="visualization4.html#cb1508-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1508-7"><a href="visualization4.html#cb1508-7"></a>                <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-contour3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　<code>geom_density_2d_filled()</code>オブジェクトの後に<code>geom_density_2d()</code>オブジェクトを重ねると、区間の区画線を追加することもできます。</p>
<div class="sourceCode" id="cb1509"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1509-1"><a href="visualization4.html#cb1509-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1509-2"><a href="visualization4.html#cb1509-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> HDI_2018)) <span class="sc">+</span></span>
<span id="cb1509-3"><a href="visualization4.html#cb1509-3"></a>  <span class="fu">geom_density_2d_filled</span>() <span class="sc">+</span></span>
<span id="cb1509-4"><a href="visualization4.html#cb1509-4"></a>  <span class="fu">geom_density_2d</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb1509-5"><a href="visualization4.html#cb1509-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;フリーダム・ハウス・スコア&quot;</span>, <span class="at">y =</span> <span class="st">&quot;人間開発指数 (2018)&quot;</span>,</span>
<span id="cb1509-6"><a href="visualization4.html#cb1509-6"></a>       <span class="at">fill =</span> <span class="st">&quot;密度&quot;</span>) <span class="sc">+</span></span>
<span id="cb1509-7"><a href="visualization4.html#cb1509-7"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1509-8"><a href="visualization4.html#cb1509-8"></a>                <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-contour4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　色が気に入らない場合、自分で調整することも可能です。<code>scale_fill_manual()</code>で各区間ごとの色を指定することもできませんが、あまり効率的ではありません。ここでは<code>scale_fill_brewer()</code>関数を使って、<a href="https://colorbrewer2.org/">ColorBrewer</a>のパレットを使ってみましょう。引数なしでも使えますが、既定値のパレットは区間が9つまで対応します。今回の等高線図は全部で10区間ですので、あまり適切ではありません。ここでは11区間まで対応可能な<code>"Spectral"</code>パレットを使いますが、これは<code>palette</code>引数で指定できます。</p>
<div class="sourceCode" id="cb1510"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1510-1"><a href="visualization4.html#cb1510-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1510-2"><a href="visualization4.html#cb1510-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FH_Total, <span class="at">y =</span> HDI_2018)) <span class="sc">+</span></span>
<span id="cb1510-3"><a href="visualization4.html#cb1510-3"></a>  <span class="fu">geom_density_2d_filled</span>() <span class="sc">+</span></span>
<span id="cb1510-4"><a href="visualization4.html#cb1510-4"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb1510-5"><a href="visualization4.html#cb1510-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;フリーダム・ハウス・スコア&quot;</span>, <span class="at">y =</span> <span class="st">&quot;人間開発指数 (2018)&quot;</span>,</span>
<span id="cb1510-6"><a href="visualization4.html#cb1510-6"></a>       <span class="at">fill =</span> <span class="st">&quot;密度&quot;</span>) <span class="sc">+</span></span>
<span id="cb1510-7"><a href="visualization4.html#cb1510-7"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>,</span>
<span id="cb1510-8"><a href="visualization4.html#cb1510-8"></a>                <span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-contour5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　<code>palette</code>で指定可能なカラーパレットの一覧は{RColorBrewer}の<code>display.brewer.all()</code>関数で確認することが出来ます。各パレットが何区間まで対応できるかを見てから自分でパレットを作成することも可能ですが、詳細はネット上の各種記事を参照してください。</p>
<div class="sourceCode" id="cb1511"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1511-1"><a href="visualization4.html#cb1511-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:visual4-contour6"></span>
<img src="R_Not_for_Everyone_files/figure-html/visual4-contour6-1.png" alt="{RColorBrewer}が提供するパレート一覧" width="672" />
<p class="caption">
図 20.1: {RColorBrewer}が提供するパレート一覧
</p>
</div>
<hr />
</div>
<div id="visual4-map" class="section level2" number="20.10">
<h2><span class="header-section-number">20.10</span> 地図</h2>
<div id="世界地図" class="section level3" number="20.10.1">
<h3><span class="header-section-number">20.10.1</span> 世界地図</h3>
<div class="sourceCode" id="cb1512"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1512-1"><a href="visualization4.html#cb1512-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rnaturalearth, rnaturalearthdata, rgeos)</span></code></pre></div>
<div class="sourceCode" id="cb1513"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1513-1"><a href="visualization4.html#cb1513-1"></a>world_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">&quot;small&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb1513-2"><a href="visualization4.html#cb1513-2"></a></span>
<span id="cb1513-3"><a href="visualization4.html#cb1513-3"></a><span class="fu">class</span>(world_map)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb1515"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1515-1"><a href="visualization4.html#cb1515-1"></a>world_map <span class="sc">%&gt;%</span> </span>
<span id="cb1515-2"><a href="visualization4.html#cb1515-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1515-3"><a href="visualization4.html#cb1515-3"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> pop_est)) <span class="sc">+</span></span>
<span id="cb1515-4"><a href="visualization4.html#cb1515-4"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;cornflowerblue&quot;</span>, <span class="at">high =</span> <span class="st">&quot;brown3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1515-5"><a href="visualization4.html#cb1515-5"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;人口&quot;</span>) <span class="sc">+</span></span>
<span id="cb1515-6"><a href="visualization4.html#cb1515-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1515-7"><a href="visualization4.html#cb1515-7"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/unnamed-chunk-757-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb1516"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1516-1"><a href="visualization4.html#cb1516-1"></a>world_map <span class="sc">%&gt;%</span> </span>
<span id="cb1516-2"><a href="visualization4.html#cb1516-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1516-3"><a href="visualization4.html#cb1516-3"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> pop_est)) <span class="sc">+</span></span>
<span id="cb1516-4"><a href="visualization4.html#cb1516-4"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;cornflowerblue&quot;</span>, <span class="at">high =</span> <span class="st">&quot;brown3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1516-5"><a href="visualization4.html#cb1516-5"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;人口&quot;</span>) <span class="sc">+</span></span>
<span id="cb1516-6"><a href="visualization4.html#cb1516-6"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">150</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>)) <span class="sc">+</span></span>
<span id="cb1516-7"><a href="visualization4.html#cb1516-7"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1516-8"><a href="visualization4.html#cb1516-8"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/unnamed-chunk-758-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb1517"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1517-1"><a href="visualization4.html#cb1517-1"></a>world_map2 <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">&quot;medium&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb1517-2"><a href="visualization4.html#cb1517-2"></a></span>
<span id="cb1517-3"><a href="visualization4.html#cb1517-3"></a>world_map2 <span class="sc">%&gt;%</span> </span>
<span id="cb1517-4"><a href="visualization4.html#cb1517-4"></a>  <span class="fu">mutate</span>(<span class="at">Population =</span> <span class="fu">case_when</span>(pop_est <span class="sc">&lt;</span> <span class="dv">10000000</span>  <span class="sc">~</span> <span class="st">&quot;1千万未満&quot;</span>,</span>
<span id="cb1517-5"><a href="visualization4.html#cb1517-5"></a>                                pop_est <span class="sc">&lt;</span> <span class="dv">50000000</span>  <span class="sc">~</span> <span class="st">&quot;5千万未満&quot;</span>,</span>
<span id="cb1517-6"><a href="visualization4.html#cb1517-6"></a>                                pop_est <span class="sc">&lt;</span> <span class="dv">100000000</span> <span class="sc">~</span> <span class="st">&quot;1億未満&quot;</span>,</span>
<span id="cb1517-7"><a href="visualization4.html#cb1517-7"></a>                                pop_est <span class="sc">&lt;</span> <span class="dv">500000000</span> <span class="sc">~</span> <span class="st">&quot;5億未満&quot;</span>,</span>
<span id="cb1517-8"><a href="visualization4.html#cb1517-8"></a>                                <span class="cn">TRUE</span>                <span class="sc">~</span> <span class="st">&quot;5億以上&quot;</span>),</span>
<span id="cb1517-9"><a href="visualization4.html#cb1517-9"></a>         <span class="at">Population =</span> <span class="fu">factor</span>(Population, </span>
<span id="cb1517-10"><a href="visualization4.html#cb1517-10"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;1千万未満&quot;</span>, <span class="st">&quot;5千万未満&quot;</span>, <span class="st">&quot;1億未満&quot;</span>,</span>
<span id="cb1517-11"><a href="visualization4.html#cb1517-11"></a>                                        <span class="st">&quot;5億未満&quot;</span>, <span class="st">&quot;5億以上&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1517-12"><a href="visualization4.html#cb1517-12"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1517-13"><a href="visualization4.html#cb1517-13"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Population)) <span class="sc">+</span></span>
<span id="cb1517-14"><a href="visualization4.html#cb1517-14"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Blues&quot;</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1517-15"><a href="visualization4.html#cb1517-15"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;人口&quot;</span>) <span class="sc">+</span></span>
<span id="cb1517-16"><a href="visualization4.html#cb1517-16"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">150</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>)) <span class="sc">+</span></span>
<span id="cb1517-17"><a href="visualization4.html#cb1517-17"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb1517-18"><a href="visualization4.html#cb1517-18"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/unnamed-chunk-759-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><code>scale_fill_brewer()</code>の<code>palette</code>引数は{RColorBrewer}パッケージが提供するパレート名を指定します。パレート一覧は<code>RColorBrewer::display.brewer.all()</code>で確認可能であり、その例は本章の等高線図のパートにも掲載されています。自分で作成したパレートを使いたい場合は<code>scale_fill_manual()</code>を使用します。</p>
</div>
<div id="日本地図全体" class="section level3" number="20.10.2">
<h3><span class="header-section-number">20.10.2</span> 日本地図（全体）</h3>
</div>
<div id="日本地図特定の都道府県" class="section level3" number="20.10.3">
<h3><span class="header-section-number">20.10.3</span> 日本地図（特定の都道府県）</h3>
<div class="sourceCode" id="cb1518"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1518-1"><a href="visualization4.html#cb1518-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;uribo/jpndistrict&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1519"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1519-1"><a href="visualization4.html#cb1519-1"></a><span class="fu">library</span>(jpndistrict)</span></code></pre></div>
<pre><code>## This package provide map data is based on the Digital Map 25000 (Map
## Image) published by Geospatial Information Authority of Japan (Approval
## No.603FY2017 information usage &lt;https://www.gsi.go.jp&gt;)</code></pre>
<div class="sourceCode" id="cb1521"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1521-1"><a href="visualization4.html#cb1521-1"></a><span class="co"># 大阪府のコードは27</span></span>
<span id="cb1521-2"><a href="visualization4.html#cb1521-2"></a>Osaka_map <span class="ot">&lt;-</span> <span class="fu">jpn_pref</span>(<span class="at">pref_code =</span> <span class="dv">27</span>)</span>
<span id="cb1521-3"><a href="visualization4.html#cb1521-3"></a></span>
<span id="cb1521-4"><a href="visualization4.html#cb1521-4"></a><span class="fu">class</span>(Osaka_map)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb1523"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1523-1"><a href="visualization4.html#cb1523-1"></a><span class="fu">head</span>(Osaka_map)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 4 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 135.3435 ymin: 34.61718 xmax: 135.5409 ymax: 34.73348
## Geodetic CRS:  WGS 84
## # A tibble: 6 × 5
##   pref_code prefecture city_code city                                   geometry
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;                        &lt;MULTIPOLYGON [°]&gt;
## 1 27        大阪府     27102     大阪市 都島区 (((135.519 34.7188, 135.5214 34.…
## 2 27        大阪府     27103     大阪市 福島区 (((135.468 34.68569, 135.472 34.…
## 3 27        大阪府     27104     大阪市 此花区 (((135.3587 34.62756, 135.3533 3…
## 4 27        大阪府     27106     大阪市 西区   (((135.4743 34.66666, 135.4865 3…
## 5 27        大阪府     27107     大阪市 港区   (((135.4332 34.64913, 135.4376 3…
## 6 27        大阪府     27108     大阪市 大正区 (((135.447 34.64124, 135.4482 34…</code></pre>
<div class="sourceCode" id="cb1525"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1525-1"><a href="visualization4.html#cb1525-1"></a>Osaka_map <span class="sc">%&gt;%</span></span>
<span id="cb1525-2"><a href="visualization4.html#cb1525-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1525-3"><a href="visualization4.html#cb1525-3"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb1525-4"><a href="visualization4.html#cb1525-4"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/unnamed-chunk-763-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="visual4-dag" class="section level2" number="20.11">
<h2><span class="header-section-number">20.11</span> 非巡回有向グラフ</h2>
<p>近年、因果推論の界隈でよく登場する非巡回有向グラフ（DAG）ですが、「グラフ」からも分かるように、DAGの考え方に基づく因果推論の研究には多くの図が登場します。DAGを作図するには{ggplot2}のみでも可能ですが、{dagitty}パッケージでDAGの情報を含むオブジェクトを生成し、{ggdag}で作図した方が簡単です。以下の図はDAGの一例です。</p>
<pre><code>## 
## The downloaded binary packages are in
##  /var/folders/0_/nqp94zq944z95snvmg88g38c0000gn/T//RtmphUxbGx/downloaded_packages</code></pre>
<pre><code>## 
## dagitty installed</code></pre>
<pre><code>## also installing the dependencies &#39;graphlayouts&#39;, &#39;ggraph&#39;, &#39;tidygraph&#39;</code></pre>
<pre><code>## 
## The downloaded binary packages are in
##  /var/folders/0_/nqp94zq944z95snvmg88g38c0000gn/T//RtmphUxbGx/downloaded_packages</code></pre>
<pre><code>## 
## ggdag installed</code></pre>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-dag1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>ここでX、Y、Zはノード（node）と呼ばれ、それぞれのノードをつなぐ線のことをエッジ（edge）と呼びます。また、これらのエッジには方向があります（有向）。簡単に言うと原因と結果といった関係ですが、DAGを描く際は、各ノード間の関係を記述する必要があります。</p>
<p>それではまず、以上の図を作ってみましょう。最初のステップとして{dagitty}と{ggdag}をインストールし、読み込みましょう。</p>
<div class="sourceCode" id="cb1531"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1531-1"><a href="visualization4.html#cb1531-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dagitty, ggdag)</span></code></pre></div>
<p>つづいて、DAGの情報を含むオブジェクトを作成します。使用する関数は<code>dagify()</code>であり、ここには<code>結果 ~ 原因</code>の形で各ノード間の関係を記述します。先ほどの図では<code>X</code>は<code>Y</code>の原因（<code>X ~ Y</code>）、<code>Z</code>は<code>X</code>と<code>Y</code>の原因（<code>X ~ Z</code>と<code>Y ~ Z</code>）です。これらの情報を<code>dagify()</code>内で指定します。</p>
<div class="sourceCode" id="cb1532"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1532-1"><a href="visualization4.html#cb1532-1"></a>DAG_data1 <span class="ot">&lt;-</span> <span class="fu">dagify</span>(X <span class="sc">~</span> Z,</span>
<span id="cb1532-2"><a href="visualization4.html#cb1532-2"></a>                    Y <span class="sc">~</span> Z,</span>
<span id="cb1532-3"><a href="visualization4.html#cb1532-3"></a>                    Y <span class="sc">~</span> X,</span>
<span id="cb1532-4"><a href="visualization4.html#cb1532-4"></a>                    <span class="at">exposure =</span> <span class="st">&quot;X&quot;</span>,</span>
<span id="cb1532-5"><a href="visualization4.html#cb1532-5"></a>                    <span class="at">outcome  =</span> <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb1532-6"><a href="visualization4.html#cb1532-6"></a></span>
<span id="cb1532-7"><a href="visualization4.html#cb1532-7"></a>DAG_data1</span></code></pre></div>
<pre><code>## dag {
## X [exposure]
## Y [outcome]
## Z
## X -&gt; Y
## Z -&gt; X
## Z -&gt; Y
## }</code></pre>
<p><code>Y ~ X</code>と<code>Y ~ Z</code>は<code>Y ~ X + Z</code>とまとめることも可能です。これは「<code>Y</code>の原因は<code>X</code>と<code>Z</code>である」という意味であり、「<code>Y</code>の原因は<code>X</code>であり、<code>Y</code>の原因は<code>Z</code>である」と同じ意味です。また、DAGを作図する際、<code>dagify()</code>内に<code>exposure</code>と<code>outcome</code>は不要ですが、もし<code>adjustmentSets()</code>関数などを使って統制変数を特定したい場合は処置変数（<code>exposure</code>）と応答変数（<code>outcome</code>）にそれぞれ変数名を指定します。ちなみに、以上のコードは以下のように書くことも可能です。</p>
<div class="sourceCode" id="cb1534"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1534-1"><a href="visualization4.html#cb1534-1"></a>DAG_data1 <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(</span>
<span id="cb1534-2"><a href="visualization4.html#cb1534-2"></a>  <span class="st">&quot;dag{</span></span>
<span id="cb1534-3"><a href="visualization4.html#cb1534-3"></a><span class="st">  X -&gt; Y</span></span>
<span id="cb1534-4"><a href="visualization4.html#cb1534-4"></a><span class="st">  X &lt;- Z -&gt; Y</span></span>
<span id="cb1534-5"><a href="visualization4.html#cb1534-5"></a><span class="st">  X [exposure]</span></span>
<span id="cb1534-6"><a href="visualization4.html#cb1534-6"></a><span class="st">  Y [outcome]</span></span>
<span id="cb1534-7"><a href="visualization4.html#cb1534-7"></a><span class="st">  }&quot;</span>)</span>
<span id="cb1534-8"><a href="visualization4.html#cb1534-8"></a></span>
<span id="cb1534-9"><a href="visualization4.html#cb1534-9"></a>DAG_data1</span></code></pre></div>
<pre><code>## dag {
## X [exposure]
## Y [outcome]
## Z
## X -&gt; Y
## Z -&gt; X
## Z -&gt; Y
## }</code></pre>
<p>格納された<code>DAG_data1</code>オブジェクトのクラスは<code>"dagitty"</code>です。<code>"dagitty"</code>の可視化には{ggdag}の<code>ggdag()</code>を使用します。</p>
<div class="sourceCode" id="cb1536"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1536-1"><a href="visualization4.html#cb1536-1"></a>DAG_data1 <span class="sc">%&gt;%</span></span>
<span id="cb1536-2"><a href="visualization4.html#cb1536-2"></a>  <span class="fu">ggdag</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-dag5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>DAGにおいて背景、軸の目盛り、ラベルは不要ですので、<code>theme_dag_blank()</code>テーマを指定して全て除去します。</p>
<div class="sourceCode" id="cb1537"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1537-1"><a href="visualization4.html#cb1537-1"></a>DAG_data1 <span class="sc">%&gt;%</span></span>
<span id="cb1537-2"><a href="visualization4.html#cb1537-2"></a>  <span class="fu">ggdag</span>() <span class="sc">+</span></span>
<span id="cb1537-3"><a href="visualization4.html#cb1537-3"></a>  <span class="fu">theme_dag_blank</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-dag6-1.png" width="672" style="display: block; margin: auto;" /></p>
<div id="ノードの位置を指定する" class="section level3" number="20.11.1">
<h3><span class="header-section-number">20.11.1</span> ノードの位置を指定する</h3>
<p>読者の多くは以上のグラフと異なるものが得られたかも知れません。ノード間の関係は同じはずですが、ノードの位置が異なるでしょう。また、同じコードを実行する度にノードの位置は変わります。以下ではノードの位置を固定する方法について紹介します。位置を指定するには<code>dagify()</code>内で<code>coords</code>引数に各ノードの情報が格納されたリスト型オブジェクトを指定する必要があります。リストの長さは2であり、それぞれの名前は<code>x</code>と<code>y</code>です。そしてリストの各要素にはベクトルが入ります。たとえば、ノード<code>X</code>の位置を (1, 1)、<code>Y</code>の位置を (3, 1)、<code>Z</code>の位置を (2, 2)に指定してみましょう。<code>dagify()</code>内で直接リストを書くことも可能ですが、コードの可読性が落ちるため、別途のオブジェクト（<code>DAG_Pos2</code>）として格納しておきます。</p>
<div class="sourceCode" id="cb1538"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1538-1"><a href="visualization4.html#cb1538-1"></a>DAG_Pos2  <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="at">X =</span> <span class="dv">1</span>, <span class="at">Y =</span> <span class="dv">3</span>, <span class="at">Z =</span> <span class="dv">2</span>),</span>
<span id="cb1538-2"><a href="visualization4.html#cb1538-2"></a>                  <span class="at">y =</span> <span class="fu">c</span>(<span class="at">X =</span> <span class="dv">1</span>, <span class="at">Y =</span> <span class="dv">1</span>, <span class="at">Z =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>続いて、<code>dagify()</code>内で<code>coords</code>引数を追加し、ノードの位置情報が格納されている<code>DAG_Pos2</code>を指定します。</p>
<div class="sourceCode" id="cb1539"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1539-1"><a href="visualization4.html#cb1539-1"></a>DAG_data2 <span class="ot">&lt;-</span> <span class="fu">dagify</span>(X <span class="sc">~</span> Z,</span>
<span id="cb1539-2"><a href="visualization4.html#cb1539-2"></a>                    Y <span class="sc">~</span> X <span class="sc">+</span> Z,</span>
<span id="cb1539-3"><a href="visualization4.html#cb1539-3"></a>                    <span class="at">exposure =</span> <span class="st">&quot;X&quot;</span>,</span>
<span id="cb1539-4"><a href="visualization4.html#cb1539-4"></a>                    <span class="at">outcome  =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb1539-5"><a href="visualization4.html#cb1539-5"></a>                    <span class="at">coords   =</span> DAG_Pos2)</span>
<span id="cb1539-6"><a href="visualization4.html#cb1539-6"></a></span>
<span id="cb1539-7"><a href="visualization4.html#cb1539-7"></a>DAG_data2</span></code></pre></div>
<pre><code>## dag {
## X [exposure,pos=&quot;1.000,1.000&quot;]
## Y [outcome,pos=&quot;3.000,1.000&quot;]
## Z [pos=&quot;2.000,2.000&quot;]
## X -&gt; Y
## Z -&gt; X
## Z -&gt; Y
## }</code></pre>
<p>可視化の方法は同じです。</p>
<div class="sourceCode" id="cb1541"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1541-1"><a href="visualization4.html#cb1541-1"></a>DAG_data2 <span class="sc">%&gt;%</span></span>
<span id="cb1541-2"><a href="visualization4.html#cb1541-2"></a>  <span class="fu">ggdag</span>() <span class="sc">+</span></span>
<span id="cb1541-3"><a href="visualization4.html#cb1541-3"></a>  <span class="fu">theme_dag_blank</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-dag9-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>以上の使い方だけでも、ほとんどのDAGは描けるでしょう。また、ノードを若干オシャレ（?）にするには、<code>ggdag()</code>内で<code>stylized = TRUE</code>を指定します。</p>
<div class="sourceCode" id="cb1542"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1542-1"><a href="visualization4.html#cb1542-1"></a>DAG_Pos3  <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="at">X1 =</span> <span class="dv">3</span>, <span class="at">X2 =</span> <span class="dv">3</span>, <span class="at">X3 =</span> <span class="dv">1</span>, <span class="at">T =</span> <span class="dv">2</span>, <span class="at">Y =</span> <span class="dv">4</span>),</span>
<span id="cb1542-2"><a href="visualization4.html#cb1542-2"></a>                  <span class="at">y =</span> <span class="fu">c</span>(<span class="at">X1 =</span> <span class="dv">1</span>, <span class="at">X2 =</span> <span class="dv">2</span>, <span class="at">X3 =</span> <span class="dv">2</span>, <span class="at">T =</span> <span class="dv">3</span>, <span class="at">Y =</span> <span class="dv">3</span>))</span>
<span id="cb1542-3"><a href="visualization4.html#cb1542-3"></a></span>
<span id="cb1542-4"><a href="visualization4.html#cb1542-4"></a>DAG_data3 <span class="ot">&lt;-</span> <span class="fu">dagify</span>(Y  <span class="sc">~</span> T <span class="sc">+</span> X1 <span class="sc">+</span> X2,</span>
<span id="cb1542-5"><a href="visualization4.html#cb1542-5"></a>                    T  <span class="sc">~</span> X3,</span>
<span id="cb1542-6"><a href="visualization4.html#cb1542-6"></a>                    X2 <span class="sc">~</span> T <span class="sc">+</span>X1 <span class="sc">+</span> X3,</span>
<span id="cb1542-7"><a href="visualization4.html#cb1542-7"></a>                    <span class="at">exposure =</span> <span class="st">&quot;T&quot;</span>,</span>
<span id="cb1542-8"><a href="visualization4.html#cb1542-8"></a>                    <span class="at">outcome  =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb1542-9"><a href="visualization4.html#cb1542-9"></a>                    <span class="at">coords   =</span> DAG_Pos3)</span>
<span id="cb1542-10"><a href="visualization4.html#cb1542-10"></a></span>
<span id="cb1542-11"><a href="visualization4.html#cb1542-11"></a>DAG_data3 <span class="sc">%&gt;%</span></span>
<span id="cb1542-12"><a href="visualization4.html#cb1542-12"></a>  <span class="fu">ggdag</span>(<span class="at">stylized =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1542-13"><a href="visualization4.html#cb1542-13"></a>  <span class="fu">theme_dag_blank</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-dag10-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>可視化の話ではありませんが、<code>adjustmentSets()</code>関数を用いると、処置変数<code>T</code>の総効果（total effect）を推定するためにはどの変数を統制（調整）する必要があるかを調べることも可能です。</p>
<div class="sourceCode" id="cb1543"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1543-1"><a href="visualization4.html#cb1543-1"></a><span class="fu">adjustmentSets</span>(DAG_data3, <span class="at">effect =</span> <span class="st">&quot;total&quot;</span>)</span></code></pre></div>
<pre><code>## { X3 }</code></pre>
<p><code>X3</code>変数のみ統制すれば良いという結果が得られました。また、<code>T</code>から<code>Y</code>への直接効果（direct effect）の場合、<code>effect = "direct"</code>を指定します。</p>
<div class="sourceCode" id="cb1545"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1545-1"><a href="visualization4.html#cb1545-1"></a><span class="fu">adjustmentSets</span>(DAG_data3, <span class="at">effect =</span> <span class="st">&quot;direct&quot;</span>)</span></code></pre></div>
<pre><code>## { X1, X2 }</code></pre>
<p><code>X1</code>と<code>X2</code>を統制する必要があることが分かりますね。</p>
<hr />
</div>
</div>
<div id="visual4-bump" class="section level2" number="20.12">
<h2><span class="header-section-number">20.12</span> バンプチャート</h2>
<p>　バンプチャート (bump chart)は順位の変化などを示す時に有効なグラフです。たとえば、G7構成国の新型コロナ感染者数の順位の変化を示すにはどうすれば良いでしょうか。そもそもどのような形式のデータが必要でしょうか。まずは必要なデータ形式を紹介したいと思います。</p>
<p>　まず、{ggplot2}によるバンプチャートの作成を支援する{ggbump}パッケージをインストールし、読み込みましょう<a href="#fn90" class="footnote-ref" id="fnref90"><sup>90</sup></a>。</p>
<div class="sourceCode" id="cb1547"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1547-1"><a href="visualization4.html#cb1547-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(ggbump)</span></code></pre></div>
<p>　ここではG7構成国の100万人当り新型コロナ感染者数の順位がどのように変化したのかを2020年4月から7月まで1ヶ月単位で表したデータが必要です。データは以下のようなコードで作成しますが、<a href="https://github.com/JaehyunSong/RBook">本書のサポートページ</a>からもダウンロード可能です。</p>
<div class="sourceCode" id="cb1548"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1548-1"><a href="visualization4.html#cb1548-1"></a>Bump_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(COVID19_df, Country_df, <span class="at">by =</span> <span class="st">&quot;Country&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1548-2"><a href="visualization4.html#cb1548-2"></a>  <span class="fu">select</span>(Country, Date, Population, Confirmed_Total, G7) <span class="sc">%&gt;%</span></span>
<span id="cb1548-3"><a href="visualization4.html#cb1548-3"></a>  <span class="fu">separate</span>(Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1548-4"><a href="visualization4.html#cb1548-4"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">as.numeric</span>(Month)) <span class="sc">%&gt;%</span></span>
<span id="cb1548-5"><a href="visualization4.html#cb1548-5"></a>  <span class="fu">filter</span>(Month <span class="sc">&gt;=</span> <span class="dv">4</span>, G7 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1548-6"><a href="visualization4.html#cb1548-6"></a>  <span class="fu">group_by</span>(Country, Month) <span class="sc">%&gt;%</span></span>
<span id="cb1548-7"><a href="visualization4.html#cb1548-7"></a>  <span class="fu">summarise</span>(<span class="at">Population            =</span> <span class="fu">mean</span>(Population),</span>
<span id="cb1548-8"><a href="visualization4.html#cb1548-8"></a>            <span class="at">New_Cases             =</span> <span class="fu">sum</span>(Confirmed_Total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1548-9"><a href="visualization4.html#cb1548-9"></a>            <span class="at">New_Cases_per_million =</span> New_Cases <span class="sc">/</span> Population <span class="sc">*</span> <span class="dv">1000000</span>,</span>
<span id="cb1548-10"><a href="visualization4.html#cb1548-10"></a>            <span class="at">.groups               =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1548-11"><a href="visualization4.html#cb1548-11"></a>  <span class="fu">select</span>(Country, Month, New_Cases_per_million)</span></code></pre></div>
<div class="sourceCode" id="cb1549"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1549-1"><a href="visualization4.html#cb1549-1"></a>Bump_df <span class="ot">&lt;-</span> Bump_df <span class="sc">%&gt;%</span></span>
<span id="cb1549-2"><a href="visualization4.html#cb1549-2"></a>  <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span></span>
<span id="cb1549-3"><a href="visualization4.html#cb1549-3"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">rank</span>(New_Cases_per_million, <span class="at">ties.method =</span> <span class="st">&quot;random&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1549-4"><a href="visualization4.html#cb1549-4"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1549-5"><a href="visualization4.html#cb1549-5"></a>  <span class="fu">select</span>(Country, Month, Rank, New_Cases_per_million)</span></code></pre></div>
<p>　必要なデータは以下のような形式です。ちなみにバンプチャートを作成するためには最後の<code>New_Cases_per_million</code>列 (100万人当り新型コロナ感染者数)は不要です。つまり、国名、月、順位のみで十分です。</p>
<div class="sourceCode" id="cb1550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1550-1"><a href="visualization4.html#cb1550-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 以上のコードを省略し、加工済みのデータを読み込んでもOK</span></span>
<span id="cb1550-2"><a href="visualization4.html#cb1550-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Bump_df &lt;- read_csv(&quot;Data/Bumpchart.csv&quot;)</span></span>
<span id="cb1550-3"><a href="visualization4.html#cb1550-3" aria-hidden="true" tabindex="-1"></a>Bump_df</span></code></pre></div>
<div id="htmlwidget-f4558d96bb929246c87a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f4558d96bb929246c87a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"],["Canada","Canada","Canada","Canada","France","France","France","France","Germany","Germany","Germany","Germany","Italy","Italy","Italy","Italy","Japan","Japan","Japan","Japan","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States"],[4,5,6,7,4,5,6,7,4,5,6,7,4,5,6,7,4,5,6,7,4,5,6,7,4,5,6,7],[2,2,3,3,5,4,4,4,3,3,2,2,7,6,5,5,1,1,1,1,4,5,6,6,6,7,7,7],[24637.9154724449,62787.0894703042,79922.1210320958,28516.76139099,54618.9011745094,81421.0565109242,85834.8084016522,30116.9264854476,47060.6288732512,64783.4760508165,67683.1605750897,23598.8299524031,81514.6403285935,114367.419204309,117681.394538101,39973.3378876119,2257.49517137422,4100.01984479942,4324.67034320323,1622.05677149679,48576.4676505625,102407.379263796,119872.185871719,41919.1582848447,58486.8693972508,135824.160741713,194232.174864135,87484.5641143518]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>Month<\/th>\n      <th>Rank<\/th>\n      <th>New_Cases_per_million<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>　それでは{ggbump}が提供する<code>geom_bump()</code>幾何オブジェクトを使用し、簡単なバンプチャートを作成してみましょう。必要なマッピング要素は<code>x</code>と<code>y</code>、<code>color</code>です。<code>x</code>には時間を表す変数である<code>Month</code>を、<code>y</code>には順位を表す<code>Rank</code>をマッピングします。また、7本の線が出るため、月と順位、それぞれの値がどの国の値かを特定する必要があります。<code>groups</code>に国名である<code>Country</code>をマッピングしても線は引けますが、どの線がどの国かが分からなくなるため、<code>color</code>に<code>Country</code>をマッピングし、線の色分けをします。</p>
<div class="sourceCode" id="cb1551"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1551-1"><a href="visualization4.html#cb1551-1"></a>Bump_df <span class="sc">%&gt;%</span></span>
<span id="cb1551-2"><a href="visualization4.html#cb1551-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Rank, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb1551-3"><a href="visualization4.html#cb1551-3"></a>  <span class="fu">geom_bump</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-bump5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これで最低限のバンプチャートはできましたが、もう少し見やすく、可愛くしてみましょう。今は線が細いのでややぶ厚めにします。これは<code>geom_bump()</code>レイヤーの<code>size</code>引数で指定可能です。また、各月に点を付けることによって、同時期における順位の比較をよりしやすくしてみましょう。これは散布図と同じであるため、<code>geom_point()</code>幾何オブジェクトを使用します。</p>
<div class="sourceCode" id="cb1552"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1552-1"><a href="visualization4.html#cb1552-1"></a>Bump_df <span class="sc">%&gt;%</span></span>
<span id="cb1552-2"><a href="visualization4.html#cb1552-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Rank, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb1552-3"><a href="visualization4.html#cb1552-3"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb1552-4"><a href="visualization4.html#cb1552-4"></a>  <span class="fu">geom_bump</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1552-5"><a href="visualization4.html#cb1552-5"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-bump6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>7月時点における<code>Rank</code>の値に応じて<code>Country</code>をfactor化する。</p>
<div class="sourceCode" id="cb1553"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1553-1"><a href="visualization4.html#cb1553-1"></a>Bump_df <span class="sc">%&gt;%</span></span>
<span id="cb1553-2"><a href="visualization4.html#cb1553-2"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_reorder2</span>(Country, Month, Rank, last2)) <span class="sc">%&gt;%</span></span>
<span id="cb1553-3"><a href="visualization4.html#cb1553-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Rank, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb1553-4"><a href="visualization4.html#cb1553-4"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb1553-5"><a href="visualization4.html#cb1553-5"></a>  <span class="fu">geom_bump</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1553-6"><a href="visualization4.html#cb1553-6"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-bump7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>凡例を無くし、線の両側に国名を入れる。グリッドも不要なので除去</p>
<div class="sourceCode" id="cb1554"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1554-1"><a href="visualization4.html#cb1554-1"></a>Bump_df <span class="sc">%&gt;%</span></span>
<span id="cb1554-2"><a href="visualization4.html#cb1554-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Rank, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb1554-3"><a href="visualization4.html#cb1554-3"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb1554-4"><a href="visualization4.html#cb1554-4"></a>  <span class="fu">geom_bump</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1554-5"><a href="visualization4.html#cb1554-5"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">filter</span>(Bump_df, Month <span class="sc">==</span> <span class="fu">min</span>(Month)),</span>
<span id="cb1554-6"><a href="visualization4.html#cb1554-6"></a>            <span class="fu">aes</span>(<span class="at">x =</span> Month <span class="sc">-</span> <span class="fl">0.15</span>, <span class="at">label =</span> Country), <span class="at">hjust =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1554-7"><a href="visualization4.html#cb1554-7"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">filter</span>(Bump_df, Month <span class="sc">==</span> <span class="fu">max</span>(Month)),</span>
<span id="cb1554-8"><a href="visualization4.html#cb1554-8"></a>            <span class="fu">aes</span>(<span class="at">x =</span> Month <span class="sc">+</span> <span class="fl">0.15</span>, <span class="at">label =</span> Country), <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb1554-9"><a href="visualization4.html#cb1554-9"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb1554-10"><a href="visualization4.html#cb1554-10"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">labels =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb1554-11"><a href="visualization4.html#cb1554-11"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">labels =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1554-12"><a href="visualization4.html#cb1554-12"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Rank&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Month&quot;</span>) <span class="sc">+</span></span>
<span id="cb1554-13"><a href="visualization4.html#cb1554-13"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb1554-14"><a href="visualization4.html#cb1554-14"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb1554-15"><a href="visualization4.html#cb1554-15"></a>        <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-bump8-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-alluvial" class="section level2" number="20.13">
<h2><span class="header-section-number">20.13</span> 沖積図</h2>
<p>　沖積図 (alluvial plot)は同じ対象を複数回観察したデータ（パネル・データなど）から変化を示すことに適したグラフです。たとえば、同じ回答者を対象に2回世論調査を実施し、1回目調査時の支持政党と2回目調査時の支持政党を変化を見ることも可能です。もし、変化が大きい場合は政党支持態度は弱いこととなりますし、変化が小さい場合は安定していると解釈できるでしょう。</p>
<p>　ここでは2009年の衆院選と2010年の参院選における投票先の変化を沖積図で確認してみたいと思います。まずは、沖積図の作成に特化した{ggalluvial}パッケージをインストールし、読み込みます。</p>
<div class="sourceCode" id="cb1555"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1555-1"><a href="visualization4.html#cb1555-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(ggalluvial)</span></code></pre></div>
<p>　続きまして、実習用データを読み込みます。データは <span class="citation"><a href="#ref-Nakazawa:2014" role="doc-biblioref">中澤</a> (<a href="#ref-Nakazawa:2014" role="doc-biblioref">2014</a>)</span> の表3を元に筆者 (宋)が作成したものです。</p>
<div class="sourceCode" id="cb1556"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1556-1"><a href="visualization4.html#cb1556-1"></a>Vote_0910 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/Vote_09_10.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1557-1"><a href="visualization4.html#cb1557-1" aria-hidden="true" tabindex="-1"></a>Vote_0910</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Vote09"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Vote10"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"棄権","3":"棄権"},{"1":"2","2":"民主","3":"民主"},{"1":"3","2":"民主","3":"民主"},{"1":"4","2":"自民","3":"民主"},{"1":"5","2":"自民","3":"共産・社民"},{"1":"6","2":"民主","3":"共産・社民"},{"1":"7","2":"その他","3":"その他"},{"1":"8","2":"自民","3":"自民"},{"1":"9","2":"民主","3":"民主"},{"1":"10","2":"共産・社民","3":"共産・社民"},{"1":"11","2":"棄権","3":"自民"},{"1":"12","2":"自民","3":"民主"},{"1":"13","2":"棄権","3":"棄権"},{"1":"14","2":"自民","3":"自民"},{"1":"15","2":"共産・社民","3":"共産・社民"},{"1":"16","2":"DK","3":"共産・社民"},{"1":"17","2":"自民","3":"DK"},{"1":"18","2":"民主","3":"民主"},{"1":"19","2":"民主","3":"民主"},{"1":"20","2":"民主","3":"民主"},{"1":"21","2":"自民","3":"民主"},{"1":"22","2":"DK","3":"民主"},{"1":"23","2":"棄権","3":"自民"},{"1":"24","2":"DK","3":"民主"},{"1":"25","2":"公明","3":"公明"},{"1":"26","2":"DK","3":"公明"},{"1":"27","2":"公明","3":"公明"},{"1":"28","2":"自民","3":"自民"},{"1":"29","2":"自民","3":"自民"},{"1":"30","2":"DK","3":"DK"},{"1":"31","2":"棄権","3":"棄権"},{"1":"32","2":"民主","3":"民主"},{"1":"33","2":"棄権","3":"棄権"},{"1":"34","2":"棄権","3":"棄権"},{"1":"35","2":"棄権","3":"棄権"},{"1":"36","2":"民主","3":"民主"},{"1":"37","2":"その他","3":"民主"},{"1":"38","2":"その他","3":"DK"},{"1":"39","2":"棄権","3":"棄権"},{"1":"40","2":"棄権","3":"棄権"},{"1":"41","2":"民主","3":"民主"},{"1":"42","2":"民主","3":"民主"},{"1":"43","2":"その他","3":"民主"},{"1":"44","2":"DK","3":"自民"},{"1":"45","2":"自民","3":"自民"},{"1":"46","2":"棄権","3":"DK"},{"1":"47","2":"民主","3":"民主"},{"1":"48","2":"民主","3":"民主"},{"1":"49","2":"棄権","3":"棄権"},{"1":"50","2":"棄権","3":"棄権"},{"1":"51","2":"DK","3":"DK"},{"1":"52","2":"公明","3":"公明"},{"1":"53","2":"民主","3":"民主"},{"1":"54","2":"自民","3":"自民"},{"1":"55","2":"自民","3":"自民"},{"1":"56","2":"その他","3":"その他"},{"1":"57","2":"自民","3":"自民"},{"1":"58","2":"DK","3":"民主"},{"1":"59","2":"自民","3":"棄権"},{"1":"60","2":"その他","3":"その他"},{"1":"61","2":"民主","3":"民主"},{"1":"62","2":"自民","3":"自民"},{"1":"63","2":"その他","3":"民主"},{"1":"64","2":"自民","3":"自民"},{"1":"65","2":"民主","3":"民主"},{"1":"66","2":"DK","3":"DK"},{"1":"67","2":"民主","3":"民主"},{"1":"68","2":"棄権","3":"棄権"},{"1":"69","2":"棄権","3":"棄権"},{"1":"70","2":"共産・社民","3":"共産・社民"},{"1":"71","2":"民主","3":"民主"},{"1":"72","2":"民主","3":"民主"},{"1":"73","2":"民主","3":"民主"},{"1":"74","2":"公明","3":"民主"},{"1":"75","2":"民主","3":"民主"},{"1":"76","2":"DK","3":"DK"},{"1":"77","2":"DK","3":"棄権"},{"1":"78","2":"民主","3":"民主"},{"1":"79","2":"棄権","3":"棄権"},{"1":"80","2":"共産・社民","3":"自民"},{"1":"81","2":"その他","3":"民主"},{"1":"82","2":"民主","3":"棄権"},{"1":"83","2":"自民","3":"棄権"},{"1":"84","2":"民主","3":"民主"},{"1":"85","2":"民主","3":"自民"},{"1":"86","2":"棄権","3":"棄権"},{"1":"87","2":"その他","3":"民主"},{"1":"88","2":"民主","3":"民主"},{"1":"89","2":"公明","3":"公明"},{"1":"90","2":"公明","3":"公明"},{"1":"91","2":"自民","3":"自民"},{"1":"92","2":"自民","3":"自民"},{"1":"93","2":"棄権","3":"共産・社民"},{"1":"94","2":"棄権","3":"棄権"},{"1":"95","2":"民主","3":"民主"},{"1":"96","2":"DK","3":"棄権"},{"1":"97","2":"棄権","3":"自民"},{"1":"98","2":"DK","3":"民主"},{"1":"99","2":"棄権","3":"棄権"},{"1":"100","2":"自民","3":"民主"},{"1":"101","2":"その他","3":"民主"},{"1":"102","2":"民主","3":"民主"},{"1":"103","2":"民主","3":"その他"},{"1":"104","2":"民主","3":"民主"},{"1":"105","2":"棄権","3":"民主"},{"1":"106","2":"自民","3":"民主"},{"1":"107","2":"民主","3":"民主"},{"1":"108","2":"その他","3":"DK"},{"1":"109","2":"民主","3":"民主"},{"1":"110","2":"自民","3":"自民"},{"1":"111","2":"その他","3":"自民"},{"1":"112","2":"DK","3":"民主"},{"1":"113","2":"民主","3":"民主"},{"1":"114","2":"民主","3":"民主"},{"1":"115","2":"棄権","3":"民主"},{"1":"116","2":"民主","3":"民主"},{"1":"117","2":"公明","3":"自民"},{"1":"118","2":"民主","3":"民主"},{"1":"119","2":"自民","3":"民主"},{"1":"120","2":"民主","3":"民主"},{"1":"121","2":"民主","3":"その他"},{"1":"122","2":"その他","3":"その他"},{"1":"123","2":"自民","3":"自民"},{"1":"124","2":"DK","3":"自民"},{"1":"125","2":"自民","3":"自民"},{"1":"126","2":"共産・社民","3":"DK"},{"1":"127","2":"その他","3":"民主"},{"1":"128","2":"自民","3":"自民"},{"1":"129","2":"自民","3":"自民"},{"1":"130","2":"民主","3":"民主"},{"1":"131","2":"公明","3":"公明"},{"1":"132","2":"棄権","3":"棄権"},{"1":"133","2":"民主","3":"民主"},{"1":"134","2":"公明","3":"公明"},{"1":"135","2":"共産・社民","3":"共産・社民"},{"1":"136","2":"棄権","3":"棄権"},{"1":"137","2":"棄権","3":"棄権"},{"1":"138","2":"自民","3":"民主"},{"1":"139","2":"棄権","3":"棄権"},{"1":"140","2":"棄権","3":"棄権"},{"1":"141","2":"共産・社民","3":"共産・社民"},{"1":"142","2":"民主","3":"民主"},{"1":"143","2":"民主","3":"民主"},{"1":"144","2":"その他","3":"民主"},{"1":"145","2":"公明","3":"公明"},{"1":"146","2":"自民","3":"自民"},{"1":"147","2":"棄権","3":"民主"},{"1":"148","2":"棄権","3":"棄権"},{"1":"149","2":"民主","3":"民主"},{"1":"150","2":"その他","3":"民主"},{"1":"151","2":"民主","3":"民主"},{"1":"152","2":"共産・社民","3":"棄権"},{"1":"153","2":"自民","3":"自民"},{"1":"154","2":"自民","3":"自民"},{"1":"155","2":"棄権","3":"民主"},{"1":"156","2":"棄権","3":"棄権"},{"1":"157","2":"その他","3":"その他"},{"1":"158","2":"民主","3":"民主"},{"1":"159","2":"民主","3":"民主"},{"1":"160","2":"その他","3":"その他"},{"1":"161","2":"民主","3":"DK"},{"1":"162","2":"自民","3":"自民"},{"1":"163","2":"民主","3":"民主"},{"1":"164","2":"民主","3":"民主"},{"1":"165","2":"自民","3":"棄権"},{"1":"166","2":"民主","3":"棄権"},{"1":"167","2":"自民","3":"自民"},{"1":"168","2":"棄権","3":"棄権"},{"1":"169","2":"民主","3":"自民"},{"1":"170","2":"自民","3":"民主"},{"1":"171","2":"民主","3":"民主"},{"1":"172","2":"公明","3":"公明"},{"1":"173","2":"民主","3":"民主"},{"1":"174","2":"民主","3":"民主"},{"1":"175","2":"棄権","3":"民主"},{"1":"176","2":"民主","3":"棄権"},{"1":"177","2":"自民","3":"自民"},{"1":"178","2":"その他","3":"民主"},{"1":"179","2":"民主","3":"共産・社民"},{"1":"180","2":"棄権","3":"棄権"},{"1":"181","2":"DK","3":"民主"},{"1":"182","2":"自民","3":"自民"},{"1":"183","2":"民主","3":"民主"},{"1":"184","2":"民主","3":"民主"},{"1":"185","2":"自民","3":"自民"},{"1":"186","2":"棄権","3":"自民"},{"1":"187","2":"棄権","3":"民主"},{"1":"188","2":"民主","3":"民主"},{"1":"189","2":"自民","3":"自民"},{"1":"190","2":"自民","3":"自民"},{"1":"191","2":"棄権","3":"棄権"},{"1":"192","2":"自民","3":"自民"},{"1":"193","2":"民主","3":"民主"},{"1":"194","2":"棄権","3":"棄権"},{"1":"195","2":"自民","3":"民主"},{"1":"196","2":"民主","3":"民主"},{"1":"197","2":"自民","3":"民主"},{"1":"198","2":"民主","3":"民主"},{"1":"199","2":"民主","3":"民主"},{"1":"200","2":"自民","3":"民主"},{"1":"201","2":"DK","3":"公明"},{"1":"202","2":"民主","3":"自民"},{"1":"203","2":"自民","3":"民主"},{"1":"204","2":"公明","3":"棄権"},{"1":"205","2":"民主","3":"民主"},{"1":"206","2":"自民","3":"自民"},{"1":"207","2":"その他","3":"その他"},{"1":"208","2":"自民","3":"自民"},{"1":"209","2":"自民","3":"民主"},{"1":"210","2":"DK","3":"自民"},{"1":"211","2":"棄権","3":"棄権"},{"1":"212","2":"共産・社民","3":"共産・社民"},{"1":"213","2":"公明","3":"公明"},{"1":"214","2":"DK","3":"棄権"},{"1":"215","2":"民主","3":"民主"},{"1":"216","2":"その他","3":"自民"},{"1":"217","2":"民主","3":"民主"},{"1":"218","2":"DK","3":"民主"},{"1":"219","2":"棄権","3":"民主"},{"1":"220","2":"自民","3":"自民"},{"1":"221","2":"民主","3":"民主"},{"1":"222","2":"その他","3":"民主"},{"1":"223","2":"棄権","3":"棄権"},{"1":"224","2":"自民","3":"自民"},{"1":"225","2":"棄権","3":"棄権"},{"1":"226","2":"自民","3":"民主"},{"1":"227","2":"その他","3":"自民"},{"1":"228","2":"棄権","3":"棄権"},{"1":"229","2":"自民","3":"棄権"},{"1":"230","2":"民主","3":"民主"},{"1":"231","2":"民主","3":"民主"},{"1":"232","2":"自民","3":"民主"},{"1":"233","2":"DK","3":"DK"},{"1":"234","2":"棄権","3":"棄権"},{"1":"235","2":"民主","3":"民主"},{"1":"236","2":"DK","3":"民主"},{"1":"237","2":"民主","3":"民主"},{"1":"238","2":"自民","3":"自民"},{"1":"239","2":"自民","3":"自民"},{"1":"240","2":"自民","3":"民主"},{"1":"241","2":"棄権","3":"棄権"},{"1":"242","2":"民主","3":"民主"},{"1":"243","2":"棄権","3":"自民"},{"1":"244","2":"その他","3":"民主"},{"1":"245","2":"民主","3":"自民"},{"1":"246","2":"民主","3":"民主"},{"1":"247","2":"その他","3":"棄権"},{"1":"248","2":"民主","3":"公明"},{"1":"249","2":"民主","3":"民主"},{"1":"250","2":"公明","3":"公明"},{"1":"251","2":"DK","3":"棄権"},{"1":"252","2":"棄権","3":"自民"},{"1":"253","2":"民主","3":"民主"},{"1":"254","2":"自民","3":"自民"},{"1":"255","2":"棄権","3":"民主"},{"1":"256","2":"棄権","3":"棄権"},{"1":"257","2":"自民","3":"自民"},{"1":"258","2":"自民","3":"自民"},{"1":"259","2":"自民","3":"自民"},{"1":"260","2":"自民","3":"自民"},{"1":"261","2":"棄権","3":"棄権"},{"1":"262","2":"民主","3":"DK"},{"1":"263","2":"棄権","3":"民主"},{"1":"264","2":"民主","3":"民主"},{"1":"265","2":"民主","3":"民主"},{"1":"266","2":"棄権","3":"自民"},{"1":"267","2":"公明","3":"公明"},{"1":"268","2":"自民","3":"棄権"},{"1":"269","2":"DK","3":"DK"},{"1":"270","2":"自民","3":"棄権"},{"1":"271","2":"棄権","3":"棄権"},{"1":"272","2":"民主","3":"民主"},{"1":"273","2":"DK","3":"民主"},{"1":"274","2":"共産・社民","3":"共産・社民"},{"1":"275","2":"共産・社民","3":"棄権"},{"1":"276","2":"棄権","3":"棄権"},{"1":"277","2":"民主","3":"民主"},{"1":"278","2":"自民","3":"自民"},{"1":"279","2":"棄権","3":"民主"},{"1":"280","2":"共産・社民","3":"共産・社民"},{"1":"281","2":"公明","3":"公明"},{"1":"282","2":"棄権","3":"その他"},{"1":"283","2":"民主","3":"民主"},{"1":"284","2":"DK","3":"DK"},{"1":"285","2":"自民","3":"自民"},{"1":"286","2":"民主","3":"民主"},{"1":"287","2":"その他","3":"民主"},{"1":"288","2":"民主","3":"民主"},{"1":"289","2":"DK","3":"民主"},{"1":"290","2":"民主","3":"自民"},{"1":"291","2":"民主","3":"民主"},{"1":"292","2":"民主","3":"民主"},{"1":"293","2":"棄権","3":"棄権"},{"1":"294","2":"民主","3":"民主"},{"1":"295","2":"棄権","3":"DK"},{"1":"296","2":"民主","3":"棄権"},{"1":"297","2":"自民","3":"自民"},{"1":"298","2":"棄権","3":"棄権"},{"1":"299","2":"その他","3":"棄権"},{"1":"300","2":"自民","3":"自民"},{"1":"301","2":"自民","3":"自民"},{"1":"302","2":"民主","3":"民主"},{"1":"303","2":"民主","3":"民主"},{"1":"304","2":"民主","3":"民主"},{"1":"305","2":"DK","3":"民主"},{"1":"306","2":"自民","3":"自民"},{"1":"307","2":"自民","3":"自民"},{"1":"308","2":"自民","3":"自民"},{"1":"309","2":"その他","3":"その他"},{"1":"310","2":"民主","3":"民主"},{"1":"311","2":"DK","3":"民主"},{"1":"312","2":"共産・社民","3":"共産・社民"},{"1":"313","2":"民主","3":"民主"},{"1":"314","2":"民主","3":"民主"},{"1":"315","2":"民主","3":"民主"},{"1":"316","2":"自民","3":"自民"},{"1":"317","2":"棄権","3":"棄権"},{"1":"318","2":"棄権","3":"民主"},{"1":"319","2":"自民","3":"自民"},{"1":"320","2":"民主","3":"民主"},{"1":"321","2":"その他","3":"その他"},{"1":"322","2":"DK","3":"棄権"},{"1":"323","2":"民主","3":"民主"},{"1":"324","2":"棄権","3":"棄権"},{"1":"325","2":"民主","3":"民主"},{"1":"326","2":"民主","3":"民主"},{"1":"327","2":"自民","3":"自民"},{"1":"328","2":"民主","3":"民主"},{"1":"329","2":"その他","3":"その他"},{"1":"330","2":"棄権","3":"民主"},{"1":"331","2":"民主","3":"民主"},{"1":"332","2":"自民","3":"自民"},{"1":"333","2":"DK","3":"民主"},{"1":"334","2":"民主","3":"民主"},{"1":"335","2":"DK","3":"棄権"},{"1":"336","2":"棄権","3":"棄権"},{"1":"337","2":"棄権","3":"棄権"},{"1":"338","2":"その他","3":"その他"},{"1":"339","2":"民主","3":"民主"},{"1":"340","2":"その他","3":"自民"},{"1":"341","2":"自民","3":"棄権"},{"1":"342","2":"棄権","3":"民主"},{"1":"343","2":"自民","3":"DK"},{"1":"344","2":"DK","3":"自民"},{"1":"345","2":"その他","3":"その他"},{"1":"346","2":"民主","3":"民主"},{"1":"347","2":"共産・社民","3":"共産・社民"},{"1":"348","2":"民主","3":"民主"},{"1":"349","2":"自民","3":"自民"},{"1":"350","2":"その他","3":"自民"},{"1":"351","2":"民主","3":"民主"},{"1":"352","2":"民主","3":"民主"},{"1":"353","2":"民主","3":"棄権"},{"1":"354","2":"自民","3":"自民"},{"1":"355","2":"自民","3":"自民"},{"1":"356","2":"民主","3":"自民"},{"1":"357","2":"棄権","3":"民主"},{"1":"358","2":"棄権","3":"棄権"},{"1":"359","2":"民主","3":"民主"},{"1":"360","2":"DK","3":"自民"},{"1":"361","2":"棄権","3":"棄権"},{"1":"362","2":"共産・社民","3":"共産・社民"},{"1":"363","2":"公明","3":"棄権"},{"1":"364","2":"棄権","3":"棄権"},{"1":"365","2":"民主","3":"DK"},{"1":"366","2":"民主","3":"民主"},{"1":"367","2":"公明","3":"棄権"},{"1":"368","2":"民主","3":"民主"},{"1":"369","2":"その他","3":"その他"},{"1":"370","2":"民主","3":"民主"},{"1":"371","2":"民主","3":"民主"},{"1":"372","2":"民主","3":"民主"},{"1":"373","2":"その他","3":"民主"},{"1":"374","2":"民主","3":"民主"},{"1":"375","2":"棄権","3":"棄権"},{"1":"376","2":"DK","3":"民主"},{"1":"377","2":"DK","3":"民主"},{"1":"378","2":"民主","3":"民主"},{"1":"379","2":"民主","3":"民主"},{"1":"380","2":"民主","3":"民主"},{"1":"381","2":"棄権","3":"民主"},{"1":"382","2":"棄権","3":"自民"},{"1":"383","2":"共産・社民","3":"民主"},{"1":"384","2":"自民","3":"民主"},{"1":"385","2":"棄権","3":"DK"},{"1":"386","2":"その他","3":"共産・社民"},{"1":"387","2":"その他","3":"民主"},{"1":"388","2":"自民","3":"民主"},{"1":"389","2":"共産・社民","3":"DK"},{"1":"390","2":"棄権","3":"棄権"},{"1":"391","2":"棄権","3":"共産・社民"},{"1":"392","2":"民主","3":"民主"},{"1":"393","2":"自民","3":"DK"},{"1":"394","2":"DK","3":"共産・社民"},{"1":"395","2":"自民","3":"民主"},{"1":"396","2":"DK","3":"棄権"},{"1":"397","2":"民主","3":"民主"},{"1":"398","2":"民主","3":"民主"},{"1":"399","2":"DK","3":"民主"},{"1":"400","2":"棄権","3":"棄権"},{"1":"401","2":"民主","3":"民主"},{"1":"402","2":"その他","3":"民主"},{"1":"403","2":"民主","3":"民主"},{"1":"404","2":"自民","3":"民主"},{"1":"405","2":"その他","3":"民主"},{"1":"406","2":"民主","3":"民主"},{"1":"407","2":"棄権","3":"棄権"},{"1":"408","2":"棄権","3":"棄権"},{"1":"409","2":"DK","3":"DK"},{"1":"410","2":"自民","3":"自民"},{"1":"411","2":"共産・社民","3":"民主"},{"1":"412","2":"DK","3":"DK"},{"1":"413","2":"民主","3":"民主"},{"1":"414","2":"DK","3":"DK"},{"1":"415","2":"その他","3":"民主"},{"1":"416","2":"その他","3":"その他"},{"1":"417","2":"その他","3":"その他"},{"1":"418","2":"棄権","3":"棄権"},{"1":"419","2":"民主","3":"DK"},{"1":"420","2":"その他","3":"民主"},{"1":"421","2":"自民","3":"民主"},{"1":"422","2":"共産・社民","3":"民主"},{"1":"423","2":"共産・社民","3":"共産・社民"},{"1":"424","2":"民主","3":"民主"},{"1":"425","2":"DK","3":"DK"},{"1":"426","2":"民主","3":"DK"},{"1":"427","2":"民主","3":"民主"},{"1":"428","2":"その他","3":"民主"},{"1":"429","2":"棄権","3":"棄権"},{"1":"430","2":"民主","3":"民主"},{"1":"431","2":"棄権","3":"民主"},{"1":"432","2":"民主","3":"民主"},{"1":"433","2":"民主","3":"民主"},{"1":"434","2":"その他","3":"自民"},{"1":"435","2":"棄権","3":"棄権"},{"1":"436","2":"自民","3":"自民"},{"1":"437","2":"公明","3":"公明"},{"1":"438","2":"民主","3":"自民"},{"1":"439","2":"民主","3":"民主"},{"1":"440","2":"民主","3":"民主"},{"1":"441","2":"DK","3":"民主"},{"1":"442","2":"民主","3":"民主"},{"1":"443","2":"民主","3":"民主"},{"1":"444","2":"民主","3":"民主"},{"1":"445","2":"DK","3":"DK"},{"1":"446","2":"自民","3":"自民"},{"1":"447","2":"その他","3":"民主"},{"1":"448","2":"民主","3":"民主"},{"1":"449","2":"DK","3":"棄権"},{"1":"450","2":"その他","3":"民主"},{"1":"451","2":"民主","3":"民主"},{"1":"452","2":"その他","3":"その他"},{"1":"453","2":"民主","3":"民主"},{"1":"454","2":"民主","3":"自民"},{"1":"455","2":"民主","3":"民主"},{"1":"456","2":"民主","3":"民主"},{"1":"457","2":"公明","3":"公明"},{"1":"458","2":"民主","3":"民主"},{"1":"459","2":"その他","3":"棄権"},{"1":"460","2":"棄権","3":"棄権"},{"1":"461","2":"棄権","3":"棄権"},{"1":"462","2":"DK","3":"民主"},{"1":"463","2":"棄権","3":"棄権"},{"1":"464","2":"民主","3":"民主"},{"1":"465","2":"公明","3":"共産・社民"},{"1":"466","2":"民主","3":"民主"},{"1":"467","2":"棄権","3":"民主"},{"1":"468","2":"棄権","3":"棄権"},{"1":"469","2":"DK","3":"民主"},{"1":"470","2":"自民","3":"自民"},{"1":"471","2":"民主","3":"民主"},{"1":"472","2":"公明","3":"公明"},{"1":"473","2":"民主","3":"DK"},{"1":"474","2":"民主","3":"民主"},{"1":"475","2":"公明","3":"公明"},{"1":"476","2":"民主","3":"民主"},{"1":"477","2":"DK","3":"棄権"},{"1":"478","2":"DK","3":"DK"},{"1":"479","2":"民主","3":"民主"},{"1":"480","2":"自民","3":"自民"},{"1":"481","2":"民主","3":"民主"},{"1":"482","2":"自民","3":"民主"},{"1":"483","2":"棄権","3":"棄権"},{"1":"484","2":"民主","3":"民主"},{"1":"485","2":"棄権","3":"共産・社民"},{"1":"486","2":"民主","3":"民主"},{"1":"487","2":"棄権","3":"民主"},{"1":"488","2":"自民","3":"自民"},{"1":"489","2":"自民","3":"自民"},{"1":"490","2":"民主","3":"民主"},{"1":"491","2":"民主","3":"民主"},{"1":"492","2":"DK","3":"DK"},{"1":"493","2":"民主","3":"民主"},{"1":"494","2":"棄権","3":"民主"},{"1":"495","2":"共産・社民","3":"共産・社民"},{"1":"496","2":"棄権","3":"DK"},{"1":"497","2":"自民","3":"自民"},{"1":"498","2":"公明","3":"自民"},{"1":"499","2":"自民","3":"棄権"},{"1":"500","2":"棄権","3":"民主"},{"1":"501","2":"棄権","3":"棄権"},{"1":"502","2":"棄権","3":"民主"},{"1":"503","2":"棄権","3":"DK"},{"1":"504","2":"自民","3":"自民"},{"1":"505","2":"民主","3":"民主"},{"1":"506","2":"民主","3":"民主"},{"1":"507","2":"DK","3":"民主"},{"1":"508","2":"DK","3":"DK"},{"1":"509","2":"自民","3":"民主"},{"1":"510","2":"棄権","3":"DK"},{"1":"511","2":"DK","3":"民主"},{"1":"512","2":"民主","3":"民主"},{"1":"513","2":"DK","3":"共産・社民"},{"1":"514","2":"民主","3":"民主"},{"1":"515","2":"自民","3":"DK"},{"1":"516","2":"その他","3":"自民"},{"1":"517","2":"棄権","3":"棄権"},{"1":"518","2":"公明","3":"民主"},{"1":"519","2":"棄権","3":"自民"},{"1":"520","2":"棄権","3":"民主"},{"1":"521","2":"DK","3":"民主"},{"1":"522","2":"民主","3":"民主"},{"1":"523","2":"DK","3":"自民"},{"1":"524","2":"棄権","3":"棄権"},{"1":"525","2":"DK","3":"民主"},{"1":"526","2":"民主","3":"民主"},{"1":"527","2":"DK","3":"公明"},{"1":"528","2":"棄権","3":"民主"},{"1":"529","2":"自民","3":"その他"},{"1":"530","2":"共産・社民","3":"共産・社民"},{"1":"531","2":"民主","3":"民主"},{"1":"532","2":"民主","3":"民主"},{"1":"533","2":"民主","3":"民主"},{"1":"534","2":"民主","3":"民主"},{"1":"535","2":"自民","3":"自民"},{"1":"536","2":"棄権","3":"棄権"},{"1":"537","2":"その他","3":"その他"},{"1":"538","2":"民主","3":"民主"},{"1":"539","2":"棄権","3":"民主"},{"1":"540","2":"棄権","3":"民主"},{"1":"541","2":"棄権","3":"民主"},{"1":"542","2":"自民","3":"自民"},{"1":"543","2":"民主","3":"民主"},{"1":"544","2":"棄権","3":"棄権"},{"1":"545","2":"民主","3":"民主"},{"1":"546","2":"民主","3":"民主"},{"1":"547","2":"自民","3":"自民"},{"1":"548","2":"その他","3":"その他"},{"1":"549","2":"棄権","3":"棄権"},{"1":"550","2":"民主","3":"民主"},{"1":"551","2":"その他","3":"民主"},{"1":"552","2":"公明","3":"公明"},{"1":"553","2":"その他","3":"自民"},{"1":"554","2":"共産・社民","3":"共産・社民"},{"1":"555","2":"民主","3":"民主"},{"1":"556","2":"棄権","3":"棄権"},{"1":"557","2":"民主","3":"民主"},{"1":"558","2":"自民","3":"自民"},{"1":"559","2":"DK","3":"棄権"},{"1":"560","2":"棄権","3":"棄権"},{"1":"561","2":"DK","3":"DK"},{"1":"562","2":"その他","3":"その他"},{"1":"563","2":"民主","3":"民主"},{"1":"564","2":"共産・社民","3":"共産・社民"},{"1":"565","2":"自民","3":"自民"},{"1":"566","2":"民主","3":"民主"},{"1":"567","2":"DK","3":"民主"},{"1":"568","2":"公明","3":"公明"},{"1":"569","2":"その他","3":"民主"},{"1":"570","2":"民主","3":"自民"},{"1":"571","2":"棄権","3":"棄権"},{"1":"572","2":"民主","3":"民主"},{"1":"573","2":"民主","3":"民主"},{"1":"574","2":"自民","3":"自民"},{"1":"575","2":"棄権","3":"民主"},{"1":"576","2":"共産・社民","3":"共産・社民"},{"1":"577","2":"公明","3":"公明"},{"1":"578","2":"棄権","3":"民主"},{"1":"579","2":"民主","3":"民主"},{"1":"580","2":"自民","3":"民主"},{"1":"581","2":"DK","3":"DK"},{"1":"582","2":"民主","3":"民主"},{"1":"583","2":"DK","3":"棄権"},{"1":"584","2":"自民","3":"その他"},{"1":"585","2":"民主","3":"民主"},{"1":"586","2":"民主","3":"民主"},{"1":"587","2":"自民","3":"自民"},{"1":"588","2":"自民","3":"自民"},{"1":"589","2":"その他","3":"その他"},{"1":"590","2":"自民","3":"自民"},{"1":"591","2":"民主","3":"民主"},{"1":"592","2":"自民","3":"自民"},{"1":"593","2":"自民","3":"自民"},{"1":"594","2":"自民","3":"自民"},{"1":"595","2":"自民","3":"その他"},{"1":"596","2":"民主","3":"民主"},{"1":"597","2":"自民","3":"民主"},{"1":"598","2":"民主","3":"民主"},{"1":"599","2":"自民","3":"自民"},{"1":"600","2":"自民","3":"棄権"},{"1":"601","2":"民主","3":"民主"},{"1":"602","2":"その他","3":"民主"},{"1":"603","2":"DK","3":"自民"},{"1":"604","2":"自民","3":"自民"},{"1":"605","2":"自民","3":"自民"},{"1":"606","2":"民主","3":"民主"},{"1":"607","2":"自民","3":"自民"},{"1":"608","2":"その他","3":"共産・社民"},{"1":"609","2":"民主","3":"民主"},{"1":"610","2":"自民","3":"民主"},{"1":"611","2":"民主","3":"民主"},{"1":"612","2":"自民","3":"民主"},{"1":"613","2":"民主","3":"民主"},{"1":"614","2":"自民","3":"民主"},{"1":"615","2":"その他","3":"民主"},{"1":"616","2":"民主","3":"共産・社民"},{"1":"617","2":"民主","3":"棄権"},{"1":"618","2":"民主","3":"民主"},{"1":"619","2":"棄権","3":"民主"},{"1":"620","2":"自民","3":"民主"},{"1":"621","2":"DK","3":"その他"},{"1":"622","2":"民主","3":"民主"},{"1":"623","2":"自民","3":"自民"},{"1":"624","2":"自民","3":"民主"},{"1":"625","2":"民主","3":"民主"},{"1":"626","2":"自民","3":"民主"},{"1":"627","2":"その他","3":"民主"},{"1":"628","2":"自民","3":"自民"},{"1":"629","2":"DK","3":"DK"},{"1":"630","2":"その他","3":"DK"},{"1":"631","2":"その他","3":"民主"},{"1":"632","2":"DK","3":"共産・社民"},{"1":"633","2":"民主","3":"民主"},{"1":"634","2":"棄権","3":"DK"},{"1":"635","2":"自民","3":"棄権"},{"1":"636","2":"棄権","3":"棄権"},{"1":"637","2":"棄権","3":"棄権"},{"1":"638","2":"民主","3":"民主"},{"1":"639","2":"民主","3":"民主"},{"1":"640","2":"DK","3":"DK"},{"1":"641","2":"自民","3":"自民"},{"1":"642","2":"民主","3":"民主"},{"1":"643","2":"民主","3":"民主"},{"1":"644","2":"共産・社民","3":"共産・社民"},{"1":"645","2":"民主","3":"民主"},{"1":"646","2":"DK","3":"DK"},{"1":"647","2":"DK","3":"棄権"},{"1":"648","2":"民主","3":"民主"},{"1":"649","2":"民主","3":"民主"},{"1":"650","2":"その他","3":"共産・社民"},{"1":"651","2":"自民","3":"自民"},{"1":"652","2":"民主","3":"民主"},{"1":"653","2":"自民","3":"自民"},{"1":"654","2":"棄権","3":"棄権"},{"1":"655","2":"民主","3":"民主"},{"1":"656","2":"その他","3":"民主"},{"1":"657","2":"DK","3":"DK"},{"1":"658","2":"その他","3":"民主"},{"1":"659","2":"DK","3":"民主"},{"1":"660","2":"民主","3":"民主"},{"1":"661","2":"DK","3":"民主"},{"1":"662","2":"民主","3":"自民"},{"1":"663","2":"民主","3":"民主"},{"1":"664","2":"民主","3":"民主"},{"1":"665","2":"自民","3":"自民"},{"1":"666","2":"棄権","3":"民主"},{"1":"667","2":"棄権","3":"棄権"},{"1":"668","2":"DK","3":"棄権"},{"1":"669","2":"その他","3":"民主"},{"1":"670","2":"自民","3":"自民"},{"1":"671","2":"DK","3":"DK"},{"1":"672","2":"自民","3":"DK"},{"1":"673","2":"棄権","3":"棄権"},{"1":"674","2":"自民","3":"自民"},{"1":"675","2":"自民","3":"自民"},{"1":"676","2":"棄権","3":"棄権"},{"1":"677","2":"棄権","3":"棄権"},{"1":"678","2":"DK","3":"自民"},{"1":"679","2":"DK","3":"DK"},{"1":"680","2":"自民","3":"自民"},{"1":"681","2":"民主","3":"民主"},{"1":"682","2":"自民","3":"公明"},{"1":"683","2":"自民","3":"民主"},{"1":"684","2":"DK","3":"DK"},{"1":"685","2":"自民","3":"自民"},{"1":"686","2":"民主","3":"自民"},{"1":"687","2":"民主","3":"民主"},{"1":"688","2":"DK","3":"DK"},{"1":"689","2":"公明","3":"公明"},{"1":"690","2":"DK","3":"自民"},{"1":"691","2":"その他","3":"民主"},{"1":"692","2":"民主","3":"民主"},{"1":"693","2":"その他","3":"自民"},{"1":"694","2":"民主","3":"民主"},{"1":"695","2":"共産・社民","3":"民主"},{"1":"696","2":"民主","3":"棄権"},{"1":"697","2":"DK","3":"民主"},{"1":"698","2":"自民","3":"棄権"},{"1":"699","2":"民主","3":"民主"},{"1":"700","2":"その他","3":"民主"},{"1":"701","2":"その他","3":"棄権"},{"1":"702","2":"民主","3":"民主"},{"1":"703","2":"民主","3":"民主"},{"1":"704","2":"その他","3":"自民"},{"1":"705","2":"DK","3":"DK"},{"1":"706","2":"棄権","3":"民主"},{"1":"707","2":"民主","3":"民主"},{"1":"708","2":"民主","3":"民主"},{"1":"709","2":"棄権","3":"民主"},{"1":"710","2":"DK","3":"民主"},{"1":"711","2":"公明","3":"公明"},{"1":"712","2":"民主","3":"民主"},{"1":"713","2":"公明","3":"公明"},{"1":"714","2":"棄権","3":"棄権"},{"1":"715","2":"民主","3":"民主"},{"1":"716","2":"自民","3":"自民"},{"1":"717","2":"自民","3":"民主"},{"1":"718","2":"自民","3":"自民"},{"1":"719","2":"その他","3":"自民"},{"1":"720","2":"自民","3":"棄権"},{"1":"721","2":"棄権","3":"棄権"},{"1":"722","2":"その他","3":"自民"},{"1":"723","2":"民主","3":"民主"},{"1":"724","2":"棄権","3":"棄権"},{"1":"725","2":"DK","3":"民主"},{"1":"726","2":"棄権","3":"棄権"},{"1":"727","2":"棄権","3":"棄権"},{"1":"728","2":"民主","3":"民主"},{"1":"729","2":"民主","3":"民主"},{"1":"730","2":"自民","3":"自民"},{"1":"731","2":"共産・社民","3":"共産・社民"},{"1":"732","2":"自民","3":"自民"},{"1":"733","2":"その他","3":"民主"},{"1":"734","2":"DK","3":"DK"},{"1":"735","2":"自民","3":"自民"},{"1":"736","2":"自民","3":"自民"},{"1":"737","2":"民主","3":"民主"},{"1":"738","2":"民主","3":"棄権"},{"1":"739","2":"公明","3":"民主"},{"1":"740","2":"民主","3":"民主"},{"1":"741","2":"棄権","3":"棄権"},{"1":"742","2":"民主","3":"民主"},{"1":"743","2":"公明","3":"公明"},{"1":"744","2":"DK","3":"民主"},{"1":"745","2":"自民","3":"自民"},{"1":"746","2":"棄権","3":"棄権"},{"1":"747","2":"その他","3":"その他"},{"1":"748","2":"その他","3":"その他"},{"1":"749","2":"DK","3":"民主"},{"1":"750","2":"自民","3":"自民"},{"1":"751","2":"民主","3":"民主"},{"1":"752","2":"民主","3":"民主"},{"1":"753","2":"共産・社民","3":"共産・社民"},{"1":"754","2":"その他","3":"自民"},{"1":"755","2":"棄権","3":"民主"},{"1":"756","2":"民主","3":"民主"},{"1":"757","2":"民主","3":"民主"},{"1":"758","2":"棄権","3":"棄権"},{"1":"759","2":"民主","3":"民主"},{"1":"760","2":"自民","3":"自民"},{"1":"761","2":"DK","3":"民主"},{"1":"762","2":"棄権","3":"棄権"},{"1":"763","2":"自民","3":"DK"},{"1":"764","2":"DK","3":"公明"},{"1":"765","2":"民主","3":"民主"},{"1":"766","2":"共産・社民","3":"民主"},{"1":"767","2":"自民","3":"自民"},{"1":"768","2":"その他","3":"民主"},{"1":"769","2":"民主","3":"民主"},{"1":"770","2":"その他","3":"その他"},{"1":"771","2":"棄権","3":"DK"},{"1":"772","2":"民主","3":"民主"},{"1":"773","2":"棄権","3":"自民"},{"1":"774","2":"民主","3":"民主"},{"1":"775","2":"共産・社民","3":"共産・社民"},{"1":"776","2":"民主","3":"民主"},{"1":"777","2":"公明","3":"公明"},{"1":"778","2":"民主","3":"自民"},{"1":"779","2":"民主","3":"民主"},{"1":"780","2":"民主","3":"民主"},{"1":"781","2":"民主","3":"民主"},{"1":"782","2":"自民","3":"自民"},{"1":"783","2":"民主","3":"民主"},{"1":"784","2":"自民","3":"民主"},{"1":"785","2":"自民","3":"自民"},{"1":"786","2":"その他","3":"民主"},{"1":"787","2":"民主","3":"民主"},{"1":"788","2":"棄権","3":"民主"},{"1":"789","2":"その他","3":"民主"},{"1":"790","2":"棄権","3":"棄権"},{"1":"791","2":"民主","3":"民主"},{"1":"792","2":"自民","3":"民主"},{"1":"793","2":"棄権","3":"棄権"},{"1":"794","2":"棄権","3":"棄権"},{"1":"795","2":"民主","3":"民主"},{"1":"796","2":"その他","3":"民主"},{"1":"797","2":"その他","3":"DK"},{"1":"798","2":"自民","3":"自民"},{"1":"799","2":"自民","3":"自民"},{"1":"800","2":"その他","3":"棄権"},{"1":"801","2":"民主","3":"棄権"},{"1":"802","2":"自民","3":"民主"},{"1":"803","2":"民主","3":"民主"},{"1":"804","2":"DK","3":"DK"},{"1":"805","2":"民主","3":"民主"},{"1":"806","2":"民主","3":"民主"},{"1":"807","2":"民主","3":"民主"},{"1":"808","2":"その他","3":"民主"},{"1":"809","2":"民主","3":"民主"},{"1":"810","2":"共産・社民","3":"民主"},{"1":"811","2":"自民","3":"自民"},{"1":"812","2":"棄権","3":"民主"},{"1":"813","2":"自民","3":"自民"},{"1":"814","2":"民主","3":"民主"},{"1":"815","2":"自民","3":"自民"},{"1":"816","2":"その他","3":"自民"},{"1":"817","2":"DK","3":"共産・社民"},{"1":"818","2":"民主","3":"自民"},{"1":"819","2":"DK","3":"棄権"},{"1":"820","2":"自民","3":"自民"},{"1":"821","2":"民主","3":"棄権"},{"1":"822","2":"民主","3":"民主"},{"1":"823","2":"その他","3":"棄権"},{"1":"824","2":"DK","3":"DK"},{"1":"825","2":"棄権","3":"自民"},{"1":"826","2":"民主","3":"民主"},{"1":"827","2":"自民","3":"民主"},{"1":"828","2":"民主","3":"民主"},{"1":"829","2":"自民","3":"自民"},{"1":"830","2":"民主","3":"民主"},{"1":"831","2":"棄権","3":"DK"},{"1":"832","2":"その他","3":"その他"},{"1":"833","2":"棄権","3":"民主"},{"1":"834","2":"民主","3":"民主"},{"1":"835","2":"民主","3":"民主"},{"1":"836","2":"公明","3":"公明"},{"1":"837","2":"民主","3":"民主"},{"1":"838","2":"DK","3":"棄権"},{"1":"839","2":"その他","3":"棄権"},{"1":"840","2":"公明","3":"公明"},{"1":"841","2":"民主","3":"民主"},{"1":"842","2":"民主","3":"民主"},{"1":"843","2":"民主","3":"民主"},{"1":"844","2":"自民","3":"民主"},{"1":"845","2":"その他","3":"民主"},{"1":"846","2":"棄権","3":"棄権"},{"1":"847","2":"民主","3":"民主"},{"1":"848","2":"民主","3":"民主"},{"1":"849","2":"DK","3":"DK"},{"1":"850","2":"棄権","3":"棄権"},{"1":"851","2":"民主","3":"民主"},{"1":"852","2":"棄権","3":"民主"},{"1":"853","2":"民主","3":"民主"},{"1":"854","2":"民主","3":"民主"},{"1":"855","2":"民主","3":"民主"},{"1":"856","2":"その他","3":"民主"},{"1":"857","2":"その他","3":"DK"},{"1":"858","2":"民主","3":"民主"},{"1":"859","2":"民主","3":"民主"},{"1":"860","2":"自民","3":"棄権"},{"1":"861","2":"その他","3":"自民"},{"1":"862","2":"棄権","3":"棄権"},{"1":"863","2":"自民","3":"自民"},{"1":"864","2":"その他","3":"民主"},{"1":"865","2":"公明","3":"民主"},{"1":"866","2":"民主","3":"民主"},{"1":"867","2":"民主","3":"民主"},{"1":"868","2":"共産・社民","3":"民主"},{"1":"869","2":"共産・社民","3":"共産・社民"},{"1":"870","2":"民主","3":"民主"},{"1":"871","2":"民主","3":"民主"},{"1":"872","2":"自民","3":"公明"},{"1":"873","2":"棄権","3":"棄権"},{"1":"874","2":"民主","3":"民主"},{"1":"875","2":"民主","3":"自民"},{"1":"876","2":"その他","3":"民主"},{"1":"877","2":"民主","3":"その他"},{"1":"878","2":"自民","3":"民主"},{"1":"879","2":"棄権","3":"棄権"},{"1":"880","2":"棄権","3":"民主"},{"1":"881","2":"棄権","3":"民主"},{"1":"882","2":"民主","3":"民主"},{"1":"883","2":"民主","3":"民主"},{"1":"884","2":"民主","3":"民主"},{"1":"885","2":"棄権","3":"棄権"},{"1":"886","2":"民主","3":"民主"},{"1":"887","2":"DK","3":"民主"},{"1":"888","2":"棄権","3":"棄権"},{"1":"889","2":"棄権","3":"棄権"},{"1":"890","2":"公明","3":"公明"},{"1":"891","2":"民主","3":"民主"},{"1":"892","2":"DK","3":"民主"},{"1":"893","2":"DK","3":"棄権"},{"1":"894","2":"自民","3":"棄権"},{"1":"895","2":"DK","3":"DK"},{"1":"896","2":"DK","3":"DK"},{"1":"897","2":"自民","3":"自民"},{"1":"898","2":"棄権","3":"棄権"},{"1":"899","2":"民主","3":"民主"},{"1":"900","2":"民主","3":"民主"},{"1":"901","2":"棄権","3":"棄権"},{"1":"902","2":"民主","3":"民主"},{"1":"903","2":"その他","3":"民主"},{"1":"904","2":"民主","3":"民主"},{"1":"905","2":"DK","3":"民主"},{"1":"906","2":"DK","3":"民主"},{"1":"907","2":"棄権","3":"民主"},{"1":"908","2":"自民","3":"棄権"},{"1":"909","2":"民主","3":"民主"},{"1":"910","2":"民主","3":"民主"},{"1":"911","2":"棄権","3":"棄権"},{"1":"912","2":"民主","3":"民主"},{"1":"913","2":"自民","3":"民主"},{"1":"914","2":"DK","3":"DK"},{"1":"915","2":"棄権","3":"棄権"},{"1":"916","2":"共産・社民","3":"共産・社民"},{"1":"917","2":"共産・社民","3":"民主"},{"1":"918","2":"民主","3":"民主"},{"1":"919","2":"民主","3":"民主"},{"1":"920","2":"棄権","3":"民主"},{"1":"921","2":"棄権","3":"棄権"},{"1":"922","2":"民主","3":"民主"},{"1":"923","2":"DK","3":"民主"},{"1":"924","2":"棄権","3":"棄権"},{"1":"925","2":"その他","3":"自民"},{"1":"926","2":"民主","3":"民主"},{"1":"927","2":"自民","3":"その他"},{"1":"928","2":"その他","3":"自民"},{"1":"929","2":"自民","3":"自民"},{"1":"930","2":"民主","3":"民主"},{"1":"931","2":"その他","3":"民主"},{"1":"932","2":"民主","3":"民主"},{"1":"933","2":"DK","3":"DK"},{"1":"934","2":"その他","3":"民主"},{"1":"935","2":"棄権","3":"棄権"},{"1":"936","2":"DK","3":"公明"},{"1":"937","2":"公明","3":"公明"},{"1":"938","2":"民主","3":"民主"},{"1":"939","2":"自民","3":"民主"},{"1":"940","2":"公明","3":"公明"},{"1":"941","2":"その他","3":"民主"},{"1":"942","2":"自民","3":"自民"},{"1":"943","2":"民主","3":"民主"},{"1":"944","2":"共産・社民","3":"共産・社民"},{"1":"945","2":"民主","3":"棄権"},{"1":"946","2":"その他","3":"民主"},{"1":"947","2":"その他","3":"民主"},{"1":"948","2":"棄権","3":"民主"},{"1":"949","2":"棄権","3":"棄権"},{"1":"950","2":"その他","3":"その他"},{"1":"951","2":"共産・社民","3":"共産・社民"},{"1":"952","2":"DK","3":"民主"},{"1":"953","2":"民主","3":"自民"},{"1":"954","2":"棄権","3":"棄権"},{"1":"955","2":"共産・社民","3":"共産・社民"},{"1":"956","2":"共産・社民","3":"民主"},{"1":"957","2":"自民","3":"自民"},{"1":"958","2":"棄権","3":"民主"},{"1":"959","2":"DK","3":"DK"},{"1":"960","2":"DK","3":"民主"},{"1":"961","2":"自民","3":"自民"},{"1":"962","2":"公明","3":"自民"},{"1":"963","2":"DK","3":"棄権"},{"1":"964","2":"自民","3":"自民"},{"1":"965","2":"共産・社民","3":"民主"},{"1":"966","2":"自民","3":"自民"},{"1":"967","2":"民主","3":"民主"},{"1":"968","2":"自民","3":"棄権"},{"1":"969","2":"棄権","3":"棄権"},{"1":"970","2":"民主","3":"民主"},{"1":"971","2":"棄権","3":"DK"},{"1":"972","2":"DK","3":"民主"},{"1":"973","2":"棄権","3":"民主"},{"1":"974","2":"民主","3":"民主"},{"1":"975","2":"自民","3":"自民"},{"1":"976","2":"DK","3":"民主"},{"1":"977","2":"DK","3":"棄権"},{"1":"978","2":"民主","3":"民主"},{"1":"979","2":"棄権","3":"棄権"},{"1":"980","2":"その他","3":"自民"},{"1":"981","2":"棄権","3":"棄権"},{"1":"982","2":"DK","3":"自民"},{"1":"983","2":"DK","3":"民主"},{"1":"984","2":"棄権","3":"その他"},{"1":"985","2":"DK","3":"民主"},{"1":"986","2":"共産・社民","3":"共産・社民"},{"1":"987","2":"棄権","3":"自民"},{"1":"988","2":"民主","3":"DK"},{"1":"989","2":"棄権","3":"棄権"},{"1":"990","2":"民主","3":"民主"},{"1":"991","2":"民主","3":"民主"},{"1":"992","2":"民主","3":"民主"},{"1":"993","2":"自民","3":"自民"},{"1":"994","2":"自民","3":"民主"},{"1":"995","2":"民主","3":"民主"},{"1":"996","2":"棄権","3":"DK"},{"1":"997","2":"棄権","3":"棄権"},{"1":"998","2":"民主","3":"民主"},{"1":"999","2":"その他","3":"民主"},{"1":"1000","2":"DK","3":"棄権"},{"1":"1001","2":"民主","3":"民主"},{"1":"1002","2":"棄権","3":"民主"},{"1":"1003","2":"民主","3":"民主"},{"1":"1004","2":"公明","3":"公明"},{"1":"1005","2":"自民","3":"自民"},{"1":"1006","2":"民主","3":"民主"},{"1":"1007","2":"棄権","3":"棄権"},{"1":"1008","2":"棄権","3":"棄権"},{"1":"1009","2":"自民","3":"自民"},{"1":"1010","2":"その他","3":"民主"},{"1":"1011","2":"棄権","3":"棄権"},{"1":"1012","2":"その他","3":"その他"},{"1":"1013","2":"DK","3":"DK"},{"1":"1014","2":"棄権","3":"民主"},{"1":"1015","2":"棄権","3":"棄権"},{"1":"1016","2":"棄権","3":"その他"},{"1":"1017","2":"民主","3":"民主"},{"1":"1018","2":"その他","3":"民主"},{"1":"1019","2":"棄権","3":"棄権"},{"1":"1020","2":"民主","3":"民主"},{"1":"1021","2":"民主","3":"民主"},{"1":"1022","2":"民主","3":"民主"},{"1":"1023","2":"その他","3":"自民"},{"1":"1024","2":"民主","3":"民主"},{"1":"1025","2":"自民","3":"民主"},{"1":"1026","2":"DK","3":"DK"},{"1":"1027","2":"民主","3":"民主"},{"1":"1028","2":"自民","3":"自民"},{"1":"1029","2":"棄権","3":"棄権"},{"1":"1030","2":"民主","3":"民主"},{"1":"1031","2":"民主","3":"民主"},{"1":"1032","2":"棄権","3":"民主"},{"1":"1033","2":"棄権","3":"棄権"},{"1":"1034","2":"民主","3":"棄権"},{"1":"1035","2":"棄権","3":"民主"},{"1":"1036","2":"民主","3":"民主"},{"1":"1037","2":"民主","3":"民主"},{"1":"1038","2":"共産・社民","3":"共産・社民"},{"1":"1039","2":"公明","3":"公明"},{"1":"1040","2":"自民","3":"自民"},{"1":"1041","2":"DK","3":"民主"},{"1":"1042","2":"民主","3":"民主"},{"1":"1043","2":"民主","3":"民主"},{"1":"1044","2":"棄権","3":"棄権"},{"1":"1045","2":"棄権","3":"自民"},{"1":"1046","2":"民主","3":"民主"},{"1":"1047","2":"自民","3":"自民"},{"1":"1048","2":"棄権","3":"棄権"},{"1":"1049","2":"棄権","3":"その他"},{"1":"1050","2":"民主","3":"民主"},{"1":"1051","2":"自民","3":"自民"},{"1":"1052","2":"民主","3":"民主"},{"1":"1053","2":"棄権","3":"棄権"},{"1":"1054","2":"民主","3":"民主"},{"1":"1055","2":"民主","3":"民主"},{"1":"1056","2":"民主","3":"民主"},{"1":"1057","2":"民主","3":"民主"},{"1":"1058","2":"民主","3":"DK"},{"1":"1059","2":"共産・社民","3":"共産・社民"},{"1":"1060","2":"公明","3":"公明"},{"1":"1061","2":"民主","3":"民主"},{"1":"1062","2":"民主","3":"民主"},{"1":"1063","2":"民主","3":"民主"},{"1":"1064","2":"自民","3":"自民"},{"1":"1065","2":"民主","3":"民主"},{"1":"1066","2":"自民","3":"共産・社民"},{"1":"1067","2":"自民","3":"自民"},{"1":"1068","2":"民主","3":"民主"},{"1":"1069","2":"民主","3":"民主"},{"1":"1070","2":"民主","3":"共産・社民"},{"1":"1071","2":"自民","3":"民主"},{"1":"1072","2":"DK","3":"DK"},{"1":"1073","2":"その他","3":"民主"},{"1":"1074","2":"民主","3":"民主"},{"1":"1075","2":"民主","3":"自民"},{"1":"1076","2":"自民","3":"自民"},{"1":"1077","2":"民主","3":"自民"},{"1":"1078","2":"その他","3":"棄権"},{"1":"1079","2":"自民","3":"自民"},{"1":"1080","2":"DK","3":"民主"},{"1":"1081","2":"共産・社民","3":"共産・社民"},{"1":"1082","2":"民主","3":"民主"},{"1":"1083","2":"共産・社民","3":"共産・社民"},{"1":"1084","2":"自民","3":"自民"},{"1":"1085","2":"棄権","3":"自民"},{"1":"1086","2":"自民","3":"自民"},{"1":"1087","2":"棄権","3":"民主"},{"1":"1088","2":"その他","3":"自民"},{"1":"1089","2":"DK","3":"民主"},{"1":"1090","2":"DK","3":"DK"},{"1":"1091","2":"自民","3":"自民"},{"1":"1092","2":"自民","3":"自民"},{"1":"1093","2":"自民","3":"棄権"},{"1":"1094","2":"民主","3":"民主"},{"1":"1095","2":"民主","3":"民主"},{"1":"1096","2":"民主","3":"民主"},{"1":"1097","2":"民主","3":"民主"},{"1":"1098","2":"棄権","3":"棄権"},{"1":"1099","2":"その他","3":"共産・社民"},{"1":"1100","2":"民主","3":"民主"},{"1":"1101","2":"自民","3":"自民"},{"1":"1102","2":"民主","3":"民主"},{"1":"1103","2":"民主","3":"共産・社民"},{"1":"1104","2":"棄権","3":"民主"},{"1":"1105","2":"棄権","3":"棄権"},{"1":"1106","2":"DK","3":"民主"},{"1":"1107","2":"DK","3":"DK"},{"1":"1108","2":"民主","3":"民主"},{"1":"1109","2":"自民","3":"民主"},{"1":"1110","2":"民主","3":"民主"},{"1":"1111","2":"DK","3":"DK"},{"1":"1112","2":"民主","3":"民主"},{"1":"1113","2":"自民","3":"棄権"},{"1":"1114","2":"公明","3":"民主"},{"1":"1115","2":"公明","3":"民主"},{"1":"1116","2":"民主","3":"民主"},{"1":"1117","2":"DK","3":"自民"},{"1":"1118","2":"棄権","3":"民主"},{"1":"1119","2":"その他","3":"民主"},{"1":"1120","2":"棄権","3":"棄権"},{"1":"1121","2":"自民","3":"民主"},{"1":"1122","2":"棄権","3":"棄権"},{"1":"1123","2":"公明","3":"公明"},{"1":"1124","2":"民主","3":"民主"},{"1":"1125","2":"民主","3":"民主"},{"1":"1126","2":"その他","3":"その他"},{"1":"1127","2":"共産・社民","3":"共産・社民"},{"1":"1128","2":"民主","3":"民主"},{"1":"1129","2":"棄権","3":"棄権"},{"1":"1130","2":"DK","3":"民主"},{"1":"1131","2":"その他","3":"民主"},{"1":"1132","2":"DK","3":"民主"},{"1":"1133","2":"自民","3":"自民"},{"1":"1134","2":"棄権","3":"DK"},{"1":"1135","2":"棄権","3":"棄権"},{"1":"1136","2":"民主","3":"民主"},{"1":"1137","2":"民主","3":"民主"},{"1":"1138","2":"自民","3":"自民"},{"1":"1139","2":"DK","3":"棄権"},{"1":"1140","2":"棄権","3":"棄権"},{"1":"1141","2":"棄権","3":"棄権"},{"1":"1142","2":"棄権","3":"DK"},{"1":"1143","2":"民主","3":"民主"},{"1":"1144","2":"民主","3":"民主"},{"1":"1145","2":"棄権","3":"棄権"},{"1":"1146","2":"民主","3":"民主"},{"1":"1147","2":"DK","3":"その他"},{"1":"1148","2":"棄権","3":"棄権"},{"1":"1149","2":"自民","3":"自民"},{"1":"1150","2":"民主","3":"民主"},{"1":"1151","2":"自民","3":"民主"},{"1":"1152","2":"共産・社民","3":"共産・社民"},{"1":"1153","2":"公明","3":"民主"},{"1":"1154","2":"民主","3":"民主"},{"1":"1155","2":"民主","3":"民主"},{"1":"1156","2":"自民","3":"自民"},{"1":"1157","2":"棄権","3":"棄権"},{"1":"1158","2":"公明","3":"公明"},{"1":"1159","2":"民主","3":"民主"},{"1":"1160","2":"棄権","3":"棄権"},{"1":"1161","2":"棄権","3":"棄権"},{"1":"1162","2":"その他","3":"自民"},{"1":"1163","2":"棄権","3":"棄権"},{"1":"1164","2":"DK","3":"DK"},{"1":"1165","2":"棄権","3":"民主"},{"1":"1166","2":"民主","3":"民主"},{"1":"1167","2":"民主","3":"民主"},{"1":"1168","2":"棄権","3":"自民"},{"1":"1169","2":"棄権","3":"棄権"},{"1":"1170","2":"民主","3":"民主"},{"1":"1171","2":"公明","3":"公明"},{"1":"1172","2":"棄権","3":"棄権"},{"1":"1173","2":"民主","3":"棄権"},{"1":"1174","2":"民主","3":"民主"},{"1":"1175","2":"民主","3":"民主"},{"1":"1176","2":"民主","3":"共産・社民"},{"1":"1177","2":"民主","3":"民主"},{"1":"1178","2":"共産・社民","3":"共産・社民"},{"1":"1179","2":"自民","3":"自民"},{"1":"1180","2":"自民","3":"棄権"},{"1":"1181","2":"民主","3":"民主"},{"1":"1182","2":"民主","3":"民主"},{"1":"1183","2":"公明","3":"公明"},{"1":"1184","2":"DK","3":"棄権"},{"1":"1185","2":"公明","3":"公明"},{"1":"1186","2":"DK","3":"棄権"},{"1":"1187","2":"共産・社民","3":"共産・社民"},{"1":"1188","2":"自民","3":"自民"},{"1":"1189","2":"民主","3":"民主"},{"1":"1190","2":"民主","3":"民主"},{"1":"1191","2":"公明","3":"公明"},{"1":"1192","2":"民主","3":"民主"},{"1":"1193","2":"棄権","3":"棄権"},{"1":"1194","2":"DK","3":"共産・社民"},{"1":"1195","2":"棄権","3":"棄権"},{"1":"1196","2":"その他","3":"民主"},{"1":"1197","2":"共産・社民","3":"共産・社民"},{"1":"1198","2":"自民","3":"自民"},{"1":"1199","2":"自民","3":"民主"},{"1":"1200","2":"民主","3":"民主"},{"1":"1201","2":"民主","3":"民主"},{"1":"1202","2":"棄権","3":"棄権"},{"1":"1203","2":"自民","3":"自民"},{"1":"1204","2":"その他","3":"民主"},{"1":"1205","2":"民主","3":"民主"},{"1":"1206","2":"共産・社民","3":"民主"},{"1":"1207","2":"民主","3":"民主"},{"1":"1208","2":"その他","3":"その他"},{"1":"1209","2":"DK","3":"DK"},{"1":"1210","2":"自民","3":"民主"},{"1":"1211","2":"棄権","3":"棄権"},{"1":"1212","2":"民主","3":"民主"},{"1":"1213","2":"自民","3":"自民"},{"1":"1214","2":"棄権","3":"民主"},{"1":"1215","2":"民主","3":"民主"},{"1":"1216","2":"民主","3":"民主"},{"1":"1217","2":"民主","3":"民主"},{"1":"1218","2":"DK","3":"民主"},{"1":"1219","2":"棄権","3":"棄権"},{"1":"1220","2":"棄権","3":"棄権"},{"1":"1221","2":"DK","3":"DK"},{"1":"1222","2":"棄権","3":"民主"},{"1":"1223","2":"自民","3":"自民"},{"1":"1224","2":"その他","3":"その他"},{"1":"1225","2":"その他","3":"民主"},{"1":"1226","2":"公明","3":"棄権"},{"1":"1227","2":"民主","3":"民主"},{"1":"1228","2":"民主","3":"民主"},{"1":"1229","2":"棄権","3":"棄権"},{"1":"1230","2":"DK","3":"棄権"},{"1":"1231","2":"自民","3":"自民"},{"1":"1232","2":"民主","3":"民主"},{"1":"1233","2":"自民","3":"民主"},{"1":"1234","2":"民主","3":"棄権"},{"1":"1235","2":"共産・社民","3":"棄権"},{"1":"1236","2":"棄権","3":"棄権"},{"1":"1237","2":"棄権","3":"民主"},{"1":"1238","2":"民主","3":"自民"},{"1":"1239","2":"その他","3":"その他"},{"1":"1240","2":"自民","3":"自民"},{"1":"1241","2":"棄権","3":"棄権"},{"1":"1242","2":"自民","3":"自民"},{"1":"1243","2":"棄権","3":"棄権"},{"1":"1244","2":"民主","3":"民主"},{"1":"1245","2":"その他","3":"自民"},{"1":"1246","2":"DK","3":"DK"},{"1":"1247","2":"DK","3":"DK"},{"1":"1248","2":"民主","3":"民主"},{"1":"1249","2":"自民","3":"自民"},{"1":"1250","2":"民主","3":"自民"},{"1":"1251","2":"民主","3":"民主"},{"1":"1252","2":"DK","3":"棄権"},{"1":"1253","2":"DK","3":"民主"},{"1":"1254","2":"民主","3":"民主"},{"1":"1255","2":"棄権","3":"棄権"},{"1":"1256","2":"民主","3":"民主"},{"1":"1257","2":"民主","3":"民主"},{"1":"1258","2":"その他","3":"自民"},{"1":"1259","2":"民主","3":"民主"},{"1":"1260","2":"自民","3":"自民"},{"1":"1261","2":"自民","3":"棄権"},{"1":"1262","2":"その他","3":"その他"},{"1":"1263","2":"民主","3":"民主"},{"1":"1264","2":"民主","3":"民主"},{"1":"1265","2":"民主","3":"民主"},{"1":"1266","2":"棄権","3":"DK"},{"1":"1267","2":"その他","3":"民主"},{"1":"1268","2":"DK","3":"DK"},{"1":"1269","2":"その他","3":"民主"},{"1":"1270","2":"共産・社民","3":"民主"},{"1":"1271","2":"その他","3":"民主"},{"1":"1272","2":"民主","3":"民主"},{"1":"1273","2":"民主","3":"民主"},{"1":"1274","2":"自民","3":"自民"},{"1":"1275","2":"その他","3":"民主"},{"1":"1276","2":"民主","3":"民主"},{"1":"1277","2":"民主","3":"民主"},{"1":"1278","2":"民主","3":"民主"},{"1":"1279","2":"共産・社民","3":"自民"},{"1":"1280","2":"DK","3":"民主"},{"1":"1281","2":"民主","3":"DK"},{"1":"1282","2":"DK","3":"民主"},{"1":"1283","2":"民主","3":"民主"},{"1":"1284","2":"民主","3":"自民"},{"1":"1285","2":"その他","3":"自民"},{"1":"1286","2":"棄権","3":"DK"},{"1":"1287","2":"自民","3":"自民"},{"1":"1288","2":"共産・社民","3":"棄権"},{"1":"1289","2":"DK","3":"DK"},{"1":"1290","2":"自民","3":"自民"},{"1":"1291","2":"公明","3":"公明"},{"1":"1292","2":"DK","3":"共産・社民"},{"1":"1293","2":"DK","3":"DK"},{"1":"1294","2":"公明","3":"民主"},{"1":"1295","2":"民主","3":"民主"},{"1":"1296","2":"民主","3":"民主"},{"1":"1297","2":"自民","3":"棄権"},{"1":"1298","2":"民主","3":"民主"},{"1":"1299","2":"棄権","3":"棄権"},{"1":"1300","2":"棄権","3":"棄権"},{"1":"1301","2":"棄権","3":"棄権"},{"1":"1302","2":"DK","3":"共産・社民"},{"1":"1303","2":"自民","3":"自民"},{"1":"1304","2":"民主","3":"民主"},{"1":"1305","2":"棄権","3":"民主"},{"1":"1306","2":"公明","3":"公明"},{"1":"1307","2":"自民","3":"棄権"},{"1":"1308","2":"自民","3":"自民"},{"1":"1309","2":"DK","3":"民主"},{"1":"1310","2":"公明","3":"公明"},{"1":"1311","2":"棄権","3":"民主"},{"1":"1312","2":"公明","3":"公明"},{"1":"1313","2":"民主","3":"民主"},{"1":"1314","2":"自民","3":"民主"},{"1":"1315","2":"民主","3":"民主"},{"1":"1316","2":"民主","3":"民主"},{"1":"1317","2":"その他","3":"自民"},{"1":"1318","2":"DK","3":"棄権"},{"1":"1319","2":"棄権","3":"民主"},{"1":"1320","2":"棄権","3":"民主"},{"1":"1321","2":"棄権","3":"DK"},{"1":"1322","2":"DK","3":"DK"},{"1":"1323","2":"棄権","3":"棄権"},{"1":"1324","2":"その他","3":"民主"},{"1":"1325","2":"自民","3":"自民"},{"1":"1326","2":"棄権","3":"棄権"},{"1":"1327","2":"棄権","3":"DK"},{"1":"1328","2":"自民","3":"自民"},{"1":"1329","2":"民主","3":"民主"},{"1":"1330","2":"民主","3":"民主"},{"1":"1331","2":"その他","3":"民主"},{"1":"1332","2":"自民","3":"DK"},{"1":"1333","2":"自民","3":"自民"},{"1":"1334","2":"民主","3":"民主"},{"1":"1335","2":"民主","3":"DK"},{"1":"1336","2":"DK","3":"DK"},{"1":"1337","2":"その他","3":"自民"},{"1":"1338","2":"自民","3":"民主"},{"1":"1339","2":"民主","3":"民主"},{"1":"1340","2":"自民","3":"自民"},{"1":"1341","2":"自民","3":"自民"},{"1":"1342","2":"民主","3":"民主"},{"1":"1343","2":"棄権","3":"DK"},{"1":"1344","2":"その他","3":"棄権"},{"1":"1345","2":"民主","3":"民主"},{"1":"1346","2":"公明","3":"公明"},{"1":"1347","2":"民主","3":"民主"},{"1":"1348","2":"民主","3":"民主"},{"1":"1349","2":"民主","3":"公明"},{"1":"1350","2":"棄権","3":"棄権"},{"1":"1351","2":"DK","3":"その他"},{"1":"1352","2":"自民","3":"自民"},{"1":"1353","2":"棄権","3":"棄権"},{"1":"1354","2":"棄権","3":"DK"},{"1":"1355","2":"DK","3":"棄権"},{"1":"1356","2":"自民","3":"自民"},{"1":"1357","2":"民主","3":"民主"},{"1":"1358","2":"棄権","3":"棄権"},{"1":"1359","2":"棄権","3":"棄権"},{"1":"1360","2":"その他","3":"民主"},{"1":"1361","2":"自民","3":"民主"},{"1":"1362","2":"民主","3":"民主"},{"1":"1363","2":"DK","3":"DK"},{"1":"1364","2":"公明","3":"公明"},{"1":"1365","2":"その他","3":"棄権"},{"1":"1366","2":"民主","3":"自民"},{"1":"1367","2":"自民","3":"棄権"},{"1":"1368","2":"民主","3":"棄権"},{"1":"1369","2":"民主","3":"民主"},{"1":"1370","2":"民主","3":"民主"},{"1":"1371","2":"棄権","3":"DK"},{"1":"1372","2":"棄権","3":"棄権"},{"1":"1373","2":"民主","3":"民主"},{"1":"1374","2":"民主","3":"民主"},{"1":"1375","2":"自民","3":"自民"},{"1":"1376","2":"自民","3":"民主"},{"1":"1377","2":"棄権","3":"公明"},{"1":"1378","2":"自民","3":"棄権"},{"1":"1379","2":"自民","3":"民主"},{"1":"1380","2":"民主","3":"その他"},{"1":"1381","2":"棄権","3":"棄権"},{"1":"1382","2":"棄権","3":"民主"},{"1":"1383","2":"公明","3":"公明"},{"1":"1384","2":"民主","3":"民主"},{"1":"1385","2":"民主","3":"棄権"},{"1":"1386","2":"民主","3":"自民"},{"1":"1387","2":"民主","3":"棄権"},{"1":"1388","2":"自民","3":"自民"},{"1":"1389","2":"DK","3":"自民"},{"1":"1390","2":"共産・社民","3":"共産・社民"},{"1":"1391","2":"自民","3":"民主"},{"1":"1392","2":"棄権","3":"棄権"},{"1":"1393","2":"その他","3":"民主"},{"1":"1394","2":"民主","3":"民主"},{"1":"1395","2":"棄権","3":"棄権"},{"1":"1396","2":"DK","3":"DK"},{"1":"1397","2":"自民","3":"棄権"},{"1":"1398","2":"その他","3":"DK"},{"1":"1399","2":"民主","3":"DK"},{"1":"1400","2":"棄権","3":"棄権"},{"1":"1401","2":"自民","3":"自民"},{"1":"1402","2":"民主","3":"民主"},{"1":"1403","2":"民主","3":"民主"},{"1":"1404","2":"自民","3":"民主"},{"1":"1405","2":"DK","3":"DK"},{"1":"1406","2":"共産・社民","3":"DK"},{"1":"1407","2":"DK","3":"DK"},{"1":"1408","2":"棄権","3":"民主"},{"1":"1409","2":"棄権","3":"棄権"},{"1":"1410","2":"民主","3":"民主"},{"1":"1411","2":"DK","3":"DK"},{"1":"1412","2":"自民","3":"DK"},{"1":"1413","2":"DK","3":"民主"},{"1":"1414","2":"自民","3":"自民"},{"1":"1415","2":"民主","3":"民主"},{"1":"1416","2":"その他","3":"民主"},{"1":"1417","2":"DK","3":"共産・社民"},{"1":"1418","2":"自民","3":"自民"},{"1":"1419","2":"DK","3":"民主"},{"1":"1420","2":"民主","3":"民主"},{"1":"1421","2":"DK","3":"民主"},{"1":"1422","2":"民主","3":"民主"},{"1":"1423","2":"棄権","3":"棄権"},{"1":"1424","2":"DK","3":"民主"},{"1":"1425","2":"民主","3":"民主"},{"1":"1426","2":"棄権","3":"公明"},{"1":"1427","2":"民主","3":"民主"},{"1":"1428","2":"自民","3":"DK"},{"1":"1429","2":"自民","3":"自民"},{"1":"1430","2":"DK","3":"民主"},{"1":"1431","2":"民主","3":"民主"},{"1":"1432","2":"自民","3":"民主"},{"1":"1433","2":"棄権","3":"棄権"},{"1":"1434","2":"棄権","3":"棄権"},{"1":"1435","2":"自民","3":"自民"},{"1":"1436","2":"民主","3":"自民"},{"1":"1437","2":"その他","3":"民主"},{"1":"1438","2":"自民","3":"自民"},{"1":"1439","2":"DK","3":"民主"},{"1":"1440","2":"DK","3":"DK"},{"1":"1441","2":"棄権","3":"棄権"},{"1":"1442","2":"棄権","3":"民主"},{"1":"1443","2":"自民","3":"自民"},{"1":"1444","2":"自民","3":"自民"},{"1":"1445","2":"DK","3":"自民"},{"1":"1446","2":"自民","3":"共産・社民"},{"1":"1447","2":"その他","3":"民主"},{"1":"1448","2":"DK","3":"民主"},{"1":"1449","2":"共産・社民","3":"共産・社民"},{"1":"1450","2":"自民","3":"DK"},{"1":"1451","2":"自民","3":"自民"},{"1":"1452","2":"自民","3":"自民"},{"1":"1453","2":"民主","3":"民主"},{"1":"1454","2":"民主","3":"自民"},{"1":"1455","2":"自民","3":"自民"},{"1":"1456","2":"民主","3":"民主"},{"1":"1457","2":"民主","3":"民主"},{"1":"1458","2":"民主","3":"民主"},{"1":"1459","2":"民主","3":"民主"},{"1":"1460","2":"民主","3":"民主"},{"1":"1461","2":"自民","3":"自民"},{"1":"1462","2":"民主","3":"民主"},{"1":"1463","2":"民主","3":"民主"},{"1":"1464","2":"民主","3":"民主"},{"1":"1465","2":"棄権","3":"民主"},{"1":"1466","2":"民主","3":"民主"},{"1":"1467","2":"民主","3":"民主"},{"1":"1468","2":"民主","3":"民主"},{"1":"1469","2":"民主","3":"自民"},{"1":"1470","2":"棄権","3":"棄権"},{"1":"1471","2":"民主","3":"民主"},{"1":"1472","2":"民主","3":"民主"},{"1":"1473","2":"民主","3":"民主"},{"1":"1474","2":"民主","3":"民主"},{"1":"1475","2":"棄権","3":"棄権"},{"1":"1476","2":"公明","3":"自民"},{"1":"1477","2":"共産・社民","3":"共産・社民"},{"1":"1478","2":"民主","3":"民主"},{"1":"1479","2":"民主","3":"民主"},{"1":"1480","2":"自民","3":"自民"},{"1":"1481","2":"民主","3":"民主"},{"1":"1482","2":"共産・社民","3":"共産・社民"},{"1":"1483","2":"民主","3":"民主"},{"1":"1484","2":"棄権","3":"棄権"},{"1":"1485","2":"民主","3":"民主"},{"1":"1486","2":"その他","3":"その他"},{"1":"1487","2":"その他","3":"公明"},{"1":"1488","2":"自民","3":"民主"},{"1":"1489","2":"公明","3":"棄権"},{"1":"1490","2":"民主","3":"民主"},{"1":"1491","2":"民主","3":"民主"},{"1":"1492","2":"公明","3":"公明"},{"1":"1493","2":"DK","3":"民主"},{"1":"1494","2":"棄権","3":"棄権"},{"1":"1495","2":"共産・社民","3":"民主"},{"1":"1496","2":"自民","3":"棄権"},{"1":"1497","2":"DK","3":"棄権"},{"1":"1498","2":"棄権","3":"棄権"},{"1":"1499","2":"自民","3":"自民"},{"1":"1500","2":"その他","3":"その他"},{"1":"1501","2":"自民","3":"自民"},{"1":"1502","2":"棄権","3":"棄権"},{"1":"1503","2":"自民","3":"自民"},{"1":"1504","2":"DK","3":"DK"},{"1":"1505","2":"共産・社民","3":"共産・社民"},{"1":"1506","2":"棄権","3":"棄権"},{"1":"1507","2":"棄権","3":"棄権"},{"1":"1508","2":"その他","3":"その他"},{"1":"1509","2":"棄権","3":"民主"},{"1":"1510","2":"棄権","3":"棄権"},{"1":"1511","2":"棄権","3":"棄権"},{"1":"1512","2":"棄権","3":"民主"},{"1":"1513","2":"公明","3":"その他"},{"1":"1514","2":"公明","3":"公明"},{"1":"1515","2":"棄権","3":"棄権"},{"1":"1516","2":"民主","3":"民主"},{"1":"1517","2":"民主","3":"民主"},{"1":"1518","2":"自民","3":"民主"},{"1":"1519","2":"その他","3":"その他"},{"1":"1520","2":"棄権","3":"棄権"},{"1":"1521","2":"自民","3":"民主"},{"1":"1522","2":"民主","3":"DK"},{"1":"1523","2":"民主","3":"民主"},{"1":"1524","2":"自民","3":"自民"},{"1":"1525","2":"DK","3":"DK"},{"1":"1526","2":"棄権","3":"自民"},{"1":"1527","2":"民主","3":"民主"},{"1":"1528","2":"棄権","3":"民主"},{"1":"1529","2":"DK","3":"公明"},{"1":"1530","2":"民主","3":"民主"},{"1":"1531","2":"棄権","3":"棄権"},{"1":"1532","2":"DK","3":"DK"},{"1":"1533","2":"その他","3":"棄権"},{"1":"1534","2":"自民","3":"棄権"},{"1":"1535","2":"自民","3":"自民"},{"1":"1536","2":"民主","3":"民主"},{"1":"1537","2":"民主","3":"民主"},{"1":"1538","2":"その他","3":"DK"},{"1":"1539","2":"自民","3":"自民"},{"1":"1540","2":"自民","3":"自民"},{"1":"1541","2":"自民","3":"自民"},{"1":"1542","2":"自民","3":"自民"},{"1":"1543","2":"棄権","3":"棄権"},{"1":"1544","2":"民主","3":"民主"},{"1":"1545","2":"民主","3":"民主"},{"1":"1546","2":"自民","3":"自民"},{"1":"1547","2":"DK","3":"DK"},{"1":"1548","2":"棄権","3":"棄権"},{"1":"1549","2":"民主","3":"民主"},{"1":"1550","2":"民主","3":"民主"},{"1":"1551","2":"民主","3":"民主"},{"1":"1552","2":"棄権","3":"棄権"},{"1":"1553","2":"自民","3":"自民"},{"1":"1554","2":"その他","3":"民主"},{"1":"1555","2":"民主","3":"民主"},{"1":"1556","2":"共産・社民","3":"共産・社民"},{"1":"1557","2":"棄権","3":"棄権"},{"1":"1558","2":"その他","3":"棄権"},{"1":"1559","2":"棄権","3":"棄権"},{"1":"1560","2":"民主","3":"民主"},{"1":"1561","2":"自民","3":"棄権"},{"1":"1562","2":"公明","3":"公明"},{"1":"1563","2":"自民","3":"民主"},{"1":"1564","2":"その他","3":"民主"},{"1":"1565","2":"棄権","3":"民主"},{"1":"1566","2":"民主","3":"民主"},{"1":"1567","2":"民主","3":"共産・社民"},{"1":"1568","2":"自民","3":"自民"},{"1":"1569","2":"自民","3":"DK"},{"1":"1570","2":"公明","3":"自民"},{"1":"1571","2":"民主","3":"民主"},{"1":"1572","2":"民主","3":"民主"},{"1":"1573","2":"民主","3":"DK"},{"1":"1574","2":"民主","3":"民主"},{"1":"1575","2":"民主","3":"民主"},{"1":"1576","2":"民主","3":"民主"},{"1":"1577","2":"棄権","3":"棄権"},{"1":"1578","2":"自民","3":"自民"},{"1":"1579","2":"DK","3":"DK"},{"1":"1580","2":"自民","3":"自民"},{"1":"1581","2":"棄権","3":"棄権"},{"1":"1582","2":"DK","3":"DK"},{"1":"1583","2":"その他","3":"民主"},{"1":"1584","2":"自民","3":"自民"},{"1":"1585","2":"DK","3":"民主"},{"1":"1586","2":"自民","3":"自民"},{"1":"1587","2":"公明","3":"公明"},{"1":"1588","2":"民主","3":"その他"},{"1":"1589","2":"自民","3":"自民"},{"1":"1590","2":"DK","3":"DK"},{"1":"1591","2":"棄権","3":"DK"},{"1":"1592","2":"その他","3":"民主"},{"1":"1593","2":"公明","3":"民主"},{"1":"1594","2":"自民","3":"民主"},{"1":"1595","2":"民主","3":"民主"},{"1":"1596","2":"公明","3":"公明"},{"1":"1597","2":"民主","3":"民主"},{"1":"1598","2":"棄権","3":"棄権"},{"1":"1599","2":"民主","3":"自民"},{"1":"1600","2":"棄権","3":"自民"},{"1":"1601","2":"棄権","3":"民主"},{"1":"1602","2":"棄権","3":"棄権"},{"1":"1603","2":"その他","3":"DK"},{"1":"1604","2":"その他","3":"民主"},{"1":"1605","2":"その他","3":"その他"},{"1":"1606","2":"その他","3":"民主"},{"1":"1607","2":"民主","3":"共産・社民"},{"1":"1608","2":"棄権","3":"棄権"},{"1":"1609","2":"自民","3":"自民"},{"1":"1610","2":"自民","3":"自民"},{"1":"1611","2":"民主","3":"民主"},{"1":"1612","2":"自民","3":"自民"},{"1":"1613","2":"棄権","3":"棄権"},{"1":"1614","2":"自民","3":"その他"},{"1":"1615","2":"棄権","3":"棄権"},{"1":"1616","2":"民主","3":"民主"},{"1":"1617","2":"自民","3":"棄権"},{"1":"1618","2":"民主","3":"民主"},{"1":"1619","2":"棄権","3":"棄権"},{"1":"1620","2":"その他","3":"自民"},{"1":"1621","2":"民主","3":"民主"},{"1":"1622","2":"その他","3":"その他"},{"1":"1623","2":"民主","3":"民主"},{"1":"1624","2":"自民","3":"自民"},{"1":"1625","2":"その他","3":"棄権"},{"1":"1626","2":"その他","3":"自民"},{"1":"1627","2":"棄権","3":"棄権"},{"1":"1628","2":"自民","3":"自民"},{"1":"1629","2":"民主","3":"民主"},{"1":"1630","2":"DK","3":"DK"},{"1":"1631","2":"民主","3":"民主"},{"1":"1632","2":"DK","3":"DK"},{"1":"1633","2":"共産・社民","3":"民主"},{"1":"1634","2":"自民","3":"民主"},{"1":"1635","2":"自民","3":"棄権"},{"1":"1636","2":"自民","3":"自民"},{"1":"1637","2":"その他","3":"自民"},{"1":"1638","2":"自民","3":"民主"},{"1":"1639","2":"棄権","3":"棄権"},{"1":"1640","2":"自民","3":"民主"},{"1":"1641","2":"自民","3":"自民"},{"1":"1642","2":"民主","3":"共産・社民"},{"1":"1643","2":"自民","3":"自民"},{"1":"1644","2":"民主","3":"民主"},{"1":"1645","2":"棄権","3":"棄権"},{"1":"1646","2":"民主","3":"民主"},{"1":"1647","2":"自民","3":"民主"},{"1":"1648","2":"自民","3":"自民"},{"1":"1649","2":"共産・社民","3":"共産・社民"},{"1":"1650","2":"その他","3":"自民"},{"1":"1651","2":"棄権","3":"DK"},{"1":"1652","2":"自民","3":"自民"},{"1":"1653","2":"民主","3":"民主"},{"1":"1654","2":"民主","3":"民主"},{"1":"1655","2":"民主","3":"民主"},{"1":"1656","2":"民主","3":"民主"},{"1":"1657","2":"共産・社民","3":"共産・社民"},{"1":"1658","2":"民主","3":"民主"},{"1":"1659","2":"自民","3":"自民"},{"1":"1660","2":"棄権","3":"棄権"},{"1":"1661","2":"民主","3":"民主"},{"1":"1662","2":"自民","3":"自民"},{"1":"1663","2":"その他","3":"その他"},{"1":"1664","2":"棄権","3":"棄権"},{"1":"1665","2":"民主","3":"民主"},{"1":"1666","2":"棄権","3":"棄権"},{"1":"1667","2":"DK","3":"DK"},{"1":"1668","2":"民主","3":"DK"},{"1":"1669","2":"民主","3":"民主"},{"1":"1670","2":"民主","3":"民主"},{"1":"1671","2":"棄権","3":"民主"},{"1":"1672","2":"その他","3":"公明"},{"1":"1673","2":"自民","3":"自民"},{"1":"1674","2":"その他","3":"自民"},{"1":"1675","2":"DK","3":"自民"},{"1":"1676","2":"民主","3":"民主"},{"1":"1677","2":"自民","3":"自民"},{"1":"1678","2":"その他","3":"民主"},{"1":"1679","2":"棄権","3":"棄権"},{"1":"1680","2":"その他","3":"民主"},{"1":"1681","2":"DK","3":"民主"},{"1":"1682","2":"民主","3":"民主"},{"1":"1683","2":"民主","3":"民主"},{"1":"1684","2":"DK","3":"DK"},{"1":"1685","2":"自民","3":"自民"},{"1":"1686","2":"民主","3":"民主"},{"1":"1687","2":"民主","3":"DK"},{"1":"1688","2":"自民","3":"自民"},{"1":"1689","2":"民主","3":"民主"},{"1":"1690","2":"民主","3":"民主"},{"1":"1691","2":"DK","3":"DK"},{"1":"1692","2":"その他","3":"民主"},{"1":"1693","2":"共産・社民","3":"民主"},{"1":"1694","2":"その他","3":"共産・社民"},{"1":"1695","2":"自民","3":"自民"},{"1":"1696","2":"民主","3":"民主"},{"1":"1697","2":"民主","3":"民主"},{"1":"1698","2":"DK","3":"民主"},{"1":"1699","2":"公明","3":"公明"},{"1":"1700","2":"民主","3":"民主"},{"1":"1701","2":"棄権","3":"棄権"},{"1":"1702","2":"DK","3":"DK"},{"1":"1703","2":"民主","3":"民主"},{"1":"1704","2":"自民","3":"自民"},{"1":"1705","2":"棄権","3":"棄権"},{"1":"1706","2":"民主","3":"民主"},{"1":"1707","2":"自民","3":"自民"},{"1":"1708","2":"民主","3":"民主"},{"1":"1709","2":"棄権","3":"棄権"},{"1":"1710","2":"民主","3":"民主"},{"1":"1711","2":"民主","3":"民主"},{"1":"1712","2":"民主","3":"民主"},{"1":"1713","2":"民主","3":"自民"},{"1":"1714","2":"自民","3":"自民"},{"1":"1715","2":"自民","3":"自民"},{"1":"1716","2":"民主","3":"民主"},{"1":"1717","2":"その他","3":"その他"},{"1":"1718","2":"自民","3":"自民"},{"1":"1719","2":"民主","3":"民主"},{"1":"1720","2":"棄権","3":"棄権"},{"1":"1721","2":"その他","3":"その他"},{"1":"1722","2":"その他","3":"その他"},{"1":"1723","2":"民主","3":"民主"},{"1":"1724","2":"自民","3":"DK"},{"1":"1725","2":"自民","3":"民主"},{"1":"1726","2":"棄権","3":"棄権"},{"1":"1727","2":"民主","3":"民主"},{"1":"1728","2":"自民","3":"自民"},{"1":"1729","2":"民主","3":"民主"},{"1":"1730","2":"DK","3":"民主"},{"1":"1731","2":"民主","3":"民主"},{"1":"1732","2":"棄権","3":"棄権"},{"1":"1733","2":"棄権","3":"棄権"},{"1":"1734","2":"その他","3":"その他"},{"1":"1735","2":"棄権","3":"棄権"},{"1":"1736","2":"民主","3":"民主"},{"1":"1737","2":"DK","3":"民主"},{"1":"1738","2":"棄権","3":"民主"},{"1":"1739","2":"公明","3":"民主"},{"1":"1740","2":"DK","3":"民主"},{"1":"1741","2":"民主","3":"民主"},{"1":"1742","2":"棄権","3":"民主"},{"1":"1743","2":"棄権","3":"民主"},{"1":"1744","2":"棄権","3":"民主"},{"1":"1745","2":"棄権","3":"棄権"},{"1":"1746","2":"民主","3":"自民"},{"1":"1747","2":"棄権","3":"棄権"},{"1":"1748","2":"DK","3":"棄権"},{"1":"1749","2":"DK","3":"自民"},{"1":"1750","2":"民主","3":"民主"},{"1":"1751","2":"自民","3":"民主"},{"1":"1752","2":"民主","3":"自民"},{"1":"1753","2":"棄権","3":"棄権"},{"1":"1754","2":"その他","3":"その他"},{"1":"1755","2":"公明","3":"棄権"},{"1":"1756","2":"棄権","3":"棄権"},{"1":"1757","2":"民主","3":"民主"},{"1":"1758","2":"棄権","3":"棄権"},{"1":"1759","2":"民主","3":"民主"},{"1":"1760","2":"棄権","3":"棄権"},{"1":"1761","2":"公明","3":"公明"},{"1":"1762","2":"棄権","3":"民主"},{"1":"1763","2":"民主","3":"民主"},{"1":"1764","2":"棄権","3":"棄権"},{"1":"1765","2":"民主","3":"共産・社民"},{"1":"1766","2":"自民","3":"自民"},{"1":"1767","2":"民主","3":"民主"},{"1":"1768","2":"棄権","3":"棄権"},{"1":"1769","2":"自民","3":"自民"},{"1":"1770","2":"棄権","3":"棄権"},{"1":"1771","2":"民主","3":"その他"},{"1":"1772","2":"棄権","3":"棄権"},{"1":"1773","2":"民主","3":"民主"},{"1":"1774","2":"自民","3":"自民"},{"1":"1775","2":"棄権","3":"その他"},{"1":"1776","2":"棄権","3":"棄権"},{"1":"1777","2":"棄権","3":"棄権"},{"1":"1778","2":"民主","3":"民主"},{"1":"1779","2":"自民","3":"自民"},{"1":"1780","2":"民主","3":"民主"},{"1":"1781","2":"民主","3":"民主"},{"1":"1782","2":"民主","3":"民主"},{"1":"1783","2":"民主","3":"民主"},{"1":"1784","2":"民主","3":"民主"},{"1":"1785","2":"棄権","3":"民主"},{"1":"1786","2":"民主","3":"民主"},{"1":"1787","2":"棄権","3":"民主"},{"1":"1788","2":"民主","3":"民主"},{"1":"1789","2":"自民","3":"自民"},{"1":"1790","2":"民主","3":"民主"},{"1":"1791","2":"民主","3":"民主"},{"1":"1792","2":"民主","3":"棄権"},{"1":"1793","2":"棄権","3":"自民"},{"1":"1794","2":"公明","3":"公明"},{"1":"1795","2":"民主","3":"DK"},{"1":"1796","2":"棄権","3":"民主"},{"1":"1797","2":"DK","3":"民主"},{"1":"1798","2":"自民","3":"共産・社民"},{"1":"1799","2":"その他","3":"共産・社民"},{"1":"1800","2":"民主","3":"民主"},{"1":"1801","2":"民主","3":"民主"},{"1":"1802","2":"民主","3":"民主"},{"1":"1803","2":"自民","3":"自民"},{"1":"1804","2":"DK","3":"民主"},{"1":"1805","2":"自民","3":"自民"},{"1":"1806","2":"自民","3":"民主"},{"1":"1807","2":"共産・社民","3":"共産・社民"},{"1":"1808","2":"DK","3":"DK"},{"1":"1809","2":"民主","3":"民主"},{"1":"1810","2":"その他","3":"民主"},{"1":"1811","2":"自民","3":"自民"},{"1":"1812","2":"民主","3":"民主"},{"1":"1813","2":"DK","3":"棄権"},{"1":"1814","2":"民主","3":"自民"},{"1":"1815","2":"棄権","3":"棄権"},{"1":"1816","2":"DK","3":"民主"},{"1":"1817","2":"民主","3":"民主"},{"1":"1818","2":"民主","3":"民主"},{"1":"1819","2":"民主","3":"民主"},{"1":"1820","2":"民主","3":"民主"},{"1":"1821","2":"棄権","3":"棄権"},{"1":"1822","2":"民主","3":"民主"},{"1":"1823","2":"民主","3":"DK"},{"1":"1824","2":"民主","3":"民主"},{"1":"1825","2":"DK","3":"棄権"},{"1":"1826","2":"その他","3":"棄権"},{"1":"1827","2":"共産・社民","3":"共産・社民"},{"1":"1828","2":"棄権","3":"棄権"},{"1":"1829","2":"自民","3":"自民"},{"1":"1830","2":"民主","3":"民主"},{"1":"1831","2":"民主","3":"民主"},{"1":"1832","2":"民主","3":"民主"},{"1":"1833","2":"棄権","3":"棄権"},{"1":"1834","2":"自民","3":"自民"},{"1":"1835","2":"その他","3":"自民"},{"1":"1836","2":"DK","3":"棄権"},{"1":"1837","2":"民主","3":"民主"},{"1":"1838","2":"棄権","3":"その他"},{"1":"1839","2":"民主","3":"民主"},{"1":"1840","2":"DK","3":"民主"},{"1":"1841","2":"民主","3":"民主"},{"1":"1842","2":"自民","3":"自民"},{"1":"1843","2":"自民","3":"自民"},{"1":"1844","2":"DK","3":"DK"},{"1":"1845","2":"共産・社民","3":"民主"},{"1":"1846","2":"民主","3":"民主"},{"1":"1847","2":"その他","3":"共産・社民"},{"1":"1848","2":"DK","3":"民主"},{"1":"1849","2":"自民","3":"棄権"},{"1":"1850","2":"DK","3":"民主"},{"1":"1851","2":"その他","3":"民主"},{"1":"1852","2":"棄権","3":"棄権"},{"1":"1853","2":"棄権","3":"民主"},{"1":"1854","2":"民主","3":"民主"},{"1":"1855","2":"公明","3":"棄権"},{"1":"1856","2":"自民","3":"自民"},{"1":"1857","2":"民主","3":"民主"},{"1":"1858","2":"民主","3":"民主"},{"1":"1859","2":"その他","3":"民主"},{"1":"1860","2":"民主","3":"民主"},{"1":"1861","2":"棄権","3":"民主"},{"1":"1862","2":"棄権","3":"棄権"},{"1":"1863","2":"自民","3":"自民"},{"1":"1864","2":"棄権","3":"棄権"},{"1":"1865","2":"DK","3":"DK"},{"1":"1866","2":"民主","3":"民主"},{"1":"1867","2":"自民","3":"棄権"},{"1":"1868","2":"棄権","3":"共産・社民"},{"1":"1869","2":"自民","3":"自民"},{"1":"1870","2":"共産・社民","3":"共産・社民"},{"1":"1871","2":"自民","3":"自民"},{"1":"1872","2":"棄権","3":"民主"},{"1":"1873","2":"民主","3":"民主"},{"1":"1874","2":"公明","3":"民主"},{"1":"1875","2":"自民","3":"自民"},{"1":"1876","2":"DK","3":"民主"},{"1":"1877","2":"自民","3":"自民"},{"1":"1878","2":"棄権","3":"棄権"},{"1":"1879","2":"その他","3":"民主"},{"1":"1880","2":"棄権","3":"自民"},{"1":"1881","2":"自民","3":"自民"},{"1":"1882","2":"民主","3":"民主"},{"1":"1883","2":"公明","3":"公明"},{"1":"1884","2":"民主","3":"民主"},{"1":"1885","2":"自民","3":"民主"},{"1":"1886","2":"自民","3":"棄権"},{"1":"1887","2":"自民","3":"自民"},{"1":"1888","2":"DK","3":"棄権"},{"1":"1889","2":"DK","3":"民主"},{"1":"1890","2":"その他","3":"民主"},{"1":"1891","2":"棄権","3":"民主"},{"1":"1892","2":"その他","3":"民主"},{"1":"1893","2":"DK","3":"民主"},{"1":"1894","2":"民主","3":"民主"},{"1":"1895","2":"民主","3":"民主"},{"1":"1896","2":"DK","3":"DK"},{"1":"1897","2":"DK","3":"共産・社民"},{"1":"1898","2":"民主","3":"民主"},{"1":"1899","2":"自民","3":"共産・社民"},{"1":"1900","2":"DK","3":"棄権"},{"1":"1901","2":"棄権","3":"DK"},{"1":"1902","2":"DK","3":"棄権"},{"1":"1903","2":"民主","3":"民主"},{"1":"1904","2":"棄権","3":"民主"},{"1":"1905","2":"自民","3":"自民"},{"1":"1906","2":"その他","3":"民主"},{"1":"1907","2":"民主","3":"民主"},{"1":"1908","2":"DK","3":"棄権"},{"1":"1909","2":"DK","3":"DK"},{"1":"1910","2":"民主","3":"民主"},{"1":"1911","2":"その他","3":"民主"},{"1":"1912","2":"DK","3":"棄権"},{"1":"1913","2":"自民","3":"自民"},{"1":"1914","2":"民主","3":"民主"},{"1":"1915","2":"民主","3":"民主"},{"1":"1916","2":"棄権","3":"棄権"},{"1":"1917","2":"民主","3":"民主"},{"1":"1918","2":"棄権","3":"棄権"},{"1":"1919","2":"民主","3":"自民"},{"1":"1920","2":"民主","3":"共産・社民"},{"1":"1921","2":"棄権","3":"棄権"},{"1":"1922","2":"民主","3":"民主"},{"1":"1923","2":"民主","3":"民主"},{"1":"1924","2":"棄権","3":"棄権"},{"1":"1925","2":"民主","3":"民主"},{"1":"1926","2":"DK","3":"民主"},{"1":"1927","2":"DK","3":"民主"},{"1":"1928","2":"民主","3":"民主"},{"1":"1929","2":"民主","3":"民主"},{"1":"1930","2":"DK","3":"DK"},{"1":"1931","2":"自民","3":"自民"},{"1":"1932","2":"DK","3":"棄権"},{"1":"1933","2":"民主","3":"民主"},{"1":"1934","2":"共産・社民","3":"民主"},{"1":"1935","2":"公明","3":"公明"},{"1":"1936","2":"民主","3":"民主"},{"1":"1937","2":"その他","3":"民主"},{"1":"1938","2":"棄権","3":"棄権"},{"1":"1939","2":"公明","3":"公明"},{"1":"1940","2":"民主","3":"民主"},{"1":"1941","2":"自民","3":"共産・社民"},{"1":"1942","2":"棄権","3":"棄権"},{"1":"1943","2":"棄権","3":"民主"},{"1":"1944","2":"棄権","3":"棄権"},{"1":"1945","2":"DK","3":"DK"},{"1":"1946","2":"その他","3":"民主"},{"1":"1947","2":"民主","3":"民主"},{"1":"1948","2":"棄権","3":"棄権"},{"1":"1949","2":"民主","3":"民主"},{"1":"1950","2":"自民","3":"自民"},{"1":"1951","2":"棄権","3":"民主"},{"1":"1952","2":"自民","3":"DK"},{"1":"1953","2":"その他","3":"DK"},{"1":"1954","2":"民主","3":"民主"},{"1":"1955","2":"民主","3":"民主"},{"1":"1956","2":"棄権","3":"自民"},{"1":"1957","2":"DK","3":"DK"},{"1":"1958","2":"棄権","3":"棄権"},{"1":"1959","2":"その他","3":"民主"},{"1":"1960","2":"民主","3":"民主"},{"1":"1961","2":"棄権","3":"自民"},{"1":"1962","2":"その他","3":"自民"},{"1":"1963","2":"共産・社民","3":"共産・社民"},{"1":"1964","2":"民主","3":"民主"},{"1":"1965","2":"棄権","3":"棄権"},{"1":"1966","2":"棄権","3":"棄権"},{"1":"1967","2":"民主","3":"民主"},{"1":"1968","2":"DK","3":"民主"},{"1":"1969","2":"共産・社民","3":"民主"},{"1":"1970","2":"棄権","3":"棄権"},{"1":"1971","2":"自民","3":"自民"},{"1":"1972","2":"共産・社民","3":"共産・社民"},{"1":"1973","2":"公明","3":"DK"},{"1":"1974","2":"公明","3":"公明"},{"1":"1975","2":"民主","3":"民主"},{"1":"1976","2":"その他","3":"その他"},{"1":"1977","2":"民主","3":"民主"},{"1":"1978","2":"棄権","3":"自民"},{"1":"1979","2":"自民","3":"自民"},{"1":"1980","2":"その他","3":"DK"},{"1":"1981","2":"自民","3":"自民"},{"1":"1982","2":"自民","3":"自民"},{"1":"1983","2":"DK","3":"自民"},{"1":"1984","2":"自民","3":"自民"},{"1":"1985","2":"その他","3":"その他"},{"1":"1986","2":"民主","3":"共産・社民"},{"1":"1987","2":"DK","3":"DK"},{"1":"1988","2":"民主","3":"民主"},{"1":"1989","2":"棄権","3":"自民"},{"1":"1990","2":"民主","3":"民主"},{"1":"1991","2":"その他","3":"その他"},{"1":"1992","2":"棄権","3":"DK"},{"1":"1993","2":"自民","3":"自民"},{"1":"1994","2":"棄権","3":"民主"},{"1":"1995","2":"民主","3":"民主"},{"1":"1996","2":"自民","3":"DK"},{"1":"1997","2":"棄権","3":"棄権"},{"1":"1998","2":"その他","3":"自民"},{"1":"1999","2":"その他","3":"自民"},{"1":"2000","2":"民主","3":"民主"},{"1":"2001","2":"棄権","3":"棄権"},{"1":"2002","2":"民主","3":"民主"},{"1":"2003","2":"棄権","3":"棄権"},{"1":"2004","2":"棄権","3":"棄権"},{"1":"2005","2":"その他","3":"DK"},{"1":"2006","2":"民主","3":"民主"},{"1":"2007","2":"公明","3":"その他"},{"1":"2008","2":"民主","3":"民主"},{"1":"2009","2":"DK","3":"共産・社民"},{"1":"2010","2":"DK","3":"棄権"},{"1":"2011","2":"DK","3":"自民"},{"1":"2012","2":"共産・社民","3":"共産・社民"},{"1":"2013","2":"民主","3":"民主"},{"1":"2014","2":"自民","3":"自民"},{"1":"2015","2":"民主","3":"民主"},{"1":"2016","2":"棄権","3":"民主"},{"1":"2017","2":"民主","3":"自民"},{"1":"2018","2":"棄権","3":"棄権"},{"1":"2019","2":"DK","3":"民主"},{"1":"2020","2":"民主","3":"民主"},{"1":"2021","2":"自民","3":"自民"},{"1":"2022","2":"民主","3":"民主"},{"1":"2023","2":"棄権","3":"棄権"},{"1":"2024","2":"自民","3":"自民"},{"1":"2025","2":"棄権","3":"民主"},{"1":"2026","2":"自民","3":"自民"},{"1":"2027","2":"民主","3":"民主"},{"1":"2028","2":"DK","3":"民主"},{"1":"2029","2":"自民","3":"自民"},{"1":"2030","2":"共産・社民","3":"共産・社民"},{"1":"2031","2":"棄権","3":"棄権"},{"1":"2032","2":"自民","3":"その他"},{"1":"2033","2":"自民","3":"共産・社民"},{"1":"2034","2":"棄権","3":"棄権"},{"1":"2035","2":"自民","3":"自民"},{"1":"2036","2":"棄権","3":"その他"},{"1":"2037","2":"棄権","3":"棄権"},{"1":"2038","2":"民主","3":"棄権"},{"1":"2039","2":"棄権","3":"棄権"},{"1":"2040","2":"棄権","3":"民主"},{"1":"2041","2":"自民","3":"民主"},{"1":"2042","2":"自民","3":"棄権"},{"1":"2043","2":"棄権","3":"DK"},{"1":"2044","2":"その他","3":"その他"},{"1":"2045","2":"自民","3":"自民"},{"1":"2046","2":"自民","3":"民主"},{"1":"2047","2":"その他","3":"民主"},{"1":"2048","2":"自民","3":"自民"},{"1":"2049","2":"民主","3":"民主"},{"1":"2050","2":"公明","3":"自民"},{"1":"2051","2":"棄権","3":"棄権"},{"1":"2052","2":"共産・社民","3":"共産・社民"},{"1":"2053","2":"民主","3":"民主"},{"1":"2054","2":"棄権","3":"棄権"},{"1":"2055","2":"民主","3":"民主"},{"1":"2056","2":"民主","3":"民主"},{"1":"2057","2":"公明","3":"公明"},{"1":"2058","2":"その他","3":"その他"},{"1":"2059","2":"DK","3":"棄権"},{"1":"2060","2":"民主","3":"民主"},{"1":"2061","2":"自民","3":"自民"},{"1":"2062","2":"棄権","3":"棄権"},{"1":"2063","2":"自民","3":"自民"},{"1":"2064","2":"棄権","3":"棄権"},{"1":"2065","2":"民主","3":"民主"},{"1":"2066","2":"共産・社民","3":"民主"},{"1":"2067","2":"自民","3":"自民"},{"1":"2068","2":"民主","3":"民主"},{"1":"2069","2":"民主","3":"棄権"},{"1":"2070","2":"DK","3":"民主"},{"1":"2071","2":"民主","3":"民主"},{"1":"2072","2":"自民","3":"自民"},{"1":"2073","2":"棄権","3":"棄権"},{"1":"2074","2":"DK","3":"DK"},{"1":"2075","2":"DK","3":"民主"},{"1":"2076","2":"棄権","3":"公明"},{"1":"2077","2":"自民","3":"自民"},{"1":"2078","2":"自民","3":"自民"},{"1":"2079","2":"自民","3":"棄権"},{"1":"2080","2":"自民","3":"自民"},{"1":"2081","2":"棄権","3":"棄権"},{"1":"2082","2":"民主","3":"民主"},{"1":"2083","2":"共産・社民","3":"共産・社民"},{"1":"2084","2":"棄権","3":"棄権"},{"1":"2085","2":"自民","3":"自民"},{"1":"2086","2":"自民","3":"自民"},{"1":"2087","2":"自民","3":"民主"},{"1":"2088","2":"民主","3":"民主"},{"1":"2089","2":"棄権","3":"棄権"},{"1":"2090","2":"棄権","3":"棄権"},{"1":"2091","2":"自民","3":"自民"},{"1":"2092","2":"棄権","3":"棄権"},{"1":"2093","2":"自民","3":"自民"},{"1":"2094","2":"棄権","3":"民主"},{"1":"2095","2":"DK","3":"民主"},{"1":"2096","2":"その他","3":"DK"},{"1":"2097","2":"棄権","3":"DK"},{"1":"2098","2":"棄権","3":"DK"},{"1":"2099","2":"民主","3":"民主"},{"1":"2100","2":"棄権","3":"棄権"},{"1":"2101","2":"その他","3":"自民"},{"1":"2102","2":"その他","3":"その他"},{"1":"2103","2":"民主","3":"民主"},{"1":"2104","2":"DK","3":"民主"},{"1":"2105","2":"民主","3":"民主"},{"1":"2106","2":"棄権","3":"民主"},{"1":"2107","2":"民主","3":"民主"},{"1":"2108","2":"棄権","3":"DK"},{"1":"2109","2":"棄権","3":"DK"},{"1":"2110","2":"民主","3":"民主"},{"1":"2111","2":"その他","3":"自民"},{"1":"2112","2":"DK","3":"民主"},{"1":"2113","2":"その他","3":"DK"},{"1":"2114","2":"その他","3":"公明"},{"1":"2115","2":"DK","3":"棄権"},{"1":"2116","2":"民主","3":"民主"},{"1":"2117","2":"自民","3":"自民"},{"1":"2118","2":"民主","3":"民主"},{"1":"2119","2":"棄権","3":"棄権"},{"1":"2120","2":"民主","3":"棄権"},{"1":"2121","2":"民主","3":"民主"},{"1":"2122","2":"自民","3":"民主"},{"1":"2123","2":"民主","3":"民主"},{"1":"2124","2":"棄権","3":"民主"},{"1":"2125","2":"その他","3":"棄権"},{"1":"2126","2":"公明","3":"公明"},{"1":"2127","2":"棄権","3":"DK"},{"1":"2128","2":"民主","3":"民主"},{"1":"2129","2":"民主","3":"民主"},{"1":"2130","2":"棄権","3":"棄権"},{"1":"2131","2":"DK","3":"民主"},{"1":"2132","2":"DK","3":"棄権"},{"1":"2133","2":"民主","3":"民主"},{"1":"2134","2":"その他","3":"その他"},{"1":"2135","2":"棄権","3":"民主"},{"1":"2136","2":"自民","3":"自民"},{"1":"2137","2":"棄権","3":"棄権"},{"1":"2138","2":"自民","3":"自民"},{"1":"2139","2":"民主","3":"民主"},{"1":"2140","2":"DK","3":"民主"},{"1":"2141","2":"民主","3":"民主"},{"1":"2142","2":"DK","3":"共産・社民"},{"1":"2143","2":"棄権","3":"DK"},{"1":"2144","2":"自民","3":"自民"},{"1":"2145","2":"その他","3":"自民"},{"1":"2146","2":"自民","3":"自民"},{"1":"2147","2":"棄権","3":"棄権"},{"1":"2148","2":"自民","3":"民主"},{"1":"2149","2":"棄権","3":"棄権"},{"1":"2150","2":"民主","3":"民主"},{"1":"2151","2":"棄権","3":"民主"},{"1":"2152","2":"棄権","3":"棄権"},{"1":"2153","2":"公明","3":"公明"},{"1":"2154","2":"棄権","3":"棄権"},{"1":"2155","2":"DK","3":"DK"},{"1":"2156","2":"棄権","3":"民主"},{"1":"2157","2":"棄権","3":"棄権"},{"1":"2158","2":"共産・社民","3":"共産・社民"},{"1":"2159","2":"棄権","3":"棄権"},{"1":"2160","2":"DK","3":"その他"},{"1":"2161","2":"民主","3":"民主"},{"1":"2162","2":"DK","3":"民主"},{"1":"2163","2":"自民","3":"自民"},{"1":"2164","2":"DK","3":"自民"},{"1":"2165","2":"民主","3":"民主"},{"1":"2166","2":"民主","3":"民主"},{"1":"2167","2":"棄権","3":"棄権"},{"1":"2168","2":"民主","3":"民主"},{"1":"2169","2":"共産・社民","3":"共産・社民"},{"1":"2170","2":"DK","3":"自民"},{"1":"2171","2":"自民","3":"自民"},{"1":"2172","2":"自民","3":"自民"},{"1":"2173","2":"民主","3":"民主"},{"1":"2174","2":"共産・社民","3":"民主"},{"1":"2175","2":"民主","3":"民主"},{"1":"2176","2":"民主","3":"民主"},{"1":"2177","2":"共産・社民","3":"共産・社民"},{"1":"2178","2":"棄権","3":"棄権"},{"1":"2179","2":"自民","3":"棄権"},{"1":"2180","2":"棄権","3":"棄権"},{"1":"2181","2":"民主","3":"民主"},{"1":"2182","2":"自民","3":"民主"},{"1":"2183","2":"その他","3":"民主"},{"1":"2184","2":"棄権","3":"民主"},{"1":"2185","2":"DK","3":"民主"},{"1":"2186","2":"自民","3":"民主"},{"1":"2187","2":"棄権","3":"DK"},{"1":"2188","2":"自民","3":"自民"},{"1":"2189","2":"公明","3":"公明"},{"1":"2190","2":"民主","3":"民主"},{"1":"2191","2":"自民","3":"自民"},{"1":"2192","2":"公明","3":"公明"},{"1":"2193","2":"共産・社民","3":"共産・社民"},{"1":"2194","2":"その他","3":"民主"},{"1":"2195","2":"自民","3":"自民"},{"1":"2196","2":"棄権","3":"棄権"},{"1":"2197","2":"棄権","3":"棄権"},{"1":"2198","2":"民主","3":"民主"},{"1":"2199","2":"その他","3":"共産・社民"},{"1":"2200","2":"棄権","3":"民主"},{"1":"2201","2":"DK","3":"DK"},{"1":"2202","2":"棄権","3":"棄権"},{"1":"2203","2":"民主","3":"民主"},{"1":"2204","2":"棄権","3":"棄権"},{"1":"2205","2":"自民","3":"自民"},{"1":"2206","2":"公明","3":"民主"},{"1":"2207","2":"公明","3":"自民"},{"1":"2208","2":"その他","3":"民主"},{"1":"2209","2":"民主","3":"民主"},{"1":"2210","2":"自民","3":"自民"},{"1":"2211","2":"民主","3":"民主"},{"1":"2212","2":"公明","3":"公明"},{"1":"2213","2":"自民","3":"自民"},{"1":"2214","2":"民主","3":"民主"},{"1":"2215","2":"自民","3":"自民"},{"1":"2216","2":"民主","3":"民主"},{"1":"2217","2":"民主","3":"民主"},{"1":"2218","2":"民主","3":"民主"},{"1":"2219","2":"棄権","3":"棄権"},{"1":"2220","2":"自民","3":"民主"},{"1":"2221","2":"その他","3":"その他"},{"1":"2222","2":"自民","3":"民主"},{"1":"2223","2":"自民","3":"自民"},{"1":"2224","2":"公明","3":"自民"},{"1":"2225","2":"DK","3":"共産・社民"},{"1":"2226","2":"その他","3":"その他"},{"1":"2227","2":"自民","3":"民主"},{"1":"2228","2":"その他","3":"その他"},{"1":"2229","2":"民主","3":"共産・社民"},{"1":"2230","2":"その他","3":"自民"},{"1":"2231","2":"棄権","3":"棄権"},{"1":"2232","2":"その他","3":"その他"},{"1":"2233","2":"棄権","3":"棄権"},{"1":"2234","2":"民主","3":"民主"},{"1":"2235","2":"自民","3":"民主"},{"1":"2236","2":"自民","3":"自民"},{"1":"2237","2":"自民","3":"自民"},{"1":"2238","2":"民主","3":"棄権"},{"1":"2239","2":"民主","3":"民主"},{"1":"2240","2":"DK","3":"民主"},{"1":"2241","2":"その他","3":"その他"},{"1":"2242","2":"自民","3":"DK"},{"1":"2243","2":"共産・社民","3":"共産・社民"},{"1":"2244","2":"自民","3":"DK"},{"1":"2245","2":"DK","3":"DK"},{"1":"2246","2":"棄権","3":"DK"},{"1":"2247","2":"自民","3":"自民"},{"1":"2248","2":"棄権","3":"棄権"},{"1":"2249","2":"棄権","3":"棄権"},{"1":"2250","2":"民主","3":"民主"},{"1":"2251","2":"DK","3":"DK"},{"1":"2252","2":"民主","3":"棄権"},{"1":"2253","2":"民主","3":"民主"},{"1":"2254","2":"DK","3":"民主"},{"1":"2255","2":"その他","3":"その他"},{"1":"2256","2":"DK","3":"DK"},{"1":"2257","2":"公明","3":"公明"},{"1":"2258","2":"公明","3":"公明"},{"1":"2259","2":"その他","3":"棄権"},{"1":"2260","2":"民主","3":"民主"},{"1":"2261","2":"民主","3":"民主"},{"1":"2262","2":"民主","3":"民主"},{"1":"2263","2":"自民","3":"自民"},{"1":"2264","2":"自民","3":"自民"},{"1":"2265","2":"棄権","3":"棄権"},{"1":"2266","2":"民主","3":"民主"},{"1":"2267","2":"棄権","3":"民主"},{"1":"2268","2":"自民","3":"自民"},{"1":"2269","2":"DK","3":"自民"},{"1":"2270","2":"民主","3":"民主"},{"1":"2271","2":"民主","3":"民主"},{"1":"2272","2":"公明","3":"公明"},{"1":"2273","2":"自民","3":"自民"},{"1":"2274","2":"自民","3":"民主"},{"1":"2275","2":"その他","3":"民主"},{"1":"2276","2":"民主","3":"民主"},{"1":"2277","2":"DK","3":"自民"},{"1":"2278","2":"自民","3":"民主"},{"1":"2279","2":"民主","3":"民主"},{"1":"2280","2":"民主","3":"民主"},{"1":"2281","2":"民主","3":"民主"},{"1":"2282","2":"民主","3":"自民"},{"1":"2283","2":"棄権","3":"棄権"},{"1":"2284","2":"民主","3":"民主"},{"1":"2285","2":"DK","3":"自民"},{"1":"2286","2":"民主","3":"共産・社民"},{"1":"2287","2":"DK","3":"自民"},{"1":"2288","2":"共産・社民","3":"共産・社民"},{"1":"2289","2":"民主","3":"民主"},{"1":"2290","2":"自民","3":"自民"},{"1":"2291","2":"棄権","3":"棄権"},{"1":"2292","2":"DK","3":"DK"},{"1":"2293","2":"民主","3":"民主"},{"1":"2294","2":"民主","3":"民主"},{"1":"2295","2":"棄権","3":"棄権"},{"1":"2296","2":"民主","3":"民主"},{"1":"2297","2":"民主","3":"民主"},{"1":"2298","2":"民主","3":"民主"},{"1":"2299","2":"自民","3":"民主"},{"1":"2300","2":"棄権","3":"棄権"},{"1":"2301","2":"自民","3":"自民"},{"1":"2302","2":"自民","3":"自民"},{"1":"2303","2":"自民","3":"棄権"},{"1":"2304","2":"民主","3":"民主"},{"1":"2305","2":"民主","3":"民主"},{"1":"2306","2":"民主","3":"民主"},{"1":"2307","2":"その他","3":"その他"},{"1":"2308","2":"民主","3":"民主"},{"1":"2309","2":"民主","3":"民主"},{"1":"2310","2":"民主","3":"民主"},{"1":"2311","2":"共産・社民","3":"共産・社民"},{"1":"2312","2":"棄権","3":"棄権"},{"1":"2313","2":"棄権","3":"棄権"},{"1":"2314","2":"棄権","3":"民主"},{"1":"2315","2":"その他","3":"その他"},{"1":"2316","2":"民主","3":"民主"},{"1":"2317","2":"共産・社民","3":"共産・社民"},{"1":"2318","2":"棄権","3":"民主"},{"1":"2319","2":"公明","3":"棄権"},{"1":"2320","2":"公明","3":"自民"},{"1":"2321","2":"棄権","3":"棄権"},{"1":"2322","2":"民主","3":"民主"},{"1":"2323","2":"自民","3":"自民"},{"1":"2324","2":"民主","3":"民主"},{"1":"2325","2":"その他","3":"棄権"},{"1":"2326","2":"民主","3":"棄権"},{"1":"2327","2":"棄権","3":"棄権"},{"1":"2328","2":"自民","3":"自民"},{"1":"2329","2":"棄権","3":"棄権"},{"1":"2330","2":"棄権","3":"棄権"},{"1":"2331","2":"棄権","3":"棄権"},{"1":"2332","2":"民主","3":"民主"},{"1":"2333","2":"棄権","3":"棄権"},{"1":"2334","2":"民主","3":"民主"},{"1":"2335","2":"民主","3":"民主"},{"1":"2336","2":"その他","3":"民主"},{"1":"2337","2":"DK","3":"民主"},{"1":"2338","2":"棄権","3":"民主"},{"1":"2339","2":"共産・社民","3":"民主"},{"1":"2340","2":"民主","3":"民主"},{"1":"2341","2":"自民","3":"自民"},{"1":"2342","2":"民主","3":"民主"},{"1":"2343","2":"公明","3":"公明"},{"1":"2344","2":"民主","3":"民主"},{"1":"2345","2":"DK","3":"民主"},{"1":"2346","2":"その他","3":"民主"},{"1":"2347","2":"自民","3":"自民"},{"1":"2348","2":"民主","3":"民主"},{"1":"2349","2":"民主","3":"民主"},{"1":"2350","2":"自民","3":"自民"},{"1":"2351","2":"棄権","3":"棄権"},{"1":"2352","2":"棄権","3":"DK"},{"1":"2353","2":"民主","3":"民主"},{"1":"2354","2":"民主","3":"民主"},{"1":"2355","2":"共産・社民","3":"共産・社民"},{"1":"2356","2":"民主","3":"民主"},{"1":"2357","2":"公明","3":"公明"},{"1":"2358","2":"民主","3":"民主"},{"1":"2359","2":"自民","3":"自民"},{"1":"2360","2":"棄権","3":"民主"},{"1":"2361","2":"棄権","3":"民主"},{"1":"2362","2":"DK","3":"DK"},{"1":"2363","2":"公明","3":"民主"},{"1":"2364","2":"公明","3":"公明"},{"1":"2365","2":"棄権","3":"棄権"},{"1":"2366","2":"棄権","3":"棄権"},{"1":"2367","2":"自民","3":"自民"},{"1":"2368","2":"共産・社民","3":"共産・社民"},{"1":"2369","2":"その他","3":"民主"},{"1":"2370","2":"DK","3":"民主"},{"1":"2371","2":"その他","3":"その他"},{"1":"2372","2":"DK","3":"民主"},{"1":"2373","2":"その他","3":"自民"},{"1":"2374","2":"DK","3":"民主"},{"1":"2375","2":"棄権","3":"棄権"},{"1":"2376","2":"自民","3":"民主"},{"1":"2377","2":"民主","3":"民主"},{"1":"2378","2":"棄権","3":"棄権"},{"1":"2379","2":"棄権","3":"DK"},{"1":"2380","2":"棄権","3":"棄権"},{"1":"2381","2":"棄権","3":"棄権"},{"1":"2382","2":"棄権","3":"棄権"},{"1":"2383","2":"棄権","3":"棄権"},{"1":"2384","2":"公明","3":"民主"},{"1":"2385","2":"DK","3":"棄権"},{"1":"2386","2":"民主","3":"自民"},{"1":"2387","2":"棄権","3":"民主"},{"1":"2388","2":"民主","3":"民主"},{"1":"2389","2":"公明","3":"公明"},{"1":"2390","2":"棄権","3":"棄権"},{"1":"2391","2":"自民","3":"自民"},{"1":"2392","2":"DK","3":"民主"},{"1":"2393","2":"民主","3":"民主"},{"1":"2394","2":"DK","3":"DK"},{"1":"2395","2":"DK","3":"棄権"},{"1":"2396","2":"その他","3":"自民"},{"1":"2397","2":"棄権","3":"民主"},{"1":"2398","2":"共産・社民","3":"自民"},{"1":"2399","2":"民主","3":"民主"},{"1":"2400","2":"民主","3":"民主"},{"1":"2401","2":"棄権","3":"民主"},{"1":"2402","2":"民主","3":"民主"},{"1":"2403","2":"自民","3":"民主"},{"1":"2404","2":"民主","3":"民主"},{"1":"2405","2":"公明","3":"公明"},{"1":"2406","2":"その他","3":"民主"},{"1":"2407","2":"自民","3":"自民"},{"1":"2408","2":"民主","3":"民主"},{"1":"2409","2":"自民","3":"棄権"},{"1":"2410","2":"その他","3":"その他"},{"1":"2411","2":"棄権","3":"棄権"},{"1":"2412","2":"民主","3":"民主"},{"1":"2413","2":"棄権","3":"棄権"},{"1":"2414","2":"自民","3":"自民"},{"1":"2415","2":"棄権","3":"棄権"},{"1":"2416","2":"自民","3":"その他"},{"1":"2417","2":"棄権","3":"DK"},{"1":"2418","2":"その他","3":"民主"},{"1":"2419","2":"DK","3":"DK"},{"1":"2420","2":"民主","3":"民主"},{"1":"2421","2":"その他","3":"その他"},{"1":"2422","2":"自民","3":"自民"},{"1":"2423","2":"その他","3":"自民"},{"1":"2424","2":"棄権","3":"棄権"},{"1":"2425","2":"自民","3":"民主"},{"1":"2426","2":"自民","3":"民主"},{"1":"2427","2":"棄権","3":"棄権"},{"1":"2428","2":"自民","3":"自民"},{"1":"2429","2":"DK","3":"民主"},{"1":"2430","2":"棄権","3":"棄権"},{"1":"2431","2":"棄権","3":"棄権"},{"1":"2432","2":"自民","3":"自民"},{"1":"2433","2":"公明","3":"公明"},{"1":"2434","2":"その他","3":"その他"},{"1":"2435","2":"民主","3":"民主"},{"1":"2436","2":"民主","3":"民主"},{"1":"2437","2":"自民","3":"自民"},{"1":"2438","2":"その他","3":"その他"},{"1":"2439","2":"公明","3":"公明"},{"1":"2440","2":"DK","3":"民主"},{"1":"2441","2":"民主","3":"民主"},{"1":"2442","2":"民主","3":"民主"},{"1":"2443","2":"棄権","3":"棄権"},{"1":"2444","2":"棄権","3":"棄権"},{"1":"2445","2":"自民","3":"自民"},{"1":"2446","2":"その他","3":"民主"},{"1":"2447","2":"その他","3":"その他"},{"1":"2448","2":"民主","3":"民主"},{"1":"2449","2":"民主","3":"民主"},{"1":"2450","2":"民主","3":"民主"},{"1":"2451","2":"民主","3":"民主"},{"1":"2452","2":"民主","3":"民主"},{"1":"2453","2":"棄権","3":"棄権"},{"1":"2454","2":"公明","3":"公明"},{"1":"2455","2":"民主","3":"民主"},{"1":"2456","2":"DK","3":"棄権"},{"1":"2457","2":"民主","3":"民主"},{"1":"2458","2":"共産・社民","3":"共産・社民"},{"1":"2459","2":"その他","3":"民主"},{"1":"2460","2":"自民","3":"民主"},{"1":"2461","2":"棄権","3":"棄権"},{"1":"2462","2":"自民","3":"自民"},{"1":"2463","2":"その他","3":"民主"},{"1":"2464","2":"DK","3":"民主"},{"1":"2465","2":"共産・社民","3":"共産・社民"},{"1":"2466","2":"民主","3":"共産・社民"},{"1":"2467","2":"民主","3":"棄権"},{"1":"2468","2":"その他","3":"共産・社民"},{"1":"2469","2":"民主","3":"民主"},{"1":"2470","2":"公明","3":"公明"},{"1":"2471","2":"DK","3":"DK"},{"1":"2472","2":"民主","3":"民主"},{"1":"2473","2":"公明","3":"公明"},{"1":"2474","2":"棄権","3":"棄権"},{"1":"2475","2":"民主","3":"民主"},{"1":"2476","2":"その他","3":"自民"},{"1":"2477","2":"その他","3":"民主"},{"1":"2478","2":"棄権","3":"棄権"},{"1":"2479","2":"棄権","3":"民主"},{"1":"2480","2":"棄権","3":"民主"},{"1":"2481","2":"自民","3":"民主"},{"1":"2482","2":"民主","3":"民主"},{"1":"2483","2":"DK","3":"自民"},{"1":"2484","2":"民主","3":"民主"},{"1":"2485","2":"自民","3":"自民"},{"1":"2486","2":"棄権","3":"棄権"},{"1":"2487","2":"民主","3":"自民"},{"1":"2488","2":"自民","3":"民主"},{"1":"2489","2":"その他","3":"その他"},{"1":"2490","2":"その他","3":"自民"},{"1":"2491","2":"民主","3":"民主"},{"1":"2492","2":"公明","3":"公明"},{"1":"2493","2":"棄権","3":"民主"},{"1":"2494","2":"自民","3":"自民"},{"1":"2495","2":"公明","3":"公明"},{"1":"2496","2":"民主","3":"民主"},{"1":"2497","2":"自民","3":"棄権"},{"1":"2498","2":"その他","3":"その他"},{"1":"2499","2":"公明","3":"民主"},{"1":"2500","2":"DK","3":"民主"},{"1":"2501","2":"民主","3":"民主"},{"1":"2502","2":"棄権","3":"棄権"},{"1":"2503","2":"棄権","3":"DK"},{"1":"2504","2":"棄権","3":"棄権"},{"1":"2505","2":"棄権","3":"棄権"},{"1":"2506","2":"民主","3":"棄権"},{"1":"2507","2":"民主","3":"民主"},{"1":"2508","2":"民主","3":"民主"},{"1":"2509","2":"DK","3":"共産・社民"},{"1":"2510","2":"民主","3":"民主"},{"1":"2511","2":"民主","3":"DK"},{"1":"2512","2":"民主","3":"民主"},{"1":"2513","2":"その他","3":"自民"},{"1":"2514","2":"自民","3":"自民"},{"1":"2515","2":"その他","3":"民主"},{"1":"2516","2":"棄権","3":"棄権"},{"1":"2517","2":"棄権","3":"民主"},{"1":"2518","2":"DK","3":"DK"},{"1":"2519","2":"民主","3":"民主"},{"1":"2520","2":"DK","3":"棄権"},{"1":"2521","2":"棄権","3":"自民"},{"1":"2522","2":"共産・社民","3":"共産・社民"},{"1":"2523","2":"公明","3":"公明"},{"1":"2524","2":"民主","3":"共産・社民"},{"1":"2525","2":"DK","3":"DK"},{"1":"2526","2":"棄権","3":"DK"},{"1":"2527","2":"民主","3":"その他"},{"1":"2528","2":"DK","3":"DK"},{"1":"2529","2":"その他","3":"その他"},{"1":"2530","2":"民主","3":"民主"},{"1":"2531","2":"DK","3":"DK"},{"1":"2532","2":"DK","3":"DK"},{"1":"2533","2":"民主","3":"民主"},{"1":"2534","2":"その他","3":"民主"},{"1":"2535","2":"棄権","3":"棄権"},{"1":"2536","2":"棄権","3":"民主"},{"1":"2537","2":"民主","3":"民主"},{"1":"2538","2":"自民","3":"自民"},{"1":"2539","2":"自民","3":"自民"},{"1":"2540","2":"公明","3":"公明"},{"1":"2541","2":"自民","3":"民主"},{"1":"2542","2":"棄権","3":"DK"},{"1":"2543","2":"自民","3":"自民"},{"1":"2544","2":"自民","3":"その他"},{"1":"2545","2":"民主","3":"民主"},{"1":"2546","2":"DK","3":"DK"},{"1":"2547","2":"民主","3":"民主"},{"1":"2548","2":"民主","3":"民主"},{"1":"2549","2":"DK","3":"民主"},{"1":"2550","2":"自民","3":"棄権"},{"1":"2551","2":"自民","3":"自民"},{"1":"2552","2":"自民","3":"自民"},{"1":"2553","2":"棄権","3":"棄権"},{"1":"2554","2":"共産・社民","3":"民主"},{"1":"2555","2":"DK","3":"自民"},{"1":"2556","2":"公明","3":"公明"},{"1":"2557","2":"民主","3":"民主"},{"1":"2558","2":"DK","3":"民主"},{"1":"2559","2":"公明","3":"公明"},{"1":"2560","2":"民主","3":"公明"},{"1":"2561","2":"公明","3":"公明"},{"1":"2562","2":"棄権","3":"民主"},{"1":"2563","2":"棄権","3":"棄権"},{"1":"2564","2":"民主","3":"民主"},{"1":"2565","2":"民主","3":"民主"},{"1":"2566","2":"民主","3":"民主"},{"1":"2567","2":"棄権","3":"棄権"},{"1":"2568","2":"自民","3":"民主"},{"1":"2569","2":"自民","3":"自民"},{"1":"2570","2":"その他","3":"共産・社民"},{"1":"2571","2":"棄権","3":"民主"},{"1":"2572","2":"民主","3":"自民"},{"1":"2573","2":"その他","3":"DK"},{"1":"2574","2":"棄権","3":"民主"},{"1":"2575","2":"公明","3":"公明"},{"1":"2576","2":"棄権","3":"棄権"},{"1":"2577","2":"棄権","3":"棄権"},{"1":"2578","2":"DK","3":"棄権"},{"1":"2579","2":"DK","3":"民主"},{"1":"2580","2":"自民","3":"棄権"},{"1":"2581","2":"民主","3":"民主"},{"1":"2582","2":"DK","3":"共産・社民"},{"1":"2583","2":"民主","3":"民主"},{"1":"2584","2":"自民","3":"自民"},{"1":"2585","2":"民主","3":"民主"},{"1":"2586","2":"民主","3":"民主"},{"1":"2587","2":"自民","3":"自民"},{"1":"2588","2":"自民","3":"自民"},{"1":"2589","2":"DK","3":"その他"},{"1":"2590","2":"民主","3":"民主"},{"1":"2591","2":"民主","3":"民主"},{"1":"2592","2":"民主","3":"民主"},{"1":"2593","2":"民主","3":"民主"},{"1":"2594","2":"DK","3":"DK"},{"1":"2595","2":"民主","3":"民主"},{"1":"2596","2":"民主","3":"民主"},{"1":"2597","2":"DK","3":"DK"},{"1":"2598","2":"民主","3":"民主"},{"1":"2599","2":"DK","3":"その他"},{"1":"2600","2":"棄権","3":"DK"},{"1":"2601","2":"棄権","3":"棄権"},{"1":"2602","2":"その他","3":"公明"},{"1":"2603","2":"民主","3":"民主"},{"1":"2604","2":"民主","3":"民主"},{"1":"2605","2":"民主","3":"民主"},{"1":"2606","2":"棄権","3":"棄権"},{"1":"2607","2":"自民","3":"自民"},{"1":"2608","2":"DK","3":"民主"},{"1":"2609","2":"自民","3":"民主"},{"1":"2610","2":"棄権","3":"棄権"},{"1":"2611","2":"棄権","3":"民主"},{"1":"2612","2":"民主","3":"棄権"},{"1":"2613","2":"棄権","3":"棄権"},{"1":"2614","2":"棄権","3":"共産・社民"},{"1":"2615","2":"DK","3":"DK"},{"1":"2616","2":"棄権","3":"棄権"},{"1":"2617","2":"民主","3":"棄権"},{"1":"2618","2":"棄権","3":"民主"},{"1":"2619","2":"共産・社民","3":"共産・社民"},{"1":"2620","2":"DK","3":"その他"},{"1":"2621","2":"その他","3":"民主"},{"1":"2622","2":"棄権","3":"棄権"},{"1":"2623","2":"DK","3":"DK"},{"1":"2624","2":"棄権","3":"棄権"},{"1":"2625","2":"自民","3":"民主"},{"1":"2626","2":"自民","3":"自民"},{"1":"2627","2":"自民","3":"自民"},{"1":"2628","2":"民主","3":"民主"},{"1":"2629","2":"民主","3":"DK"},{"1":"2630","2":"自民","3":"DK"},{"1":"2631","2":"棄権","3":"民主"},{"1":"2632","2":"自民","3":"自民"},{"1":"2633","2":"自民","3":"自民"},{"1":"2634","2":"共産・社民","3":"共産・社民"},{"1":"2635","2":"民主","3":"民主"},{"1":"2636","2":"民主","3":"民主"},{"1":"2637","2":"民主","3":"民主"},{"1":"2638","2":"民主","3":"民主"},{"1":"2639","2":"自民","3":"自民"},{"1":"2640","2":"DK","3":"DK"},{"1":"2641","2":"自民","3":"自民"},{"1":"2642","2":"自民","3":"その他"},{"1":"2643","2":"民主","3":"民主"},{"1":"2644","2":"民主","3":"民主"},{"1":"2645","2":"DK","3":"民主"},{"1":"2646","2":"棄権","3":"民主"},{"1":"2647","2":"その他","3":"民主"},{"1":"2648","2":"民主","3":"共産・社民"},{"1":"2649","2":"民主","3":"民主"},{"1":"2650","2":"民主","3":"民主"},{"1":"2651","2":"共産・社民","3":"共産・社民"},{"1":"2652","2":"民主","3":"民主"},{"1":"2653","2":"共産・社民","3":"共産・社民"},{"1":"2654","2":"公明","3":"公明"},{"1":"2655","2":"共産・社民","3":"民主"},{"1":"2656","2":"民主","3":"民主"},{"1":"2657","2":"自民","3":"民主"},{"1":"2658","2":"その他","3":"DK"},{"1":"2659","2":"その他","3":"その他"},{"1":"2660","2":"棄権","3":"棄権"},{"1":"2661","2":"民主","3":"民主"},{"1":"2662","2":"自民","3":"民主"},{"1":"2663","2":"棄権","3":"自民"},{"1":"2664","2":"自民","3":"公明"},{"1":"2665","2":"DK","3":"自民"},{"1":"2666","2":"棄権","3":"公明"},{"1":"2667","2":"民主","3":"民主"},{"1":"2668","2":"棄権","3":"公明"},{"1":"2669","2":"棄権","3":"棄権"},{"1":"2670","2":"その他","3":"共産・社民"},{"1":"2671","2":"棄権","3":"民主"},{"1":"2672","2":"民主","3":"民主"},{"1":"2673","2":"共産・社民","3":"共産・社民"},{"1":"2674","2":"民主","3":"民主"},{"1":"2675","2":"民主","3":"民主"},{"1":"2676","2":"民主","3":"民主"},{"1":"2677","2":"民主","3":"民主"},{"1":"2678","2":"DK","3":"その他"},{"1":"2679","2":"民主","3":"民主"},{"1":"2680","2":"棄権","3":"その他"},{"1":"2681","2":"民主","3":"民主"},{"1":"2682","2":"棄権","3":"棄権"},{"1":"2683","2":"自民","3":"自民"},{"1":"2684","2":"自民","3":"民主"},{"1":"2685","2":"民主","3":"民主"},{"1":"2686","2":"棄権","3":"民主"},{"1":"2687","2":"民主","3":"民主"},{"1":"2688","2":"自民","3":"自民"},{"1":"2689","2":"共産・社民","3":"共産・社民"},{"1":"2690","2":"その他","3":"自民"},{"1":"2691","2":"自民","3":"自民"},{"1":"2692","2":"その他","3":"その他"},{"1":"2693","2":"自民","3":"自民"},{"1":"2694","2":"DK","3":"棄権"},{"1":"2695","2":"民主","3":"民主"},{"1":"2696","2":"民主","3":"民主"},{"1":"2697","2":"民主","3":"民主"},{"1":"2698","2":"共産・社民","3":"共産・社民"},{"1":"2699","2":"その他","3":"自民"},{"1":"2700","2":"民主","3":"民主"},{"1":"2701","2":"自民","3":"自民"},{"1":"2702","2":"棄権","3":"棄権"},{"1":"2703","2":"民主","3":"民主"},{"1":"2704","2":"民主","3":"民主"},{"1":"2705","2":"自民","3":"自民"},{"1":"2706","2":"DK","3":"DK"},{"1":"2707","2":"棄権","3":"棄権"},{"1":"2708","2":"棄権","3":"棄権"},{"1":"2709","2":"その他","3":"民主"},{"1":"2710","2":"自民","3":"自民"},{"1":"2711","2":"民主","3":"民主"},{"1":"2712","2":"自民","3":"自民"},{"1":"2713","2":"民主","3":"民主"},{"1":"2714","2":"民主","3":"民主"},{"1":"2715","2":"棄権","3":"棄権"},{"1":"2716","2":"DK","3":"民主"},{"1":"2717","2":"自民","3":"自民"},{"1":"2718","2":"共産・社民","3":"民主"},{"1":"2719","2":"その他","3":"その他"},{"1":"2720","2":"棄権","3":"棄権"},{"1":"2721","2":"DK","3":"民主"},{"1":"2722","2":"民主","3":"民主"},{"1":"2723","2":"民主","3":"民主"},{"1":"2724","2":"DK","3":"DK"},{"1":"2725","2":"自民","3":"自民"},{"1":"2726","2":"民主","3":"自民"},{"1":"2727","2":"棄権","3":"棄権"},{"1":"2728","2":"DK","3":"棄権"},{"1":"2729","2":"民主","3":"民主"},{"1":"2730","2":"その他","3":"民主"},{"1":"2731","2":"民主","3":"民主"},{"1":"2732","2":"棄権","3":"民主"},{"1":"2733","2":"棄権","3":"棄権"},{"1":"2734","2":"DK","3":"棄権"},{"1":"2735","2":"棄権","3":"棄権"},{"1":"2736","2":"棄権","3":"棄権"},{"1":"2737","2":"民主","3":"民主"},{"1":"2738","2":"民主","3":"民主"},{"1":"2739","2":"DK","3":"DK"},{"1":"2740","2":"自民","3":"自民"},{"1":"2741","2":"民主","3":"民主"},{"1":"2742","2":"自民","3":"自民"},{"1":"2743","2":"自民","3":"棄権"},{"1":"2744","2":"棄権","3":"棄権"},{"1":"2745","2":"棄権","3":"棄権"},{"1":"2746","2":"民主","3":"棄権"},{"1":"2747","2":"棄権","3":"棄権"},{"1":"2748","2":"民主","3":"民主"},{"1":"2749","2":"その他","3":"民主"},{"1":"2750","2":"棄権","3":"棄権"},{"1":"2751","2":"民主","3":"共産・社民"},{"1":"2752","2":"民主","3":"棄権"},{"1":"2753","2":"民主","3":"民主"},{"1":"2754","2":"自民","3":"自民"},{"1":"2755","2":"民主","3":"民主"},{"1":"2756","2":"自民","3":"民主"},{"1":"2757","2":"棄権","3":"民主"},{"1":"2758","2":"民主","3":"民主"},{"1":"2759","2":"自民","3":"民主"},{"1":"2760","2":"共産・社民","3":"棄権"},{"1":"2761","2":"民主","3":"民主"},{"1":"2762","2":"その他","3":"その他"},{"1":"2763","2":"棄権","3":"共産・社民"},{"1":"2764","2":"公明","3":"公明"},{"1":"2765","2":"民主","3":"民主"},{"1":"2766","2":"自民","3":"DK"},{"1":"2767","2":"棄権","3":"棄権"},{"1":"2768","2":"自民","3":"自民"},{"1":"2769","2":"公明","3":"公明"},{"1":"2770","2":"自民","3":"自民"},{"1":"2771","2":"DK","3":"自民"},{"1":"2772","2":"民主","3":"自民"},{"1":"2773","2":"民主","3":"民主"},{"1":"2774","2":"民主","3":"民主"},{"1":"2775","2":"自民","3":"自民"},{"1":"2776","2":"棄権","3":"民主"},{"1":"2777","2":"自民","3":"自民"},{"1":"2778","2":"その他","3":"民主"},{"1":"2779","2":"民主","3":"民主"},{"1":"2780","2":"DK","3":"DK"},{"1":"2781","2":"棄権","3":"棄権"},{"1":"2782","2":"DK","3":"棄権"},{"1":"2783","2":"民主","3":"民主"},{"1":"2784","2":"DK","3":"DK"},{"1":"2785","2":"自民","3":"自民"},{"1":"2786","2":"自民","3":"自民"},{"1":"2787","2":"自民","3":"その他"},{"1":"2788","2":"民主","3":"民主"},{"1":"2789","2":"民主","3":"民主"},{"1":"2790","2":"民主","3":"民主"},{"1":"2791","2":"DK","3":"民主"},{"1":"2792","2":"その他","3":"民主"},{"1":"2793","2":"自民","3":"DK"},{"1":"2794","2":"自民","3":"公明"},{"1":"2795","2":"公明","3":"棄権"},{"1":"2796","2":"自民","3":"民主"},{"1":"2797","2":"棄権","3":"民主"},{"1":"2798","2":"民主","3":"民主"},{"1":"2799","2":"自民","3":"民主"},{"1":"2800","2":"民主","3":"民主"},{"1":"2801","2":"共産・社民","3":"共産・社民"},{"1":"2802","2":"棄権","3":"棄権"},{"1":"2803","2":"公明","3":"公明"},{"1":"2804","2":"自民","3":"民主"},{"1":"2805","2":"民主","3":"民主"},{"1":"2806","2":"棄権","3":"棄権"},{"1":"2807","2":"DK","3":"DK"},{"1":"2808","2":"棄権","3":"棄権"},{"1":"2809","2":"公明","3":"民主"},{"1":"2810","2":"その他","3":"民主"},{"1":"2811","2":"自民","3":"自民"},{"1":"2812","2":"公明","3":"公明"},{"1":"2813","2":"棄権","3":"棄権"},{"1":"2814","2":"棄権","3":"棄権"},{"1":"2815","2":"自民","3":"自民"},{"1":"2816","2":"棄権","3":"棄権"},{"1":"2817","2":"民主","3":"民主"},{"1":"2818","2":"共産・社民","3":"共産・社民"},{"1":"2819","2":"その他","3":"民主"},{"1":"2820","2":"棄権","3":"棄権"},{"1":"2821","2":"その他","3":"民主"},{"1":"2822","2":"民主","3":"民主"},{"1":"2823","2":"棄権","3":"棄権"},{"1":"2824","2":"自民","3":"自民"},{"1":"2825","2":"その他","3":"自民"},{"1":"2826","2":"DK","3":"棄権"},{"1":"2827","2":"DK","3":"DK"},{"1":"2828","2":"棄権","3":"棄権"},{"1":"2829","2":"棄権","3":"棄権"},{"1":"2830","2":"その他","3":"民主"},{"1":"2831","2":"民主","3":"民主"},{"1":"2832","2":"民主","3":"民主"},{"1":"2833","2":"自民","3":"棄権"},{"1":"2834","2":"DK","3":"民主"},{"1":"2835","2":"自民","3":"自民"},{"1":"2836","2":"その他","3":"棄権"},{"1":"2837","2":"民主","3":"民主"},{"1":"2838","2":"自民","3":"自民"},{"1":"2839","2":"DK","3":"DK"},{"1":"2840","2":"棄権","3":"棄権"},{"1":"2841","2":"DK","3":"民主"},{"1":"2842","2":"公明","3":"公明"},{"1":"2843","2":"共産・社民","3":"共産・社民"},{"1":"2844","2":"棄権","3":"民主"},{"1":"2845","2":"棄権","3":"棄権"},{"1":"2846","2":"民主","3":"民主"},{"1":"2847","2":"共産・社民","3":"共産・社民"},{"1":"2848","2":"自民","3":"自民"},{"1":"2849","2":"公明","3":"公明"},{"1":"2850","2":"自民","3":"民主"},{"1":"2851","2":"民主","3":"民主"},{"1":"2852","2":"民主","3":"民主"},{"1":"2853","2":"公明","3":"公明"},{"1":"2854","2":"その他","3":"DK"},{"1":"2855","2":"民主","3":"民主"},{"1":"2856","2":"民主","3":"民主"},{"1":"2857","2":"棄権","3":"棄権"},{"1":"2858","2":"DK","3":"棄権"},{"1":"2859","2":"その他","3":"民主"},{"1":"2860","2":"自民","3":"自民"},{"1":"2861","2":"自民","3":"自民"},{"1":"2862","2":"棄権","3":"DK"},{"1":"2863","2":"自民","3":"自民"},{"1":"2864","2":"共産・社民","3":"民主"},{"1":"2865","2":"民主","3":"棄権"},{"1":"2866","2":"民主","3":"民主"},{"1":"2867","2":"民主","3":"民主"},{"1":"2868","2":"民主","3":"民主"},{"1":"2869","2":"DK","3":"棄権"},{"1":"2870","2":"民主","3":"民主"},{"1":"2871","2":"自民","3":"自民"},{"1":"2872","2":"DK","3":"棄権"},{"1":"2873","2":"自民","3":"自民"},{"1":"2874","2":"民主","3":"民主"},{"1":"2875","2":"棄権","3":"棄権"},{"1":"2876","2":"その他","3":"DK"},{"1":"2877","2":"民主","3":"民主"},{"1":"2878","2":"民主","3":"民主"},{"1":"2879","2":"自民","3":"その他"},{"1":"2880","2":"民主","3":"民主"},{"1":"2881","2":"民主","3":"民主"},{"1":"2882","2":"棄権","3":"棄権"},{"1":"2883","2":"公明","3":"公明"},{"1":"2884","2":"民主","3":"民主"},{"1":"2885","2":"公明","3":"公明"},{"1":"2886","2":"民主","3":"民主"},{"1":"2887","2":"民主","3":"棄権"},{"1":"2888","2":"民主","3":"民主"},{"1":"2889","2":"民主","3":"民主"},{"1":"2890","2":"DK","3":"民主"},{"1":"2891","2":"公明","3":"公明"},{"1":"2892","2":"民主","3":"民主"},{"1":"2893","2":"DK","3":"民主"},{"1":"2894","2":"DK","3":"棄権"},{"1":"2895","2":"棄権","3":"棄権"},{"1":"2896","2":"民主","3":"民主"},{"1":"2897","2":"公明","3":"自民"},{"1":"2898","2":"民主","3":"その他"},{"1":"2899","2":"自民","3":"棄権"},{"1":"2900","2":"棄権","3":"棄権"},{"1":"2901","2":"DK","3":"公明"},{"1":"2902","2":"その他","3":"その他"},{"1":"2903","2":"棄権","3":"棄権"},{"1":"2904","2":"自民","3":"自民"},{"1":"2905","2":"民主","3":"民主"},{"1":"2906","2":"その他","3":"民主"},{"1":"2907","2":"民主","3":"民主"},{"1":"2908","2":"棄権","3":"共産・社民"},{"1":"2909","2":"自民","3":"自民"},{"1":"2910","2":"民主","3":"民主"},{"1":"2911","2":"民主","3":"民主"},{"1":"2912","2":"公明","3":"公明"},{"1":"2913","2":"民主","3":"民主"},{"1":"2914","2":"棄権","3":"棄権"},{"1":"2915","2":"民主","3":"民主"},{"1":"2916","2":"民主","3":"民主"},{"1":"2917","2":"DK","3":"自民"},{"1":"2918","2":"自民","3":"自民"},{"1":"2919","2":"自民","3":"自民"},{"1":"2920","2":"共産・社民","3":"棄権"},{"1":"2921","2":"棄権","3":"民主"},{"1":"2922","2":"DK","3":"棄権"},{"1":"2923","2":"その他","3":"DK"},{"1":"2924","2":"DK","3":"DK"},{"1":"2925","2":"民主","3":"民主"},{"1":"2926","2":"民主","3":"民主"},{"1":"2927","2":"自民","3":"自民"},{"1":"2928","2":"その他","3":"民主"},{"1":"2929","2":"自民","3":"自民"},{"1":"2930","2":"その他","3":"民主"},{"1":"2931","2":"自民","3":"自民"},{"1":"2932","2":"民主","3":"民主"},{"1":"2933","2":"DK","3":"民主"},{"1":"2934","2":"民主","3":"棄権"},{"1":"2935","2":"棄権","3":"自民"},{"1":"2936","2":"DK","3":"棄権"},{"1":"2937","2":"DK","3":"自民"},{"1":"2938","2":"民主","3":"民主"},{"1":"2939","2":"民主","3":"民主"},{"1":"2940","2":"民主","3":"その他"},{"1":"2941","2":"DK","3":"DK"},{"1":"2942","2":"公明","3":"公明"},{"1":"2943","2":"その他","3":"その他"},{"1":"2944","2":"自民","3":"民主"},{"1":"2945","2":"民主","3":"DK"},{"1":"2946","2":"公明","3":"公明"},{"1":"2947","2":"棄権","3":"棄権"},{"1":"2948","2":"民主","3":"民主"},{"1":"2949","2":"その他","3":"民主"},{"1":"2950","2":"公明","3":"公明"},{"1":"2951","2":"民主","3":"共産・社民"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<table>
<thead>
<tr class="header">
<th>変数名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ID</code></td>
<td>回答者ID</td>
</tr>
<tr class="even">
<td><code>Vote09</code></td>
<td>2009年衆院選における投票先</td>
</tr>
<tr class="odd">
<td><code>Vote10</code></td>
<td>2010年参院選における投票先</td>
</tr>
</tbody>
</table>
<p>　たとえば、1番目の回答者は2009年に棄権し、2010年も棄権したことを意味する。また、5番目の回答者は2009年に自民党に投票し、2010年は共産党または社民党に投票したことを意味する。続いて、このデータを{ggalluvial}に適した形式のデータに加工します。具体的には「2009年棄権、かつ2010年棄権」、「2009年棄権、かつ2010年自民党投票」、…、「2009年民主党投票、かつ2010年自民党投票」のように全ての組み合わせに対し、該当するケース数を計算する必要があります。今回のデータだと、投票先はいずれも自民、民主、公明、共産・社民、その他、棄権、DK (わからない)の7であるため、49パターンができます。それぞれのパターンに該当するケース数を計算するためには<code>Vote09</code>と<code>Vote10</code>でデータをグループ化し、ケース数を計算します。</p>
<div class="sourceCode" id="cb1558"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1558-1"><a href="visualization4.html#cb1558-1"></a>Vote_0910 <span class="ot">&lt;-</span> Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1558-2"><a href="visualization4.html#cb1558-2"></a>  <span class="fu">group_by</span>(Vote09, Vote10) <span class="sc">%&gt;%</span></span>
<span id="cb1558-3"><a href="visualization4.html#cb1558-3"></a>  <span class="fu">summarise</span>(<span class="at">Freq    =</span> <span class="fu">n</span>(),</span>
<span id="cb1558-4"><a href="visualization4.html#cb1558-4"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb1558-5"><a href="visualization4.html#cb1558-5"></a></span>
<span id="cb1558-6"><a href="visualization4.html#cb1558-6"></a>Vote_0910</span></code></pre></div>
<pre><code>## # A tibble: 47 × 3
##    Vote09 Vote10      Freq
##    &lt;chr&gt;  &lt;chr&gt;      &lt;int&gt;
##  1 DK     DK           111
##  2 DK     その他         8
##  3 DK     公明           7
##  4 DK     共産・社民    15
##  5 DK     棄権          57
##  6 DK     民主         116
##  7 DK     自民          29
##  8 その他 DK            18
##  9 その他 その他        73
## 10 その他 公明           4
## # … with 37 more rows</code></pre>
<p>　2009年の調査で「わからない」と回答し、2010年の調査でも「わからない」と回答した回答者数は111名、2009年の調査で「わからない」と回答し、2010年の調査では「棄権」と回答した回答者数は8名、…といったことが分かりますね。</p>
<p>　続いて、グラフを作成する前に投票先変数 (<code>Vote09</code>と<code>Vote10</code>)をfactor化します。可視化の際、投票先が出力される順番に決まりはありませんが、自民、民主、公明、…、DKの順が自然かと思います。むろん、こちらは自分から見て分かりやいように順番を決めましょう。ただし、2変数における水準 (level)の順番は一致させた方が良いでしょう。</p>
<div class="sourceCode" id="cb1560"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1560-1"><a href="visualization4.html#cb1560-1"></a>Vote_0910 <span class="ot">&lt;-</span> Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1560-2"><a href="visualization4.html#cb1560-2"></a>  <span class="fu">mutate</span>(<span class="at">Vote09 =</span> <span class="fu">factor</span>(Vote09, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;自民&quot;</span>, <span class="st">&quot;民主&quot;</span>, <span class="st">&quot;公明&quot;</span>, <span class="st">&quot;共産・社民&quot;</span>, </span>
<span id="cb1560-3"><a href="visualization4.html#cb1560-3"></a>                                            <span class="st">&quot;その他&quot;</span>, <span class="st">&quot;棄権&quot;</span>, <span class="st">&quot;DK&quot;</span>)),</span>
<span id="cb1560-4"><a href="visualization4.html#cb1560-4"></a>         <span class="at">Vote10 =</span> <span class="fu">factor</span>(Vote10, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;自民&quot;</span>, <span class="st">&quot;民主&quot;</span>, <span class="st">&quot;公明&quot;</span>, <span class="st">&quot;共産・社民&quot;</span>, </span>
<span id="cb1560-5"><a href="visualization4.html#cb1560-5"></a>                                            <span class="st">&quot;その他&quot;</span>, <span class="st">&quot;棄権&quot;</span>, <span class="st">&quot;DK&quot;</span>)))</span></code></pre></div>
<p>　それでは沖積図を描いてみましょう。使用する幾何オブジェクトは<code>geom_alluvium()</code>と<code>geom_stratum()</code>です。必ずこの順番でレイヤーを重ねてください。マッピングは<code>y</code>、<code>axis1</code>、<code>axis2</code>に対し、<code>y</code>には当該パターン内のケース数 (<code>Freq</code>)、<code>axis1</code>は2009年の投票先 (<code>Vote09</code>)、<code>axis2</code>は2010年の投票先 (<code>Vote10</code>)を指定します<a href="#fn91" class="footnote-ref" id="fnref91"><sup>91</sup></a>。これらのマッピングは<code>geom_stratum()</code>と<code>geom_alluvim()</code>共通であるため、<code>ggplot()</code>内でマッピングした方が効率的です。</p>
<div class="sourceCode" id="cb1561"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1561-1"><a href="visualization4.html#cb1561-1"></a>Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1561-2"><a href="visualization4.html#cb1561-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Freq, <span class="at">axis1 =</span> Vote09, <span class="at">axis2 =</span> Vote10)) <span class="sc">+</span></span>
<span id="cb1561-3"><a href="visualization4.html#cb1561-3"></a>    <span class="fu">geom_alluvium</span>() <span class="sc">+</span></span>
<span id="cb1561-4"><a href="visualization4.html#cb1561-4"></a>    <span class="fu">geom_stratum</span>()</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-alluvial6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　何かの図は出てきましたが、これだけだと、それぞれの四角形がどの政党を示しているのかが分かりませんね。四角形内に政党名を出力するためには{ggplot2}内蔵の<code>geom_text()</code>を使用します。マッピング要素は<code>ggplot()</code>内でマッピングしたものに加え、<code>label</code>が必要ですが、ここでは<code>after_stat(stratum)</code>を指定します。そして、<code>aes()</code>のその側に<code>stat = "stratum"</code>を指定するだけです。フォントの指定が必要な場合は<code>family</code>を使います。<code>theme_*()</code>内で<code>base_family</code>を指定した場合でも必要です。</p>
<div class="sourceCode" id="cb1562"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1562-1"><a href="visualization4.html#cb1562-1"></a>Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1562-2"><a href="visualization4.html#cb1562-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Freq, <span class="at">axis1 =</span> Vote09, <span class="at">axis2 =</span> Vote10)) <span class="sc">+</span></span>
<span id="cb1562-3"><a href="visualization4.html#cb1562-3"></a>    <span class="fu">geom_alluvium</span>() <span class="sc">+</span></span>
<span id="cb1562-4"><a href="visualization4.html#cb1562-4"></a>    <span class="fu">geom_stratum</span>() <span class="sc">+</span></span>
<span id="cb1562-5"><a href="visualization4.html#cb1562-5"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), </span>
<span id="cb1562-6"><a href="visualization4.html#cb1562-6"></a>              <span class="at">stat =</span> <span class="st">&quot;stratum&quot;</span>, <span class="at">family =</span> <span class="st">&quot;HiraginoSans-W3&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-alluvial7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これで沖積図はとりあえず完成ですが、少し読みやすく加工してみましょう。たとえば、2010年に民主党に投票した回答者において2009年の投票先の割合を見たいとした場合、<code>geom_alluvium()</code>内に<code>fill = Vote09</code>をマッピングします。これで帯に2009年の投票先ごとの色付けができます。</p>
<div class="sourceCode" id="cb1563"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1563-1"><a href="visualization4.html#cb1563-1"></a>Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1563-2"><a href="visualization4.html#cb1563-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Freq, <span class="at">axis1 =</span> Vote09, <span class="at">axis2 =</span> Vote10)) <span class="sc">+</span></span>
<span id="cb1563-3"><a href="visualization4.html#cb1563-3"></a>    <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Vote09)) <span class="sc">+</span></span>
<span id="cb1563-4"><a href="visualization4.html#cb1563-4"></a>    <span class="fu">geom_stratum</span>() <span class="sc">+</span></span>
<span id="cb1563-5"><a href="visualization4.html#cb1563-5"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), </span>
<span id="cb1563-6"><a href="visualization4.html#cb1563-6"></a>              <span class="at">stat =</span> <span class="st">&quot;stratum&quot;</span>, <span class="at">family =</span> <span class="st">&quot;HiraginoSans-W3&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-alluvial8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　<code>fill = Vote10</code>とマッピングした場合は、感覚が変わります。実際にやってみましょう。</p>
<div class="sourceCode" id="cb1564"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1564-1"><a href="visualization4.html#cb1564-1"></a>Alluvial_Plot <span class="ot">&lt;-</span> Vote_0910 <span class="sc">%&gt;%</span></span>
<span id="cb1564-2"><a href="visualization4.html#cb1564-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Freq, <span class="at">axis1 =</span> Vote09, <span class="at">axis2 =</span> Vote10)) <span class="sc">+</span></span>
<span id="cb1564-3"><a href="visualization4.html#cb1564-3"></a>    <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Vote10)) <span class="sc">+</span></span>
<span id="cb1564-4"><a href="visualization4.html#cb1564-4"></a>    <span class="fu">geom_stratum</span>() <span class="sc">+</span></span>
<span id="cb1564-5"><a href="visualization4.html#cb1564-5"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), </span>
<span id="cb1564-6"><a href="visualization4.html#cb1564-6"></a>              <span class="at">stat =</span> <span class="st">&quot;stratum&quot;</span>, <span class="at">family =</span> <span class="st">&quot;HiraginoSans-W3&quot;</span>)</span>
<span id="cb1564-7"><a href="visualization4.html#cb1564-7"></a></span>
<span id="cb1564-8"><a href="visualization4.html#cb1564-8"></a>Alluvial_Plot</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-alluvial9-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　この場合、2009年に民主党に投票した人が2010年にどこに流れたかが分かりやすくなります。<code>Vote09</code>に色分けするか、<code>Vote10</code>に色分けするかは作成する人が決める問題であり、自分の主張・メッセージに適したマッピングをしましょう。</p>
<p>　最後に、図をもう少し加工してみましょう。まず、横軸に0.8、1.2、1.6、2.0となっている目盛りを修正し、1と2の箇所に「2009年衆院選」と「2010年参院選」を出力します。これは<code>scale_x_continuous()</code>で調整可能です。そして、<code>theme_minimal()</code>で余計なものを排除したテーマを適用します。最後に<code>theme()</code>内で全ての凡例を削除 (<code>legend.position = "none"</code>)し、パネルのグリッド (<code>panel.grid</code>)と縦軸・横軸のタイトル (<code>axis.title</code>)、縦軸の目盛りラベル (<code>axis.text.y</code>)を削除 (<code>element_blank()</code>)します。</p>
<div class="sourceCode" id="cb1565"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1565-1"><a href="visualization4.html#cb1565-1"></a>Alluvial_Plot <span class="sc">+</span></span>
<span id="cb1565-2"><a href="visualization4.html#cb1565-2"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, </span>
<span id="cb1565-3"><a href="visualization4.html#cb1565-3"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;2009年衆院選&quot;</span>, <span class="st">&quot;2010年参院選&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1565-4"><a href="visualization4.html#cb1565-4"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraginoSans-W3&quot;</span>,</span>
<span id="cb1565-5"><a href="visualization4.html#cb1565-5"></a>                  <span class="at">base_size   =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb1565-6"><a href="visualization4.html#cb1565-6"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb1565-7"><a href="visualization4.html#cb1565-7"></a>          <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1565-8"><a href="visualization4.html#cb1565-8"></a>          <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1565-9"><a href="visualization4.html#cb1565-9"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-alluvial10-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これでだいぶスッキリした沖積図が出来上がりました。</p>
<hr />
</div>
<div id="visual4-tree" class="section level2" number="20.14">
<h2><span class="header-section-number">20.14</span> ツリーマップ</h2>
<p>　ツリーマップ（tree map）は変数の値の大きさを長方形の面積として表すグラフです。全体におけるシェアを示す時に使う点で、円グラフの代替案の一つになります。円グラフは項目が多すぎると読みにくいデメリットがありますが、ツリーマップは項目が多い場合でも有効です。むろん、多すぎると読みにくいことは同じですので、注意が必要です。</p>
<p>　ツリーマップを作成するためには{treemapify}パッケージの<code>geom_treemap()</code>幾何オブジェクトを使用します。まず、{treemapify}をインストールし、読み込みます。</p>
<div class="sourceCode" id="cb1566"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1566-1"><a href="visualization4.html#cb1566-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(treemapify)</span></code></pre></div>
<p>　ここでは<code>Country_df</code>からアジア諸国の人口（<code>Population</code>）をツリーマップをして可視化したいと思います。<code>geom_treemap()</code>の場合、各長方形は面積の情報のみを持ちます。この面積の情報を<code>area</code>にマッピングします。</p>
<div class="sourceCode" id="cb1567"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1567-1"><a href="visualization4.html#cb1567-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1567-2"><a href="visualization4.html#cb1567-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1567-3"><a href="visualization4.html#cb1567-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1567-4"><a href="visualization4.html#cb1567-4"></a>  <span class="fu">geom_treemap</span>(<span class="fu">aes</span>(<span class="at">area =</span> Population))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これだけだと各長方形がどの国を指しているのかが分かりませんね。長方形の上に国名（<code>Country</code>）を追加するためには<code>geom_treemap_text()</code>幾何オブジェクトを使用します。マッピングは<code>area</code>と<code>label</code>に対し、それぞれ面積を表す<code>Population</code>と国名を表す<code>Country</code>を指定します。<code>area</code>は<code>geom_treemap()</code>と<code>geom_treemap_text()</code>両方で使われるので<code>ggplot()</code>の内部でマッピングしても問題ありません<a href="#fn92" class="footnote-ref" id="fnref92"><sup>92</sup></a>。また、<code>aes()</code>の外側に<code>color = "white"</code>で文字を白に指定し、<code>place = "center"</code>で長方形の真ん中にラベルが付くようにします。</p>
<div class="sourceCode" id="cb1568"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1568-1"><a href="visualization4.html#cb1568-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1568-2"><a href="visualization4.html#cb1568-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1568-3"><a href="visualization4.html#cb1568-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> Population)) <span class="sc">+</span></span>
<span id="cb1568-4"><a href="visualization4.html#cb1568-4"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb1568-5"><a href="visualization4.html#cb1568-5"></a>  <span class="fu">geom_treemap_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">place =</span> <span class="st">&quot;center&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　これでツリーマップが完成しました。インドと中国の存在感がかなり大きいですね。更にラベルのサイズを長方形に合わせると、その存在感をより高めることができます。ラベルの大きさを長方形に合わせるには<code>geom_treepmap_text()</code>の内部に<code>grow = TRUE</code>を指定します。</p>
<div class="sourceCode" id="cb1569"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1569-1"><a href="visualization4.html#cb1569-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1569-2"><a href="visualization4.html#cb1569-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1569-3"><a href="visualization4.html#cb1569-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> Population, <span class="at">label =</span> Country)) <span class="sc">+</span></span>
<span id="cb1569-4"><a href="visualization4.html#cb1569-4"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb1569-5"><a href="visualization4.html#cb1569-5"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">place =</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb1569-6"><a href="visualization4.html#cb1569-6"></a>                    <span class="at">grow =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ここで更に次元を追加するために、色塗りをしてみましょう。たとえば、G20加盟国か否かで色分けをしたい場合、<code>fill</code>に<code>G20</code>をマッピングします。ただし、今のままだと<code>G20</code>は連続変数扱いになりますので、character型、またはfactor型に変換します。</p>
<div class="sourceCode" id="cb1570"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1570-1"><a href="visualization4.html#cb1570-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1570-2"><a href="visualization4.html#cb1570-2"></a>  <span class="fu">mutate</span>(<span class="at">G20 =</span> <span class="fu">if_else</span>(G20 <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;Member&quot;</span>, <span class="st">&quot;Non-member&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1570-3"><a href="visualization4.html#cb1570-3"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1570-4"><a href="visualization4.html#cb1570-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> Population, <span class="at">fill =</span> G20,</span>
<span id="cb1570-5"><a href="visualization4.html#cb1570-5"></a>             <span class="at">label =</span> Country)) <span class="sc">+</span></span>
<span id="cb1570-6"><a href="visualization4.html#cb1570-6"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb1570-7"><a href="visualization4.html#cb1570-7"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">place =</span> <span class="st">&quot;centre&quot;</span>,</span>
<span id="cb1570-8"><a href="visualization4.html#cb1570-8"></a>                    <span class="at">grow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1570-9"><a href="visualization4.html#cb1570-9"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;G20&quot;</span>) <span class="sc">+</span></span>
<span id="cb1570-10"><a href="visualization4.html#cb1570-10"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Population in Asia&quot;</span>) <span class="sc">+</span></span>
<span id="cb1570-11"><a href="visualization4.html#cb1570-11"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　色塗りは連続変数に対して行うことも可能です。ここでは2018年人間開発指数（<code>HDI_2108</code>）の値に応じて色塗りをしてみます。また、<code>HDI_2018</code>が低い（<code>low</code>）と<span style="color:#CD3333;"><strong>brown3</strong></span>、高い（<code>high</code>）と<span style="color:#6495ED;"><strong>cornflowerblue</strong></span>色にします。真ん中の値（<code>midpoint</code>）は0.7とし、色（<code>mid</code>）は<span style="color:#FFF8DC;background-color:#7F7F7F;"><strong>cornsilk</strong></span>を使います。</p>
<p>　連続変数でマッピングされた色塗り（<code>fill</code>）の調整には<code>scale_fill_gradient()</code>、または<code>scale_fill_gradient2()</code>を使います。前者は中間点なし、後者は中間点ありです。これらの使い方は第<a href="visualization3.html#visualization3">19</a>章で紹介しました<code>scale_color_gradient()</code>と同じです。</p>
<div class="sourceCode" id="cb1571"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1571-1"><a href="visualization4.html#cb1571-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1571-2"><a href="visualization4.html#cb1571-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1571-3"><a href="visualization4.html#cb1571-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> Population, <span class="at">fill =</span> HDI_2018,</span>
<span id="cb1571-4"><a href="visualization4.html#cb1571-4"></a>             <span class="at">label =</span> Country)) <span class="sc">+</span></span>
<span id="cb1571-5"><a href="visualization4.html#cb1571-5"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb1571-6"><a href="visualization4.html#cb1571-6"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">place =</span> <span class="st">&quot;centre&quot;</span>,</span>
<span id="cb1571-7"><a href="visualization4.html#cb1571-7"></a>                    <span class="at">grow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1571-8"><a href="visualization4.html#cb1571-8"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;brown3&quot;</span>,</span>
<span id="cb1571-9"><a href="visualization4.html#cb1571-9"></a>                       <span class="at">mid =</span> <span class="st">&quot;cornsilk&quot;</span>,</span>
<span id="cb1571-10"><a href="visualization4.html#cb1571-10"></a>                       <span class="at">high =</span> <span class="st">&quot;cornflowerblue&quot;</span>,</span>
<span id="cb1571-11"><a href="visualization4.html#cb1571-11"></a>                       <span class="at">midpoint =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb1571-12"><a href="visualization4.html#cb1571-12"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;UN Human Development Index (2018)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1571-13"><a href="visualization4.html#cb1571-13"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Population in Asia&quot;</span>) <span class="sc">+</span></span>
<span id="cb1571-14"><a href="visualization4.html#cb1571-14"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ちなみに以上の図を円グラフにすると以下のようになります（国名は人口の割合が2.5%を超える国のみ表示）。ツリーマップと比較してかなり読みにくいことが分かります。</p>
<div class="sourceCode" id="cb1572"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1572-1"><a href="visualization4.html#cb1572-1"></a>Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1572-2"><a href="visualization4.html#cb1572-2"></a>  <span class="fu">filter</span>(Continent <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1572-3"><a href="visualization4.html#cb1572-3"></a>  <span class="fu">arrange</span>(Population) <span class="sc">%&gt;%</span></span>
<span id="cb1572-4"><a href="visualization4.html#cb1572-4"></a>  <span class="fu">mutate</span>(<span class="at">Prop        =</span> Population <span class="sc">/</span> <span class="fu">sum</span>(Population) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb1572-5"><a href="visualization4.html#cb1572-5"></a>         <span class="at">LabelY      =</span> <span class="dv">100</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(Prop) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> Prop),</span>
<span id="cb1572-6"><a href="visualization4.html#cb1572-6"></a>         <span class="at">CountryName =</span> <span class="fu">if_else</span>(Prop <span class="sc">&lt;</span> <span class="fl">2.5</span>, <span class="st">&quot;&quot;</span>, Country),</span>
<span id="cb1572-7"><a href="visualization4.html#cb1572-7"></a>         <span class="at">Country     =</span> <span class="fu">fct_inorder</span>(Country)) <span class="sc">%&gt;%</span></span>
<span id="cb1572-8"><a href="visualization4.html#cb1572-8"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1572-9"><a href="visualization4.html#cb1572-9"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> Prop, <span class="at">group =</span> Country, <span class="at">fill =</span> HDI_2018), </span>
<span id="cb1572-10"><a href="visualization4.html#cb1572-10"></a>           <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1572-11"><a href="visualization4.html#cb1572-11"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> LabelY, <span class="at">label =</span> CountryName)) <span class="sc">+</span></span>
<span id="cb1572-12"><a href="visualization4.html#cb1572-12"></a>  <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb1572-13"><a href="visualization4.html#cb1572-13"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;brown3&quot;</span>,</span>
<span id="cb1572-14"><a href="visualization4.html#cb1572-14"></a>                       <span class="at">mid =</span> <span class="st">&quot;cornsilk&quot;</span>,</span>
<span id="cb1572-15"><a href="visualization4.html#cb1572-15"></a>                       <span class="at">high =</span> <span class="st">&quot;cornflowerblue&quot;</span>,</span>
<span id="cb1572-16"><a href="visualization4.html#cb1572-16"></a>                       <span class="at">midpoint =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb1572-17"><a href="visualization4.html#cb1572-17"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;UN Human Development Index (2018)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1572-18"><a href="visualization4.html#cb1572-18"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Population in Asia&quot;</span>) <span class="sc">+</span></span>
<span id="cb1572-19"><a href="visualization4.html#cb1572-19"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1572-20"><a href="visualization4.html#cb1572-20"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb1572-21"><a href="visualization4.html#cb1572-21"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1572-22"><a href="visualization4.html#cb1572-22"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1572-23"><a href="visualization4.html#cb1572-23"></a>        <span class="at">axis.text  =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-tree7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>　ただし、ツリーマップが必ずしも円グラフより優れているとは言えません。たとえば、 <span class="citation"><a href="#ref-Heer_Bostock:2010" role="doc-biblioref">Heer and Bostock</a> (<a href="#ref-Heer_Bostock:2010" role="doc-biblioref">2010</a>)</span> の研究では円グラフとツリーマップを含む9種類のグラフを用い、被験者に大小関係を判断してもらう実験を行いましたが、ツリーマップ（四角形の面積）は円グラフ（角度）よりも判断までの所要時間が長いことが述べています。</p>
<hr />
</div>
<div id="visual4-mosaic" class="section level2" number="20.15">
<h2><span class="header-section-number">20.15</span> モザイクプロット</h2>
<p>モザイクプロットは2つの離散変数（おもに名目変数）の関係を可視化するために <span class="citation"><a href="#ref-Hargian_Kleiner:1984" role="doc-biblioref">Hartigan and Kleiner</a> (<a href="#ref-Hargian_Kleiner:1984" role="doc-biblioref">1984</a>)</span> が考案した図です。2つの名目変数間の関係を見る際によく使われるものはクロス表（クロス集計表）でしょう。</p>
<div class="sourceCode" id="cb1573"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1573-1"><a href="visualization4.html#cb1573-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(ggmosaic)</span></code></pre></div>
<div class="sourceCode" id="cb1574"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1574-1"><a href="visualization4.html#cb1574-1"></a>Mosaic_df <span class="ot">&lt;-</span> Country_df <span class="sc">%&gt;%</span></span>
<span id="cb1574-2"><a href="visualization4.html#cb1574-2"></a>    <span class="fu">select</span>(Country, Continent, <span class="at">Polity =</span> Polity_Type, <span class="at">PPP =</span> PPP_per_capita) <span class="sc">%&gt;%</span></span>
<span id="cb1574-3"><a href="visualization4.html#cb1574-3"></a>    <span class="fu">mutate</span>(<span class="at">Continent =</span> <span class="fu">factor</span>(Continent, </span>
<span id="cb1574-4"><a href="visualization4.html#cb1574-4"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Africa&quot;</span>, <span class="st">&quot;America&quot;</span>, <span class="st">&quot;Asia&quot;</span>,</span>
<span id="cb1574-5"><a href="visualization4.html#cb1574-5"></a>                                         <span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Oceania&quot;</span>)),</span>
<span id="cb1574-6"><a href="visualization4.html#cb1574-6"></a>           <span class="at">Polity    =</span> <span class="fu">factor</span>(Polity,</span>
<span id="cb1574-7"><a href="visualization4.html#cb1574-7"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Autocracy&quot;</span>, <span class="st">&quot;Closed Anocracy&quot;</span>,</span>
<span id="cb1574-8"><a href="visualization4.html#cb1574-8"></a>                                         <span class="st">&quot;Open Anocracy&quot;</span>, <span class="st">&quot;Democracy&quot;</span>,</span>
<span id="cb1574-9"><a href="visualization4.html#cb1574-9"></a>                                         <span class="st">&quot;Full Democracy&quot;</span>)),</span>
<span id="cb1574-10"><a href="visualization4.html#cb1574-10"></a>           <span class="at">PPP       =</span> <span class="fu">if_else</span>(PPP <span class="sc">&gt;=</span> <span class="dv">15000</span>, <span class="st">&quot;High PPP&quot;</span>, <span class="st">&quot;Low PPP&quot;</span>),</span>
<span id="cb1574-11"><a href="visualization4.html#cb1574-11"></a>           <span class="at">PPP       =</span> <span class="fu">factor</span>(PPP, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Low PPP&quot;</span>, <span class="st">&quot;High PPP&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1574-12"><a href="visualization4.html#cb1574-12"></a>    <span class="fu">drop_na</span>()</span></code></pre></div>
<div class="sourceCode" id="cb1575"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1575-1"><a href="visualization4.html#cb1575-1"></a><span class="fu">head</span>(Mosaic_df)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Country     Continent Polity          PPP     
##   &lt;chr&gt;       &lt;fct&gt;     &lt;fct&gt;           &lt;fct&gt;   
## 1 Afghanistan Asia      Closed Anocracy Low PPP 
## 2 Albania     Europe    Democracy       Low PPP 
## 3 Algeria     Africa    Open Anocracy   Low PPP 
## 4 Angola      Africa    Closed Anocracy Low PPP 
## 5 Argentina   America   Democracy       High PPP
## 6 Armenia     Europe    Democracy       Low PPP</code></pre>
<p>　クロス表を作成する内蔵関数としては<code>table()</code>があります。2つの変数が必要となり、第一引数が行、第二引数が列を表します。</p>
<div class="sourceCode" id="cb1577"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1577-1"><a href="visualization4.html#cb1577-1"></a>Mosaic_Tab <span class="ot">&lt;-</span> <span class="fu">table</span>(Mosaic_df<span class="sc">$</span>Continent, Mosaic_df<span class="sc">$</span>Polity)</span>
<span id="cb1577-2"><a href="visualization4.html#cb1577-2"></a>Mosaic_Tab</span></code></pre></div>
<pre><code>##          
##           Autocracy Closed Anocracy Open Anocracy Democracy Full Democracy
##   Africa          3              14            11        18              1
##   America         0               1             4        16              5
##   Asia           13               6             0        15              3
##   Europe          2               1             2        16             20
##   Oceania         0               0             2         0              2</code></pre>
<p>　この<code>Mosaic_Tab</code>のクラスは<code>"table"</code>ですが、<code>"table"</code>クラスのオブジェクトを<code>plot()</code>に渡すと別途のパッケージを使わずモザイクプロットを作成することができます。</p>
<div class="sourceCode" id="cb1579"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1579-1"><a href="visualization4.html#cb1579-1"></a><span class="fu">plot</span>(Mosaic_Tab)</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic6-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>　やや地味ではありますが、モザイクプロットが出来ました。ここからはより読みやすいモザイクプロットを作成するために{ggmosaic}パッケージの<code>geom_mosaic()</code>関数を使います。</p>
<p>　<code>geom_mosaic()</code>の場合、<code>x</code>のみのマッピングで十分です。ただし、特定の変数を指定するのではなく、<code>product(変数1, 変数2)</code>を<code>x</code>にマッピングする必要があります。<code>table()</code>関数同様、変数1は行、変数2は列です。また、欠損値が含まれている行がある場合は、<code>aes()</code>の外側に<code>na.rm = TRUE</code>を指定する必要があります。今回は<code>drop_na()</code>で欠損値をすべて除外しましたが、念の為に指定しておきます。</p>
<div class="sourceCode" id="cb1580"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1580-1"><a href="visualization4.html#cb1580-1"></a>Mosaic_df <span class="sc">%&gt;%</span></span>
<span id="cb1580-2"><a href="visualization4.html#cb1580-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1580-3"><a href="visualization4.html#cb1580-3"></a>    <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(Polity, Continent)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1580-4"><a href="visualization4.html#cb1580-4"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Polity Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb1580-5"><a href="visualization4.html#cb1580-5"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1580-6"><a href="visualization4.html#cb1580-6"></a>    <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic7-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>　これで出来上がりですが、<code>"table"</code>オブジェクトを<code>plot()</code>に渡した結果とあまり変わらないですね。続いて、この図を少し改良してみましょう。まずはセルの色分けですが、これは<code>fill</code>に色分けする変数をマッピングするだけです。今回は政治体制ごとにセルを色分けしましょう。また、文字を大きめにし、横軸の目盛りラベルを回転します。</p>
<div class="sourceCode" id="cb1581"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1581-1"><a href="visualization4.html#cb1581-1"></a>Mosaic_df <span class="sc">%&gt;%</span></span>
<span id="cb1581-2"><a href="visualization4.html#cb1581-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1581-3"><a href="visualization4.html#cb1581-3"></a>    <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(Polity, Continent), <span class="at">fill =</span> Polity), </span>
<span id="cb1581-4"><a href="visualization4.html#cb1581-4"></a>                <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1581-5"><a href="visualization4.html#cb1581-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Polity Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb1581-6"><a href="visualization4.html#cb1581-6"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size   =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb1581-7"><a href="visualization4.html#cb1581-7"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb1581-8"><a href="visualization4.html#cb1581-8"></a>          <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1581-9"><a href="visualization4.html#cb1581-9"></a>          <span class="at">axis.text.x     =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic8-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>　次元を追加するためにはファセット分割を使います。たとえば、一人当たりPPP GDPの高低（<code>PPP</code>）でファセットを分割する場合、<code>facet_wrap(~PPP)</code>レイヤーを足すだけです。</p>
<div class="sourceCode" id="cb1582"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1582-1"><a href="visualization4.html#cb1582-1"></a>Mosaic_df <span class="sc">%&gt;%</span></span>
<span id="cb1582-2"><a href="visualization4.html#cb1582-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1582-3"><a href="visualization4.html#cb1582-3"></a>    <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(Polity, Continent), <span class="at">fill =</span> Polity), </span>
<span id="cb1582-4"><a href="visualization4.html#cb1582-4"></a>                <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1582-5"><a href="visualization4.html#cb1582-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Polity Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb1582-6"><a href="visualization4.html#cb1582-6"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>PPP, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1582-7"><a href="visualization4.html#cb1582-7"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size   =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb1582-8"><a href="visualization4.html#cb1582-8"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb1582-9"><a href="visualization4.html#cb1582-9"></a>          <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1582-10"><a href="visualization4.html#cb1582-10"></a>          <span class="at">axis.text.x     =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic9-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>　ただし、一つ問題があります。それは目盛りラベルの位置です。例えば、右側の横軸目盛りラベルの場合、セルの位置とラベルの位置がずれています。これは2つのファセットが同じ目盛りを共有し、左側の方に合わせられたため生じるものです。よく見ると横軸も縦軸も目盛りラベルに位置が同じであることが分かります。これを解消するためには、<code>facet_wrap()</code>の内部に<code>scale = "free"</code>を指定します<a href="#fn93" class="footnote-ref" id="fnref93"><sup>93</sup></a>。これは各ファセットが独自のスケールを有することを意味します。</p>
<div class="sourceCode" id="cb1583"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1583-1"><a href="visualization4.html#cb1583-1"></a>Mosaic_df <span class="sc">%&gt;%</span></span>
<span id="cb1583-2"><a href="visualization4.html#cb1583-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1583-3"><a href="visualization4.html#cb1583-3"></a>    <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(Polity, Continent), <span class="at">fill =</span> Polity), </span>
<span id="cb1583-4"><a href="visualization4.html#cb1583-4"></a>                <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1583-5"><a href="visualization4.html#cb1583-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Polity Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb1583-6"><a href="visualization4.html#cb1583-6"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>PPP, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb1583-7"><a href="visualization4.html#cb1583-7"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size   =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb1583-8"><a href="visualization4.html#cb1583-8"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb1583-9"><a href="visualization4.html#cb1583-9"></a>          <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1583-10"><a href="visualization4.html#cb1583-10"></a>          <span class="at">axis.text.x     =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic10-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>　右側ファセットの横軸ラベルが重なってしまいましたが、これでとりあえず完成です。アフリカにおけるOpen AnocracyとClosed Anocracyの頻度が0であるため、これは仕方ありません。一つの対処方法としては以下のように縦軸目盛りを削除し、凡例で代替することが考えられます。</p>
<div class="sourceCode" id="cb1584"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1584-1"><a href="visualization4.html#cb1584-1"></a>Mosaic_df <span class="sc">%&gt;%</span></span>
<span id="cb1584-2"><a href="visualization4.html#cb1584-2"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1584-3"><a href="visualization4.html#cb1584-3"></a>    <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(Polity, Continent), <span class="at">fill =</span> Polity), </span>
<span id="cb1584-4"><a href="visualization4.html#cb1584-4"></a>                <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1584-5"><a href="visualization4.html#cb1584-5"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Polity Type&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Polity Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb1584-6"><a href="visualization4.html#cb1584-6"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>PPP, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="st">&quot;free_x&quot;</span>) <span class="sc">+</span></span>
<span id="cb1584-7"><a href="visualization4.html#cb1584-7"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size   =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb1584-8"><a href="visualization4.html#cb1584-8"></a>    <span class="fu">theme</span>(<span class="at">panel.grid  =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1584-9"><a href="visualization4.html#cb1584-9"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1584-10"><a href="visualization4.html#cb1584-10"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R_Not_for_Everyone_files/figure-html/visual4-mosaic11-1.png" width="864" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="visual4-further" class="section level2" number="20.16">
<h2><span class="header-section-number">20.16</span> その他のグラフ</h2>
<p><a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a>では本書で紹介できなかった様々な図のサンプルおよびコードを見ることができます。ここまで読み終わった方なら問題なくコードの意味が理解できるでしょう。{ggplot2}では作成できないグラフ（アニメーションや3次元図、インタラクティブなグラフ）についても、他のパッケージを利用した作成方法について紹介されているので、「こんな図が作りたいけど、作り方が分からん！」の時には、まず<a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a>に目を通してみましょう。</p>

</div>
</div>
<h3> 参考資料</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Hargian_Kleiner:1984" class="csl-entry">
Hartigan, J. A., and Beat Kleiner. 1984. <span>“A Mosaic of Television Ratings.”</span> <em>The American Statistician</em> 38: 32–35.
</div>
<div id="ref-Heer_Bostock:2010" class="csl-entry">
Heer, Jeffrey, and Michael Bostock. 2010. <span>“Crowdsourcing Graphical Perception: Using Mechanical Turk to Assess Visualization Design.”</span> <em>Proceedings of the SIGCHI Conference on Human Factors in Computing Systems</em>.
</div>
<div id="ref-Nakazawa:2014" class="csl-entry">
中澤渉. 2014. <span>“政党支持と政治意識の変動―個人間の差異と個人内変動の関係.”</span> <em>東京大学社会科学研究所パネル調査プロジェクトディスカッションペーパーシリーズ</em> 81.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="89">
<li id="fn89"><p>最後の<code>_c</code>はマッピングする変数（ここでは<code>HDI_2018</code>）が連続変数（<strong>c</strong>ontinuous）であることを意味します。<a href="visualization4.html#fnref89" class="footnote-back">↩︎</a></p></li>
<li id="fn90"><p>これから登場する<code>geom_bump()</code>幾何オブジェクトが使えるようになります。{ggbump}を使用せず、{ggplot2}が提供する<code>geom_line()</code>でも代替可能です。<code>geom_line()</code>の場合、直線で順位の変化が表示され、<code>geom_bump()</code>の場合は曲線で表示されます。丸い感じの図を好まない方なら、{ggbump}を読み込まず、<code>geom_bump()</code>を<code>geom_line()</code>に書き換えてください。<a href="visualization4.html#fnref90" class="footnote-back">↩︎</a></p></li>
<li id="fn91"><p>今回は2期間の変化を示していますが、3期以上の場合、<code>axis3</code>、<code>axis4</code>、…と追加してください。<a href="visualization4.html#fnref91" class="footnote-back">↩︎</a></p></li>
<li id="fn92"><p>今回の例だと、<code>label</code>も<code>ggplot()</code>内部でマッピング可能です。<a href="visualization4.html#fnref92" class="footnote-back">↩︎</a></p></li>
<li id="fn93"><p>他にも<strong>縦</strong>軸のみ共有する<code>"free_x"</code>、横軸のみ共有する<code>"free_y"</code>があり、既定値は<code>"fixed"</code>です。<a href="visualization4.html#fnref93" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualization3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="datahandling3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R_Not_for_Everyone.pdf", "R_Not_for_Everyone.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
