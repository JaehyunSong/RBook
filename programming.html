<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11. Rプログラミングの基礎 | 私たちのR: ベストプラクティスの探究</title>
  <meta name="description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="11. Rプログラミングの基礎 | 私たちのR: ベストプラクティスの探究" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Not for Everyone: An Esoteric Guide." />
  <meta name="github-repo" content="JaehyunSong/RBook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11. Rプログラミングの基礎 | 私たちのR: ベストプラクティスの探究" />
  
  <meta name="twitter:description" content="R Not for Everyone: An Esoteric Guide." />
  

<meta name="author" content="宋財泫 (Jaehyun Song)・矢内勇生 (Yuki Yanai)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="HTML/apple-favicon.png" />
  <link rel="shortcut icon" href="HTML/favicon.png" type="image/x-icon" />
<link rel="prev" href="datastructure.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165592410-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-165592410-1');
  gtag('set', {'user_id': 'USER_ID'}); 
</script>

<meta name="google-site-verification" content="QJouPRaPKBPU1jDp6VaBuFbVV5imTI-Aazl_ScJwVgU" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="HTML/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">私たちのR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 紹介</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#progress"><i class="fa fa-check"></i><b>1.1</b> 進捗状況</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> 本書の目的と対象</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-author"><i class="fa fa-check"></i><b>1.3</b> 著者紹介</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-download"><i class="fa fa-check"></i><b>1.4</b> データのダウンロード</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#about-howtoread"><i class="fa fa-check"></i><b>1.5</b> 本書における表記法</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#about-copyright"><i class="fa fa-check"></i><b>1.6</b> 著作権</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aboutR.html"><a href="aboutR.html"><i class="fa fa-check"></i><b>2</b> R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="aboutR.html"><a href="aboutR.html#WhatIsR"><i class="fa fa-check"></i><b>2.1</b> Rとは</a></li>
<li class="chapter" data-level="2.2" data-path="aboutR.html"><a href="aboutR.html#WhyR"><i class="fa fa-check"></i><b>2.2</b> Why R?</a></li>
<li class="chapter" data-level="2.3" data-path="aboutR.html"><a href="aboutR.html#GUI_IDE"><i class="fa fa-check"></i><b>2.3</b> GUIとIDE</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="aboutR.html"><a href="aboutR.html#gui"><i class="fa fa-check"></i><b>2.3.1</b> GUI</a></li>
<li class="chapter" data-level="2.3.2" data-path="aboutR.html"><a href="aboutR.html#aboutR-IDE"><i class="fa fa-check"></i><b>2.3.2</b> IDE</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Rのインストール</a>
<ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#install-package"><i class="fa fa-check"></i><b>3.1</b> パッケージのインストール</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="installation.html"><a href="installation.html#パッケージのインストール"><i class="fa fa-check"></i><b>3.1.1</b> パッケージのインストール</a></li>
<li class="chapter" data-level="3.1.2" data-path="installation.html"><a href="installation.html#パッケージの読み込み"><i class="fa fa-check"></i><b>3.1.2</b> パッケージの読み込み</a></li>
<li class="chapter" data-level="3.1.3" data-path="installation.html"><a href="installation.html#必須パッケージのインストール"><i class="fa fa-check"></i><b>3.1.3</b> 必須パッケージのインストール</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ide.html"><a href="ide.html"><i class="fa fa-check"></i><b>4</b> IDEの導入</a></li>
<li class="chapter" data-level="5" data-path="R-Customize.html"><a href="R-Customize.html"><i class="fa fa-check"></i><b>5</b> 分析環境のカスタマイズ</a>
<ul>
<li class="chapter" data-level="5.1" data-path="R-Customize.html"><a href="R-Customize.html#Customize-rprofile"><i class="fa fa-check"></i><b>5.1</b> .Rprofileの設定</a></li>
<li class="chapter" data-level="5.2" data-path="R-Customize.html"><a href="R-Customize.html#Customize-rstudio"><i class="fa fa-check"></i><b>5.2</b> RStudioのカスタマイズ</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="process.html"><a href="process.html"><i class="fa fa-check"></i><b>6</b> 分析の手順</a></li>
<li class="chapter" data-level="7" data-path="rbasic.html"><a href="rbasic.html"><i class="fa fa-check"></i><b>7</b> 基本的な操作</a>
<ul>
<li class="chapter" data-level="" data-path="rbasic.html"><a href="rbasic.html#目次"><i class="fa fa-check"></i>目次</a></li>
<li class="chapter" data-level="7.1" data-path="rbasic.html"><a href="rbasic.html#rbasic-compbasic"><i class="fa fa-check"></i><b>7.1</b> コンピュータの基礎知識</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rbasic.html"><a href="rbasic.html#ファイル名"><i class="fa fa-check"></i><b>7.1.1</b> ファイル名</a></li>
<li class="chapter" data-level="7.1.2" data-path="rbasic.html"><a href="rbasic.html#ファイルシステムとパス"><i class="fa fa-check"></i><b>7.1.2</b> ファイルシステムとパス</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rbasic.html"><a href="rbasic.html#rbasic-project"><i class="fa fa-check"></i><b>7.2</b> 「プロジェクト」のすゝめ</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rbasic.html"><a href="rbasic.html#プロジェクト"><i class="fa fa-check"></i><b>7.2.1</b> プロジェクト</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rbasic.html"><a href="rbasic.html#rbasic-calc"><i class="fa fa-check"></i><b>7.3</b> 電卓としてのR</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="rbasic.html"><a href="rbasic.html#算術演算子"><i class="fa fa-check"></i><b>7.3.1</b> 算術演算子</a></li>
<li class="chapter" data-level="7.3.2" data-path="rbasic.html"><a href="rbasic.html#論理演算子"><i class="fa fa-check"></i><b>7.3.2</b> 論理演算子</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="rbasic.html"><a href="rbasic.html#rbasic-input"><i class="fa fa-check"></i><b>7.4</b> 格納とオブジェクトの作成</a></li>
<li class="chapter" data-level="7.5" data-path="rbasic.html"><a href="rbasic.html#rbasic-extract"><i class="fa fa-check"></i><b>7.5</b> 要素の抽出</a></li>
<li class="chapter" data-level="7.6" data-path="rbasic.html"><a href="rbasic.html#rbasic-exercise"><i class="fa fa-check"></i><b>7.6</b> 演習問題</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i><b>8</b> データの入出力</a>
<ul>
<li class="chapter" data-level="8.1" data-path="io.html"><a href="io.html#io-toc"><i class="fa fa-check"></i><b>8.1</b> 目次</a></li>
<li class="chapter" data-level="8.2" data-path="io.html"><a href="io.html#io-read"><i class="fa fa-check"></i><b>8.2</b> データの読み込み</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="io.html"><a href="io.html#csvファイルの場合"><i class="fa fa-check"></i><b>8.2.1</b> csvファイルの場合</a></li>
<li class="chapter" data-level="8.2.2" data-path="io.html"><a href="io.html#エンコーディングの話"><i class="fa fa-check"></i><b>8.2.2</b> エンコーディングの話</a></li>
<li class="chapter" data-level="8.2.3" data-path="io.html"><a href="io.html#その他のフォーマット"><i class="fa fa-check"></i><b>8.2.3</b> その他のフォーマット</a></li>
<li class="chapter" data-level="8.2.4" data-path="io.html"><a href="io.html#rdataファイルの場合"><i class="fa fa-check"></i><b>8.2.4</b> RDataファイルの場合</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="io.html"><a href="io.html#io-export"><i class="fa fa-check"></i><b>8.3</b> データの書き出し</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="io.html"><a href="io.html#csvファイル"><i class="fa fa-check"></i><b>8.3.1</b> csvファイル</a></li>
<li class="chapter" data-level="8.3.2" data-path="io.html"><a href="io.html#rdataファイル"><i class="fa fa-check"></i><b>8.3.2</b> RDataファイル</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="datatype.html"><a href="datatype.html"><i class="fa fa-check"></i><b>9</b> データの型</a>
<ul>
<li class="chapter" data-level="9.1" data-path="datatype.html"><a href="datatype.html#WhatIsDatatype"><i class="fa fa-check"></i><b>9.1</b> データ型とは</a></li>
<li class="chapter" data-level="9.2" data-path="datatype.html"><a href="datatype.html#type-logical"><i class="fa fa-check"></i><b>9.2</b> Logical</a></li>
<li class="chapter" data-level="9.3" data-path="datatype.html"><a href="datatype.html#type-numeric"><i class="fa fa-check"></i><b>9.3</b> Numeric</a></li>
<li class="chapter" data-level="9.4" data-path="datatype.html"><a href="datatype.html#type-complex"><i class="fa fa-check"></i><b>9.4</b> Complex</a></li>
<li class="chapter" data-level="9.5" data-path="datatype.html"><a href="datatype.html#type-character"><i class="fa fa-check"></i><b>9.5</b> Character</a></li>
<li class="chapter" data-level="9.6" data-path="datatype.html"><a href="datatype.html#type-factor"><i class="fa fa-check"></i><b>9.6</b> Factor</a></li>
<li class="chapter" data-level="9.7" data-path="datatype.html"><a href="datatype.html#type-date"><i class="fa fa-check"></i><b>9.7</b> Date</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="datatype.html"><a href="datatype.html#なぜdate型があるのか"><i class="fa fa-check"></i><b>9.7.1</b> なぜDate型があるのか</a></li>
<li class="chapter" data-level="9.7.2" data-path="datatype.html"><a href="datatype.html#date型の作り方"><i class="fa fa-check"></i><b>9.7.2</b> Date型の作り方</a></li>
<li class="chapter" data-level="9.7.3" data-path="datatype.html"><a href="datatype.html#posixctposixlt型について"><i class="fa fa-check"></i><b>9.7.3</b> POSIXct、POSIXlt型について</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="datatype.html"><a href="datatype.html#type-na"><i class="fa fa-check"></i><b>9.8</b> NA</a></li>
<li class="chapter" data-level="9.9" data-path="datatype.html"><a href="datatype.html#type-null"><i class="fa fa-check"></i><b>9.9</b> NULL</a></li>
<li class="chapter" data-level="9.10" data-path="datatype.html"><a href="datatype.html#type-nan"><i class="fa fa-check"></i><b>9.10</b> NaN</a></li>
<li class="chapter" data-level="9.11" data-path="datatype.html"><a href="datatype.html#type-inf"><i class="fa fa-check"></i><b>9.11</b> Inf</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datastructure.html"><a href="datastructure.html"><i class="fa fa-check"></i><b>10</b> データの構造</a>
<ul>
<li class="chapter" data-level="10.1" data-path="datastructure.html"><a href="datastructure.html#structure-intro"><i class="fa fa-check"></i><b>10.1</b> 目次</a></li>
<li class="chapter" data-level="10.2" data-path="datastructure.html"><a href="datastructure.html#WhatIsDatastructure"><i class="fa fa-check"></i><b>10.2</b> データ構造とは</a></li>
<li class="chapter" data-level="10.3" data-path="datastructure.html"><a href="datastructure.html#structure-vector"><i class="fa fa-check"></i><b>10.3</b> ベクトル (vector)</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="datastructure.html"><a href="datastructure.html#ベクトルの作り方"><i class="fa fa-check"></i><b>10.3.1</b> ベクトルの作り方</a></li>
<li class="chapter" data-level="10.3.2" data-path="datastructure.html"><a href="datastructure.html#ベクトルの操作"><i class="fa fa-check"></i><b>10.3.2</b> ベクトルの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="datastructure.html"><a href="datastructure.html#structure-matrix"><i class="fa fa-check"></i><b>10.4</b> 行列 (matrix)</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="datastructure.html"><a href="datastructure.html#行列の作り方"><i class="fa fa-check"></i><b>10.4.1</b> 行列の作り方</a></li>
<li class="chapter" data-level="10.4.2" data-path="datastructure.html"><a href="datastructure.html#行列の操作"><i class="fa fa-check"></i><b>10.4.2</b> 行列の操作</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="datastructure.html"><a href="datastructure.html#structure-dataframe"><i class="fa fa-check"></i><b>10.5</b> データフレーム (data.frame)</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="datastructure.html"><a href="datastructure.html#データフレームの作成"><i class="fa fa-check"></i><b>10.5.1</b> データフレームの作成</a></li>
<li class="chapter" data-level="10.5.2" data-path="datastructure.html"><a href="datastructure.html#データフレームの操作"><i class="fa fa-check"></i><b>10.5.2</b> データフレームの操作</a></li>
<li class="chapter" data-level="10.5.3" data-path="datastructure.html"><a href="datastructure.html#tibble型"><i class="fa fa-check"></i><b>10.5.3</b> tibble型</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="datastructure.html"><a href="datastructure.html#structure-list"><i class="fa fa-check"></i><b>10.6</b> リスト (list)</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="datastructure.html"><a href="datastructure.html#リスト型データの作成"><i class="fa fa-check"></i><b>10.6.1</b> リスト型データの作成</a></li>
<li class="chapter" data-level="10.6.2" data-path="datastructure.html"><a href="datastructure.html#リスト型データの操作"><i class="fa fa-check"></i><b>10.6.2</b> リスト型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="datastructure.html"><a href="datastructure.html#structure-array"><i class="fa fa-check"></i><b>10.7</b> 配列 (array)</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="datastructure.html"><a href="datastructure.html#配列型データの作成"><i class="fa fa-check"></i><b>10.7.1</b> 配列型データの作成</a></li>
<li class="chapter" data-level="10.7.2" data-path="datastructure.html"><a href="datastructure.html#配列型データの操作"><i class="fa fa-check"></i><b>10.7.2</b> 配列型データの操作</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="datastructure.html"><a href="datastructure.html#structure-exercise"><i class="fa fa-check"></i><b>10.8</b> 練習問題</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="datastructure.html"><a href="datastructure.html#ベクトル"><i class="fa fa-check"></i><b>10.8.1</b> ベクトル</a></li>
<li class="chapter" data-level="10.8.2" data-path="datastructure.html"><a href="datastructure.html#行列"><i class="fa fa-check"></i><b>10.8.2</b> 行列</a></li>
<li class="chapter" data-level="10.8.3" data-path="datastructure.html"><a href="datastructure.html#データフレーム"><i class="fa fa-check"></i><b>10.8.3</b> データフレーム</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>11</b> Rプログラミングの基礎</a>
<ul>
<li class="chapter" data-level="11.1" data-path="programming.html"><a href="programming.html#programming-intro"><i class="fa fa-check"></i><b>11.1</b> R言語の基礎概念</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="programming.html"><a href="programming.html#オブジェクト"><i class="fa fa-check"></i><b>11.1.1</b> オブジェクト</a></li>
<li class="chapter" data-level="11.1.2" data-path="programming.html"><a href="programming.html#クラス"><i class="fa fa-check"></i><b>11.1.2</b> クラス</a></li>
<li class="chapter" data-level="11.1.3" data-path="programming.html"><a href="programming.html#関数と引数"><i class="fa fa-check"></i><b>11.1.3</b> 関数と引数</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="programming.html"><a href="programming.html#programming-style"><i class="fa fa-check"></i><b>11.2</b> Rのコーディングスタイル</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="programming.html"><a href="programming.html#オブジェクト名"><i class="fa fa-check"></i><b>11.2.1</b> オブジェクト名</a></li>
<li class="chapter" data-level="11.2.2" data-path="programming.html"><a href="programming.html#改行"><i class="fa fa-check"></i><b>11.2.2</b> 改行</a></li>
<li class="chapter" data-level="11.2.3" data-path="programming.html"><a href="programming.html#スペースとインデント"><i class="fa fa-check"></i><b>11.2.3</b> スペースとインデント</a></li>
<li class="chapter" data-level="11.2.4" data-path="programming.html"><a href="programming.html#代入"><i class="fa fa-check"></i><b>11.2.4</b> 代入</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="programming.html"><a href="programming.html#programming-iteration"><i class="fa fa-check"></i><b>11.3</b> 反復</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="programming.html"><a href="programming.html#for-による反復"><i class="fa fa-check"></i><b>11.3.1</b> <code>for</code> による反復</a></li>
<li class="chapter" data-level="11.3.2" data-path="programming.html"><a href="programming.html#whileによる反復"><i class="fa fa-check"></i><b>11.3.2</b> <code>while</code>による反復</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="programming.html"><a href="programming.html#programming-condition"><i class="fa fa-check"></i><b>11.4</b> 条件分岐</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="programming.html"><a href="programming.html#ifelse-ifelse-による条件分岐"><i class="fa fa-check"></i><b>11.4.1</b> <code>if</code>、<code>else if</code>、<code>else</code> による条件分岐</a></li>
<li class="chapter" data-level="11.4.2" data-path="programming.html"><a href="programming.html#ifelseによる条件分岐"><i class="fa fa-check"></i><b>11.4.2</b> <code>ifelse()</code>による条件分岐</a></li>
<li class="chapter" data-level="11.4.3" data-path="programming.html"><a href="programming.html#switchによる条件分岐"><i class="fa fa-check"></i><b>11.4.3</b> <code>switch()</code>による条件分岐</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="programming.html"><a href="programming.html#programming-exercise"><i class="fa fa-check"></i><b>11.5</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> 関数の自作</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#func-intro"><i class="fa fa-check"></i><b>12.1</b> 関数の作成</a></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#func-adv"><i class="fa fa-check"></i><b>12.2</b> ちょっと複雑な関数</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#func-in-func"><i class="fa fa-check"></i><b>12.3</b> 関数 in 関数</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#func-exercise"><i class="fa fa-check"></i><b>12.4</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datahandling1.html"><a href="datahandling1.html"><i class="fa fa-check"></i><b>13</b> データハンドリング [基礎編: 抽出]</a>
<ul>
<li class="chapter" data-level="13.1" data-path="datahandling1.html"><a href="datahandling1.html#handling1-intro"><i class="fa fa-check"></i><b>13.1</b> データハンドリングとtidyverse</a></li>
<li class="chapter" data-level="13.2" data-path="datahandling1.html"><a href="datahandling1.html#handling1-pipe"><i class="fa fa-check"></i><b>13.2</b> パイプ演算子 (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="13.3" data-path="datahandling1.html"><a href="datahandling1.html#handling1-select"><i class="fa fa-check"></i><b>13.3</b> 列の抽出</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出する"><i class="fa fa-check"></i><b>13.3.1</b> 特定の列を抽出する</a></li>
<li class="chapter" data-level="13.3.2" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を抽出し列名を変更する"><i class="fa fa-check"></i><b>13.3.2</b> 特定の列を抽出し、列名を変更する</a></li>
<li class="chapter" data-level="13.3.3" data-path="datahandling1.html"><a href="datahandling1.html#特定の列を除外する"><i class="fa fa-check"></i><b>13.3.3</b> 特定の列を除外する</a></li>
<li class="chapter" data-level="13.3.4" data-path="datahandling1.html"><a href="datahandling1.html#隣接した列を指定する"><i class="fa fa-check"></i><b>13.3.4</b> 隣接した列を指定する</a></li>
<li class="chapter" data-level="13.3.5" data-path="datahandling1.html"><a href="datahandling1.html#一部の列の順番だけを変える"><i class="fa fa-check"></i><b>13.3.5</b> 一部の列の順番だけを変える</a></li>
<li class="chapter" data-level="13.3.6" data-path="datahandling1.html"><a href="datahandling1.html#selectの便利な機能"><i class="fa fa-check"></i><b>13.3.6</b> <code>select()</code>の便利な機能</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="datahandling1.html"><a href="datahandling1.html#handling1-filter"><i class="fa fa-check"></i><b>13.4</b> 行の抽出</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="datahandling1.html"><a href="datahandling1.html#指定した行を抽出する"><i class="fa fa-check"></i><b>13.4.1</b> 指定した行を抽出する</a></li>
<li class="chapter" data-level="13.4.2" data-path="datahandling1.html"><a href="datahandling1.html#条件に合致する行を抽出する"><i class="fa fa-check"></i><b>13.4.2</b> 条件に合致する行を抽出する</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="datahandling1.html"><a href="datahandling1.html#handling1-arrange"><i class="fa fa-check"></i><b>13.5</b> 行のソート</a></li>
<li class="chapter" data-level="13.6" data-path="datahandling1.html"><a href="datahandling1.html#handling1-exercise"><i class="fa fa-check"></i><b>13.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="datahandling2.html"><a href="datahandling2.html"><i class="fa fa-check"></i><b>14</b> データハンドリング [基礎編: 拡張]</a>
<ul>
<li class="chapter" data-level="14.1" data-path="datahandling2.html"><a href="datahandling2.html#handling2-summarise"><i class="fa fa-check"></i><b>14.1</b> 記述統計量の計算</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="datahandling2.html"><a href="datahandling2.html#summariseによる記述統計量の計算"><i class="fa fa-check"></i><b>14.1.1</b> <code>summarise()</code>による記述統計量の計算</a></li>
<li class="chapter" data-level="14.1.2" data-path="datahandling2.html"><a href="datahandling2.html#summariseに使える便利な関数"><i class="fa fa-check"></i><b>14.1.2</b> <code>summarise()</code>に使える便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="datahandling2.html"><a href="datahandling2.html#handling2-group"><i class="fa fa-check"></i><b>14.2</b> グルーピング</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="datahandling2.html"><a href="datahandling2.html#group_byによるグループ化"><i class="fa fa-check"></i><b>14.2.1</b> <code>group_by()</code>によるグループ化</a></li>
<li class="chapter" data-level="14.2.2" data-path="datahandling2.html"><a href="datahandling2.html#複数の変数を用いたグループ化"><i class="fa fa-check"></i><b>14.2.2</b> 複数の変数を用いたグループ化</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="datahandling2.html"><a href="datahandling2.html#handling2-mutate"><i class="fa fa-check"></i><b>14.3</b> 変数の計算</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="datahandling2.html"><a href="datahandling2.html#mutate関数の使い方"><i class="fa fa-check"></i><b>14.3.1</b> <code>mutate()</code>関数の使い方</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="datahandling2.html"><a href="datahandling2.html#handling2-rowwise"><i class="fa fa-check"></i><b>14.4</b> 行単位の操作</a></li>
<li class="chapter" data-level="14.5" data-path="datahandling2.html"><a href="datahandling2.html#handling2-merge"><i class="fa fa-check"></i><b>14.5</b> データの結合</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="datahandling2.html"><a href="datahandling2.html#行の結合"><i class="fa fa-check"></i><b>14.5.1</b> 行の結合</a></li>
<li class="chapter" data-level="14.5.2" data-path="datahandling2.html"><a href="datahandling2.html#列の結合"><i class="fa fa-check"></i><b>14.5.2</b> 列の結合</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="datahandling2.html"><a href="datahandling2.html#handling2-exercise"><i class="fa fa-check"></i><b>14.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>15</b> データハンドリング [基礎編: factor型]</a>
<ul>
<li class="chapter" data-level="15.1" data-path="factor.html"><a href="factor.html#名目変数を含むグラフを作成する際の注意点"><i class="fa fa-check"></i><b>15.1</b> 名目変数を含むグラフを作成する際の注意点</a></li>
<li class="chapter" data-level="15.2" data-path="factor.html"><a href="factor.html#forcatsパッケージについて"><i class="fa fa-check"></i><b>15.2</b> <code>forcats</code>パッケージについて</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="factor.html"><a href="factor.html#fct_relevel-水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.1</b> <code>fct_relevel()</code>: 水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.2" data-path="factor.html"><a href="factor.html#fct_recode-水準のラベルを変更する"><i class="fa fa-check"></i><b>15.2.2</b> <code>fct_recode()</code>: 水準のラベルを変更する</a></li>
<li class="chapter" data-level="15.2.3" data-path="factor.html"><a href="factor.html#fct_rev-水準の順番を反転させる"><i class="fa fa-check"></i><b>15.2.3</b> <code>fct_rev()</code>: 水準の順番を反転させる</a></li>
<li class="chapter" data-level="15.2.4" data-path="factor.html"><a href="factor.html#fct_infreq-頻度順に順番を変更する"><i class="fa fa-check"></i><b>15.2.4</b> <code>fct_infreq()</code>: 頻度順に順番を変更する</a></li>
<li class="chapter" data-level="15.2.5" data-path="factor.html"><a href="factor.html#fct_inorder-データ内の出現順番に順番を変更する"><i class="fa fa-check"></i><b>15.2.5</b> <code>fct_inorder()</code>: データ内の出現順番に順番を変更する</a></li>
<li class="chapter" data-level="15.2.6" data-path="factor.html"><a href="factor.html#fct_shift-水準の順番をずらす"><i class="fa fa-check"></i><b>15.2.6</b> <code>fct_shift()</code>: 水準の順番をずらす</a></li>
<li class="chapter" data-level="15.2.7" data-path="factor.html"><a href="factor.html#fct_shuffle-水準の順番をランダム化する"><i class="fa fa-check"></i><b>15.2.7</b> <code>fct_shuffle()</code>: 水準の順番をランダム化する</a></li>
<li class="chapter" data-level="15.2.8" data-path="factor.html"><a href="factor.html#fct_reorder-別の1変数の値を基準に水準の順番を変更する"><i class="fa fa-check"></i><b>15.2.8</b> <code>fct_reorder()</code>: 別の1変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.9" data-path="factor.html"><a href="factor.html#factor-forcat-reorder2"><i class="fa fa-check"></i><b>15.2.9</b> <code>fct_reorder2()</code>: 別の2変数の値を基準に水準の順番を変更する</a></li>
<li class="chapter" data-level="15.2.10" data-path="factor.html"><a href="factor.html#fct_collapse-水準を統合する"><i class="fa fa-check"></i><b>15.2.10</b> <code>fct_collapse()</code>: 水準を統合する</a></li>
<li class="chapter" data-level="15.2.11" data-path="factor.html"><a href="factor.html#fct_drop-使われていない水準を除去する"><i class="fa fa-check"></i><b>15.2.11</b> <code>fct_drop()</code>: 使われていない水準を除去する</a></li>
<li class="chapter" data-level="15.2.12" data-path="factor.html"><a href="factor.html#fct_expand-水準を追加する"><i class="fa fa-check"></i><b>15.2.12</b> <code>fct_expand()</code>: 水準を追加する</a></li>
<li class="chapter" data-level="15.2.13" data-path="factor.html"><a href="factor.html#fct_explicit_na-欠損値に水準を与える"><i class="fa fa-check"></i><b>15.2.13</b> <code>fct_explicit_na()</code>: 欠損値に水準を与える</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="factor.html"><a href="factor.html#factor-excersie"><i class="fa fa-check"></i><b>15.3</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>16</b> 整然データ構造</a>
<ul>
<li class="chapter" data-level="16.1" data-path="tidydata.html"><a href="tidydata.html#tidydata-intro"><i class="fa fa-check"></i><b>16.1</b> 整然データ (tidy data)とは</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="tidydata.html"><a href="tidydata.html#つの列は1つの変数を表す"><i class="fa fa-check"></i><b>16.1.1</b> 1つの列は、1つの変数を表す</a></li>
<li class="chapter" data-level="16.1.2" data-path="tidydata.html"><a href="tidydata.html#つの行は1つの観測を表す"><i class="fa fa-check"></i><b>16.1.2</b> 1つの行は、1つの観測を表す</a></li>
<li class="chapter" data-level="16.1.3" data-path="tidydata.html"><a href="tidydata.html#つのセルは1つの値を表す"><i class="fa fa-check"></i><b>16.1.3</b> 1つのセルは、1つの値を表す</a></li>
<li class="chapter" data-level="16.1.4" data-path="tidydata.html"><a href="tidydata.html#つの表は1つの観測単位をもつ"><i class="fa fa-check"></i><b>16.1.4</b> 1つの表は、1つの観測単位をもつ</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="tidydata.html"><a href="tidydata.html#tidydata-gather"><i class="fa fa-check"></i><b>16.2</b> Wide型からLong型へ</a></li>
<li class="chapter" data-level="16.3" data-path="tidydata.html"><a href="tidydata.html#tidydata-spread"><i class="fa fa-check"></i><b>16.3</b> Long型からWide型へ</a></li>
<li class="chapter" data-level="16.4" data-path="tidydata.html"><a href="tidydata.html#tidydata-separate"><i class="fa fa-check"></i><b>16.4</b> 列の操作</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="visualization1.html"><a href="visualization1.html"><i class="fa fa-check"></i><b>17</b> 可視化[理論]</a>
<ul>
<li class="chapter" data-level="17.1" data-path="visualization1.html"><a href="visualization1.html#visual-packages"><i class="fa fa-check"></i><b>17.1</b> 可視化のためのパッケージ</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="visualization1.html"><a href="visualization1.html#base-r"><i class="fa fa-check"></i><b>17.1.1</b> Base R</a></li>
<li class="chapter" data-level="17.1.2" data-path="visualization1.html"><a href="visualization1.html#latticeパッケージ"><i class="fa fa-check"></i><b>17.1.2</b> {lattice}パッケージ</a></li>
<li class="chapter" data-level="17.1.3" data-path="visualization1.html"><a href="visualization1.html#ggplot2パッケージ"><i class="fa fa-check"></i><b>17.1.3</b> {ggplot2}パッケージ</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="visualization1.html"><a href="visualization1.html#visual-ggplot"><i class="fa fa-check"></i><b>17.2</b> グラフィックの文法</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="visualization1.html"><a href="visualization1.html#グラフィックの文法"><i class="fa fa-check"></i><b>17.2.1</b> グラフィックの文法</a></li>
<li class="chapter" data-level="17.2.2" data-path="visualization1.html"><a href="visualization1.html#ggplot2のイメージ"><i class="fa fa-check"></i><b>17.2.2</b> ggplot2のイメージ</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="visualization1.html"><a href="visualization1.html#グラフィックの構成要素"><i class="fa fa-check"></i><b>17.3</b> グラフィックの構成要素</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="visualization1.html"><a href="visualization1.html#データ"><i class="fa fa-check"></i><b>17.3.1</b> データ</a></li>
<li class="chapter" data-level="17.3.2" data-path="visualization1.html"><a href="visualization1.html#幾何オブジェクト"><i class="fa fa-check"></i><b>17.3.2</b> 幾何オブジェクト</a></li>
<li class="chapter" data-level="17.3.3" data-path="visualization1.html"><a href="visualization1.html#マッピング"><i class="fa fa-check"></i><b>17.3.3</b> マッピング</a></li>
<li class="chapter" data-level="17.3.4" data-path="visualization1.html"><a href="visualization1.html#マッピング-その他"><i class="fa fa-check"></i><b>17.3.4</b> マッピング: その他</a></li>
<li class="chapter" data-level="17.3.5" data-path="visualization1.html"><a href="visualization1.html#座標系"><i class="fa fa-check"></i><b>17.3.5</b> 座標系</a></li>
<li class="chapter" data-level="17.3.6" data-path="visualization1.html"><a href="visualization1.html#スケール"><i class="fa fa-check"></i><b>17.3.6</b> スケール</a></li>
<li class="chapter" data-level="17.3.7" data-path="visualization1.html"><a href="visualization1.html#ファセット"><i class="fa fa-check"></i><b>17.3.7</b> ファセット</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="visualization1.html"><a href="visualization1.html#visual-principal"><i class="fa fa-check"></i><b>17.4</b> 良いグラフとは</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="visualization1.html"><a href="visualization1.html#データインク比"><i class="fa fa-check"></i><b>17.4.1</b> データ・インク比</a></li>
<li class="chapter" data-level="17.4.2" data-path="visualization1.html"><a href="visualization1.html#次元プロット"><i class="fa fa-check"></i><b>17.4.2</b> 3次元プロット</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="visualization2.html"><a href="visualization2.html"><i class="fa fa-check"></i><b>18</b> 可視化[基礎]</a>
<ul>
<li class="chapter" data-level="18.1" data-path="visualization2.html"><a href="visualization2.html#本章の内容"><i class="fa fa-check"></i><b>18.1</b> 本章の内容</a></li>
<li class="chapter" data-level="18.2" data-path="visualization2.html"><a href="visualization2.html#visual2-data"><i class="fa fa-check"></i><b>18.2</b> 実習用データ</a></li>
<li class="chapter" data-level="18.3" data-path="visualization2.html"><a href="visualization2.html#visual2-barplot"><i class="fa fa-check"></i><b>18.3</b> 棒グラフ</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="visualization2.html"><a href="visualization2.html#ケース数のグラフ"><i class="fa fa-check"></i><b>18.3.1</b> ケース数のグラフ</a></li>
<li class="chapter" data-level="18.3.2" data-path="visualization2.html"><a href="visualization2.html#記述統計量のグラフ"><i class="fa fa-check"></i><b>18.3.2</b> 記述統計量のグラフ</a></li>
<li class="chapter" data-level="18.3.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する"><i class="fa fa-check"></i><b>18.3.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="visualization2.html"><a href="visualization2.html#visual2-histogram"><i class="fa fa-check"></i><b>18.4</b> ヒストグラム</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="visualization2.html"><a href="visualization2.html#ヒストグラムの棒の大きさを調整する"><i class="fa fa-check"></i><b>18.4.1</b> ヒストグラムの棒の大きさを調整する</a></li>
<li class="chapter" data-level="18.4.2" data-path="visualization2.html"><a href="visualization2.html#密度を追加する"><i class="fa fa-check"></i><b>18.4.2</b> 密度を追加する</a></li>
<li class="chapter" data-level="18.4.3" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-1"><i class="fa fa-check"></i><b>18.4.3</b> 次元を追加する</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="visualization2.html"><a href="visualization2.html#visual2-box"><i class="fa fa-check"></i><b>18.5</b> 箱ひげ図</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="visualization2.html"><a href="visualization2.html#個別のデータを表示する"><i class="fa fa-check"></i><b>18.5.1</b> 個別のデータを表示する</a></li>
<li class="chapter" data-level="18.5.2" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-2"><i class="fa fa-check"></i><b>18.5.2</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.5.3" data-path="visualization2.html"><a href="visualization2.html#複数の変数の場合"><i class="fa fa-check"></i><b>18.5.3</b> 複数の変数の場合</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="visualization2.html"><a href="visualization2.html#visual2-scatter"><i class="fa fa-check"></i><b>18.6</b> 散布図</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="visualization2.html"><a href="visualization2.html#次元を追加する-3"><i class="fa fa-check"></i><b>18.6.1</b> 次元を追加する</a></li>
<li class="chapter" data-level="18.6.2" data-path="visualization2.html"><a href="visualization2.html#一部の点をハイライトする"><i class="fa fa-check"></i><b>18.6.2</b> 一部の点をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="visualization2.html"><a href="visualization2.html#visual2-line"><i class="fa fa-check"></i><b>18.7</b> 折れ線グラフ</a>
<ul>
<li class="chapter" data-level="18.7.1" data-path="visualization2.html"><a href="visualization2.html#一部の線をハイライトする"><i class="fa fa-check"></i><b>18.7.1</b> 一部の線をハイライトする</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="visualization2.html"><a href="visualization2.html#図の保存"><i class="fa fa-check"></i><b>18.8</b> 図の保存</a>
<ul>
<li class="chapter" data-level="18.8.1" data-path="visualization2.html"><a href="visualization2.html#ggsaveを利用した図の保存"><i class="fa fa-check"></i><b>18.8.1</b> <code>ggsave()</code>を利用した図の保存</a></li>
<li class="chapter" data-level="18.8.2" data-path="visualization2.html"><a href="visualization2.html#quartzを利用した図の保存"><i class="fa fa-check"></i><b>18.8.2</b> <code>quartz()</code>を利用した図の保存</a></li>
</ul></li>
<li class="chapter" data-level="18.9" data-path="visualization2.html"><a href="visualization2.html#まとめ"><i class="fa fa-check"></i><b>18.9</b> まとめ</a></li>
<li class="chapter" data-level="18.10" data-path="visualization2.html"><a href="visualization2.html#visual2-excersie"><i class="fa fa-check"></i><b>18.10</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="visualization3.html"><a href="visualization3.html"><i class="fa fa-check"></i><b>19</b> 可視化[応用]</a>
<ul>
<li class="chapter" data-level="19.1" data-path="visualization3.html"><a href="visualization3.html#visual3-labs"><i class="fa fa-check"></i><b>19.1</b> <code>labs()</code>: ラベルの修正</a></li>
<li class="chapter" data-level="19.2" data-path="visualization3.html"><a href="visualization3.html#visual3-coordinate"><i class="fa fa-check"></i><b>19.2</b> <code>coord_*()</code>: 座標系の調整</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="visualization3.html"><a href="visualization3.html#直交座標系の操作"><i class="fa fa-check"></i><b>19.2.1</b> 直交座標系の操作</a></li>
<li class="chapter" data-level="19.2.2" data-path="visualization3.html"><a href="visualization3.html#座標系の変換"><i class="fa fa-check"></i><b>19.2.2</b> 座標系の変換</a></li>
<li class="chapter" data-level="19.2.3" data-path="visualization3.html"><a href="visualization3.html#座標系の回転"><i class="fa fa-check"></i><b>19.2.3</b> 座標系の回転</a></li>
<li class="chapter" data-level="19.2.4" data-path="visualization3.html"><a href="visualization3.html#座標系の固定"><i class="fa fa-check"></i><b>19.2.4</b> 座標系の固定</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="visualization3.html"><a href="visualization3.html#visual3-scale"><i class="fa fa-check"></i><b>19.3</b> <code>scale_*_*()</code>: スケールの調整</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="visualization3.html"><a href="visualization3.html#横軸縦軸スケールの調整"><i class="fa fa-check"></i><b>19.3.1</b> 横軸・縦軸スケールの調整</a></li>
<li class="chapter" data-level="19.3.2" data-path="visualization3.html"><a href="visualization3.html#colorスケールの調整"><i class="fa fa-check"></i><b>19.3.2</b> <code>color</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.3" data-path="visualization3.html"><a href="visualization3.html#alphaスケールの調整"><i class="fa fa-check"></i><b>19.3.3</b> <code>alpha</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.4" data-path="visualization3.html"><a href="visualization3.html#sizeスケールの調整"><i class="fa fa-check"></i><b>19.3.4</b> <code>size</code>スケールの調整</a></li>
<li class="chapter" data-level="19.3.5" data-path="visualization3.html"><a href="visualization3.html#shapelinetypeスケールの調整"><i class="fa fa-check"></i><b>19.3.5</b> <code>shape</code>、<code>linetype</code>スケールの調整</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="visualization3.html"><a href="visualization3.html#visual3-theme"><i class="fa fa-check"></i><b>19.4</b> <code>theme_*()</code>と<code>theme()</code>: テーマの指定</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="visualization3.html"><a href="visualization3.html#文字の大きさ"><i class="fa fa-check"></i><b>19.4.1</b> 文字の大きさ</a></li>
<li class="chapter" data-level="19.4.2" data-path="visualization3.html"><a href="visualization3.html#背景のグリッド"><i class="fa fa-check"></i><b>19.4.2</b> 背景のグリッド</a></li>
<li class="chapter" data-level="19.4.3" data-path="visualization3.html"><a href="visualization3.html#目盛りラベルの回転"><i class="fa fa-check"></i><b>19.4.3</b> 目盛りラベルの回転</a></li>
<li class="chapter" data-level="19.4.4" data-path="visualization3.html"><a href="visualization3.html#scale__を用いたラベル重複の回避"><i class="fa fa-check"></i><b>19.4.4</b> <code>scale_*_*()</code>を用いたラベル重複の回避</a></li>
<li class="chapter" data-level="19.4.5" data-path="visualization3.html"><a href="visualization3.html#凡例の表示非表示"><i class="fa fa-check"></i><b>19.4.5</b> 凡例の表示/非表示</a></li>
<li class="chapter" data-level="19.4.6" data-path="visualization3.html"><a href="visualization3.html#凡例の位置"><i class="fa fa-check"></i><b>19.4.6</b> 凡例の位置</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="visualization3.html"><a href="visualization3.html#visual3-merge"><i class="fa fa-check"></i><b>19.5</b> 図の結合</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="visualization4.html"><a href="visualization4.html"><i class="fa fa-check"></i><b>20</b> 可視化[発展]</a>
<ul>
<li class="chapter" data-level="20.1" data-path="visualization4.html"><a href="visualization4.html#visual4-intro"><i class="fa fa-check"></i><b>20.1</b> 概要</a></li>
<li class="chapter" data-level="20.2" data-path="visualization4.html"><a href="visualization4.html#visual4-violin"><i class="fa fa-check"></i><b>20.2</b> バイオリンプロット</a></li>
<li class="chapter" data-level="20.3" data-path="visualization4.html"><a href="visualization4.html#visual4-rug"><i class="fa fa-check"></i><b>20.3</b> ラグプロット</a></li>
<li class="chapter" data-level="20.4" data-path="visualization4.html"><a href="visualization4.html#visual4-ridge"><i class="fa fa-check"></i><b>20.4</b> リッジプロット</a></li>
<li class="chapter" data-level="20.5" data-path="visualization4.html"><a href="visualization4.html#visual4-pointrange"><i class="fa fa-check"></i><b>20.5</b> エラーバー付き散布図</a></li>
<li class="chapter" data-level="20.6" data-path="visualization4.html"><a href="visualization4.html#visual4-lollipop"><i class="fa fa-check"></i><b>20.6</b> ロリーポップチャート</a></li>
<li class="chapter" data-level="20.7" data-path="visualization4.html"><a href="visualization4.html#visual4-smooth"><i class="fa fa-check"></i><b>20.7</b> 平滑化ライン</a></li>
<li class="chapter" data-level="20.8" data-path="visualization4.html"><a href="visualization4.html#visual4-heatmap"><i class="fa fa-check"></i><b>20.8</b> ヒートマップ</a>
<ul>
<li class="chapter" data-level="20.8.1" data-path="visualization4.html"><a href="visualization4.html#つの離散変数の分布を表すヒートマップ"><i class="fa fa-check"></i><b>20.8.1</b> 2つの離散変数の分布を表すヒートマップ</a></li>
<li class="chapter" data-level="20.8.2" data-path="visualization4.html"><a href="visualization4.html#離散変数times離散変数における連続変数の値を示すヒートマップ"><i class="fa fa-check"></i><b>20.8.2</b> 離散変数<span class="math inline">\(\times\)</span>離散変数における連続変数の値を示すヒートマップ</a></li>
</ul></li>
<li class="chapter" data-level="20.9" data-path="visualization4.html"><a href="visualization4.html#visual4-contour"><i class="fa fa-check"></i><b>20.9</b> 等高線図</a></li>
<li class="chapter" data-level="20.10" data-path="visualization4.html"><a href="visualization4.html#visual4-map"><i class="fa fa-check"></i><b>20.10</b> 地図</a>
<ul>
<li class="chapter" data-level="20.10.1" data-path="visualization4.html"><a href="visualization4.html#世界地図"><i class="fa fa-check"></i><b>20.10.1</b> 世界地図</a></li>
<li class="chapter" data-level="20.10.2" data-path="visualization4.html"><a href="visualization4.html#日本地図全体"><i class="fa fa-check"></i><b>20.10.2</b> 日本地図（全体）</a></li>
<li class="chapter" data-level="20.10.3" data-path="visualization4.html"><a href="visualization4.html#日本地図特定の都道府県"><i class="fa fa-check"></i><b>20.10.3</b> 日本地図（特定の都道府県）</a></li>
</ul></li>
<li class="chapter" data-level="20.11" data-path="visualization4.html"><a href="visualization4.html#visual4-dag"><i class="fa fa-check"></i><b>20.11</b> 非巡回有向グラフ</a>
<ul>
<li class="chapter" data-level="20.11.1" data-path="visualization4.html"><a href="visualization4.html#ノードの位置を指定する"><i class="fa fa-check"></i><b>20.11.1</b> ノードの位置を指定する</a></li>
</ul></li>
<li class="chapter" data-level="20.12" data-path="visualization4.html"><a href="visualization4.html#visual4-bump"><i class="fa fa-check"></i><b>20.12</b> バンプチャート</a></li>
<li class="chapter" data-level="20.13" data-path="visualization4.html"><a href="visualization4.html#visual4-alluvial"><i class="fa fa-check"></i><b>20.13</b> 沖積図</a></li>
<li class="chapter" data-level="20.14" data-path="visualization4.html"><a href="visualization4.html#visual4-tree"><i class="fa fa-check"></i><b>20.14</b> ツリーマップ</a></li>
<li class="chapter" data-level="20.15" data-path="visualization4.html"><a href="visualization4.html#visual4-mosaic"><i class="fa fa-check"></i><b>20.15</b> モザイクプロット</a></li>
<li class="chapter" data-level="20.16" data-path="visualization4.html"><a href="visualization4.html#visual4-further"><i class="fa fa-check"></i><b>20.16</b> その他のグラフ</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="datahandling3.html"><a href="datahandling3.html"><i class="fa fa-check"></i><b>21</b> データハンドリング[応用編]</a></li>
<li class="chapter" data-level="22" data-path="string.html"><a href="string.html"><i class="fa fa-check"></i><b>22</b> 文字列の処理</a></li>
<li class="chapter" data-level="23" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>23</b> スクレイピング</a></li>
<li class="chapter" data-level="24" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>24</b> 反復処理</a>
<ul>
<li class="chapter" data-level="24.1" data-path="iteration.html"><a href="iteration.html#iteration-abstract"><i class="fa fa-check"></i><b>24.1</b> 概要</a></li>
<li class="chapter" data-level="24.2" data-path="iteration.html"><a href="iteration.html#iteration-intro"><i class="fa fa-check"></i><b>24.2</b> <code>*apply()</code>関数群と<code>map_*()</code>関数群</a></li>
<li class="chapter" data-level="24.3" data-path="iteration.html"><a href="iteration.html#iteration-two-arguments"><i class="fa fa-check"></i><b>24.3</b> 引数が2つ以上の場合</a></li>
<li class="chapter" data-level="24.4" data-path="iteration.html"><a href="iteration.html#iteration-df"><i class="fa fa-check"></i><b>24.4</b> データフレームと{purrr}</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="iteration.html"><a href="iteration.html#iteration-tibble"><i class="fa fa-check"></i><b>24.4.1</b> tibbleの話</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="iteration.html"><a href="iteration.html#iteration-model1"><i class="fa fa-check"></i><b>24.5</b> モデルの反復推定</a>
<ul>
<li class="chapter" data-level="24.5.1" data-path="iteration.html"><a href="iteration.html#iteration-split1"><i class="fa fa-check"></i><b>24.5.1</b> サンプルの分割とモデル推定（<code>split()</code>利用）</a></li>
<li class="chapter" data-level="24.5.2" data-path="iteration.html"><a href="iteration.html#iteration-split2"><i class="fa fa-check"></i><b>24.5.2</b> サンプルの分割とモデル推定（<code>nest()</code>利用）</a></li>
<li class="chapter" data-level="24.5.3" data-path="iteration.html"><a href="iteration.html#iteration-range"><i class="fa fa-check"></i><b>24.5.3</b> データの範囲を指定したモデル推定</a></li>
<li class="chapter" data-level="24.5.4" data-path="iteration.html"><a href="iteration.html#iteration-variables"><i class="fa fa-check"></i><b>24.5.4</b> 説明・応答変数を指定したモデル推定</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>25</b> R Markdown [基礎]</a>
<ul>
<li class="chapter" data-level="25.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-intro"><i class="fa fa-check"></i><b>25.1</b> R Markdownとは</a></li>
<li class="chapter" data-level="25.2" data-path="rmarkdown.html"><a href="rmarkdown.html#とりあえずknit"><i class="fa fa-check"></i><b>25.2</b> とりあえずKnit</a></li>
<li class="chapter" data-level="25.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-grammar"><i class="fa fa-check"></i><b>25.3</b> Markdown文法の基本</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#改行-1"><i class="fa fa-check"></i><b>25.3.1</b> 改行</a></li>
<li class="chapter" data-level="25.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#強調"><i class="fa fa-check"></i><b>25.3.2</b> 強調</a></li>
<li class="chapter" data-level="25.3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#箇条書き"><i class="fa fa-check"></i><b>25.3.3</b> 箇条書き</a></li>
<li class="chapter" data-level="25.3.4" data-path="rmarkdown.html"><a href="rmarkdown.html#見出し"><i class="fa fa-check"></i><b>25.3.4</b> 見出し</a></li>
<li class="chapter" data-level="25.3.5" data-path="rmarkdown.html"><a href="rmarkdown.html#区切り線"><i class="fa fa-check"></i><b>25.3.5</b> 区切り線</a></li>
<li class="chapter" data-level="25.3.6" data-path="rmarkdown.html"><a href="rmarkdown.html#表"><i class="fa fa-check"></i><b>25.3.6</b> 表</a></li>
<li class="chapter" data-level="25.3.7" data-path="rmarkdown.html"><a href="rmarkdown.html#画像"><i class="fa fa-check"></i><b>25.3.7</b> 画像</a></li>
<li class="chapter" data-level="25.3.8" data-path="rmarkdown.html"><a href="rmarkdown.html#リンク"><i class="fa fa-check"></i><b>25.3.8</b> リンク</a></li>
<li class="chapter" data-level="25.3.9" data-path="rmarkdown.html"><a href="rmarkdown.html#脚注"><i class="fa fa-check"></i><b>25.3.9</b> 脚注</a></li>
<li class="chapter" data-level="25.3.10" data-path="rmarkdown.html"><a href="rmarkdown.html#数式"><i class="fa fa-check"></i><b>25.3.10</b> 数式</a></li>
<li class="chapter" data-level="25.3.11" data-path="rmarkdown.html"><a href="rmarkdown.html#引用"><i class="fa fa-check"></i><b>25.3.11</b> 引用</a></li>
<li class="chapter" data-level="25.3.12" data-path="rmarkdown.html"><a href="rmarkdown.html#コメント"><i class="fa fa-check"></i><b>25.3.12</b> コメント</a></li>
<li class="chapter" data-level="25.3.13" data-path="rmarkdown.html"><a href="rmarkdown.html#コード"><i class="fa fa-check"></i><b>25.3.13</b> コード</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-chunk"><i class="fa fa-check"></i><b>25.4</b> チャンクのオプション</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#チャンク名とチャンク間依存関係"><i class="fa fa-check"></i><b>25.4.1</b> チャンク名とチャンク間依存関係</a></li>
<li class="chapter" data-level="25.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードまたは結果の表示非常時"><i class="fa fa-check"></i><b>25.4.2</b> コードまたは結果の表示/非常時</a></li>
<li class="chapter" data-level="25.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#プロット"><i class="fa fa-check"></i><b>25.4.3</b> プロット</a></li>
<li class="chapter" data-level="25.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#コードの見栄"><i class="fa fa-check"></i><b>25.4.4</b> コードの見栄</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-header"><i class="fa fa-check"></i><b>25.5</b> ヘッダーのオプション</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="rmarkdown.html"><a href="rmarkdown.html#目次の追加"><i class="fa fa-check"></i><b>25.5.1</b> 目次の追加</a></li>
<li class="chapter" data-level="25.5.2" data-path="rmarkdown.html"><a href="rmarkdown.html#コードのハイライト"><i class="fa fa-check"></i><b>25.5.2</b> コードのハイライト</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-japanese"><i class="fa fa-check"></i><b>25.6</b> 日本語が含まれているPDFの出力</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="rmarkdown2.html"><a href="rmarkdown2.html"><i class="fa fa-check"></i><b>26</b> R Markdown [応用]</a>
<ul>
<li class="chapter" data-level="26.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmarkdown2-table"><i class="fa fa-check"></i><b>26.1</b> 表の作成</a></li>
<li class="chapter" data-level="26.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-slide"><i class="fa fa-check"></i><b>26.2</b> R Markdownを用いたスライド作成</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-brak"><i class="fa fa-check"></i><b>26.2.1</b> スライド区分</a></li>
<li class="chapter" data-level="26.2.2" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-chunk"><i class="fa fa-check"></i><b>26.2.2</b> コード</a></li>
<li class="chapter" data-level="26.2.3" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-highlight"><i class="fa fa-check"></i><b>26.2.3</b> ハイライト</a></li>
<li class="chapter" data-level="26.2.4" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-operation"><i class="fa fa-check"></i><b>26.2.4</b> Xaringanスライドの操作</a></li>
<li class="chapter" data-level="26.2.5" data-path="rmarkdown2.html"><a href="rmarkdown2.html#rmakrdown2-japanese"><i class="fa fa-check"></i><b>26.2.5</b> 日本語フォントの指定</a></li>
<li class="chapter" data-level="26.2.6" data-path="rmarkdown2.html"><a href="rmarkdown2.html#スライドのpdf出力"><i class="fa fa-check"></i><b>26.2.6</b> スライドのPDF出力</a></li>
<li class="chapter" data-level="26.2.7" data-path="rmarkdown2.html"><a href="rmarkdown2.html#もっと詳しく"><i class="fa fa-check"></i><b>26.2.7</b> もっと詳しく</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="table.html"><a href="table.html"><i class="fa fa-check"></i><b>27</b> 表の作成</a></li>
<li class="chapter" data-level="28" data-path="oop.html"><a href="oop.html"><i class="fa fa-check"></i><b>28</b> オブジェクト指向型プログラミング</a>
<ul>
<li class="chapter" data-level="28.1" data-path="oop.html"><a href="oop.html#oop-intro"><i class="fa fa-check"></i><b>28.1</b> まずは例から</a></li>
<li class="chapter" data-level="28.2" data-path="oop.html"><a href="oop.html#what-is-oop"><i class="fa fa-check"></i><b>28.2</b> OOPとは</a>
<ul>
<li class="chapter" data-level="28.2.1" data-path="oop.html"><a href="oop.html#オブジェクト-1"><i class="fa fa-check"></i><b>28.2.1</b> オブジェクト</a></li>
<li class="chapter" data-level="28.2.2" data-path="oop.html"><a href="oop.html#クラス-1"><i class="fa fa-check"></i><b>28.2.2</b> クラス</a></li>
<li class="chapter" data-level="28.2.3" data-path="oop.html"><a href="oop.html#メソッドと多態性"><i class="fa fa-check"></i><b>28.2.3</b> メソッドと多態性</a></li>
<li class="chapter" data-level="28.2.4" data-path="oop.html"><a href="oop.html#継承"><i class="fa fa-check"></i><b>28.2.4</b> 継承</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="oop.html"><a href="oop.html#oop-in-r"><i class="fa fa-check"></i><b>28.3</b> RにおけるOOP</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="oop.html"><a href="oop.html#オブジェクトに任意のクラスを付ける"><i class="fa fa-check"></i><b>28.3.1</b> オブジェクトに任意のクラスを付ける</a></li>
<li class="chapter" data-level="28.3.2" data-path="oop.html"><a href="oop.html#メソッドの作り方"><i class="fa fa-check"></i><b>28.3.2</b> メソッドの作り方</a></li>
<li class="chapter" data-level="28.3.3" data-path="oop.html"><a href="oop.html#検証用関数を作る"><i class="fa fa-check"></i><b>28.3.3</b> 検証用関数を作る</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="oop.html"><a href="oop.html#oop-sample"><i class="fa fa-check"></i><b>28.4</b> 例題</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="monte.html"><a href="monte.html"><i class="fa fa-check"></i><b>29</b> モンテカルロシミュレーション</a>
<ul>
<li class="chapter" data-level="29.1" data-path="monte.html"><a href="monte.html#monte-intro"><i class="fa fa-check"></i><b>29.1</b> モンテカルロシミュレーションとは</a></li>
<li class="chapter" data-level="29.2" data-path="monte.html"><a href="monte.html#monte-rng"><i class="fa fa-check"></i><b>29.2</b> 乱数生成</a>
<ul>
<li class="chapter" data-level="29.2.1" data-path="monte.html"><a href="monte.html#sampleによるサンプリング"><i class="fa fa-check"></i><b>29.2.1</b> <code>sample()</code>によるサンプリング</a></li>
<li class="chapter" data-level="29.2.2" data-path="monte.html"><a href="monte.html#確率分布からの乱数制制"><i class="fa fa-check"></i><b>29.2.2</b> 確率分布からの乱数制制</a></li>
<li class="chapter" data-level="29.2.3" data-path="monte.html"><a href="monte.html#シードについて"><i class="fa fa-check"></i><b>29.2.3</b> シードについて</a></li>
</ul></li>
<li class="chapter" data-level="29.3" data-path="monte.html"><a href="monte.html#例-誕生日問題"><i class="fa fa-check"></i><b>29.3</b> 例: 誕生日問題</a></li>
<li class="chapter" data-level="29.4" data-path="monte.html"><a href="monte.html#応用1-円周率の計算"><i class="fa fa-check"></i><b>29.4</b> 応用1: 円周率の計算</a></li>
<li class="chapter" data-level="29.5" data-path="monte.html"><a href="monte.html#応用2-ブートストラッピング法"><i class="fa fa-check"></i><b>29.5</b> 応用2: ブートストラッピング法</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>30</b> 演習問題の回答</a>
<ul>
<li class="chapter" data-level="30.1" data-path="solution.html"><a href="solution.html#solution-rbasic"><i class="fa fa-check"></i><b>30.1</b> 基本的な操作</a></li>
<li class="chapter" data-level="30.2" data-path="solution.html"><a href="solution.html#solution-datastructure"><i class="fa fa-check"></i><b>30.2</b> データの構造</a>
<ul>
<li class="chapter" data-level="30.2.1" data-path="solution.html"><a href="solution.html#ベクトル-1"><i class="fa fa-check"></i><b>30.2.1</b> ベクトル</a></li>
<li class="chapter" data-level="30.2.2" data-path="solution.html"><a href="solution.html#行列-1"><i class="fa fa-check"></i><b>30.2.2</b> 行列</a></li>
<li class="chapter" data-level="30.2.3" data-path="solution.html"><a href="solution.html#データフレーム-1"><i class="fa fa-check"></i><b>30.2.3</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="solution.html"><a href="solution.html#rプログラミングの基礎"><i class="fa fa-check"></i><b>30.3</b> Rプログラミングの基礎</a></li>
<li class="chapter" data-level="30.4" data-path="solution.html"><a href="solution.html#関数の自作"><i class="fa fa-check"></i><b>30.4</b> 関数の自作</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>31</b> 本書の執筆環境</a></li>
<li class="chapter" data-level="32" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>32</b> 参考資料</a></li>
<li class="divider"></li>
<p style = "text-align:center;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></p>
<p style = "text-align:center;"><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">私たちのR: ベストプラクティスの探究</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming" class="section level1" number="11">
<h1><span class="header-section-number">11.</span> Rプログラミングの基礎</h1>
<p>　この章では統計ソフトウェアではなく、プログラミング言語としてのRについて解説する。プログラミングは難しいというイメージがあるかもしれないが、実は難しい。しかし、プログラミングをする場合にまず覚えるべき重要概念は、</p>
<ol style="list-style-type: decimal">
<li>データの読み書き<a href="#fn51" class="footnote-ref" id="fnref51"><sup>51</sup></a></li>
<li>条件分岐</li>
<li>反復</li>
</ol>
<p>の3つだけだ<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a>。この3つだけでほとんどのプログラムが作れる。ただ、この単純さがプログラミングの難しさもあるとも言える。</p>
<p>　たとえば、ある数字の列を小さい順（昇順）に並び替えることを考えよう。<code>c(6, 3, 7, 2, 5, 1, 8, 4)</code> という数列が与えられたとき、人間ならあまり苦労することなく、<code>c(1, 2, 3, 4, 5, 6, 7, 8)</code> に並び替えられるだろう。しかし、その手順を「代入」、「条件分岐」、「反復」のみで明確に表現できるだろうか<a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a>。もちろん、できる。よって、並べ替えはプログラミングによって実現することができる。Rには、数字を並べ替えるための<code>sort()</code>関数や<code>order()</code>関数などが用意されており、それらの組込関数を使えば良いのだが、組込関数は「代入」、「条件分岐」、「反復」を組み合わせて作られたものだ。</p>
<p>「代入」、「条件分岐」、「反復」という3つの概念さえ理解すれば何でもできるるという意味で、プログラミングは簡単だ。しかし、この3つだけで解決しないといけないという意味で、プログラミングは難しい。頻繁に利用する機能については、ほとんどのプログラミング言語があらかじめ作られた関数 (built-in function, 組込関数) を数多く提供しており、ユーザである私たちは組込関数を使うのが賢明である。それでも条件分岐や反復について勉強する必要があるのは、私たち一般ユーザにとってもこれが必要な場面が多いからである。たとえば、同じ分析をデータだけ変えながら複数回実行するために反復を利用する。反復をうまく使えば、コードの量を数十分の一に減らすことも可能である。また、特定の条件に応じてデータを分類するときは条件分岐を使う。条件分岐を使いこなせないと、CalcやExcelなどのスプレッドシートでデータを目でみながら値を入力するという苦行を強いられるが<a href="#fn54" class="footnote-ref" id="fnref54"><sup>54</sup></a>、条件分岐が使えればそのような作業は必要ない。数行のプログラミングをするだけで、ほんの数秒で分類が終わる。</p>
<div id="programming-intro" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> R言語の基礎概念</h2>
<div id="オブジェクト" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> オブジェクト</h3>
<p>　これまで「オブジェクト」や「関数」などという概念を定義せずに使ってきたが、ここではR言語の構成する基本的な概念についてもう少し詳細に解説する。これらは、プログラミングをする上である程度は意識的に使う必要があるものである。</p>
<p>　まず、<strong>オブジェクト (object)</strong> とはメモリに割り当てられた「何か」である。「何か」に該当するのは、ベクトル (vector)、行列 (matrix)、データフレーム (data frame)、リスト (list)、関数 (function) などである。一般的に、オブジェクトにはそれぞれ固有の（つまり、他のオブジェクトと重複しない）名前が付いている。</p>
<p>　たとえば、1から5までの自然数の数列を</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="programming.html#cb561-1" aria-hidden="true" tabindex="-1"></a>my_vec1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)  <span class="co"># my_vec1 &lt;- 1:5  でも同じ</span></span></code></pre></div>
<p>のように<code>my_vec1</code>という名前のオブジェクトに格納する。オブジェクトに名前をつけてメモリに割り当てると、その後 <code>my_vec1</code> と入力するだけでそのオブジェクトの中身を読み込むことができるようになる。</p>
<p>　ここで、次のように <code>my_vec1</code>の要素を2倍にする操作を考えてみよう。</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="programming.html#cb562-1" aria-hidden="true" tabindex="-1"></a>my_vec1 <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10</code></pre>
<p><code>my_vec1</code>は、先ほど定義したオブジェクトである。では<code>2</code>はどうだろうか。2はメモリに割り当てられていないので、オブジェクトではないのだろうか。実は、この数字 <code>2</code> もオブジェクトである。計算する瞬間のみ<code>2</code>がメモリに割り当てられ、計算が終わったらメモリから消されると考えれば良い。「Rに存在するあらゆるものはオブジェクトである (Everything that exists in R is an object)」 (<span class="citation"><a href="#ref-Chambers:2016" role="doc-biblioref">Chambers</a> (<a href="#ref-Chambers:2016" role="doc-biblioref">2016, 4</a>)</span>)。<code>*</code> のような演算子でさえもオブジェクトである。</p>
</div>
<div id="クラス" class="section level3" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> クラス</h3>
<p>　<strong>クラス (class)</strong> とはオブジェクトを特徴づける属性である。既に何度か <code>class()</code> 関数を使ってデータ型やデータ構造を確認したが、<code>class()</code>関数でオブジェクトのクラスを確認することができる。先ほど、<code>my_vec1</code>も<code>*</code>も<code>2</code>もオブジェクトであると説明した。これらがすべてオブジェクトであるということは、何らかのクラス属性を持っているというこである。また、<code>class()</code>関数そのものもオブジェクトなので、何らかのクラスをもつ。確認してみよう。</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="programming.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_vec1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="programming.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="st">`</span><span class="at">*</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="programming.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="programming.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(class)</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<p>　統計分析をする際に、Rのクラスを意識することはあまりない。しかし、Rでパッケージを開発したり、複雑な関数を自作する場合、オブジェクト指向プログラミング (Object-oriented Programming; OOP) の考え方が重要で、オブジェクトのクラスを厳密に定義する必要がある<a href="#fn55" class="footnote-ref" id="fnref55"><sup>55</sup></a>。</p>
<p>　自分でパッケージを開発しないとしても、クラスの概念は知っておいたほうが良い。この後説明する関数には引数というものがあるが、引数には特定のクラスのオブジェクトしか指定できない。関数の使い方がわからないときには<code>?関数名</code> でヘルプを表示するが、ヘルプには各引数に使うべきクラスが書かれている。クラスについて何も知らないと、ヘルプを読んでも意味がわからないかもしれない。</p>
<p>　たとえば、Rコンソール上で<code>?mean</code>を入力して実行すると、図<a href="programming.html#fig:help">11.1</a>のような <code>mean()</code> 関数のヘルプが表示される。ヘルプに示されているとおり、<code>mean()</code>関数に必要な引数は <code>x</code>、<code>trim</code>、<code>na.rm</code>である。仮引数<code>x</code>の説明を読むと、<code>x</code> の実引数にはnumeric または logical のベクトルクラスが使えることが分かる。さらに、date、date-time、time interval が使えることも教えてくれる。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:help"></span>
<img src="figures/Programming/help.png" alt="`mean()`関数のヘルプ画面" width="70%" />
<p class="caption">
図 11.1: <code>mean()</code>関数のヘルプ画面
</p>
</div>
<p>　回帰分析を行う<code>lm()</code>関数の場合、<code>data</code> という仮引数があるが、<code>data</code>の実引数に指定できるのは data.frame クラスまたは tibbleクラスのオブジェクトである<a href="#fn56" class="footnote-ref" id="fnref56"><sup>56</sup></a>。通常はクラスを意識せずにRを使っても問題ないが、</p>
<ol style="list-style-type: decimal">
<li>全てのオブジェクトにはクラスが付与されており、</li>
<li>関数 (の引数) ごとに実引数として使えるクラスが異なる</li>
</ol>
<p>という2点は覚えておこう。</p>
</div>
<div id="関数と引数" class="section level3" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> 関数と引数</h3>
<p>　<strong>関数 (function)</strong> は、入力されたデータを内部で決められた手順に従って処理し、その結果を返すものである。「Rで起こるあらゆることは関数の呼び出しである (Everything that happens in R is a function call)」(<span class="citation"><a href="#ref-Chambers:2016" role="doc-biblioref">Chambers</a> (<a href="#ref-Chambers:2016" role="doc-biblioref">2016, 4</a>)</span>)。</p>
<p>　関数は <code>関数名(関数の入力となるオブジェクト)</code> のように使う。たとえば、<code>class(my_vec1)</code>は<code>my_vec1</code>というオブジェクトのクラスを返す関数である。また、<code>sum(my_vec1)</code>は<code>my_vec1</code>の要素の総和を計算して返す関数である。</p>
<p>　関数は自分で作成することもできる（次章で説明する）。複雑な作業を繰り返す場合、その作業を関数として記述することで、一行でその作業を再現することが可能になる。「2度以上同じことを繰り返すなら関数を作れ」というのが、Rユーザの心得である。</p>
<p>　関数を使うためには、 <strong>引数 (ひきすう)</strong> と呼ばれるものが必要である。例えば、<code>sum()</code> 関数はこれだけだと何もできない。何らかのオブジェクトがが入力として与えられないと、結果を返すことができない。<code>sum(my_vec1)</code>のようにすることではじめて結果が返される。ここで<code>my_vec1</code>が<code>sum()</code>関数の引数である。</p>
<p>　関数は引数は複数持つことができる。たとえば、欠測値を含む以下の<code>my_vec2</code>を考えてみよう。</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="programming.html#cb572-1" aria-hidden="true" tabindex="-1"></a>my_vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>　この数列の総和を <code>sum()</code>関数で求めようとすると、結果は欠測値 <code>NA</code> になる。</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="programming.html#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(my_vec2)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>　これは<code>sum()</code>の基本仕様が「入力に欠測値が含まれている場合は欠測値を返す」ことになっているためである。入力されたデータのなかで欠測値を除いたものの総和を求めるために、<code>sum()</code>はもう1つの引数が用意されている。それが <code>na.rm</code> である。<code>na.rm = TRUE</code>を指定すると、欠測値を除外した総和を返す。</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="programming.html#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(my_vec2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<p>　第<a href="rbasic.html#rbasic">7</a>章で説明したとおり、<code>na.rm</code> などのように引数を区別するために関数によって用意されたものを<strong>仮引数 (parameter)</strong> と呼び、<code>TRUE</code> のように引数の中身としてユーザが指定するものを<strong>実引数 (argument)</strong> と呼ぶ。<code>my_vec2</code> は実引数である。</p>
<p>　引数を指定するとき、<code>my_vec2</code>のように仮引数を明示しないこともある。多くの場合、それがなければ関数がそもそも動かないという第1引数の仮引数は明示しないことが多い。そもそも、第1引数には仮引数がない（名前がない）場合もある。<code>sum()</code> 関数の第1引数はnumeric または complex 型のベクトルだが、仮引数がそもそもない（<code>...</code> で定義されている）。</p>
<p>　しかし、第1引数以外については、<code>na.rm = TRUE</code> のように仮引数を明示すべきである。関数によっては数十個の引数をとるものもあり、仮引数を明示しないと、どの実引数がどの仮引数に対応するのかわかりにくい。</p>
<p>　多くの引数は関数によって定義された既定値 (default value) をもっている。たとえば、<code>sum()</code>関数の <code>na.rm</code> の既定値は <code>FALSE</code> である。既定値が用意されている場合、その引数を指定せずに関数を使うことができる。</p>
<p>　ある関数がどのような引数を要求しているか、その既定値は何か、引数として何か決められたデータ型/データ構造があるかを調べたいときは <code>?関数名</code> （<code>()</code>がないことに注意）または <code>help(関数名）</code>をコンソールに入力する。多くの関数に詳細なヘルプが付いているので、ネットで検索したり、誰かに質問する前にひとまずヘルプを読むべきである。</p>
<hr />
</div>
</div>
<div id="programming-style" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Rのコーディングスタイル</h2>
<p>　Rコードの書き方に唯一の正解はない。文法が正しければ、つまり、Rが意図どおりの実行結果を出してくれさえすれば、それは「正しい」コードである。しかし、コードというのは、一度書けば二度と読まないというものではない。最初に「書く」とき以外に、「修正する」ときや「再利用」するときなどに繰り返し読むことになる。また、共同研究をする場合には共同研究者がコードを読む。さらに、近年では研究成果を報告する際に分析に利用したコードを<s>後悔</s>公開することも当たり前になりつつあり、その場合には自分で書いたコードを世界中の人が読む可能性がある。</p>
<p>　ここで大事なのは、Rコードを読むのはRだけではないということである。人間も重要な「読者」である。Rコードを書くときは人間に優しいコードを書くように心がえよう。唯一の正解がなくても、読みやすく、多くの人が採用している標準的な書き方はある。ここでは、人間に優しいコードを書くためのコーディングスタイルについて説明しよう。</p>
<div id="オブジェクト名" class="section level3" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> オブジェクト名</h3>
<p>　ベクトル、データフレーム、自作の関数などのすべてのオブジェクトには名前をつける必要がある（ラムダ式などの無名関数を除く）。名前はある程度自由に付けることができるが、大事な原則がある。それは、</p>
<ul>
<li><strong>オブジェクト名は英数字と限られた記号のみにする</strong></li>
<li><strong>数字で始まる変数名は避ける</strong></li>
</ul>
<p>1つ目は原則にすぎない。よって、日本語やハングルの変数名をつけることもできる。しかし、それは推奨しない。英数字以外（マルチバイト文字）は文字化けの可能性がある（文字コードの問題が発生する）し、コードを書く際列がずれる原因にもなる</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="programming.html#cb577-1" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>)      <span class="co"># 推奨</span></span></code></pre></div>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="programming.html#cb578-1" aria-hidden="true" tabindex="-1"></a>変数1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>)     <span class="co"># 非推奨</span></span></code></pre></div>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="programming.html#cb579-1" aria-hidden="true" tabindex="-1"></a>변수1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>)     <span class="co"># 非推奨</span></span></code></pre></div>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="programming.html#cb580-1" aria-hidden="true" tabindex="-1"></a>var1</span></code></pre></div>
<pre><code>## [1]  2  3  5  7 11</code></pre>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="programming.html#cb582-1" aria-hidden="true" tabindex="-1"></a>変数1</span></code></pre></div>
<pre><code>## [1]  2  3  5  7 11</code></pre>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="programming.html#cb584-1" aria-hidden="true" tabindex="-1"></a>변수1</span></code></pre></div>
<pre><code>## [1]  2  3  5  7 11</code></pre>
<p>　2つ目のルールは必ず守る必要がある。つまり、数字で始まるオブジェクト名は作成できない。</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="programming.html#cb586-1" aria-hidden="true" tabindex="-1"></a>100A <span class="ot">&lt;-</span> <span class="st">&quot;R&quot;</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:4: unexpected symbol
## 1: 100A
##        ^</code></pre>
<p><strong>予約語を避ける</strong></p>
<p>　Rが提供する組込の関数やオブジェクトと重複する名前を自分で作成するオブジェクトに付けるのは避けよう。例えば、Rには円周率 (<span class="math inline">\(\pi\)</span>) が<code>pi</code>という名前で用意されている。</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="programming.html#cb588-1" aria-hidden="true" tabindex="-1"></a>pi</span></code></pre></div>
<pre><code>## [1] 3.141593</code></pre>
<p><code>pi</code>という名前で新しい変数を作ることはできる。</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="programming.html#cb590-1" aria-hidden="true" tabindex="-1"></a>pi  <span class="ot">&lt;-</span> <span class="dv">777</span></span></code></pre></div>
<p>しかし、既存の<code>pi</code>が上書きされてしまうので避けたほうが良い。</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="programming.html#cb591-1" aria-hidden="true" tabindex="-1"></a>pi   <span class="co"># もはや円周率ではない</span></span></code></pre></div>
<pre><code>## [1] 777</code></pre>
<p>元の円周率を使うこともできるが、手間が増える。</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="programming.html#cb593-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span>pi</span></code></pre></div>
<pre><code>## [1] 3.141593</code></pre>
<p>　また、ユーザが自由に使えない名前もある。それらの名前を「予約語」と呼ぶ。予約語の使用は禁止されている。</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="programming.html#cb595-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>  <span class="ot">&lt;-</span> <span class="st">&quot;YY&quot;</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:5: unexpected assignment
## 1: if  &lt;-
##         ^</code></pre>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="programming.html#cb597-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="ot">&lt;-</span> <span class="st">&quot;JS&quot;</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:5: unexpected assignment
## 1: for &lt;-
##         ^</code></pre>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="programming.html#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="ot">&lt;-</span> <span class="st">&quot;いつもひとつ！&quot;</span></span></code></pre></div>
<pre><code>## Error in TRUE &lt;- &quot;いつもひとつ！&quot;: invalid (do_set) left-hand side to assignment</code></pre>
<p>このように、予約語はそもそも使えないので、それほど意識する必要はない。</p>
<p>　ただし、以下のコードのようなことが起こるので注意してほしい。</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="programming.html#cb601-1" aria-hidden="true" tabindex="-1"></a>vals <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb601-2"><a href="programming.html#cb601-2" aria-hidden="true" tabindex="-1"></a>vals[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)]</span></code></pre></div>
<pre><code>## [1] 1 2 5</code></pre>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="programming.html#cb603-1" aria-hidden="true" tabindex="-1"></a>vals[<span class="fu">c</span>(T, T, F, F, T)]</span></code></pre></div>
<pre><code>## [1] 1 2 5</code></pre>
<p>ここから、<code>T</code> は <code>TRUE</code>、<code>F</code> は <code>FALSE</code> と同じ働きをしていることがわかる。ここで、次のコードを実行してみよう。</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="programming.html#cb605-1" aria-hidden="true" tabindex="-1"></a>T <span class="ot">&lt;-</span> <span class="st">&quot;Taylor&quot;</span></span>
<span id="cb605-2"><a href="programming.html#cb605-2" aria-hidden="true" tabindex="-1"></a>F <span class="ot">&lt;-</span> <span class="st">&quot;Fourier&quot;</span></span>
<span id="cb605-3"><a href="programming.html#cb605-3" aria-hidden="true" tabindex="-1"></a>vals[<span class="fu">c</span>(T, T, F, F, T)]</span></code></pre></div>
<pre><code>## [1] NA NA NA NA NA</code></pre>
<p>このように、<code>T</code> と<code>F</code>はあらかじめ使える状態で用意されているものの、予約語ではないので値が代入できてしまう。しかし、<code>T</code> と<code>F</code> を自分で定義したオブジェクトの名前に使うと混乱の元になるので、使用は避けるのが無難である。</p>
<p>　また、<code>TRUE</code> と <code>FALSE</code> を <code>T</code> や<code>F</code> で済ませる悪習は廃して常に完全にスペルすべきである。</p>
<p><strong>短さと分かりやすさを重視する</strong></p>
<p>オブジェクト名を見るだけでその中にどのようなデータが含まれているか推測できる名前をつけるべきである。たとえば、性別を表す変数を作るなら、</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="programming.html#cb607-1" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<p>ではなく、</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="programming.html#cb608-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<p>としたほうが良い。<code>gender</code> という名前がついていれば、「この変数には性別に関する情報が入っているだろう」と容易に想像できる。</p>
<p>　また、オブジェクト名は、短くて読みやすいほうが良い。数学の成績データをもつ次のオブジェクトについて考えよう。</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="programming.html#cb609-1" aria-hidden="true" tabindex="-1"></a>mathematicsscore <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">91</span>, <span class="dv">43</span>, <span class="dv">77</span>, <span class="dv">100</span>)</span></code></pre></div>
<p>オブジェクト名から、中にどのような情報が含まれるか想像することはできる。しかし、この名前は長く、読みにくい。そこで、次のように名前を変えたほうが良い。</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="programming.html#cb610-1" aria-hidden="true" tabindex="-1"></a>MathScore  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">91</span>, <span class="dv">43</span>, <span class="dv">77</span>, <span class="dv">100</span>)</span>
<span id="cb610-2"><a href="programming.html#cb610-2" aria-hidden="true" tabindex="-1"></a>mathScore  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">91</span>, <span class="dv">43</span>, <span class="dv">77</span>, <span class="dv">100</span>)</span>
<span id="cb610-3"><a href="programming.html#cb610-3" aria-hidden="true" tabindex="-1"></a>math_score <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">91</span>, <span class="dv">43</span>, <span class="dv">77</span>, <span class="dv">100</span>)</span></code></pre></div>
<p>これらの例では、mathematics を math に縮め、<code>math</code>と<code>score</code>の間に区切りを入れて読みやすくしている。大文字と小文字の組み合わせで区切る方法は<strong>キャメルケース (camel case)</strong>と呼ばれ、大文字から始まるキャメルケースを<strong>大文字キャメルケース (upper camel case)</strong>、小文字から始まるキャメルケースを<strong>小文字キャメルケース (lower camel case)</strong> と呼ぶ。また、<code>_</code>（アンダーバー, アンスコ） で区切る方法は<strong>スネークケース (snake case)</strong> と呼ばれる。キャメルケースとスネークケースは、一貫した方法で使えばどちらを使っても良いだろう。</p>
<p>　かつては “.” を使って単語を繋ぐのが標準的だった時代もあり、組込関数には “.” を使ったものも多い。<code>data.frame()</code> や <code>read.csv()</code> などがその例である。しかし、“.” はクラスのメソッドとして使われることがあり、混乱するので使うのは避けたほうが良い。<strong>tidyverse* では、<code>readr::read_csv()</code> のように、スネークケースが採用されている。他にも <code>-</code>（ハイフン）で区切る</strong>チェーンケース (chain case)**というのもあるが、Rで<code>-</code>は「マイナス（減算演算子）」であり、チェーンケースは使えない<a href="#fn57" class="footnote-ref" id="fnref57"><sup>57</sup></a>。</p>
</div>
<div id="改行" class="section level3" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> 改行</h3>
<p>　コードは1行が長すぎないように適宜改行する。Rやパッケージなどが提供している関数のなかには10個以上の引数を必要とするものもあり。コードを1行で書こうとするとコードの可読性が著しく低くなってしまう。</p>
<p>　1行に何文字入れるべきかについて決まったルールはないが、1行の最大文字数を半角80字にするという基準が伝統的に使われてきた。これま昔のパソコンで使ったパンチカード (図<a href="programming.html#fig:PunchedCard">11.2</a>)では1行に80個の穴を開けることができたことに由来する。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:PunchedCard"></span>
<img src="figures/Programming/Punchcard.png" alt="パンチカードの例" width="80%" />
<p class="caption">
図 11.2: パンチカードの例
</p>
</div>
<p>最近は昔と比べてモニタのサイズが大きく、解像度も高いので、80文字にこだわる必要はない。自分のRStudioのSource Paneに収まるよう、切りがいいところで改行しよう。</p>
</div>
<div id="スペースとインデント" class="section level3" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> スペースとインデント</h3>
<p>　適切なスペースはコードの可読性を向上させる。以下の2つのコードは同じ内容を実行するが、後者にはスペースがないので読にくい。</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="programming.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 良い例</span></span>
<span id="cb611-2"><a href="programming.html#cb611-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(my_vec2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb611-3"><a href="programming.html#cb611-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-4"><a href="programming.html#cb611-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 悪い例</span></span>
<span id="cb611-5"><a href="programming.html#cb611-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(my_vec2,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>　どこにスペースを入れるかについてのルールは特になり。Rは「<strong>半角</strong>スペース」を無視するので、プログラムの動作に関して言えば、<strong>半角</strong>スペースはあってもなくても同じである。標準的なルールとして、「<code>,</code>の後にスペース」、「演算子の前後にスペース」などが考えらえる。ただし、<code>^</code>の前後にはスペースを入れないことが多い。また、後ほど紹介する<code>for(){}</code>、<code>while(){}</code>、<code>if(){}</code>などのように、関数以外の <code>()</code>の前後にはスペースを入れる。それに対し、<code>sum()</code> や <code>read.csv()</code> などのように、関数のかっこの場合には、関数名と<code>()</code>の間にスペースを入れない。</p>
<p>　また、スペースを2回以上入れることもある。たとえば、あるデータフレームを作る例を考えよう。</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="programming.html#cb612-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 良い例</span></span>
<span id="cb612-2"><a href="programming.html#cb612-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb612-3"><a href="programming.html#cb612-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name     =</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>,  <span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Wickham&quot;</span>),</span>
<span id="cb612-4"><a href="programming.html#cb612-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">favorite =</span> <span class="fu">c</span>(<span class="st">&quot;Ramen&quot;</span>, <span class="st">&quot;Cat&quot;</span>,   <span class="st">&quot;R&quot;</span>),</span>
<span id="cb612-5"><a href="programming.html#cb612-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender   =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>)</span>
<span id="cb612-6"><a href="programming.html#cb612-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb612-7"><a href="programming.html#cb612-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-8"><a href="programming.html#cb612-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 悪い例</span></span>
<span id="cb612-9"><a href="programming.html#cb612-9" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb612-10"><a href="programming.html#cb612-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Hadley&quot;</span>),</span>
<span id="cb612-11"><a href="programming.html#cb612-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">favorite =</span> <span class="fu">c</span>(<span class="st">&quot;Ramen&quot;</span>, <span class="st">&quot;Cat&quot;</span>, <span class="st">&quot;R&quot;</span>),</span>
<span id="cb612-12"><a href="programming.html#cb612-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Male&quot;</span>)</span>
<span id="cb612-13"><a href="programming.html#cb612-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>上の2つのコードの内容は同じだが、前者のほうが読みやすい。</p>
<p>　ここでもう1つ注目してほしいのは、「字下げ (indent)」の使い方である。上のコードは次のように一行にまとめることができるが、読みにくい。</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="programming.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 邪悪な例</span></span>
<span id="cb613-2"><a href="programming.html#cb613-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">name=</span><span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>,<span class="st">&quot;Yanai&quot;</span>,<span class="st">&quot;Hadley&quot;</span>),<span class="at">favorite=</span><span class="fu">c</span>(<span class="st">&quot;Ramen&quot;</span>,<span class="st">&quot;Cat&quot;</span>,<span class="st">&quot;R&quot;</span>),<span class="at">fender=</span><span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;Male&quot;</span>))</span></code></pre></div>
<p>このように1行のコードが長い場合、「改行」が重要である。しかし、Rの最も基本的なルールは「1行に1つのコード」なので、改行するとこのルールを破ることになってしまう。そこで、コードの途中で改行するときは、2行目以降を字下げすることで、1つのコードが前の行から続いていることを明確にしよう。前の行の続きの行は2文字（または4文字）分字下げする。こうすることで、「この行は上の行の続き」ということが「見て」わかるようになる。</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="programming.html#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 良い例</span></span>
<span id="cb614-2"><a href="programming.html#cb614-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb614-3"><a href="programming.html#cb614-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name     =</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>,  <span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Hadley&quot;</span>),</span>
<span id="cb614-4"><a href="programming.html#cb614-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">favorite =</span> <span class="fu">c</span>(<span class="st">&quot;Ramen&quot;</span>, <span class="st">&quot;Cat&quot;</span>,   <span class="st">&quot;R&quot;</span>),</span>
<span id="cb614-5"><a href="programming.html#cb614-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender   =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>)</span>
<span id="cb614-6"><a href="programming.html#cb614-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb614-7"><a href="programming.html#cb614-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-8"><a href="programming.html#cb614-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 悪い例</span></span>
<span id="cb614-9"><a href="programming.html#cb614-9" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb614-10"><a href="programming.html#cb614-10" aria-hidden="true" tabindex="-1"></a><span class="at">name     =</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>,  <span class="st">&quot;Yanai&quot;</span>, <span class="st">&quot;Hadley&quot;</span>),</span>
<span id="cb614-11"><a href="programming.html#cb614-11" aria-hidden="true" tabindex="-1"></a><span class="at">favorite =</span> <span class="fu">c</span>(<span class="st">&quot;Ramen&quot;</span>, <span class="st">&quot;Cat&quot;</span>,   <span class="st">&quot;R&quot;</span>),</span>
<span id="cb614-12"><a href="programming.html#cb614-12" aria-hidden="true" tabindex="-1"></a><span class="at">gender   =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>,  <span class="st">&quot;Male&quot;</span>)</span>
<span id="cb614-13"><a href="programming.html#cb614-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>　RStudioは自動的に字下げをしてくれるので、RStudioを使っているならあまり意識する必要はない。自動で字下げしてくれないエディタを使っている場合は、字下げに気をつけよう。</p>
</div>
<div id="代入" class="section level3" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> 代入</h3>
<p>オブジェクトに値を代入する演算子として、これまで <code>&lt;-</code> を使ってきたが、<code>=</code>を使うこともできる。R以外の多くのプログラミング言語では、代入演算子として<code>=</code>を採用している。しかし、引数の指定と代入を区別するためん、本書では<code>&lt;-</code>の使用を推奨する。また、既に説明したとおり、option + <code>-</code>（macOSの場合）または Alt + <code>-</code>（Windows の場合）というショートカットを使うと、<code>&lt;-</code> だけでなく、その前後のスペースを自動的に挿入してくれる。コードが読みやすくなるので、代入演算子は常にショートカットで入力する習慣をつけよう。</p>
<p>　この節で説明したコードの書き方は、コーディングスタイルの一部に過ぎない。本書では、できるだけ読みやすいコードを例として示すことを心がけている。最初は本書（あるいは他の本やウェブサイトに掲載されているもののなかで気に入ったもの）のスタイルを真似して書いてみてほしい。コードを書き写しているうちに、自にとって最善の書き方が見えてくるだろう。</p>
<p>　コーディングスタイルについては、以下の2つの資料がさらに詳しい。とりわけ、羽鳥先生が書いた<a href="https://style.tidyverse.org">The tidyverse style guide</a> は事実上の業界標準であり、<a href="https://google.github.io/styleguide/Rguide.html">Google’s Style Guide</a> も このガイドをベースにしている。かなりの分量だが、パッケージ開発などを考えているなら一度は目を通しておいたほうが良いだろう。</p>
<ul>
<li><a href="https://style.tidyverse.org">The tidyverse style guide</a></li>
<li><a href="https://google.github.io/styleguide/Rguide.html">Google’s Style Guide</a></li>
</ul>
<hr />
</div>
</div>
<div id="programming-iteration" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> 反復</h2>
<p>　人間があまり得意ではないが、コンピュータが得意とする代表的な作業が「反復作業」である。普通の人間なら数時間から数年かかるような退屈な反復作業でも、コンピュータを使えば数秒で終わることが多い。Rでもさまざまな反復作業を行うことができる。</p>
<p>　反復作業を行うときは、反復作業を「いつ終わらせるか」を考えなくてはならない。終わりを規程する方法として、以下の2つが考えられる。</p>
<ol style="list-style-type: decimal">
<li>処理を繰り返し回数を指定し、その回数に達したら終了する: <code>for</code> 文を使う</li>
<li>一定の条件を指定し、その条件が満たされるときに処理を終了する: <code>while</code> 文を使う</li>
</ol>
<p>この節では、これら2つのケースのそれぞれについて解説する。</p>
<div id="for-による反復" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> <code>for</code> による反復</h3>
<p>　<code>for</code>を利用した反復を、<strong>forループ</strong> と呼ぶ。まず、forループの雛形をみてみよう。</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb615-1"><a href="programming.html#cb615-1"></a><span class="cf">for</span> (任意の変数 <span class="cf">in</span> ベクトル) {</span>
<span id="cb615-2"><a href="programming.html#cb615-2"></a>  処理内容</span>
<span id="cb615-3"><a href="programming.html#cb615-3"></a>}</span></code></pre></div>
<p>任意の変数の選び方はいろいろ考えられるが、よく使うのはインデクス (index) <code>i</code> である。このインデクスはforループの内部で使うために用いられる変数である。そして、<code>in</code> の後の「ベクトル」には長さ1以上のベクトルを指定する。ベクトルは必ずしもnumeric型である必要はないが、インデクスを利用したforループではインデクスを指定する正の整数を要素にもつベクトルを使う。</p>
<p>　また、<code>{}</code>内の内容が1行のみの場合には、<code>{}</code>は省略しても良い。その場合、処理内容を<code>()</code>の直後に書。つまり、以下のような書き方もできる。</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb616-1"><a href="programming.html#cb616-1"></a><span class="cf">for</span> (任意の変数 <span class="cf">in</span> ベクトル) 処理内容</span></code></pre></div>
<p>これは<code>for</code>だけでなく、<code>if</code>や<code>function()</code>など、<code>{}</code>で処理内容を囲む関数に共通である。処理内容が2行以上の場合は、必ず<code>{}</code>で囲むようにしよう。</p>
<p>　例として、インデクス <span class="math inline">\(i\)</span> の内容を画面に表示することを<code>N</code>回繰り返すforループを書いてみよう。繰り返し回数を指定するために、<code>for (i in 1:N)</code>と書く。5回繰り返すなら<code>for (i in 1:5)</code>とする。<code>1:5</code>は<code>c(1, 2, 3, 4, 5)</code>と同じなので、<code>for (i in c(1, 2, 3, 4, 5))</code>でもいいが、<code>1:5</code> を使って書いたほうが、コードが読みやすい。</p>
<p>　以下コードを作成し、実行してみよう。このコードは3行がひとつのかたまりになったコードである。<code>for</code>の行（あるいは最後の<code>}</code>の行）にカーソルを置いた状態で Cmd/Ctrl + Return/Enter を押せば、forループ全体が一挙に実行される。</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb617-1"><a href="programming.html#cb617-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb617-2"><a href="programming.html#cb617-2"></a>  <span class="fu">print</span>(i)</span>
<span id="cb617-3"><a href="programming.html#cb617-3"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<div class="sourceCode" id="cb619"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb619-1"><a href="programming.html#cb619-1"></a><span class="co"># 上記のコードはこのように書くことも可能</span></span>
<span id="cb619-2"><a href="programming.html#cb619-2"></a><span class="co"># for(i in 1:5) print(i)</span></span></code></pre></div>
<p>1から5までの数字が表示された。</p>
<p>　ここで、このforループがどのような順番で処理を実行したのか確認してみよう。上のコードは、次のようなステップを踏んで1から5までの数字を画面に表示している。</p>
<ol style="list-style-type: decimal">
<li><code>i</code>にベクトル<code>1:5</code>の最初の要素を代入 (<code>i &lt;- 1</code>)</li>
<li><code>print(i)</code>を実行</li>
<li><code>{}</code>中身の処理が終わったら<code>i</code>にベクトル<code>1:5</code>内の次の要素を代入 (<code>i &lt;- 2</code>)</li>
<li><code>print(i)</code>を実行</li>
<li><code>{}</code>中身の処理が終わったら<code>i</code>にベクトル<code>1:5</code>内の次の要素を代入 (<code>i &lt;- 3</code>)</li>
<li><code>print(i)</code>を実行</li>
<li><code>{}</code>中身の処理が終わったら<code>i</code>にベクトル<code>1:5</code>内の次の要素を代入 (<code>i &lt;- 4</code>)</li>
<li><code>print(i)</code>を実行</li>
<li><code>{}</code>中身の処理が終わったら<code>i</code>にベクトル<code>1:5</code>内の次の要素を代入 (<code>i &lt;- 5</code>)</li>
<li><code>print(i)</code>を実行</li>
<li><code>{}</code>中身の処理が終わったら<code>i</code>にベクトル<code>1:5</code>内の次の要素を代入するが、<code>5</code>が最後の要素なので反復終了</li>
</ol>
<p>この手順を要約すると、次のようになる。</p>
<ul>
<li>任意の変数 (ここでは<code>i</code>)にベクトル (ここでは<code>1:5</code>)の最初の要素が格納され、<code>{}</code>内の処理を行う。</li>
<li><code>{}</code>内の処理が終わったら、ベクトル (ここでは<code>1:5</code>)の次の要素を任意の変数 (ここでは<code>i</code>)に格納し、<code>{}</code>内の処理を行う。</li>
<li>格納できる要素がなくなったら反復を終了する。
<ul>
<li>したがって、反復はベクトル (ここでは<code>1:5</code>)の長さだけ実行される (ここでは5回)。</li>
</ul></li>
</ul>
<p>　反復回数はベクトルの長さで決まる。既に述べたとおり、<code>1:5</code>のような書き方でなく、普通のベクトルを指定しても問題ない。たとえば、長さ6の <code>dmg_vals</code> というベクトルを作り、その要素を出力するコードを書いてみよう。</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb620-1"><a href="programming.html#cb620-1"></a>dmg_vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">64</span>, <span class="dv">31</span>, <span class="dv">46</span>, <span class="dv">81</span>, <span class="dv">102</span>)</span>
<span id="cb620-2"><a href="programming.html#cb620-2"></a></span>
<span id="cb620-3"><a href="programming.html#cb620-3"></a><span class="cf">for</span> (damage <span class="cf">in</span> dmg_vals) {</span>
<span id="cb620-4"><a href="programming.html#cb620-4"></a>  x <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;トンヌラに&quot;</span>, damage, <span class="st">&quot;のダメージ!!&quot;</span>)</span>
<span id="cb620-5"><a href="programming.html#cb620-5"></a>  <span class="fu">print</span>(x)</span>
<span id="cb620-6"><a href="programming.html#cb620-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;トンヌラに24のダメージ!!&quot;
## [1] &quot;トンヌラに64のダメージ!!&quot;
## [1] &quot;トンヌラに31のダメージ!!&quot;
## [1] &quot;トンヌラに46のダメージ!!&quot;
## [1] &quot;トンヌラに81のダメージ!!&quot;
## [1] &quot;トンヌラに102のダメージ!!&quot;</code></pre>
<p>　スライムくらいなら一撃で撃破できそうな立派な勇者である。</p>
<p>　ちなみに、<code>paste0()</code>は引数を空白なし<a href="#fn58" class="footnote-ref" id="fnref58"><sup>58</sup></a>で繋いだ文字列を返す関数である。詳細は第<a href="string.html#string">22</a>で解説するが、簡単な例だけ示しておこう。</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="programming.html#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;Rは&quot;</span>, <span class="st">&quot;みんなの&quot;</span>, <span class="st">&quot;ともだち&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Rはみんなのともだち&quot;</code></pre>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="programming.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;私の&quot;</span>, <span class="st">&quot;HP/MPは&quot;</span>, <span class="dv">500</span>, <span class="st">&quot;/&quot;</span>, <span class="dv">400</span>, <span class="st">&quot;です。&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;私のHP/MPは500/400です。&quot;</code></pre>
<p>　文字列のベクトルを使ったforループもできる。10個の都市名が格納された<code>cities</code>の要素を1つずつ出力するコードは次のように書ける。
　</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb626-1"><a href="programming.html#cb626-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Sapporo&quot;</span>, <span class="st">&quot;Sendai&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>, <span class="st">&quot;Yokohama&quot;</span>, <span class="st">&quot;Nagoya&quot;</span>,</span>
<span id="cb626-2"><a href="programming.html#cb626-2"></a>            <span class="st">&quot;Kyoto&quot;</span>, <span class="st">&quot;Osaka&quot;</span>, <span class="st">&quot;Kobe&quot;</span>, <span class="st">&quot;Hiroshima&quot;</span>, <span class="st">&quot;Fukuoka&quot;</span>)</span>
<span id="cb626-3"><a href="programming.html#cb626-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(cities)) {</span>
<span id="cb626-4"><a href="programming.html#cb626-4"></a>  x <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;現在、cityの値は&quot;</span>, cities[i], <span class="st">&quot;です。&quot;</span>)</span>
<span id="cb626-5"><a href="programming.html#cb626-5"></a>  <span class="fu">print</span>(x)</span>
<span id="cb626-6"><a href="programming.html#cb626-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;現在、cityの値はSapporoです。&quot;
## [1] &quot;現在、cityの値はSendaiです。&quot;
## [1] &quot;現在、cityの値はTokyoです。&quot;
## [1] &quot;現在、cityの値はYokohamaです。&quot;
## [1] &quot;現在、cityの値はNagoyaです。&quot;
## [1] &quot;現在、cityの値はKyotoです。&quot;
## [1] &quot;現在、cityの値はOsakaです。&quot;
## [1] &quot;現在、cityの値はKobeです。&quot;
## [1] &quot;現在、cityの値はHiroshimaです。&quot;
## [1] &quot;現在、cityの値はFukuokaです。&quot;</code></pre>
<p>　ここでは <code>for (i in 1:10)</code> ではなく、<code>for (i in seq_along(cities))</code>と表記。この例からわかるように、<code>seq_along()</code> を使うと、ベクトルのインデクス自動的に作ってくれる。上の例では、<code>seq_along(ten_cities)</code> が自動的にベクトル長さを計算し、<code>1:length(ten_cities)</code> すなわち <code>1:10</code> と同じ処理をしてくれる。ベクトルの長さが自明でないとき（ベクトルが非常に長いとき）には、<code>seq_along()</code> を使うのが便利である。後で cities の中身を書き換えたときに、cities の長さが変わることも考えられるので、ベクトルのインデクス指定には <code>seq_along()</code> を使おう。</p>
<p>　また、インデクスを使わないforループも書ける。上と同じ結果は、次のコードで実現することができる。</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="programming.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (city <span class="cf">in</span> cities) {</span>
<span id="cb628-2"><a href="programming.html#cb628-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;現在、cityの値は&quot;</span>, city, <span class="st">&quot;です。&quot;</span>)</span>
<span id="cb628-3"><a href="programming.html#cb628-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(x)</span>
<span id="cb628-4"><a href="programming.html#cb628-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;現在、cityの値はSapporoです。&quot;
## [1] &quot;現在、cityの値はSendaiです。&quot;
## [1] &quot;現在、cityの値はTokyoです。&quot;
## [1] &quot;現在、cityの値はYokohamaです。&quot;
## [1] &quot;現在、cityの値はNagoyaです。&quot;
## [1] &quot;現在、cityの値はKyotoです。&quot;
## [1] &quot;現在、cityの値はOsakaです。&quot;
## [1] &quot;現在、cityの値はKobeです。&quot;
## [1] &quot;現在、cityの値はHiroshimaです。&quot;
## [1] &quot;現在、cityの値はFukuokaです。&quot;</code></pre>
<p>このように、ベクトルの中身が数字でない場合でも、forループでベクトルの要素を1つずつ順番に利用することができる。</p>
<p>　次に、<code>"1番目の都市名はSapporoです"</code>、<code>"2番目の都市名はSendaiです"</code>、…　のように出力する方法を考えよう。これまでは出力する文字列のなかで1箇所（都市名）のみを変えながら表示したが、今回は「<strong><code>i</code></strong>」と「<strong><code>city</code></strong>」の2箇所を同時に変える。これは、インデクス <code>i</code>を使って反復を実行しながら、<code>cities</code> の<code>i</code>番目要素を呼び出すことで実現できる。以下のコードを実行してみよう。</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb630-1"><a href="programming.html#cb630-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(cities)) {</span>
<span id="cb630-2"><a href="programming.html#cb630-2"></a>  msg <span class="ot">&lt;-</span> <span class="fu">paste0</span>(i, <span class="st">&quot;番目の都市名は&quot;</span>, cities[i], <span class="st">&quot;です。&quot;</span>)</span>
<span id="cb630-3"><a href="programming.html#cb630-3"></a>  <span class="fu">print</span>(msg)</span>
<span id="cb630-4"><a href="programming.html#cb630-4"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1番目の都市名はSapporoです。&quot;
## [1] &quot;2番目の都市名はSendaiです。&quot;
## [1] &quot;3番目の都市名はTokyoです。&quot;
## [1] &quot;4番目の都市名はYokohamaです。&quot;
## [1] &quot;5番目の都市名はNagoyaです。&quot;
## [1] &quot;6番目の都市名はKyotoです。&quot;
## [1] &quot;7番目の都市名はOsakaです。&quot;
## [1] &quot;8番目の都市名はKobeです。&quot;
## [1] &quot;9番目の都市名はHiroshimaです。&quot;
## [1] &quot;10番目の都市名はFukuokaです。&quot;</code></pre>
<p>このように、インデクスとそれに対応するベクトルの要素を抽出すれば、望みどおりの処理ができる。</p>
<p><strong>多重forループ</strong></p>
<p>　forループの中でさらにforループを使うともできる。最初はやや難しいかもしれないが、多重反復はプログラミング技術としてよく使われるので<a href="#fn59" class="footnote-ref" id="fnref59"><sup>59</sup></a>、この機会に勉強しよう。</p>
<p>　多重forループを理解するためにうってつけの例は掛け算九九である。積算演算子 <code>*</code> の「左の数」と「右の数」 のそれぞれに1から9までの数字を代入するすべての組み合わせを考えるためには、2つのforループが必要だ<a href="#fn60" class="footnote-ref" id="fnref60"><sup>60</sup></a>。<code>i * j</code>で<code>i</code>と<code>j</code>それぞれに1から9を代入しながら結果を出力するコードは次のように書ける。</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb632-1"><a href="programming.html#cb632-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {    <span class="co">#</span></span>
<span id="cb632-2"><a href="programming.html#cb632-2"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb632-3"><a href="programming.html#cb632-3"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(i, <span class="st">&quot;*&quot;</span>, j, <span class="st">&quot;=&quot;</span>, i <span class="sc">*</span> j))</span>
<span id="cb632-4"><a href="programming.html#cb632-4"></a>  }</span>
<span id="cb632-5"><a href="programming.html#cb632-5"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 * 1 = 1&quot;
## [1] &quot;1 * 2 = 2&quot;
## [1] &quot;1 * 3 = 3&quot;
## [1] &quot;1 * 4 = 4&quot;
## [1] &quot;1 * 5 = 5&quot;
## [1] &quot;1 * 6 = 6&quot;
## [1] &quot;1 * 7 = 7&quot;
## [1] &quot;1 * 8 = 8&quot;
## [1] &quot;1 * 9 = 9&quot;
## [1] &quot;2 * 1 = 2&quot;
## [1] &quot;2 * 2 = 4&quot;
## [1] &quot;2 * 3 = 6&quot;
## [1] &quot;2 * 4 = 8&quot;
## [1] &quot;2 * 5 = 10&quot;
## [1] &quot;2 * 6 = 12&quot;
## [1] &quot;2 * 7 = 14&quot;
## [1] &quot;2 * 8 = 16&quot;
## [1] &quot;2 * 9 = 18&quot;
## [1] &quot;3 * 1 = 3&quot;
## [1] &quot;3 * 2 = 6&quot;
## [1] &quot;3 * 3 = 9&quot;
## [1] &quot;3 * 4 = 12&quot;
## [1] &quot;3 * 5 = 15&quot;
## [1] &quot;3 * 6 = 18&quot;
## [1] &quot;3 * 7 = 21&quot;
## [1] &quot;3 * 8 = 24&quot;
## [1] &quot;3 * 9 = 27&quot;
## [1] &quot;4 * 1 = 4&quot;
## [1] &quot;4 * 2 = 8&quot;
## [1] &quot;4 * 3 = 12&quot;
## [1] &quot;4 * 4 = 16&quot;
## [1] &quot;4 * 5 = 20&quot;
## [1] &quot;4 * 6 = 24&quot;
## [1] &quot;4 * 7 = 28&quot;
## [1] &quot;4 * 8 = 32&quot;
## [1] &quot;4 * 9 = 36&quot;
## [1] &quot;5 * 1 = 5&quot;
## [1] &quot;5 * 2 = 10&quot;
## [1] &quot;5 * 3 = 15&quot;
## [1] &quot;5 * 4 = 20&quot;
## [1] &quot;5 * 5 = 25&quot;
## [1] &quot;5 * 6 = 30&quot;
## [1] &quot;5 * 7 = 35&quot;
## [1] &quot;5 * 8 = 40&quot;
## [1] &quot;5 * 9 = 45&quot;
## [1] &quot;6 * 1 = 6&quot;
## [1] &quot;6 * 2 = 12&quot;
## [1] &quot;6 * 3 = 18&quot;
## [1] &quot;6 * 4 = 24&quot;
## [1] &quot;6 * 5 = 30&quot;
## [1] &quot;6 * 6 = 36&quot;
## [1] &quot;6 * 7 = 42&quot;
## [1] &quot;6 * 8 = 48&quot;
## [1] &quot;6 * 9 = 54&quot;
## [1] &quot;7 * 1 = 7&quot;
## [1] &quot;7 * 2 = 14&quot;
## [1] &quot;7 * 3 = 21&quot;
## [1] &quot;7 * 4 = 28&quot;
## [1] &quot;7 * 5 = 35&quot;
## [1] &quot;7 * 6 = 42&quot;
## [1] &quot;7 * 7 = 49&quot;
## [1] &quot;7 * 8 = 56&quot;
## [1] &quot;7 * 9 = 63&quot;
## [1] &quot;8 * 1 = 8&quot;
## [1] &quot;8 * 2 = 16&quot;
## [1] &quot;8 * 3 = 24&quot;
## [1] &quot;8 * 4 = 32&quot;
## [1] &quot;8 * 5 = 40&quot;
## [1] &quot;8 * 6 = 48&quot;
## [1] &quot;8 * 7 = 56&quot;
## [1] &quot;8 * 8 = 64&quot;
## [1] &quot;8 * 9 = 72&quot;
## [1] &quot;9 * 1 = 9&quot;
## [1] &quot;9 * 2 = 18&quot;
## [1] &quot;9 * 3 = 27&quot;
## [1] &quot;9 * 4 = 36&quot;
## [1] &quot;9 * 5 = 45&quot;
## [1] &quot;9 * 6 = 54&quot;
## [1] &quot;9 * 7 = 63&quot;
## [1] &quot;9 * 8 = 72&quot;
## [1] &quot;9 * 9 = 81&quot;</code></pre>
<p>　上のコードがどのような処理をしているか考えてみよう。まず、<code>i</code>に1が代入される。次に、<code>j</code>に1から9までの数順番に1つずつ代入され、<code>1 * 1</code>、<code>1 * 2</code>、<code>1 * 3</code>、…、<code>1 * 9</code>が計算される。<code>1 * 9</code>の計算が終わったら、<code>i</code>に2が代入される。そして再び内側のforループが実行され、<code>2 * 1</code>、<code>2 * 2</code>、<code>2 * 3</code>、…、<code>2 * 9</code>が計算される。これを9の段まで繰り返す。段の順番を降順にして9の段を最初に計算し、1の段を最後に計算したい場合は、<code>i in 1:9</code>を<code>i in 9:1</code>に変えればよい。</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb634-1"><a href="programming.html#cb634-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">1</span>) {</span>
<span id="cb634-2"><a href="programming.html#cb634-2"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb634-3"><a href="programming.html#cb634-3"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(i, <span class="st">&quot;*&quot;</span>, j, <span class="st">&quot;=&quot;</span>, i <span class="sc">*</span> j))</span>
<span id="cb634-4"><a href="programming.html#cb634-4"></a>  }</span>
<span id="cb634-5"><a href="programming.html#cb634-5"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;9 * 1 = 9&quot;
## [1] &quot;9 * 2 = 18&quot;
## [1] &quot;9 * 3 = 27&quot;
## [1] &quot;9 * 4 = 36&quot;
## [1] &quot;9 * 5 = 45&quot;
## [1] &quot;9 * 6 = 54&quot;
## [1] &quot;9 * 7 = 63&quot;
## [1] &quot;9 * 8 = 72&quot;
## [1] &quot;9 * 9 = 81&quot;
## [1] &quot;8 * 1 = 8&quot;
## [1] &quot;8 * 2 = 16&quot;
## [1] &quot;8 * 3 = 24&quot;
## [1] &quot;8 * 4 = 32&quot;
## [1] &quot;8 * 5 = 40&quot;
## [1] &quot;8 * 6 = 48&quot;
## [1] &quot;8 * 7 = 56&quot;
## [1] &quot;8 * 8 = 64&quot;
## [1] &quot;8 * 9 = 72&quot;
## [1] &quot;7 * 1 = 7&quot;
## [1] &quot;7 * 2 = 14&quot;
## [1] &quot;7 * 3 = 21&quot;
## [1] &quot;7 * 4 = 28&quot;
## [1] &quot;7 * 5 = 35&quot;
## [1] &quot;7 * 6 = 42&quot;
## [1] &quot;7 * 7 = 49&quot;
## [1] &quot;7 * 8 = 56&quot;
## [1] &quot;7 * 9 = 63&quot;
## [1] &quot;6 * 1 = 6&quot;
## [1] &quot;6 * 2 = 12&quot;
## [1] &quot;6 * 3 = 18&quot;
## [1] &quot;6 * 4 = 24&quot;
## [1] &quot;6 * 5 = 30&quot;
## [1] &quot;6 * 6 = 36&quot;
## [1] &quot;6 * 7 = 42&quot;
## [1] &quot;6 * 8 = 48&quot;
## [1] &quot;6 * 9 = 54&quot;
## [1] &quot;5 * 1 = 5&quot;
## [1] &quot;5 * 2 = 10&quot;
## [1] &quot;5 * 3 = 15&quot;
## [1] &quot;5 * 4 = 20&quot;
## [1] &quot;5 * 5 = 25&quot;
## [1] &quot;5 * 6 = 30&quot;
## [1] &quot;5 * 7 = 35&quot;
## [1] &quot;5 * 8 = 40&quot;
## [1] &quot;5 * 9 = 45&quot;
## [1] &quot;4 * 1 = 4&quot;
## [1] &quot;4 * 2 = 8&quot;
## [1] &quot;4 * 3 = 12&quot;
## [1] &quot;4 * 4 = 16&quot;
## [1] &quot;4 * 5 = 20&quot;
## [1] &quot;4 * 6 = 24&quot;
## [1] &quot;4 * 7 = 28&quot;
## [1] &quot;4 * 8 = 32&quot;
## [1] &quot;4 * 9 = 36&quot;
## [1] &quot;3 * 1 = 3&quot;
## [1] &quot;3 * 2 = 6&quot;
## [1] &quot;3 * 3 = 9&quot;
## [1] &quot;3 * 4 = 12&quot;
## [1] &quot;3 * 5 = 15&quot;
## [1] &quot;3 * 6 = 18&quot;
## [1] &quot;3 * 7 = 21&quot;
## [1] &quot;3 * 8 = 24&quot;
## [1] &quot;3 * 9 = 27&quot;
## [1] &quot;2 * 1 = 2&quot;
## [1] &quot;2 * 2 = 4&quot;
## [1] &quot;2 * 3 = 6&quot;
## [1] &quot;2 * 4 = 8&quot;
## [1] &quot;2 * 5 = 10&quot;
## [1] &quot;2 * 6 = 12&quot;
## [1] &quot;2 * 7 = 14&quot;
## [1] &quot;2 * 8 = 16&quot;
## [1] &quot;2 * 9 = 18&quot;
## [1] &quot;1 * 1 = 1&quot;
## [1] &quot;1 * 2 = 2&quot;
## [1] &quot;1 * 3 = 3&quot;
## [1] &quot;1 * 4 = 4&quot;
## [1] &quot;1 * 5 = 5&quot;
## [1] &quot;1 * 6 = 6&quot;
## [1] &quot;1 * 7 = 7&quot;
## [1] &quot;1 * 8 = 8&quot;
## [1] &quot;1 * 9 = 9&quot;</code></pre>
<p>　九九を覚えるときにはこれで良いが、実数どうしの掛け算で <code>i * j</code>と<code>j * i</code> は同じ（交換法則が成り立つ）なので、2つの数字の積を知りたいだけなら片方だけ出力すれば十分だろう。そこで、<code>for (j in 1:9)</code> を <code>for (j in i:9)</code> に変えてみよう。</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb636-1"><a href="programming.html#cb636-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb636-2"><a href="programming.html#cb636-2"></a>  <span class="cf">for</span> (j <span class="cf">in</span> i<span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb636-3"><a href="programming.html#cb636-3"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(i, <span class="st">&quot;*&quot;</span>, j, <span class="st">&quot;=&quot;</span>, i <span class="sc">*</span> j))</span>
<span id="cb636-4"><a href="programming.html#cb636-4"></a>  }</span>
<span id="cb636-5"><a href="programming.html#cb636-5"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 * 1 = 1&quot;
## [1] &quot;1 * 2 = 2&quot;
## [1] &quot;1 * 3 = 3&quot;
## [1] &quot;1 * 4 = 4&quot;
## [1] &quot;1 * 5 = 5&quot;
## [1] &quot;1 * 6 = 6&quot;
## [1] &quot;1 * 7 = 7&quot;
## [1] &quot;1 * 8 = 8&quot;
## [1] &quot;1 * 9 = 9&quot;
## [1] &quot;2 * 2 = 4&quot;
## [1] &quot;2 * 3 = 6&quot;
## [1] &quot;2 * 4 = 8&quot;
## [1] &quot;2 * 5 = 10&quot;
## [1] &quot;2 * 6 = 12&quot;
## [1] &quot;2 * 7 = 14&quot;
## [1] &quot;2 * 8 = 16&quot;
## [1] &quot;2 * 9 = 18&quot;
## [1] &quot;3 * 3 = 9&quot;
## [1] &quot;3 * 4 = 12&quot;
## [1] &quot;3 * 5 = 15&quot;
## [1] &quot;3 * 6 = 18&quot;
## [1] &quot;3 * 7 = 21&quot;
## [1] &quot;3 * 8 = 24&quot;
## [1] &quot;3 * 9 = 27&quot;
## [1] &quot;4 * 4 = 16&quot;
## [1] &quot;4 * 5 = 20&quot;
## [1] &quot;4 * 6 = 24&quot;
## [1] &quot;4 * 7 = 28&quot;
## [1] &quot;4 * 8 = 32&quot;
## [1] &quot;4 * 9 = 36&quot;
## [1] &quot;5 * 5 = 25&quot;
## [1] &quot;5 * 6 = 30&quot;
## [1] &quot;5 * 7 = 35&quot;
## [1] &quot;5 * 8 = 40&quot;
## [1] &quot;5 * 9 = 45&quot;
## [1] &quot;6 * 6 = 36&quot;
## [1] &quot;6 * 7 = 42&quot;
## [1] &quot;6 * 8 = 48&quot;
## [1] &quot;6 * 9 = 54&quot;
## [1] &quot;7 * 7 = 49&quot;
## [1] &quot;7 * 8 = 56&quot;
## [1] &quot;7 * 9 = 63&quot;
## [1] &quot;8 * 8 = 64&quot;
## [1] &quot;8 * 9 = 72&quot;
## [1] &quot;9 * 9 = 81&quot;</code></pre>
<p>このコードは、1の段は<code>1 * 1</code>から<code>1 * 9</code> までのすべてを計算するが、2の段は<code>2 * 2</code>から、3の段は<code>3 * 3</code>から計算を始めて出力するコードである。2の段の場合、<code>2 * 1</code>は1の段で <code>1 * 2</code> が計算済みなのでスキップする。3の段の場合、<code>3 * 1</code> は1の段で、<code>3 * 2</code> は2の段でそれぞれ計算済みなのでとばす。
それぞれの段で同様の処理を続け、最後の9の段では<code>9 * 9</code> のみが計算される。</p>
<p>　このように多重forループは複数のベクトルの組み合わせて処理を行う場合に便利である。</p>
<p>　複数のベクトルでなく、データフレームなどの2次元以上データにも多重forループは使われる。データフレームは複数のベクトルで構成されている（各列が1つのベクトル）ため、実質的には複数のベクトルを扱うことになる。</p>
<p>　例として、<a href="/Data/FIFA_Men.csv">FIFA_Men.csv</a> を利用し、それぞれの国のチーム名、FAFAランキング、ポイントをまとめて表示するコードを書いてみよう。すべてのチームを表示すると結果が長くなるので、対象をOFC (オセアニアサッカー連盟) 所属チームに限定する。</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="programming.html#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FIFA_Men.csvを読み込み、myDFという名で保存</span></span>
<span id="cb638-2"><a href="programming.html#cb638-2" aria-hidden="true" tabindex="-1"></a>my_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/FIFA_Men.csv&quot;</span>)</span>
<span id="cb638-3"><a href="programming.html#cb638-3" aria-hidden="true" tabindex="-1"></a><span class="co"># my_dfのConfederation列がOFCの行だけを抽出</span></span>
<span id="cb638-4"><a href="programming.html#cb638-4" aria-hidden="true" tabindex="-1"></a>my_df <span class="ot">&lt;-</span> my_df[my_df<span class="sc">$</span>Confederation <span class="sc">==</span> <span class="st">&quot;OFC&quot;</span>, ]</span>
<span id="cb638-5"><a href="programming.html#cb638-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-6"><a href="programming.html#cb638-6" aria-hidden="true" tabindex="-1"></a>my_df</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##       ID Team              Rank Points Prev_Points Confederation
##    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
##  1     4 American Samoa     192    900         900 OFC          
##  2    69 Fiji               163    996         996 OFC          
##  3   135 New Caledonia      156   1035        1035 OFC          
##  4   136 New Zealand        122   1149        1149 OFC          
##  5   147 Papua New Guinea   165    991         991 OFC          
##  6   159 Samoa              194    894         894 OFC          
##  7   171 Solomon Islands    141   1073        1073 OFC          
##  8   185 Tahiti             161   1014        1014 OFC          
##  9   191 Tonga              203    862         862 OFC          
## 10   204 Vanuatu            163    996         996 OFC</code></pre>
<p>OFCに10チーム加盟していることがわかる。</p>
<p>　以下のような内容が表示されるコードを書きたい。</p>
<pre><code>=====1番目のチーム情報=====
Team: American Samoa
Rank: 192
Points: 900
=====2番目のチーム情報=====
Team: Fiji
Rank: 163
Points: 996
=====3番目のチーム情報=====
Team: New Caledonia
...</code></pre>
<p>これは1つのforループでも作成できるが、勉強のために2つのforループを使って書いてみよう。</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb641-1"><a href="programming.html#cb641-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(my_df)) {</span>
<span id="cb641-2"><a href="programming.html#cb641-2"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;=====&quot;</span>, i, <span class="st">&quot;番目のチーム情報=====&quot;</span>))</span>
<span id="cb641-3"><a href="programming.html#cb641-3"></a>  </span>
<span id="cb641-4"><a href="programming.html#cb641-4"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Team&quot;</span>, <span class="st">&quot;Rank&quot;</span>, <span class="st">&quot;Points&quot;</span>)) {</span>
<span id="cb641-5"><a href="programming.html#cb641-5"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(j, <span class="st">&quot;: &quot;</span>, my_df[i, j]))</span>
<span id="cb641-6"><a href="programming.html#cb641-6"></a>  }</span>
<span id="cb641-7"><a href="programming.html#cb641-7"></a>}</span></code></pre></div>
<p>以上のコードを実行すると以下のような結果が表示される（全部掲載すると長くなるので、ここでは最初の2チームのみ掲載する。</p>
<pre><code>## [1] &quot;=====1番目のチーム情報=====&quot;
## [1] &quot;Team: American Samoa&quot;
## [1] &quot;Rank: 192&quot;
## [1] &quot;Points: 900&quot;
## [1] &quot;=====2番目のチーム情報=====&quot;
## [1] &quot;Team: Fiji&quot;
## [1] &quot;Rank: 163&quot;
## [1] &quot;Points: 996&quot;</code></pre>
<p>このコードについて説明しよう。まず、外側のforループでは任意の変数としてインデクス<code>i</code>を、内側のforループではインデクス<code>j</code>を使っている。Rは、コードを上から順番に処理する（同じ行なら、カッコの中から処理する）。したがって、まず処理されるのは外側のforループである。<code>i</code>にはベクトル<code>1:nrow(my_df)</code>の要素が順番に割り当てられる。<code>nrow()</code> は行列またはデータフレームの行数を求める関数で、<code>my_df</code>は10行のデータなので<code>1:10</code>になる。つまり、外側のforループは<code>i</code>に1, 2, 3, …, 10の順で値を格納しながらループ内の処理を繰り返す。ここで、外側のforループの中身を見てみよう。まず、<code>print()</code> を使って <code>"=====i番目のチーム情報====="</code> というメッセージを出力している。最初は<code>i</code>が<code>1</code>なので、<code>"=====1番目のチーム情報====="</code>が表示される。</p>
<p>　次に実行されるのが内側のforループである。ここでは<code>j</code>に<code>c("Team", "Rank", "Points")</code>を格納しながら内側のforループの内のコードをが3回繰り返し処理される。内側のコードの内容は、たとえば、<code>i = 1</code>の状態で、<code>j = "Team"</code>なら、<code>print(paste0("Team", ": ", my_df[1, "Team"]))</code>である。第<a href="datastructure.html#structure-dataframe">10.5</a>章で説明した通り、<code>my_df[1, "Team"]</code>は<code>my_df</code>の<code>Team</code> 列の1番目の要素を意味する。この処理が終わると、次は<code>j</code>に<code>"Rank"</code>が代入され、同じコードを処理する。そして、<code>j = "Points"</code>まで処理が終わったら、内側のforループは一度終了する。</p>
<p>　内側のforループが終わっても、外側のforループはまだ終わっていない。次は、<code>i</code> に <code>2</code> が格納され、<code>"=====2番目のチーム情報====="</code> を表示し、<strong>再度</strong>内側のforループを<strong>最初から</strong>処理する。 <code>i = 10</code>の状態で内側のforループが終了ると外側のforループも終了する。多重forループはこのように反復処理を実行する。</p>
<p>　チーム名の次に所属連盟も表示したいときはどう直せば良いだろうか。正解は<code>c("Team", "Rank", "Points")</code>のベクトルで、<code>"Team"</code>と<code>"Rank"</code>の間に<code>"Confederation"</code>を追加するだけである。実際にやってみよう (スペースの関係上、最初の2チームの結果のみ掲載する)。</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb643-1"><a href="programming.html#cb643-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(my_df)) {</span>
<span id="cb643-2"><a href="programming.html#cb643-2"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;=====&quot;</span>, i, <span class="st">&quot;番目のチーム情報=====&quot;</span>))</span>
<span id="cb643-3"><a href="programming.html#cb643-3"></a>  </span>
<span id="cb643-4"><a href="programming.html#cb643-4"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Team&quot;</span>, <span class="st">&quot;Confederation&quot;</span>, <span class="st">&quot;Rank&quot;</span>, <span class="st">&quot;Points&quot;</span>)) {</span>
<span id="cb643-5"><a href="programming.html#cb643-5"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(j, <span class="st">&quot;: &quot;</span>, my_df[i, j]))</span>
<span id="cb643-6"><a href="programming.html#cb643-6"></a>  }</span>
<span id="cb643-7"><a href="programming.html#cb643-7"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;=====1番目のチーム情報=====&quot;
## [1] &quot;Team: American Samoa&quot;
## [1] &quot;Confederation: OFC&quot;
## [1] &quot;Rank: 192&quot;
## [1] &quot;Points: 900&quot;
## [1] &quot;=====2番目のチーム情報=====&quot;
## [1] &quot;Team: Fiji&quot;
## [1] &quot;Confederation: OFC&quot;
## [1] &quot;Rank: 163&quot;
## [1] &quot;Points: 996&quot;</code></pre>
<p>　ちなみに、1つのforループで同じ結果を実現するには次のようにする。結果は掲載しないが、自分で試してみてほしい。また、<code>cat()</code>関数の使い方については<code>?cat</code>を参照されたい。ちなみに<code>\n</code>は改行コードである。</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb645-1"><a href="programming.html#cb645-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(my_df)) {</span>
<span id="cb645-2"><a href="programming.html#cb645-2"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;=====&quot;</span>, i, <span class="st">&quot;番目のチーム情報=====</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb645-3"><a href="programming.html#cb645-3"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Team:&quot;</span>,   my_df<span class="sc">$</span>Team[i], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb645-4"><a href="programming.html#cb645-4"></a>             <span class="st">&quot;Rank:&quot;</span>,   my_df<span class="sc">$</span>Rank[i], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb645-5"><a href="programming.html#cb645-5"></a>             <span class="st">&quot;Points:&quot;</span>, my_df<span class="sc">$</span>Points[i], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb645-6"><a href="programming.html#cb645-6"></a>}</span></code></pre></div>
<p>　リスト型を対象とした多重forループの例も確認しておこう。複数のベクトルを含むリストの場合、3番目のベクトルの5番目の要素を抽出するには、<code>リスト名[[3]][5]</code> のように2つの位置を指定する必要がある。たとえば、3人で構成されたグループが3つあり、それぞれのグループにおける id （例：学籍番号）の順番で名前が格納されている <code>my_list</code>を考えてみよう。</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb646-1"><a href="programming.html#cb646-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Wickham&quot;</span>, <span class="st">&quot;Yanai&quot;</span>),</span>
<span id="cb646-2"><a href="programming.html#cb646-2"></a>                <span class="at">B =</span> <span class="fu">c</span>(<span class="st">&quot;Watanabe&quot;</span>, <span class="st">&quot;Toyoshima&quot;</span>, <span class="st">&quot;Fujii&quot;</span>),</span>
<span id="cb646-3"><a href="programming.html#cb646-3"></a>                <span class="at">C =</span> <span class="fu">c</span>(<span class="st">&quot;Abe&quot;</span>, <span class="st">&quot;Moon&quot;</span>, <span class="st">&quot;Xi&quot;</span>))</span></code></pre></div>
<p>ここで、まず各クラスの出席番号1番の人の名字をすべて出力し、次は2番の人、最後に3番の人を表示するにはどうすれば良いだろうか。以下のコードを見てみよう。</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb647-1"><a href="programming.html#cb647-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb647-2"><a href="programming.html#cb647-2"></a>  </span>
<span id="cb647-3"><a href="programming.html#cb647-3"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">names</span>(my_list)) {</span>
<span id="cb647-4"><a href="programming.html#cb647-4"></a>    <span class="fu">print</span>(my_list[[j]][i])</span>
<span id="cb647-5"><a href="programming.html#cb647-5"></a>  }</span>
<span id="cb647-6"><a href="programming.html#cb647-6"></a>  </span>
<span id="cb647-7"><a href="programming.html#cb647-7"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;===ここまでが出席番号&quot;</span>, i, <span class="st">&quot;番の人です===&quot;</span>))</span>
<span id="cb647-8"><a href="programming.html#cb647-8"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Song&quot;
## [1] &quot;Watanabe&quot;
## [1] &quot;Abe&quot;
## [1] &quot;===ここまでが出席番号1番の人です===&quot;
## [1] &quot;Wickham&quot;
## [1] &quot;Toyoshima&quot;
## [1] &quot;Moon&quot;
## [1] &quot;===ここまでが出席番号2番の人です===&quot;
## [1] &quot;Yanai&quot;
## [1] &quot;Fujii&quot;
## [1] &quot;Xi&quot;
## [1] &quot;===ここまでが出席番号3番の人です===&quot;</code></pre>
<p>このコードは以下のように動く。</p>
<ul>
<li>1行目: 任意の変数を<code>i</code>とし、1から3までの数字を<code>i</code>に格納しながら、3回反復作業を行う。</li>
<li>3行目: 任意の変数を<code>j</code>とし、ここにはリストの要素名（A, B, C）を格納しながら、リストの長さだけ処理を繰り返す。<code>names(my_list)</code>は<code>c("A", "B", "C")</code>である。</li>
<li>4行目: <code>my_list[[j]][i]</code>の内容を出力する。最初は<code>i = 1</code>、<code>j = "A"</code>なので、<code>print(my_list[["A"]][1])</code>、つまり、<code>my_list</code>から<code>"A"</code>を取り出し、そこの<code>1</code>番目の要素を出力する</li>
<li>7行目: 各ベクトルから<code>i</code>番目の要素を出力し、<code>print(paste0("===ここまでが出席番号", i, "番の人です==="))</code>を実行する。<code>i</code>に次の要素を入れ、作業を反復する。<code>i</code>に格納する要素がなくなったら、反復を終了する。</li>
</ul>
<p>　多重forループは3重、4重にすることも可能だが、コードの可読性が低下するため、多くても3重、できれば最大二重までにしておいたほうがよい。3重以上にforループを重ねる場合は、内側のforループを後ほど解説する関数でまとめたほうがいいだろう。</p>
<p>　上の例では、リストの各要素に名前 (A, B, C) が付けられていることを利用した。リストに名前がない場合はどうすれば良いだろうか（そもそも、名前のないリストなど作らないほうが良いのだが…）。例えば、次のような場合である。</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="programming.html#cb649-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Wickham&quot;</span>, <span class="st">&quot;Yanai&quot;</span>),</span>
<span id="cb649-2"><a href="programming.html#cb649-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="st">&quot;Watanabe&quot;</span>, <span class="st">&quot;Toyoshima&quot;</span>, <span class="st">&quot;Fujii&quot;</span>),</span>
<span id="cb649-3"><a href="programming.html#cb649-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="st">&quot;Abe&quot;</span>, <span class="st">&quot;Moon&quot;</span>, <span class="st">&quot;Xi&quot;</span>))</span></code></pre></div>
<p>この場合には、次のようにすればよい。</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb650-1"><a href="programming.html#cb650-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb650-2"><a href="programming.html#cb650-2"></a>  </span>
<span id="cb650-3"><a href="programming.html#cb650-3"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">seq_along</span>(my_list)) {</span>
<span id="cb650-4"><a href="programming.html#cb650-4"></a>    <span class="fu">print</span>(my_list[[j]][i])</span>
<span id="cb650-5"><a href="programming.html#cb650-5"></a>  }</span>
<span id="cb650-6"><a href="programming.html#cb650-6"></a>  </span>
<span id="cb650-7"><a href="programming.html#cb650-7"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;===ここまでが出席番号&quot;</span>, i, <span class="st">&quot;番の人です===&quot;</span>))</span>
<span id="cb650-8"><a href="programming.html#cb650-8"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Song&quot;
## [1] &quot;Watanabe&quot;
## [1] &quot;Abe&quot;
## [1] &quot;===ここまでが出席番号1番の人です===&quot;
## [1] &quot;Wickham&quot;
## [1] &quot;Toyoshima&quot;
## [1] &quot;Moon&quot;
## [1] &quot;===ここまでが出席番号2番の人です===&quot;
## [1] &quot;Yanai&quot;
## [1] &quot;Fujii&quot;
## [1] &quot;Xi&quot;
## [1] &quot;===ここまでが出席番号3番の人です===&quot;</code></pre>
<p>内側のforループでリストの要素名を使う代わりに、リストの要素を位置で指定している。</p>
</div>
<div id="whileによる反復" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> <code>while</code>による反復</h3>
<p>　<code>for</code>によるループは任意の変数にベクトルの要素を1つずつ代入し、ベクトルの要素を使い尽くすまで反復処理を行う。したがって、ベクトルの長さによってループの回数が決まる。</p>
<p>　それに対し、「ある条件が満たされる限り、反復し続ける」あるいは「ある条件が満たされるまで、反復し続ける」ことも可能である。そのときに使うのが、<code>while</code>による <strong>whileループ</strong>である。whileループの書き方はforループにとてもよく似ている。</p>
<p>　基本的な使い方は、以下のとおりである。</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="programming.html#cb652-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (条件) {</span>
<span id="cb652-2"><a href="programming.html#cb652-2" aria-hidden="true" tabindex="-1"></a>  条件が満たされた場合の処理内容</span>
<span id="cb652-3"><a href="programming.html#cb652-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>for</code>が<code>while</code>に変わり、<code>()</code>内の書き方が<code>(任意の変数 in ベクトル)</code>から<code>(条件)</code>に変わった。この<code>()</code>内の条件が満たされる間は<code>{}</code>内の内容を処理が繰り返し実行される。1から5までの整数を表示するコードは、forループを使うと次のように書ける。</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb653-1"><a href="programming.html#cb653-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb653-2"><a href="programming.html#cb653-2"></a>  <span class="fu">print</span>(i)</span>
<span id="cb653-3"><a href="programming.html#cb653-3"></a>}</span></code></pre></div>
<p>　これをwhileループを使って書き直すと、次のようになる。</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb654-1"><a href="programming.html#cb654-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb654-2"><a href="programming.html#cb654-2"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb654-3"><a href="programming.html#cb654-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb654-4"><a href="programming.html#cb654-4"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb654-5"><a href="programming.html#cb654-5"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>whileループを繰り返す条件は<code>i &lt; 6</code>である。これにより、「<code>i</code>が6未満」なら処理が繰り返される。注意すべき点として、<code>i</code> が6未満か否かの判断をループの開始時点で行うので、あらかじめ変数 <code>i</code> を用意する必要があることがあげられる。1行めにある <code>i &lt;- 1</code> がそれである。そして、<code>{}</code>内の最終行に <code>i &lt;- i + 1</code> があり、<code>i</code>を1ずつ増やしている。<code>i = 5</code> の時点では <code>print(i)</code> が実行されるが、<code>i = 6</code>になると、ループをもう1ど実行する条件が満たされないので、反復が停止する。</p>
<p>　<code>i &lt;- i + 1</code>のように内容を少しずつ書き換えるさいは、そのコードを置く位置にも注意が必要だ。先ほどのコードのうち、<code>i &lt;- i + 1</code> を <code>print(i)</code>の前に移動してみよう。</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb656-1"><a href="programming.html#cb656-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb656-2"><a href="programming.html#cb656-2"></a></span>
<span id="cb656-3"><a href="programming.html#cb656-3"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb656-4"><a href="programming.html#cb656-4"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb656-5"><a href="programming.html#cb656-5"></a>  <span class="fu">print</span>(i)</span>
<span id="cb656-6"><a href="programming.html#cb656-6"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6</code></pre>
<p>2から6までの整数が出力された。これは<code>i</code>を出力する<strong>前に</strong><code>i</code>に1が足されるためである。<code>i &lt;- i + 1</code>の位置をこのままにして、先ほどと同じように1から5までの整数を表示するには、次のようにコードを書き換える。</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb658-1"><a href="programming.html#cb658-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb658-2"><a href="programming.html#cb658-2"></a></span>
<span id="cb658-3"><a href="programming.html#cb658-3"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb658-4"><a href="programming.html#cb658-4"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb658-5"><a href="programming.html#cb658-5"></a>  <span class="fu">print</span>(i)</span>
<span id="cb658-6"><a href="programming.html#cb658-6"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>変更点したのは、</p>
<p>1.<code>i</code>の初期値を0にした
2. <code>()</code>内の条件を<code>(i &lt; 6)</code>から<code>(i &lt; 5)</code>にした</p>
<p>という2点である。</p>
<p>　whileループは慣れないとややこしいと感じるだろう。forループで代替できるケースも多い。それでもwhile文が必要になるケースもある。それは先述した通り、「目標は決まっているが、その目標が達成されるまでは処理を何回繰り返せばいいか分からない」場合である。</p>
<p>　たとえば、6面のサイコロ投げを考えよう。投げる度に出た目を記録し、その和が30以上に達したときサイコロ投げを中止するにはどうすればいいだろうか。何回サイコロを投げればいいかがあらかじめわからないと、forループは使えない。連続で6が出るなら5回で十分かもしれないが、1が出続けるなら30回投げる必要がある。このように、「反復処理は行うが、何回行えばいいか分からない。ただし、停止条件は知っている」場合にwhileループを使う。</p>
<p>　サイコロ投げの例は、以下のコードで実行できる。</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb660-1"><a href="programming.html#cb660-1"></a>total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb660-2"><a href="programming.html#cb660-2"></a>trial <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb660-3"><a href="programming.html#cb660-3"></a></span>
<span id="cb660-4"><a href="programming.html#cb660-4"></a><span class="cf">while</span> (total <span class="sc">&lt;</span> <span class="dv">30</span>) {</span>
<span id="cb660-5"><a href="programming.html#cb660-5"></a>  die  <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb660-6"><a href="programming.html#cb660-6"></a>  total <span class="ot">&lt;-</span> total <span class="sc">+</span> die</span>
<span id="cb660-7"><a href="programming.html#cb660-7"></a>  </span>
<span id="cb660-8"><a href="programming.html#cb660-8"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(trial, <span class="st">&quot;回目のサイコロ投げの結果: &quot;</span>, die,</span>
<span id="cb660-9"><a href="programming.html#cb660-9"></a>               <span class="st">&quot;（これまでの総和: &quot;</span>, total, <span class="st">&quot;）&quot;</span>))</span>
<span id="cb660-10"><a href="programming.html#cb660-10"></a>  </span>
<span id="cb660-11"><a href="programming.html#cb660-11"></a>  <span class="co"># print()文は以下のような書き方も可能</span></span>
<span id="cb660-12"><a href="programming.html#cb660-12"></a>  <span class="co"># Result &lt;- sprintf(&quot;%d回目のサイコロ投げの結果: %d （これまでの総和: %d）&quot;, </span></span>
<span id="cb660-13"><a href="programming.html#cb660-13"></a>  <span class="co">#                   trial, die, total)</span></span>
<span id="cb660-14"><a href="programming.html#cb660-14"></a>  <span class="co"># print(Result)</span></span>
<span id="cb660-15"><a href="programming.html#cb660-15"></a>  </span>
<span id="cb660-16"><a href="programming.html#cb660-16"></a>  trial <span class="ot">&lt;-</span> trial <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb660-17"><a href="programming.html#cb660-17"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1回目のサイコロ投げの結果: 5（これまでの総和: 5）&quot;
## [1] &quot;2回目のサイコロ投げの結果: 6（これまでの総和: 11）&quot;
## [1] &quot;3回目のサイコロ投げの結果: 3（これまでの総和: 14）&quot;
## [1] &quot;4回目のサイコロ投げの結果: 4（これまでの総和: 18）&quot;
## [1] &quot;5回目のサイコロ投げの結果: 2（これまでの総和: 20）&quot;
## [1] &quot;6回目のサイコロ投げの結果: 2（これまでの総和: 22）&quot;
## [1] &quot;7回目のサイコロ投げの結果: 1（これまでの総和: 23）&quot;
## [1] &quot;8回目のサイコロ投げの結果: 6（これまでの総和: 29）&quot;
## [1] &quot;9回目のサイコロ投げの結果: 1（これまでの総和: 30）&quot;</code></pre>
<p>このコードの中身を説明しよう。まず、これまで出た目の和を記録する変数<code>total</code>を用意し、初期値として0を格納する。また、何回目のサイコロ投げかを記録するために<code>trial</code>という変数を用意し、初期値として1を格納する（コードの1、2行目）。</p>
<p>　次に、<code>while</code>文を書く。反復する条件は<code>total</code>が30未満と設定する。つまり、<code>total</code>が30以上になったら反復を終了する（コードの4行目）。</p>
<p>　続いて、サイコロを投げ、出た目を<code>die</code>という変数に格納します。サイコロ投げは1から6の間の整数から無作為に1つを値を抽出することでシミュレートできる。そこで使われるのが <code>sample()</code>関数である（コードの5行目）。<code>sample()</code> 関数は与えられたベクトル内の要素を無作為に抽出する。<code>sample(c(1, 2, 3, 4, 5, 6), size = 1)</code>は「<code>c(1, 2, 3, 4, 5, 6)</code>から1つの要素を無作為に抽出せよ」という意味である（乱数生成を利用したシミュレーションについては後の章で詳しく説明する）。サイコロの目が出たら、その目を<code>total</code>の値に足す (コードの6行目)。</p>
<p>　その後、「1回目のサイコロ投げの結果: 5 (これまでの総和: 5)」のように、1回の処理の結果を表示する。 (コードの8行目)。最後に<code>trial</code>の値を1増やし (コードの14行目)、1度の処理が終了する。</p>
<p>　1度の処理が終わったら、whileループの条件判断に戻り、条件が満たされていれば再び処理を繰り返す。これを条件が満たされなくなるまで繰り返す。</p>
<p>　この反復処理は、forループで再現することもできる。次のようにすればよい。</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb662-1"><a href="programming.html#cb662-1"></a>total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb662-2"><a href="programming.html#cb662-2"></a></span>
<span id="cb662-3"><a href="programming.html#cb662-3"></a><span class="cf">for</span> (trial <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>) {</span>
<span id="cb662-4"><a href="programming.html#cb662-4"></a>  die  <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span>)</span>
<span id="cb662-5"><a href="programming.html#cb662-5"></a>  total <span class="ot">&lt;-</span> total <span class="sc">+</span> die</span>
<span id="cb662-6"><a href="programming.html#cb662-6"></a>  </span>
<span id="cb662-7"><a href="programming.html#cb662-7"></a>  <span class="co"># print()の代わりにsprintf()を使うことも可能</span></span>
<span id="cb662-8"><a href="programming.html#cb662-8"></a>  result <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d回目のサイコロ投げの結果: %d （これまでの総和: %d）&quot;</span>,</span>
<span id="cb662-9"><a href="programming.html#cb662-9"></a>                    trial, die, total)</span>
<span id="cb662-10"><a href="programming.html#cb662-10"></a>  <span class="fu">print</span>(result)</span>
<span id="cb662-11"><a href="programming.html#cb662-11"></a>  </span>
<span id="cb662-12"><a href="programming.html#cb662-12"></a>  <span class="cf">if</span> (total <span class="sc">&gt;=</span> <span class="dv">30</span>)  <span class="cf">break</span>() <span class="co"># ()は省略可能</span></span>
<span id="cb662-13"><a href="programming.html#cb662-13"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1回目のサイコロ投げの結果: 4 （これまでの総和: 4）&quot;
## [1] &quot;2回目のサイコロ投げの結果: 6 （これまでの総和: 10）&quot;
## [1] &quot;3回目のサイコロ投げの結果: 1 （これまでの総和: 11）&quot;
## [1] &quot;4回目のサイコロ投げの結果: 2 （これまでの総和: 13）&quot;
## [1] &quot;5回目のサイコロ投げの結果: 4 （これまでの総和: 17）&quot;
## [1] &quot;6回目のサイコロ投げの結果: 6 （これまでの総和: 23）&quot;
## [1] &quot;7回目のサイコロ投げの結果: 4 （これまでの総和: 27）&quot;
## [1] &quot;8回目のサイコロ投げの結果: 5 （これまでの総和: 32）&quot;</code></pre>
<p>このコードの中身を説明しよう。事前にサイコロを投げる回数はわからないが、6面サイコロの場合30回以内には必ず合計が30になるので、<code>trial in 1:30</code>としておく。あとはwhileループの書き方とほぼ同じだが、forループでは<code>i</code>が自動的に更新されるので<code>i &lt;- i + 1</code>は不要である。さらに、一定の条件が満たされるときにループを停止する必要がある。そこで登場するのが条件 <code>if</code> と<code>break()</code>である。条件分岐は次節で説明するが、<code>if</code>から始まる行のコードは、「<code>total</code>が30以上になったらループから脱出せよ」ということを意味する。このようにループからの脱出を指示する関数が <code>break()</code>だ。<code>break()</code> 関数は<code>()</code>を省略して <code>break</code>と書いてもよい。</p>
<p>　これは余談だが、結果の表示に今回はこれまで使ってきた<code>print()</code>と<code>paste0()</code>（または<code>paste()</code>）の代わりに、<code>sprintf()</code>を使っている。<code>sprintf()</code> 内の<code>%d</code>はその位置に指定された変数の値を整数として代入することを意味する。<code>sprintf()</code>にの引数にはまず出力する文字列を指定し、次に代入する変数を順番に入力する。<code>%s</code>は文字 (string) 型、<code>%f</code>は実数 (floating-point number) を意味する。<code>%f</code>では小数の桁数も指定可能であり、小数第2位まで表示させるには <code>%.2f</code> のように表記する。以下のコードは3つの変数の値と文字列を結合する処理を<code>print(paste0())</code>と<code>sprintf()</code>を用いて書いたもので、同じ結果が得られる。</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="programming.html#cb664-1" aria-hidden="true" tabindex="-1"></a>name   <span class="ot">&lt;-</span> <span class="st">&quot;Song&quot;</span></span>
<span id="cb664-2"><a href="programming.html#cb664-2" aria-hidden="true" tabindex="-1"></a>bowls  <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb664-3"><a href="programming.html#cb664-3" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fl">176.2</span></span>
<span id="cb664-4"><a href="programming.html#cb664-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-5"><a href="programming.html#cb664-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(name, <span class="st">&quot;がひと月に食べるラーメンは&quot;</span>, bowls, <span class="st">&quot;杯で、身長は&quot;</span>, height, <span class="st">&quot;cmです。&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Songがひと月に食べるラーメンは50杯で、身長は176.2cmです。&quot;</code></pre>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="programming.html#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %sにnameを、%dにbowlsを、%.1fにheightを小数第1位まで格納し、出力</span></span>
<span id="cb666-2"><a href="programming.html#cb666-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;%sがひと月に食べるラーメンは%d杯で、身長は%.1fcmです。&quot;</span>, name, bowls, height)</span></code></pre></div>
<pre><code>## [1] &quot;Songがひと月に食べるラーメンは50杯で、身長は176.2cmです。&quot;</code></pre>
<p>ただし、<code>{}</code>内の<code>sprintf()</code>はそのまま出力されないため、一旦、オブジェクトとして保存し、それを<code>print()</code>を使って出力する必要がある。詳細については、<a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/sprintf"><code>?sprintf</code></a>を参照されたい。</p>
<p>　今回例として挙げたサイコロ投げは「多くても30回以内に終わる」ことが分かっていたの forループで書き換えることができた。しかし、終了までに必要な反復回数は未知であることもある。目的に応じて <code>for</code>と<code>while</code>を使い分けることが求められる。</p>
<hr />
</div>
</div>
<div id="programming-condition" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> 条件分岐</h2>
<div id="ifelse-ifelse-による条件分岐" class="section level3" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> <code>if</code>、<code>else if</code>、<code>else</code> による条件分岐</h3>
<p>この節では条件分岐について説明する。条件分岐は、条件に応じて異なる処理を行いときに利用する。<code>if</code> による条件分岐の基本形は次のとおりである。</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb668-1"><a href="programming.html#cb668-1"></a><span class="cf">if</span> (条件) {</span>
<span id="cb668-2"><a href="programming.html#cb668-2"></a>  条件が満たされた場合のみ実行される処理の内容</span>
<span id="cb668-3"><a href="programming.html#cb668-3"></a>}</span></code></pre></div>
<p><code>while</code>を使ったループによく似ているが、<code>while</code>文は条件が満たされる限り<code>{}</code>の内容を繰り返し実行するのに対し、<code>if</code> 文では条件が満たされれときに<code>{}</code>の内容が1回だけ実行されて処理が終了するという違いがある。たとえば、名前が格納されているオブジェクト<code>name</code>の中身が<code>"Song"</code>なら「ラーメン大好き」と出力されるコードを考えてみよう。</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb669-1"><a href="programming.html#cb669-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Song&quot;</span></span>
<span id="cb669-2"><a href="programming.html#cb669-2"></a></span>
<span id="cb669-3"><a href="programming.html#cb669-3"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Song&quot;</span>) {</span>
<span id="cb669-4"><a href="programming.html#cb669-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb669-5"><a href="programming.html#cb669-5"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン大好き&quot;</code></pre>
<p><code>if</code>文の <code>()</code>内の条件は、「<code>name</code>の中身が<code>"Song"</code>」の場合のみ<code>{}</code>内の処理を実行せよということを意味する。<code>name</code>の中身が<code>"Yanai"</code>ならどうなるだろうか。</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb671-1"><a href="programming.html#cb671-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Yanai&quot;</span></span>
<span id="cb671-2"><a href="programming.html#cb671-2"></a></span>
<span id="cb671-3"><a href="programming.html#cb671-3"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Song&quot;</span>) {</span>
<span id="cb671-4"><a href="programming.html#cb671-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb671-5"><a href="programming.html#cb671-5"></a>}</span></code></pre></div>
<p>何も表示されない。このように、<code>if</code>文単体だと、条件が<strong>満たされない</strong>場合には何も実行されない。</p>
<p>条件にに応じて異なる処理を実行するために、<code>else</code> を使う。これは<code>if</code>とセットで使われるもので、<code>if</code>の条件が満たされなかった場合の処理内容を指定することができる。<code>else</code>を加えると、次のようなコードが書ける。</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb672-1"><a href="programming.html#cb672-1"></a><span class="cf">if</span> (条件) {</span>
<span id="cb672-2"><a href="programming.html#cb672-2"></a>  条件が満たされた場合の処理内容</span>
<span id="cb672-3"><a href="programming.html#cb672-3"></a>} <span class="cf">else</span> {</span>
<span id="cb672-4"><a href="programming.html#cb672-4"></a>  条件が満たされなかった場合の処理内容</span>
<span id="cb672-5"><a href="programming.html#cb672-5"></a>}</span></code></pre></div>
<p><code>else</code>文は、以下のように改行して書くこともできる。</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb673-1"><a href="programming.html#cb673-1"></a><span class="cf">if</span> (条件) {</span>
<span id="cb673-2"><a href="programming.html#cb673-2"></a>  条件が満たされた場合の処理内容</span>
<span id="cb673-3"><a href="programming.html#cb673-3"></a>} </span>
<span id="cb673-4"><a href="programming.html#cb673-4"></a><span class="cf">else</span> {</span>
<span id="cb673-5"><a href="programming.html#cb673-5"></a>  条件が満たされなかった場合の処理内容</span>
<span id="cb673-6"><a href="programming.html#cb673-6"></a>}</span></code></pre></div>
<p>しかし、この書き方はあまり良くない。<code>else</code> は必ず <code>if</code> とセットで用いられるので、<code>if</code> の処理の終わりである <code>}</code> の直後に半角スペースを1つ挟んで書くのが標準的なコーディングスタイルである。</p>
<p>　それでは <code>name</code>が<code>"Song"</code>でない場合には、「ラーメン好きじゃない」表示されるコードを書いてみよう。</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb674-1"><a href="programming.html#cb674-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Song&quot;</span></span>
<span id="cb674-2"><a href="programming.html#cb674-2"></a></span>
<span id="cb674-3"><a href="programming.html#cb674-3"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Song&quot;</span>) {</span>
<span id="cb674-4"><a href="programming.html#cb674-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb674-5"><a href="programming.html#cb674-5"></a>} <span class="cf">else</span> {</span>
<span id="cb674-6"><a href="programming.html#cb674-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb674-7"><a href="programming.html#cb674-7"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン大好き&quot;</code></pre>
<p><code>name</code>が<code>"Song"</code>の場合、前と変わらず「ラーメン大好き」が出力される。<code>name</code>を<code>"Yanai"</code>に変えてみよう。</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb676-1"><a href="programming.html#cb676-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Yanai&quot;</span></span>
<span id="cb676-2"><a href="programming.html#cb676-2"></a></span>
<span id="cb676-3"><a href="programming.html#cb676-3"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Song&quot;</span>) {</span>
<span id="cb676-4"><a href="programming.html#cb676-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb676-5"><a href="programming.html#cb676-5"></a>} <span class="cf">else</span> {</span>
<span id="cb676-6"><a href="programming.html#cb676-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb676-7"><a href="programming.html#cb676-7"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン好きじゃない&quot;</code></pre>
<p>「ラーメン好きじゃない」が表示される。</p>
<p>　しかし、世の中はと「ラーメン大好き」と「ラーメン好きじゃない」のみで構成されているわけではない。「ラーメン大好き」なのはSong と Koike、「ラーメン好きじゃない」のは Yanai
のみで、それ以外の人は「ラーメンそこそこ好き」だとしよう。つまり3つのパタンがある。それぞれに別の処理を実行するには、3つ以上の条件に対応できる条件分岐が必要になる。</p>
<p>　そのような場合には <code>else if</code>を<code>if</code>と<code>else</code>の間に挿入する。</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb678-1"><a href="programming.html#cb678-1"></a><span class="cf">if</span> (条件1) {</span>
<span id="cb678-2"><a href="programming.html#cb678-2"></a>  条件1が満たされた場合の処理内容</span>
<span id="cb678-3"><a href="programming.html#cb678-3"></a>} <span class="cf">else</span> <span class="cf">if</span> (条件2) {</span>
<span id="cb678-4"><a href="programming.html#cb678-4"></a>  条件1が満たされず、条件2が満たされた場合の処理内容</span>
<span id="cb678-5"><a href="programming.html#cb678-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (条件3) {</span>
<span id="cb678-6"><a href="programming.html#cb678-6"></a>  条件1, 2が満たされず、条件3が満たされた場合の処理内容</span>
<span id="cb678-7"><a href="programming.html#cb678-7"></a>} <span class="cf">else</span> {</span>
<span id="cb678-8"><a href="programming.html#cb678-8"></a>  条件が全て満たされなかった場合の処理内容</span>
<span id="cb678-9"><a href="programming.html#cb678-9"></a>}</span></code></pre></div>
<p>このように条件分岐を書くと、<code>if</code>文の条件が満たされれば最初の<code>{}</code>内の処理を実行し、満たされなかったら次の<code>else if</code>の条件を判定する。その条件が満たされれば<code>{}</code>の処理を実行し、満たされなければ次の<code>else if</code>へ移動…を順に実施する。どの条件も満たされないときは、最終的に <code>else</code> の内容が実行される。</p>
<p>　それでは実際にコードを書いてみよう。</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb679-1"><a href="programming.html#cb679-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Song&quot;</span></span>
<span id="cb679-2"><a href="programming.html#cb679-2"></a></span>
<span id="cb679-3"><a href="programming.html#cb679-3"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Song&quot;</span> <span class="sc">|</span> name <span class="sc">==</span> <span class="st">&quot;Koike&quot;</span>) {</span>
<span id="cb679-4"><a href="programming.html#cb679-4"></a>  <span class="co"># 上の条件は、(name %in% c(&quot;Song&quot;, &quot;Koike&quot;))  でもOK</span></span>
<span id="cb679-5"><a href="programming.html#cb679-5"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb679-6"><a href="programming.html#cb679-6"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Yanai&quot;</span>) {</span>
<span id="cb679-7"><a href="programming.html#cb679-7"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb679-8"><a href="programming.html#cb679-8"></a>} <span class="cf">else</span> {</span>
<span id="cb679-9"><a href="programming.html#cb679-9"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメンそこそこ好き&quot;</span>)</span>
<span id="cb679-10"><a href="programming.html#cb679-10"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン大好き&quot;</code></pre>
<p>このコードでは、まず<code>name</code>が<code>"Song"</code> または <code>"Koike"</code> か否かを判定し、<code>TRUE</code>なら「ラーメン大好き」を表示する。<code>FALSE</code> なら次の <code>else if</code>文へ移動する。ここでは<code>Name</code>が<code>"Yanai"</code>かどうかを判定する。</p>
<p>　最初の条件に登場する <code>|</code>は「OR （または）」を意味する論理演算子であり、第<a href="rbasic.html#rbasic">7</a>章で解説した。このように、条件の中で<code>|</code>や<code>&amp;</code>などの論理演算子を使うことで、複数の条件を指定することができる。また、<code>name == "Song" | name == "Koike"</code>は<code>name %in% c("Song", "Koike")</code>に書き換えることがでる。<code>x %in% y</code>は<code>x</code>が<code>y</code>に含まれているか否かを判定する演算子である。たとえば、<code>"A" %in% c("A", "B", "C")</code>の結果は<code>TRUE</code>だが、<code>"Z" %in% c("A", "B", "C")</code>の結果は<code>FALSE</code>になる。</p>
<p>　それでは<code>name</code>を<code>"Yanai"</code>、<code>"Koike"</code>、<code>"Shigemura"</code>、<code>"Hakiai"</code>に変えながら結果を確認してみよう。</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb681-1"><a href="programming.html#cb681-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Yanai&quot;</span></span>
<span id="cb681-2"><a href="programming.html#cb681-2"></a></span>
<span id="cb681-3"><a href="programming.html#cb681-3"></a><span class="cf">if</span> (name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Koike&quot;</span>)) {</span>
<span id="cb681-4"><a href="programming.html#cb681-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb681-5"><a href="programming.html#cb681-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Yanai&quot;</span>) {</span>
<span id="cb681-6"><a href="programming.html#cb681-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb681-7"><a href="programming.html#cb681-7"></a>} <span class="cf">else</span> {</span>
<span id="cb681-8"><a href="programming.html#cb681-8"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメンそこそこ好き&quot;</span>)</span>
<span id="cb681-9"><a href="programming.html#cb681-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン好きじゃない&quot;</code></pre>
<div class="sourceCode" id="cb683"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb683-1"><a href="programming.html#cb683-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Koike&quot;</span></span>
<span id="cb683-2"><a href="programming.html#cb683-2"></a></span>
<span id="cb683-3"><a href="programming.html#cb683-3"></a><span class="cf">if</span> (name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Koike&quot;</span>)) {</span>
<span id="cb683-4"><a href="programming.html#cb683-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb683-5"><a href="programming.html#cb683-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Yanai&quot;</span>) {</span>
<span id="cb683-6"><a href="programming.html#cb683-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb683-7"><a href="programming.html#cb683-7"></a>} <span class="cf">else</span> {</span>
<span id="cb683-8"><a href="programming.html#cb683-8"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメンそこそこ好き&quot;</span>)</span>
<span id="cb683-9"><a href="programming.html#cb683-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメン大好き&quot;</code></pre>
<div class="sourceCode" id="cb685"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb685-1"><a href="programming.html#cb685-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Shigemura&quot;</span></span>
<span id="cb685-2"><a href="programming.html#cb685-2"></a></span>
<span id="cb685-3"><a href="programming.html#cb685-3"></a><span class="cf">if</span> (name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Koike&quot;</span>)) {</span>
<span id="cb685-4"><a href="programming.html#cb685-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb685-5"><a href="programming.html#cb685-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Yanai&quot;</span>) {</span>
<span id="cb685-6"><a href="programming.html#cb685-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb685-7"><a href="programming.html#cb685-7"></a>} <span class="cf">else</span> {</span>
<span id="cb685-8"><a href="programming.html#cb685-8"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメンそこそこ好き&quot;</span>)</span>
<span id="cb685-9"><a href="programming.html#cb685-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメンそこそこ好き&quot;</code></pre>
<div class="sourceCode" id="cb687"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb687-1"><a href="programming.html#cb687-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Hakiai&quot;</span></span>
<span id="cb687-2"><a href="programming.html#cb687-2"></a></span>
<span id="cb687-3"><a href="programming.html#cb687-3"></a><span class="cf">if</span> (name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Song&quot;</span>, <span class="st">&quot;Koike&quot;</span>)) {</span>
<span id="cb687-4"><a href="programming.html#cb687-4"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン大好き&quot;</span>)</span>
<span id="cb687-5"><a href="programming.html#cb687-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Yanai&quot;</span>) {</span>
<span id="cb687-6"><a href="programming.html#cb687-6"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメン好きじゃない&quot;</span>)</span>
<span id="cb687-7"><a href="programming.html#cb687-7"></a>} <span class="cf">else</span> {</span>
<span id="cb687-8"><a href="programming.html#cb687-8"></a>  <span class="fu">print</span>(<span class="st">&quot;ラーメンそこそこ好き&quot;</span>)</span>
<span id="cb687-9"><a href="programming.html#cb687-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ラーメンそこそこ好き&quot;</code></pre>
<p>　<code>if</code>文が単独で使われることもそれほど多くない。<code>if</code>文は主に反復処理を行う<code>for</code>ループまたは<code>while()</code>ループの中、もしくは次節で説明する自作関数内に使われることが多い。上の例では名前からラーメンに対する情熱を判定するために何度も同じコードを書いてきたが、同じコードを繰り返し書くのは効率が悪い。繰り返し行う作業を関数としてまとめれば便利である。関数の作成については第<a href="functions.html#functions">12</a>章で説明する。</p>
<p>　ここでは<code>for</code>ループと条件分岐の組み合わせについて考えてみよう。学生10人の成績が入っているベクトル<code>scores</code>があるとしよう。そして、成績が60点以上なら「合格」を、未満なら「不合格」を返すようなコードを書く。この作業を効率的に行うために、 <code>for</code>ループと<code>if</code>文を組み合わせる方法を考える。<code>for</code>ループではインデクス変数<code>i</code>に1から10までの数字を代入することを繰り返す。ここでの10はベクトル<code>scores</code>の長さなので、<code>seq_along()</code> を使う。そして、<code>scores</code>の<code>i</code>番目要素に対して60点以上か否かの判定を行い、「合格」または「不合格」という結果を返す。</p>
<p>　以上の内容を実行するコードは、次のように書ける。</p>
<div class="sourceCode" id="cb689"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb689-1"><a href="programming.html#cb689-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">58</span>, <span class="dv">100</span>, <span class="dv">81</span>, <span class="dv">97</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">47</span>, <span class="dv">60</span>, <span class="dv">73</span>, <span class="dv">85</span>)</span>
<span id="cb689-2"><a href="programming.html#cb689-2"></a></span>
<span id="cb689-3"><a href="programming.html#cb689-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(scores)) {</span>
<span id="cb689-4"><a href="programming.html#cb689-4"></a>  <span class="cf">if</span> (scores[i] <span class="sc">&gt;=</span> <span class="dv">60</span>) {</span>
<span id="cb689-5"><a href="programming.html#cb689-5"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;学生&quot;</span>, i, <span class="st">&quot;の判定結果: 合格&quot;</span>))</span>
<span id="cb689-6"><a href="programming.html#cb689-6"></a>  } <span class="cf">else</span> {</span>
<span id="cb689-7"><a href="programming.html#cb689-7"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;学生&quot;</span>, i, <span class="st">&quot;の判定結果: 不合格&quot;</span>))</span>
<span id="cb689-8"><a href="programming.html#cb689-8"></a>  }</span>
<span id="cb689-9"><a href="programming.html#cb689-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;学生1の判定結果: 不合格&quot;
## [1] &quot;学生2の判定結果: 合格&quot;
## [1] &quot;学生3の判定結果: 合格&quot;
## [1] &quot;学生4の判定結果: 合格&quot;
## [1] &quot;学生5の判定結果: 合格&quot;
## [1] &quot;学生6の判定結果: 合格&quot;
## [1] &quot;学生7の判定結果: 不合格&quot;
## [1] &quot;学生8の判定結果: 合格&quot;
## [1] &quot;学生9の判定結果: 合格&quot;
## [1] &quot;学生10の判定結果: 合格&quot;</code></pre>
<p>このコードは、以下の処理を行っている。</p>
<ul>
<li>1行目: まず、ベクトル<code>scores</code>を定義する。</li>
<li>3行目: <code>for</code>文でループを作る。任意の変数としてインデクス<code>i</code>を使う。ベクトルの各要素をのインデクスを入れ替えながら反復を行います。したがって、<code>i in 1:10</code>でも問題ないが、ここでは<code>i in seq_along(scores)</code>を利用する。こうすることで、<code>scores</code>ベクトルの長さが変わっても、<code>for</code>の内容を修正する必要がなくなる。</li>
<li>4, 5行目: <code>scores</code>の<code>i</code>番目要素が60点以上かどうかを判定し、<code>TRUE</code>なら「学生iの判定結果: 合格」を表示する。</li>
<li>6-8行目: <code>scores</code> の<code>i</code>番目要素が60点以上でない場合、「学生iの判定結果: 不合格」を表示する。</li>
</ul>
<p><code>print()</code>内で<code>paste0()</code>を使うとコードの可読性がやや落ちるので、<code>sprintf()</code>を使ってもよいかもしれない（後で説明するパイプ演算子 <code>%&gt;%</code> を使えば、可読性の問題は解決する）。</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb691-1"><a href="programming.html#cb691-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">58</span>, <span class="dv">100</span>, <span class="dv">81</span>, <span class="dv">97</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">47</span>, <span class="dv">60</span>, <span class="dv">73</span>, <span class="dv">85</span>)</span>
<span id="cb691-2"><a href="programming.html#cb691-2"></a></span>
<span id="cb691-3"><a href="programming.html#cb691-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(scores)) {</span>
<span id="cb691-4"><a href="programming.html#cb691-4"></a>  <span class="cf">if</span> (scores[i] <span class="sc">&gt;=</span> <span class="dv">60</span>) {</span>
<span id="cb691-5"><a href="programming.html#cb691-5"></a>    result <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;学生%dの判定結果: 合格&quot;</span>, i)</span>
<span id="cb691-6"><a href="programming.html#cb691-6"></a>  } <span class="cf">else</span> {</span>
<span id="cb691-7"><a href="programming.html#cb691-7"></a>    result <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;学生%dの判定結果: 不合格&quot;</span>, i)</span>
<span id="cb691-8"><a href="programming.html#cb691-8"></a>  }</span>
<span id="cb691-9"><a href="programming.html#cb691-9"></a>  </span>
<span id="cb691-10"><a href="programming.html#cb691-10"></a>  <span class="fu">print</span>(result)</span>
<span id="cb691-11"><a href="programming.html#cb691-11"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;学生1の判定結果: 不合格&quot;
## [1] &quot;学生2の判定結果: 合格&quot;
## [1] &quot;学生3の判定結果: 合格&quot;
## [1] &quot;学生4の判定結果: 合格&quot;
## [1] &quot;学生5の判定結果: 合格&quot;
## [1] &quot;学生6の判定結果: 合格&quot;
## [1] &quot;学生7の判定結果: 不合格&quot;
## [1] &quot;学生8の判定結果: 合格&quot;
## [1] &quot;学生9の判定結果: 合格&quot;
## [1] &quot;学生10の判定結果: 合格&quot;</code></pre>
<p>　次に、結果を出力するのではなく、結果を別のベクトルに格納する例を考えてみよう。あらかじめ <code>scores</code> と同じ長さの空ベクトル<code>pf</code>を用意します。ここに各学生について合否判定の結果を「合格」または「不合格」として格納する処理を行う。以下のようなコードが書ける。</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb693-1"><a href="programming.html#cb693-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">58</span>, <span class="dv">100</span>, <span class="dv">81</span>, <span class="dv">97</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">47</span>, <span class="dv">60</span>, <span class="dv">73</span>, <span class="dv">85</span>)</span>
<span id="cb693-2"><a href="programming.html#cb693-2"></a>pf     <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(scores))</span>
<span id="cb693-3"><a href="programming.html#cb693-3"></a></span>
<span id="cb693-4"><a href="programming.html#cb693-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(scores)) {</span>
<span id="cb693-5"><a href="programming.html#cb693-5"></a>  <span class="cf">if</span> (scores[i] <span class="sc">&gt;=</span> <span class="dv">60</span>) {</span>
<span id="cb693-6"><a href="programming.html#cb693-6"></a>    pf[i] <span class="ot">&lt;-</span> <span class="st">&quot;合格&quot;</span></span>
<span id="cb693-7"><a href="programming.html#cb693-7"></a>  } <span class="cf">else</span> {</span>
<span id="cb693-8"><a href="programming.html#cb693-8"></a>    pf[i] <span class="ot">&lt;-</span> <span class="st">&quot;不合格&quot;</span></span>
<span id="cb693-9"><a href="programming.html#cb693-9"></a>  }</span>
<span id="cb693-10"><a href="programming.html#cb693-10"></a>}</span></code></pre></div>
<p>このコードでは、<code>scores</code> を定義した後、中身が<code>NA</code>のみで構成される長さが<code>scores</code> と同じベクトル<code>pf</code>を定義する。<code>rep(NA, length(scores))</code>は<code>NA</code>を<code>length(Scores)</code>個（ここでは10個）並べたベクトルを生成する。
続いて、点数によって条件分岐を行い、メッセージを出力するのではなく、<code>pf</code>の<code>i</code>番目に<code>"合格"</code>か<code>"不合格"</code>を入れる。結果を確認してみよう。</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="programming.html#cb694-1" aria-hidden="true" tabindex="-1"></a>pf</span></code></pre></div>
<pre><code>##  [1] &quot;不合格&quot; &quot;合格&quot;   &quot;合格&quot;   &quot;合格&quot;   &quot;合格&quot;   &quot;合格&quot;   &quot;不合格&quot; &quot;合格&quot;  
##  [9] &quot;合格&quot;   &quot;合格&quot;</code></pre>
<p>　このように、<code>if</code>文は反復処理を行う<code>for</code>ループまたは<code>while</code>ループと組み合わせることでその本領を発揮する。実は、今回の例については次に説明する<code>ifelse()</code>を使えば1行で処理することができる。しかし、複雑な処理を伴う反復と条件分岐を組み合わせるには、今回のように<code>for</code>ループと<code>if</code>文を組み合わせるのが有効である。</p>
</div>
<div id="ifelseによる条件分岐" class="section level3" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> <code>ifelse()</code>による条件分岐</h3>
<p><code>ifelse()</code>は与えられたベクトル内の各要素に対して条件分岐を行い、それをベクトルの全要素について繰り返す関数である。簡単な条件分岐と反復処理を同時に行う非常に便利な関数である。<code>ifelse()</code>の基本的な書き方は以下のとおり。</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="programming.html#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(条件, 条件がTRUEの場合の処理、条件がFALSEの場合の処理)</span></code></pre></div>
<p>　たとえば、学生10人の成績が入っているベクトル<code>scores</code>に対し、60点以上の場合に合格 (<code>"Pass"</code>)、60点未満の場合に不合格 (<code>"Fail"</code>) の値を割り当て、<code>pf</code>というベクトルに格納しよう。</p>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb697-1"><a href="programming.html#cb697-1" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">58</span>, <span class="dv">100</span>, <span class="dv">81</span>, <span class="dv">97</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">47</span>, <span class="dv">60</span>, <span class="dv">73</span>, <span class="dv">85</span>)</span>
<span id="cb697-2"><a href="programming.html#cb697-2" aria-hidden="true" tabindex="-1"></a>pf <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(scores <span class="sc">&gt;=</span> <span class="dv">60</span>, <span class="st">&quot;Pass&quot;</span>, <span class="st">&quot;Fail&quot;</span>)</span>
<span id="cb697-3"><a href="programming.html#cb697-3" aria-hidden="true" tabindex="-1"></a>pf</span></code></pre></div>
<pre><code>##  [1] &quot;Fail&quot; &quot;Pass&quot; &quot;Pass&quot; &quot;Pass&quot; &quot;Pass&quot; &quot;Pass&quot; &quot;Fail&quot; &quot;Pass&quot; &quot;Pass&quot; &quot;Pass&quot;</code></pre>
<p>条件は<code>scores</code>の値が60以上か否かであり、60以上なら<code>"Pass"</code>を、それ以外なら<code>"Fail"</code>を返す。</p>
<p>　返す値として新しい値を与える代わりに、一定の条件が満たされたら現状の値を保持し、それ以外なら指定した値に変更して返すこともできる。たとえば、世論調査では以下のように「答えたくない」または「わからない」を9や99などで記録することが多い。この値はこのままでは分析するのが難しいので、欠損値として扱いたいことがある。例として、次の質問を考えよう。</p>
<p>Q. あなたはラーメンが好きですか。</p>
<ul>
<li>1.大好き</li>
<li>2.そこそこ好き</li>
<li>3.好きではない</li>
<li>9.答えたくない</li>
</ul>
<p>この質問に対する10人の回答が格納されたデータフレーム (<code>Ramen</code>) があるとしよう。このデータフレームには2つの列があり、<code>id</code> 列は回答者のID（識別番号）、<code>ramen</code> 列にはは上の質問に対する答えが入ってる。</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb699-1"><a href="programming.html#cb699-1"></a>Ramen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb699-2"><a href="programming.html#cb699-2"></a>  <span class="at">id    =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb699-3"><a href="programming.html#cb699-3"></a>  <span class="at">ramen =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb699-4"><a href="programming.html#cb699-4"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="programming.html#cb700-1" aria-hidden="true" tabindex="-1"></a>Ramen</span></code></pre></div>
<pre><code>##    id ramen
## 1   1     1
## 2   2     1
## 3   3     2
## 4   4     1
## 5   5     3
## 6   6     1
## 7   7     9
## 8   8     2
## 9   9     1
## 10 10     9</code></pre>
<p>　この<code>ramen</code>列に対し、<code>ramen == 9</code>なら<code>NA</code>を割り当て、それ以外の場合は元の値をそのまま残したいとしよう。そしてその結果を<code>Ramen</code>の<code>ramen</code>列に上書する。これは次のコードで実行できる。</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb702-1"><a href="programming.html#cb702-1" aria-hidden="true" tabindex="-1"></a>Ramen<span class="sc">$</span>ramen <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Ramen<span class="sc">$</span>ramen <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, Ramen<span class="sc">$</span>ramen)</span>
<span id="cb702-2"><a href="programming.html#cb702-2" aria-hidden="true" tabindex="-1"></a>Ramen</span></code></pre></div>
<pre><code>##    id ramen
## 1   1     1
## 2   2     1
## 3   3     2
## 4   4     1
## 5   5     3
## 6   6     1
## 7   7    NA
## 8   8     2
## 9   9     1
## 10 10    NA</code></pre>
<p>　3つ以上のパタンに分岐させたいときは、<code>ifelse()</code>の中で<code>ifelse()</code>を使うこともできる。<code>scores</code>ベクトルの例を考えてよう。ここで90点以上ならS、80点以上ならA、70点以上ならB、60点以上ならCを割り当て、それ以外はFを返すことにしよう。そして、その結果を<code>grade</code> という変数に格納してみよう。</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb704-1"><a href="programming.html#cb704-1"></a>grade <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(scores <span class="sc">&gt;=</span> <span class="dv">90</span>, <span class="st">&quot;S&quot;</span>, </span>
<span id="cb704-2"><a href="programming.html#cb704-2"></a>                <span class="fu">ifelse</span>(scores <span class="sc">&gt;=</span> <span class="dv">80</span>, <span class="st">&quot;A&quot;</span>,</span>
<span id="cb704-3"><a href="programming.html#cb704-3"></a>                       <span class="fu">ifelse</span>(scores <span class="sc">&gt;=</span> <span class="dv">70</span>, <span class="st">&quot;B&quot;</span>,</span>
<span id="cb704-4"><a href="programming.html#cb704-4"></a>                              <span class="fu">ifelse</span>(scores <span class="sc">&gt;=</span> <span class="dv">60</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;F&quot;</span>))))</span></code></pre></div>
<p>このコードでは、<code>ifelse()</code>の条件が<code>FALSE</code>の場合、次の<code>ifelse()</code>での判定を行う。結果を確認しておこう。</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb705-1"><a href="programming.html#cb705-1" aria-hidden="true" tabindex="-1"></a>grade</span></code></pre></div>
<pre><code>##  [1] &quot;F&quot; &quot;S&quot; &quot;A&quot; &quot;S&quot; &quot;B&quot; &quot;C&quot; &quot;F&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<p>　この例からもわかるとおり、<code>ifelse()</code>を使いすぎるとコードの可読性が低くなるので、このようなコードはあまり推奨できない。複数の条件に応じて返す値を変える処理は、{dplyr}パッケージの<code>case_when()</code>関数で行うのがよいだろう。この関数については、<a href="datahandling2.html#datahandling2">14</a>章で詳細に説明するが、ここでは上のコードと同じ処理を実施する例のみ示す。</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb707-1"><a href="programming.html#cb707-1"></a>grade2 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(scores <span class="sc">&gt;=</span> <span class="dv">90</span> <span class="sc">~</span> <span class="st">&quot;S&quot;</span>,</span>
<span id="cb707-2"><a href="programming.html#cb707-2"></a>                           scores <span class="sc">&gt;=</span> <span class="dv">80</span> <span class="sc">~</span> <span class="st">&quot;A&quot;</span>,</span>
<span id="cb707-3"><a href="programming.html#cb707-3"></a>                           scores <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">~</span> <span class="st">&quot;B&quot;</span>,</span>
<span id="cb707-4"><a href="programming.html#cb707-4"></a>                           scores <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">&quot;C&quot;</span>,</span>
<span id="cb707-5"><a href="programming.html#cb707-5"></a>                           <span class="cn">TRUE</span>         <span class="sc">~</span> <span class="st">&quot;F&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb708-1"><a href="programming.html#cb708-1" aria-hidden="true" tabindex="-1"></a>grade2</span></code></pre></div>
<pre><code>##  [1] &quot;F&quot; &quot;S&quot; &quot;A&quot; &quot;S&quot; &quot;B&quot; &quot;C&quot; &quot;F&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot;</code></pre>
</div>
<div id="switchによる条件分岐" class="section level3" number="11.4.3">
<h3><span class="header-section-number">11.4.3</span> <code>switch()</code>による条件分岐</h3>
<p>　<code>switch()</code>は、与えられた<strong>長さ1</strong>の文字列<a href="#fn61" class="footnote-ref" id="fnref61"><sup>61</sup></a>を用いた条件分岐を行う。これが単体で使われうことはほとんどなく、通常は関数のなかで使われる。したがって、初めて本書を読む場合はこの節を一旦とばし、第<a href="functions.html#functions">12</a>章を読んだ後に必要に応じて戻ってきてほしい。</p>
<p>　ここでは2つの数値<code>x</code>と<code>y</code>の加減乗除を行う関数<code>m_calc</code> という名前の関数を作る。この関数は<code>x</code> と<code>y</code>以外に<code>operation</code>という引数をもち、この<code>operation</code>の値によって行う処理が変わる。たとえば、<code>operation = "+"</code>なら足し算を、<code>operation = "*"</code>なら掛け算を行う。</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb710-1"><a href="programming.html#cb710-1"></a>my_calc <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, operation) {</span>
<span id="cb710-2"><a href="programming.html#cb710-2"></a>  <span class="cf">switch</span>(operation,</span>
<span id="cb710-3"><a href="programming.html#cb710-3"></a>         <span class="st">&quot;+&quot;</span> <span class="ot">=</span> x <span class="sc">+</span> y,</span>
<span id="cb710-4"><a href="programming.html#cb710-4"></a>         <span class="st">&quot;-&quot;</span> <span class="ot">=</span> x <span class="sc">-</span> y,</span>
<span id="cb710-5"><a href="programming.html#cb710-5"></a>         <span class="st">&quot;*&quot;</span> <span class="ot">=</span> x <span class="sc">*</span> y,</span>
<span id="cb710-6"><a href="programming.html#cb710-6"></a>         <span class="st">&quot;/&quot;</span> <span class="ot">=</span> x <span class="sc">/</span> y,</span>
<span id="cb710-7"><a href="programming.html#cb710-7"></a>         <span class="fu">stop</span>(<span class="st">&quot;operation の値に使えるのは +, -, *, / のみです。&quot;</span>)</span>
<span id="cb710-8"><a href="programming.html#cb710-8"></a>         )</span>
<span id="cb710-9"><a href="programming.html#cb710-9"></a>}</span></code></pre></div>
<p>このコードの中身を確認しよう。重要なのは2行目から8行目の部分である。<code>switch()</code>の最初の引数は条件を判定する長さ1のベクトルである。ここではこれが<code>operation</code>である。そして、<code>operation</code>に指定される実引数の値によって異なる処理を行う。<code>"+" = x + y</code>は「<code>operation</code>の値が<code>"+"</code>なら、<code>x + y</code>を実行する」ことを意味する。これを他の演算子に対しても指定する。最後の引数は、どの条件にも合わない場合の処理である。ここでは,
<code>operation の値に使えるのは +, -, *, / のみです。"</code>というエラーメッセージを表示し、関数の実行を停止するために <code>stop()</code> 関数を指定している。</p>
<p>　上のコードは、<code>if</code>、<code>else if</code>、 <code>else</code>を使って書き換えることができる。</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb711-1"><a href="programming.html#cb711-1"></a>my_calc2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, <span class="at">operation =</span> <span class="fu">c</span>(<span class="st">&quot;+&quot;</span>, <span class="st">&quot;-&quot;</span>, <span class="st">&quot;*&quot;</span>, <span class="st">&quot;/&quot;</span>)) {</span>
<span id="cb711-2"><a href="programming.html#cb711-2"></a>  </span>
<span id="cb711-3"><a href="programming.html#cb711-3"></a>  operation <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(operation)</span>
<span id="cb711-4"><a href="programming.html#cb711-4"></a>  </span>
<span id="cb711-5"><a href="programming.html#cb711-5"></a>  <span class="cf">if</span> (operation <span class="sc">==</span> <span class="st">&quot;+&quot;</span>) {</span>
<span id="cb711-6"><a href="programming.html#cb711-6"></a>    <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb711-7"><a href="programming.html#cb711-7"></a>  } <span class="cf">else</span> <span class="cf">if</span> (operation <span class="sc">==</span> <span class="st">&quot;-&quot;</span>) {</span>
<span id="cb711-8"><a href="programming.html#cb711-8"></a>    <span class="fu">return</span>(x <span class="sc">-</span> y)</span>
<span id="cb711-9"><a href="programming.html#cb711-9"></a>  } <span class="cf">else</span> <span class="cf">if</span> (operation <span class="sc">==</span> <span class="st">&quot;*&quot;</span>) {</span>
<span id="cb711-10"><a href="programming.html#cb711-10"></a>    <span class="fu">return</span>(x <span class="sc">*</span> y)</span>
<span id="cb711-11"><a href="programming.html#cb711-11"></a>  } <span class="cf">else</span> {</span>
<span id="cb711-12"><a href="programming.html#cb711-12"></a>    <span class="fu">return</span>(x <span class="sc">/</span> y)</span>
<span id="cb711-13"><a href="programming.html#cb711-13"></a>  } </span>
<span id="cb711-14"><a href="programming.html#cb711-14"></a>}</span></code></pre></div>
<p>先ほどと異なる点は、<code>function()</code>の中で<code>operation</code>のデフォルト値をベクトルとしてした与えたことだ。これは「<code>operation</code>引数の値がこれらの値以外になることは許さない」ということを意味する。<code>match.arg()</code>関数は、<code>operation</code>引数が予め指定された引数の値と一致するか否かを判断する。指定された引数と一致しない場合、エラーを表示し、処理を中断する。ちなみに、<code>match.arg()</code>は<code>swith()</code>文と組み合わせて使うこともできる。</p>
<p>　今回の例の場合、<code>switch()</code>を使ったほうがコードの内容がわかりやすく、読みやすいが、<code>if</code>による条件分岐でも十分に対応可能である。また、条件によって行う処理が複雑な場合には<code>switch()</code>よりも<code>if</code>のほうが使いやすい。</p>
<p>　作った関数を使ってみよう。</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb712-1"><a href="programming.html#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_calc</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">operation =</span> <span class="st">&quot;+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="programming.html#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_calc</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">operation =</span> <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="programming.html#cb716-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_calc</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">operation =</span> <span class="st">&quot;*&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="programming.html#cb718-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_calc</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">operation =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1.666667</code></pre>
<p>では<code>"+"</code>、<code>"-"</code>、<code>"*"</code>、<code>"/"</code>以外の値を<code>operation</code>に与えるとうなるだろうか。ためしに<code>"^"</code>を入れてみよう。</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="programming.html#cb720-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_calc</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">operation =</span> <span class="st">&quot;^&quot;</span>)</span></code></pre></div>
<pre><code>## Error in my_calc(5, 3, operation = &quot;^&quot;): operation の値に使えるのは +, -, *, / のみです。</code></pre>
<p><code>stop()</code>内に書いたエラーメッセージが表示され、処理が中止される。</p>
<hr />
</div>
</div>
<div id="programming-exercise" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> 練習問題</h2>
<p><strong>問1</strong></p>
<ul>
<li>3つの6面サイコロ投げを考える。3つの目の和が15になるまでサイコロ投げを繰り返す。どのような目が出て、その合計はいくつか。そして、何回目のサイコロ投げかを表示するコードを　
<ul>
<li><code>for</code>ループを用いて書きなさい</li>
<li><code>while</code>ループを用いて書きなさい</li>
<li>上の2つのコードが同じ結果を表示することを確認したうえで、どちらの方法がより効率的か考察しなさい。</li>
</ul></li>
</ul>
<pre><code>## [1] &quot;1目のサイコロ投げの結果: 4, 2, 6 (合計: 12)&quot;
## [1] &quot;2目のサイコロ投げの結果: 5, 4, 1 (合計: 10)&quot;
## [1] &quot;3目のサイコロ投げの結果: 5, 6, 4 (合計: 15)&quot;</code></pre>
<p><strong>問2</strong></p>
<ul>
<li>以下のような長さ5の文字型ベクトル<code>cause</code>がある。「肥満の原因はXXでしょう。」というメッセージを表示するコードを書きなさい。ただし、「XX」の箇所にはベクトルの各要素を代入すること。表示されるメッセージは5個でなければならない。</li>
</ul>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb723-1"><a href="programming.html#cb723-1" aria-hidden="true" tabindex="-1"></a>cause <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;喫煙&quot;</span>, <span class="st">&quot;飲酒&quot;</span>, <span class="st">&quot;食べすぎ&quot;</span>, <span class="st">&quot;寝不足&quot;</span>, <span class="st">&quot;ストレス&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;肥満の原因は喫煙でしょう。&quot;
## [1] &quot;肥満の原因は飲酒でしょう。&quot;
## [1] &quot;肥満の原因は食べすぎでしょう。&quot;
## [1] &quot;肥満の原因は寝不足でしょう。&quot;
## [1] &quot;肥満の原因はストレスでしょう。&quot;</code></pre>
<ul>
<li>長さ4の文字型ベクトル<code>effect</code>を以下のように定義する。このとき、「YYの原因はXXでしょう。」というメッセージを表示するコードを書きなさい。ただし、「YY」には<code>effect</code>の要素を、「XX」には<code>cause</code>の要素を代入すること。出力されるメッセージは20個でなければならない。</li>
</ul>
<div class="sourceCode" id="cb725"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb725-1"><a href="programming.html#cb725-1" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;肥満&quot;</span>, <span class="st">&quot;腹痛&quot;</span>, <span class="st">&quot;不人気&quot;</span>, <span class="st">&quot;金欠&quot;</span>)</span></code></pre></div>
<ul>
<li>長さ3の文字型ベクトル<code>solution</code>を以下のように定義する。このとき、「YYの原因はXXですが、ZZ改善されるでしょう。」というメッセージを出力するコードを書きなさい。ただし、「YY」には<code>effect</code>の要素を、「XX」には<code>cause</code>の要素を、「ZZ」には<code>solution</code>の要素を代入すること。出力されるメッセージは60個でなければならない。</li>
</ul>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="programming.html#cb726-1" aria-hidden="true" tabindex="-1"></a>solution <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;この薬を飲めば&quot;</span>, <span class="st">&quot;一日一麺すれば&quot;</span>, <span class="st">&quot;神戸大に登山すれば&quot;</span>)</span></code></pre></div>
<p><strong>問3</strong></p>
<ul>
<li>長さ2のnumericベクトル<code>data</code>について考える。条件分岐を用いて<code>data</code>の1番目の要素 (<code>data[1]</code>) が2番目の要素 (<code>data[2]</code>) より大きい場合、1番目の要素と2番目の順番を逆転させる条件分岐を作成せよ。たとえば、<code>data &lt;- c(5, 3)</code>なら、条件分岐後の<code>data</code>の値が<code>c(3, 5)</code>になるようにするコードを書きなさい。</li>
</ul>

</div>
</div>
<h3> 参考資料</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Chambers:2016" class="csl-entry">
Chambers, John M. 2016. <em>Extending r</em>. Boca Raton, FL: CRC Press.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="51">
<li id="fn51"><p>具体的にはメモリの特定箇所にデータを書き込んだり、それを読み取んだりすること。<a href="programming.html#fnref51" class="footnote-back">↩︎</a></p></li>
<li id="fn52"><p>チューリング完全 (Turing-complete) な言語の条件に「反復」はない。条件分岐でループを実行することができるからだ。よって、プログラミングを構成するのは「データの読み書き」と「条件分岐」のみとも考えられる。<a href="programming.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p>並べ替え（ソート）アルゴリズムはプログラミングを学習する際に定番の題材であり、様々なアルゴリズムがある。<a href="programming.html#fnref53" class="footnote-back">↩︎</a></p></li>
<li id="fn54"><p>苦行であるだけでなく、スプレッドシート上でデータを書き換えると、入力ミスをおかしやすいし、そのミスを後で見つけるのが非常に困難である。したがって、データをスプレッドシート上で編集するのは絶対にやめるべきである。<a href="programming.html#fnref54" class="footnote-back">↩︎</a></p></li>
<li id="fn55"><p>RはOOPを実装するためにS3クラスをデフォルトで採用しているが、これはオブジェクト指向プログラミング言語としては厳密性を欠くところがある。Rでは、S3の代わりにS4やR6などの現代的なOOPを実装することもできる。<a href="programming.html#fnref55" class="footnote-back">↩︎</a></p></li>
<li id="fn56"><p>厳密には、tibble型データは3つのクラスを内部に有しており、その中にdata.frameが含まれる。<a href="programming.html#fnref56" class="footnote-back">↩︎</a></p></li>
<li id="fn57"><p>チェーンケースは、COBOLやLISPのような言語では使われる。どうしても使いたければ、変数名全体をバックティック（<code>`</code>）で囲んで<code>`math-score` &lt;- 10</code> のようにする方法もあるが、もちろん推奨しない。<a href="programming.html#fnref57" class="footnote-back">↩︎</a></p></li>
<li id="fn58"><p><code>paste()</code> 関数を使うと、<code>sep</code>で指定した文字列で繋ぐ。<code>sep</code> の既定値は半角スペース。<a href="programming.html#fnref58" class="footnote-back">↩︎</a></p></li>
<li id="fn59"><p>しかし、forループをあまりにも多く重ねるとコードの可読性が低下するので注意しよう。多重の反復処理が必要な場合には、反復処理のための関数を自作することで対応することもできる。<a href="programming.html#fnref59" class="footnote-back">↩︎</a></p></li>
<li id="fn60"><p>交換法則が成り立ち、演算子の左右を区別する意味はないので、本当は81パタンも考える必要はない。<a href="programming.html#fnref60" class="footnote-back">↩︎</a></p></li>
<li id="fn61"><p>長さ1の数値型ベクトルにも使えるが、使われる例があまりない。<a href="programming.html#fnref61" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datastructure.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R_Not_for_Everyone.pdf", "R_Not_for_Everyone.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
