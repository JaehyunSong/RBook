<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>私たちのR - 5&nbsp; Rパッケージ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./project.html" rel="next">
<link href="./r_customize.html" rel="prev">
<link href="./Figs/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "サーチ"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CEHS4C056W"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CEHS4C056W', { 'anonymize_ip': false});
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&amp;display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&amp;display=swap" rel="stylesheet"> 


<meta property="og:title" content="私たちのR: ベストプラクティスの探求">
<meta property="og:description" content="R Not for Everyone: An Esoteric Guide">
<meta property="og:image" content="https://www.jaysong.net/RBook/Figs/favicon.png">
<meta property="og:site_name" content="私たちのR">
<meta property="og:image:height" content="260">
<meta property="og:image:width" content="260">
<meta name="twitter:title" content="私たちのR: ベストプラクティスの探求">
<meta name="twitter:description" content="R Not for Everyone: An Esoteric Guide">
<meta name="twitter:image" content="https://www.jaysong.net/RBook/Figs/favicon.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:image-height" content="260">
<meta name="twitter:image-width" content="260">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./aboutr.html">Rの導入</a></li><li class="breadcrumb-item"><a href="./packages.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Rパッケージ</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">私たちのR</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/JaehyunSong/RBook/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="サーチ"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">紹介</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Rの導入</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aboutr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rのインストール</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">IDEの導入</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_customize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">分析環境のカスタマイズ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Rパッケージ</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Rの基礎</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">プロジェクト管理</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">基本的な操作</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./io.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">データの入出力</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datatype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">データ型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datastructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">データ構造</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Rプログラミングの基礎</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">関数の自作</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">データハンドリング</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">データハンドリング [抽出]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">データハンドリング [要約]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">データハンドリング [拡張]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">データハンドリング [factor型]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidydata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">整然データ構造</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">文字列の処理</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">可視化</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">可視化 [理論]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">可視化 [基礎]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">可視化 [応用]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">可視化 [発展]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">表の作成</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">再現可能な研究</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">R Markdown [基礎]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rmarkdown2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">R Markdown [応用]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Quarto入門</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./renv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">分析環境の管理</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">中級者向け</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">反復処理</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">オブジェクト指向プログラミング</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./monte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">モンテカルロ・シミュレーション</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">スクレイピング</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">付録</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">データセット</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./filesystem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">ファイルシステム</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">R Tips</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">本書の執筆環境</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">参考文献</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#sec-packages_intro" id="toc-sec-packages_intro" class="nav-link active" data-scroll-target="#sec-packages_intro"><span class="header-section-number">5.1</span> パッケージとは</a></li>
  <li><a href="#sec-packages_install" id="toc-sec-packages_install" class="nav-link" data-scroll-target="#sec-packages_install"><span class="header-section-number">5.2</span> パッケージのインストール</a></li>
  <li><a href="#sec-packages_library" id="toc-sec-packages_library" class="nav-link" data-scroll-target="#sec-packages_library"><span class="header-section-number">5.3</span> パッケージの読み込み</a></li>
  <li><a href="#sec-packages_update" id="toc-sec-packages_update" class="nav-link" data-scroll-target="#sec-packages_update"><span class="header-section-number">5.4</span> パッケージのアップデート</a></li>
  <li><a href="#sec-packages_pacman" id="toc-sec-packages_pacman" class="nav-link" data-scroll-target="#sec-packages_pacman"><span class="header-section-number">5.5</span> {pacman}によるパッケージ管理</a>
  <ul class="collapse">
  <li><a href="#インストール" id="toc-インストール" class="nav-link" data-scroll-target="#インストール"><span class="header-section-number">5.5.1</span> インストール</a></li>
  <li><a href="#読み込み" id="toc-読み込み" class="nav-link" data-scroll-target="#読み込み"><span class="header-section-number">5.5.2</span> 読み込み</a></li>
  <li><a href="#アップデート" id="toc-アップデート" class="nav-link" data-scroll-target="#アップデート"><span class="header-section-number">5.5.3</span> アップデート</a></li>
  </ul></li>
  <li><a href="#sec-packages_tidyverse" id="toc-sec-packages_tidyverse" class="nav-link" data-scroll-target="#sec-packages_tidyverse"><span class="header-section-number">5.6</span> 必須パッケージのインストール</a></li>
  <li><a href="#名前空間の衝突" id="toc-名前空間の衝突" class="nav-link" data-scroll-target="#名前空間の衝突"><span class="header-section-number">5.7</span> 名前空間の衝突</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./aboutr.html">Rの導入</a></li><li class="breadcrumb-item"><a href="./packages.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Rパッケージ</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-packages" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Rパッケージ</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-packages_intro" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="sec-packages_intro"><span class="header-section-number">5.1</span> パッケージとは</h2>
<p>　Rには様々な関数 (functions) が用意されている。少しだけ例を挙げると、平均値を求める<code>mean()</code>、合計を求める<code>sum()</code>、線形回帰分析を行う<code>lm()</code>、平均値の検定を行う<code>t.test()</code>などがある。他にも多くの関数があり、ここにすべてを列挙することはできない。</p>
<p>　Rの関数は、誰にでも作ることができる。データ分析の方法は日々進歩し、Rがあらかじめ提供する関数だけでは数百行のコードが必要で、不便なときもある。そんな分析を、たった1行のコードで実行できるようにする便利な関数を、Rユーザはたくさん作ってきた。そのような関数をひとまとめにして他のユーザと共有できるようにしたものが<strong>パッケージ</strong>である。 　 　これまでに、グラフ作成に特化したパッケージ、機械学習に特化したパッケージ、テキスト分析に特化したパッケージなど、数千のRパッケージが開発されてきた。新たなパッケージの開発が、Rが幅広い問題に対応することを容易にしている。パッケージの豊富さがR最大のメリットであると言ってもよい。誰かが新しい分析手法を提案したら、数日内、あるいは提案と同時に（ときには、論文が公式に出版される前に！）Rパッケージとして公開されるケースが多い。</p>
<p>　本章ではパッケージをインストールし、読み込む方法について説明する。また、パッケージの管理をアシストするパッケージ、{pacman}の使い方についても紹介する。</p>
</section>
<section id="sec-packages_install" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="sec-packages_install"><span class="header-section-number">5.2</span> パッケージのインストール</h2>
<p>　Rの環境は何かを作るための作業台に似ている。作業台にはモノを作るための材料だけでなく、工具・道具セットなども置かれる。この作業台がRにおける「環境 (environment) 」であり、材料がベクトルや行列、データフレームなどのオブジェクト、工具セットがパッケージである。オブジェクトについては後で説明することにして、ここではパッケージについて考えよう。</p>
<p>　何かを作るとき、素材・材料だけでなく、なんらかの道具が必要となることが多い。Rにはあらかじめいくつかの必須道具セットが用意されているが、さらに様々な道具セットを追加して使うこともできる。そして、それらの道具セットの各々には、複数の道具が含まれている。道具セット（Rのパッケージ）に含まれるひとつひとつの道具のことを、Rでは「関数 (function) 」と呼ぶ。それらの道具セットを購入し、作業台の近くの棚に収納することがパッケージをインストールすることにあたる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">install.packages</span>(<span class="st">"パッケージ名"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　これらのパッケージは、<a href="https://cran.r-project.org">CRAN</a>というRの公式道具屋<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>からダウンロードし、インストールすることができる。もう一つの大きな道具屋として、<a href="https://github.com">GitHub</a>がある<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。<a href="https://github.com">GitHub</a>は個人経営の道具屋が集まっているモールのようなものである。<a href="https://github.com">GitHub</a>を利用するためには、あらかじめ<a href="https://cran.r-project.org">CRAN</a>から{devtools}、または{remotes}というパッケージをインストールしておく必要がある。</p>
<p>　ここでは{devtools}というパッケージをインストールしてみよう。CRANからパッケージをインストールするには、<code>install.packages()</code> という関数を使う。{devtools}はCRANに登録されているので、<code>install.packages()</code>関数でインストールする。パッケージ名を<code>"</code>（引用符）で囲む必要があるので、注意されたい。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　<a href="https://cran.r-project.org">CRAN</a>に登録されていないパッケージを<a href="https://github.com">GitHub</a>からインストールするときは、{devtools}または{remotes}の<code>install_github()</code>関数を使う。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># あらかじめ{devtools}、または{remotes}をインストールしておく</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"># {remotes}をインストールした場合は、remotes::install_github()を使用する</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"作成者のGitHubのID/パッケージ名"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　たとえば、筆者 (Song) が作成した{<a href="https://github.com/JaehyunSong/BalanceR">BalanceR</a>}パッケージをインストールするために、以下のコードを入力して実行する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># {remotes}をインストールした場合は、</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co"># remotes::install_github("JaehyunSong/BalanceR")</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"JaehyunSong/BalanceR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　ここで<code>JaehyunSong</code>はSongのGitHub IDであり、<code>BalanceR</code>はパッケージ名である。</p>
</section>
<section id="sec-packages_library" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="sec-packages_library"><span class="header-section-number">5.3</span> パッケージの読み込み</h2>
<p>　先ほど述べたように、パッケージのインストールは道具セットの購入と収納に似ている。ただし、実際に道具セットを使うためには、それを自分の作業台に乗せなければならない<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。この作業がパッケージの読み込み (load) である。インストールしたパッケージを読み込むには<code>library()</code>または<code>require()</code>関数を使う。<code>require()</code>は関数内に使う目的で設計された関数だが、パッケージを読み込むという点ではどちらを使っても大差ない。</p>
<div id="fig-packages-load-1" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-packages-load-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Figs/Packages/Package_Workbench.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-packages-load-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;5.1: Rパッケージと作業環境
</figcaption>
</figure>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">library</span>(パッケージ名)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#または</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">require</span>(パッケージ名)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　読み込まれたパッケージはセッションが開かれている間のみ有効である。一通りの作業が終わり、作業部屋から退出すると、作業台上の道具セットは収納棚に自動的に戻される。つまり、RまたはRStudioを閉じると、どのパッケージを読み込んでいたかという情報がリセットされる。したがって、次にRStudio を使うときに同じパッケージを利用するなら、それを読み込む作業をあらためて行う必要がある。</p>
<p>　もしかすると、作業の途中に読み込んだパッケージを作業台から取り除きたいときがあるかもしれない。そんなときは、<code>detach()</code>関数を使う。対象となるパッケージ名の前に <code>package:</code> と付け加える必要があることに注意されたい。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">detach</span>(<span class="st">"package:パッケージ名"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-packages_update" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="sec-packages_update"><span class="header-section-number">5.4</span> パッケージのアップデート</h2>
<p>　Rパッケージはバグが修正されたり、新しい機能 (=関数) が追加されるなど、日々更新される。基本的には[^ex-packs]、利用するパッケージを最新版に更新（アップデート）した方が良いだろう。パッケージの更新方法は、パッケージのインストール方法と同じである。{dplyr}というパッケージを最新版にアップデートしたい場合、<code>install.packages("dplyr")</code>を実行すればよい。 　 [^ex-packs]: ただし、分析の再生性 (reproducibility) という観点から、パッケージを更新したくない（古いバーションを維持したい）ということもあり得る。分析過程を記録する際には、どのバージョンを使ったかということまで含めて記録をとるべきである。</p>
<p>　しかし、Rを使い続けるとインストール済みのパッケージの数はどんどん増える。そうなると、ひとつひとつのパッケージを個別にアップデートするのは面倒になってくる。そもそも既に最新版が入っていて（または開発休止/中止により）アップデートが不要なパッケージもあるかもしれない。そんなときは、RStudioでアップデートが必要なパッケージのリストを表示し、それらを一挙にアップデートすることができる。RStudioのPackagesペインにある “Update” をクリックすると、アップデート可能なパッケージの一覧が表示される。ここでアップデートしたいパッケージの左にチェックをするか、下段の “Select All” を選択して “Install Updates” をクリックすれば、チェックされているすべてのパッケージがアップデートされる。</p>
<p>　ただし、場合によってはアップデート時に以下のようなメッセージがコンソールに表示されるかも知れない。</p>
<pre><code>  There are binary versions available but the source versions
  are later:
      binary source needs_compilation
terra 1.5-17 1.5-21              TRUE
yaml   2.2.2  2.3.4              TRUE

Do you want to install from sources the packages which need compilation? (Yes/no/cancel)</code></pre>
<p>このようなメッセージが表示されたら、<strong>コンソール</strong> (Console) にYes、no、cancelのいずれかを入力してReturn (Enter) キーを押す必要がある。どうしても最新のパッケージが欲しい場合は<code>Yes</code>を入力すれば良いが、インストールに時間がかかる場合がある。一方、<code>no</code>を入力した場合は、若干古いバージョンがインストールされるが、インストールに必要な時間が短いため、基本的には<code>no</code>で問題ないだろう。<code>cancel</code>を入力した場合はアップデートがすべてキャンセルされる。</p>
</section>
<section id="sec-packages_pacman" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="sec-packages_pacman"><span class="header-section-number">5.5</span> {pacman}によるパッケージ管理</h2>
<p>　CRANとGitHubを合わせると、数千のRパッケージが公開されている。Rの使用歴が長くなればインストール済みパッケージの数は増え、1つのスクリプト内で使用するパッケージも多くなるだろう。あるパッケージが他のパッケージの機能に依存することもよくあるので、自分が想像するよりも多くのパッケージがインストールされているかもしれない<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>。このように膨大な数のパッケージを管理するためのパッケージが{pacman}である。{pacman}はCRANから入手可能である。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="インストール" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="インストール"><span class="header-section-number">5.5.1</span> インストール</h3>
<p>　パッケージをCRANからインストールには<code>p_install()</code>関数を使用する。使い方は<code>install.packages()</code>と同じであり、複数のパッケージをインストールしたい場合はパッケージ名の箇所に<code>c(パッケージ名1, パッケージ名2, ...)</code>を入れる。パッケージ名は<code>"</code>で囲んでも、囲まなくても良い。GitHubに公開されているパッケージは<code>p_install_gh()</code>関数を使用する。これは{devtools}、または{remotes}の<code>install_github()</code>と同じ使い方となり、必ず<code>"</code>で囲む必要がある。</p>
<p>　{pacman}の関数は、通常1つのファイルのなかで1度か2度しか使わないので、わざわざ<code>library(pacman)</code>で読み込まなくてもよい。{pacman}を読み込む代わりに、<code>pacman::関数名()</code>で使うことができる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># CRANからインストール</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>pacman<span class="sc">::</span><span class="fu">p_install</span>(パッケージ名)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># githubからインストール</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>pacman<span class="sc">::</span><span class="fu">p_install_gh</span>(<span class="st">"作成者のGitHubのID/パッケージ名"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="読み込み" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="読み込み"><span class="header-section-number">5.5.2</span> 読み込み</h3>
<p>　パッケージの読み込みには<code>p_load()</code>関数を使う。実はこの関数が{pacman}を使う最大の利点である。<code>p_load()</code>関数の使い方は以下の通りである。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(パッケージ名)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　<code>p_load()</code>の便利なところは (1) 複数のパッケージが指定可能であることと、 (2) インストールされていないパッケージを指定するとそれをCRANから自動的にインストールして読み込んでくれることだ。たとえば、{tidyverse}と{broom}、{estimatr}という3つのパッケージを読み込む場合、<code>library()</code>関数を使うと次のコードを使うことになる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># library() を使う場合</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">library</span>(broom)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">library</span>(estimatr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>それに対して{pacman}の<code>p_load()</code>を使えば、以下のようになる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># {pacman}のp_load() を使う場合</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse,</span>
<span id="cb12-3"><a href="#cb12-3"></a>               broom, </span>
<span id="cb12-4"><a href="#cb12-4"></a>               estimatr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　また、<code>p_load()</code>内のパッケージがインストールされていない場合、CRANのパッケージリストから検索し、そのパッケージをインストールしてくれる。したがって、上で紹介した<code>p_install()</code>を使うケースはほぼない。</p>
<p>　ただし、GitHub上のパッケージは自動的にインストールしてくれない。たとえば、GitHubのみで公開されている{BalanceR}パッケージがインストールされていない場合、<code>p_load(BalanceR)</code>を実行しても{BalanceR}はインストールされない。あらかじめ<code>p_install_gh()</code>でインストールしておく必要がある。しかし、GitHub上のパッケージを検索し、インストールしてから読み込みをする<code>p_load_gh()</code>という関数もある。ユーザー名JaehyunSongのBalanceRレポジトリーのパッケージを読み込む場合は以下のように入力する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>pacman<span class="sc">::</span><span class="fu">p_load_gh</span>(<span class="st">"JaehyunSong/BalanceR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　このコードは{BalanceR}パッケージがインストールされていると読み込みのみ行い、インストールされていない場合はJaehyunSongのBalanceRレポジトリからパッケージをインストールし、読み込む。書くのがやや面倒であるが、便利な関数である。</p>
</section>
<section id="アップデート" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="アップデート"><span class="header-section-number">5.5.3</span> アップデート</h3>
<p>　{pacman}には、アップデートが可能なパッケージをすべてアップデートしてくれる<code>p_update()</code>という関数も用意されている。使い方は簡単で、コンソール上に<code>p_update()</code>のみの入力すれば良い。ただし、一部のパッケージのみをアップデートしたいのであれば、RStudioが提供するアップデート機能を使う方が簡単かもしれない<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>。</p>
<p>　また、同じ機能の関数として<code>p_up()</code>があるが、<code>p_update()</code>の方がアップデートしていることがわかりやすいので<code>p_update()</code>の使用を推奨する<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>pacman<span class="sc">::</span><span class="fu">p_update</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sec-packages_tidyverse" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="sec-packages_tidyverse"><span class="header-section-number">5.6</span> 必須パッケージのインストール</h2>
<p>　ここでは、現在Rでデータ分析をするにあたって必須のパッケージであるといえる{tidyverse}をインストールする。{tidyverse}は{dplyr}、{ggplot2}、{tidyr}など、Rにおいて不可欠なパッケージを含むパッケージ<strong>群</strong>である。また、上で紹介した{devtools}も今のうちにインストールしておこう。既に導入済みの読者は、以下のコードを実行しなくてよい。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="名前空間の衝突" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="名前空間の衝突"><span class="header-section-number">5.7</span> 名前空間の衝突</h2>
<p>　Rパッケージは各種関数、データセット、ドキュメント（ヘルプ、ヴィネット）などを一つにまとめたものであり、Rユーザーであれば誰でもパッケージを開発し、配布することができる。「誰でも」Rパッケージ開発に関われることはRが持つ最大の利点ではあるが、統一された生態系を維持することが難しいことも事実だ。たとえば宋が開発した{mycat}というパッケージと矢内が開発した{myKitty}パッケージがあるとしよう。猫好きにはたまらないパッケージなので、両方インストールし、両方読み込みもするだろう。もし、この2つのパッケージで同じ名前を持つ、異なる構造・機能をする関数、<code>nya()</code>があればどうなるだろう。<code>nya()</code>関数を使用する場合、それが{mycat}の<code>nya()</code>なのか、{myKitty}の<code>nya()</code>なのかの問題が発生する。これが名前空間（namespace）の衝突（conflict）、またはパッケージ間の衝突と呼ばれるものである。</p>
<p>　一つの例を確認してみよう。Rを起動した直後、<code>print(.packages())</code>を入力すると、現在、読み込み済みのパッケージが確認できる。</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">print</span>(<span class="fu">.packages</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>[1] "stats"     "graphics"  "grDevices" "utils"     "datasets"  "methods"  
[7] "base"     </code></pre>
<p>Rにはいくつかのコア・パッケージが存在し、これらはR起動と同時に読み込まれる。続きて、この状態で{tidyverse}パッケージを読み込んでみよう。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package to force all conflicts to become errors</code></pre>
<p>ここで注目するしたいのは「Conflicts」の箇所だ。</p>
<pre><code>✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
<p>関数名は場合によって<code>パッケージ名::関数名()</code>と表記される。以上の例は{dplyr}の<code>filter()</code>と<code>lag()</code>関数が{stats}の<code>filter()</code>、<code>lag()</code>関数を上書きしたことを意味する。{stats}パッケージはRのコア・パッケージの1つであり、R起動と同時に読み込まれるパッケージだ。このメッセージは現在の作業環境内に読み込まれているパッケージに同じ名前の関数が複数ある場合に表示される。もう一度、読み込み済みのパッケージのリストが出してみよう。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
私は{dplyr}パッケージを読み込んだ覚えがございません。
</div>
</div>
<div class="callout-body-container callout-body">
<p>　{tidyverse}を読み込むと{dplyr}パッケージが読み込まれる。この{tidyverse}は{dplyr}、{readr}、{ggplot2}など「今どき」のRのおける必須級パッケージを一気に読み込むパッケージに過ぎない。</p>
</div>
</div>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">print</span>(<span class="fu">.packages</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code> [1] "lubridate" "forcats"   "stringr"   "dplyr"     "purrr"     "readr"    
 [7] "tidyr"     "tibble"    "ggplot2"   "tidyverse" "stats"     "graphics" 
[13] "grDevices" "utils"     "datasets"  "methods"   "base"     </code></pre>
<p>たしかに{dplyr}と{stats}が読み込まれている。この2つのパッケージには<code>filter()</code>という名前の関数があるようだが、パッケージ内の関数の目録は<code>ls("package:パッケージ名")</code>で確認できる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">ls</span>(<span class="st">"package:stats"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "acf"                  "acf2AR"               "add.scope"           
  [4] "add1"                 "addmargins"           "aggregate"           
  [7] "aggregate.data.frame" "aggregate.ts"         "AIC"                 
 [10] "alias"                "anova"                "ansari.test"         
 [13] "aov"                  "approx"               "approxfun"           
 [16] "ar"                   "ar.burg"              "ar.mle"              
 [19] "ar.ols"               "ar.yw"                "arima"               
 [22] "arima.sim"            "arima0"               "arima0.diag"         
 [25] "ARMAacf"              "ARMAtoMA"             "as.dendrogram"       
 [28] "as.dist"              "as.formula"           "as.hclust"           
 [31] "as.stepfun"           "as.ts"                "asOneSidedFormula"   
 [34] "ave"                  "bandwidth.kernel"     "bartlett.test"       
 [37] "BIC"                  "binom.test"           "binomial"            
 [40] "biplot"               "Box.test"             "bw.bcv"              
 [43] "bw.nrd"               "bw.nrd0"              "bw.SJ"               
 [46] "bw.ucv"               "C"                    "cancor"              
 [49] "case.names"           "ccf"                  "chisq.test"          
 [52] "cmdscale"             "coef"                 "coefficients"        
 [55] "complete.cases"       "confint"              "confint.default"     
 [58] "confint.lm"           "constrOptim"          "contr.helmert"       
 [61] "contr.poly"           "contr.SAS"            "contr.sum"           
 [64] "contr.treatment"      "contrasts"            "contrasts&lt;-"         
 [67] "convolve"             "cooks.distance"       "cophenetic"          
 [70] "cor"                  "cor.test"             "cov"                 
 [73] "cov.wt"               "cov2cor"              "covratio"            
 [76] "cpgram"               "cutree"               "cycle"               
 [79] "D"                    "dbeta"                "dbinom"              
 [82] "dcauchy"              "dchisq"               "decompose"           
 [85] "delete.response"      "deltat"               "dendrapply"          
 [88] "density"              "density.default"      "deriv"               
 [91] "deriv3"               "deviance"             "dexp"                
 [94] "df"                   "df.kernel"            "df.residual"         
 [97] "DF2formula"           "dfbeta"               "dfbetas"             
[100] "dffits"               "dgamma"               "dgeom"               
[103] "dhyper"               "diffinv"              "dist"                
[106] "dlnorm"               "dlogis"               "dmultinom"           
[109] "dnbinom"              "dnorm"                "dpois"               
[112] "drop.scope"           "drop.terms"           "drop1"               
[115] "dsignrank"            "dt"                   "dummy.coef"          
[118] "dummy.coef.lm"        "dunif"                "dweibull"            
[121] "dwilcox"              "ecdf"                 "eff.aovlist"         
[124] "effects"              "embed"                "end"                 
[127] "estVar"               "expand.model.frame"   "extractAIC"          
[130] "factanal"             "factor.scope"         "family"              
[133] "fft"                  "filter"               "fisher.test"         
[136] "fitted"               "fitted.values"        "fivenum"             
[139] "fligner.test"         "formula"              "frequency"           
[142] "friedman.test"        "ftable"               "Gamma"               
[145] "gaussian"             "get_all_vars"         "getCall"             
[148] "getInitial"           "glm"                  "glm.control"         
[151] "glm.fit"              "hasTsp"               "hat"                 
[154] "hatvalues"            "hclust"               "heatmap"             
[157] "HoltWinters"          "influence"            "influence.measures"  
[160] "integrate"            "interaction.plot"     "inverse.gaussian"    
[163] "IQR"                  "is.empty.model"       "is.leaf"             
[166] "is.mts"               "is.stepfun"           "is.ts"               
[169] "is.tskernel"          "isoreg"               "KalmanForecast"      
[172] "KalmanLike"           "KalmanRun"            "KalmanSmooth"        
[175] "kernapply"            "kernel"               "kmeans"              
[178] "knots"                "kruskal.test"         "ks.test"             
[181] "ksmooth"              "lag"                  "lag.plot"            
[184] "line"                 "lm"                   "lm.fit"              
[187] "lm.influence"         "lm.wfit"              "loadings"            
[190] "loess"                "loess.control"        "loess.smooth"        
[193] "logLik"               "loglin"               "lowess"              
[196] "ls.diag"              "ls.print"             "lsfit"               
[199] "mad"                  "mahalanobis"          "make.link"           
[202] "makeARIMA"            "makepredictcall"      "manova"              
[205] "mantelhaen.test"      "mauchly.test"         "mcnemar.test"        
[208] "median"               "median.default"       "medpolish"           
[211] "model.extract"        "model.frame"          "model.frame.default" 
[214] "model.matrix"         "model.matrix.default" "model.matrix.lm"     
[217] "model.offset"         "model.response"       "model.tables"        
[220] "model.weights"        "monthplot"            "mood.test"           
[223] "mvfft"                "na.action"            "na.contiguous"       
[226] "na.exclude"           "na.fail"              "na.omit"             
[229] "na.pass"              "napredict"            "naprint"             
[232] "naresid"              "nextn"                "nlm"                 
[235] "nlminb"               "nls"                  "nls.control"         
[238] "NLSstAsymptotic"      "NLSstClosestX"        "NLSstLfAsymptote"    
[241] "NLSstRtAsymptote"     "nobs"                 "numericDeriv"        
[244] "offset"               "oneway.test"          "optim"               
[247] "optimHess"            "optimise"             "optimize"            
[250] "order.dendrogram"     "p.adjust"             "p.adjust.methods"    
[253] "pacf"                 "Pair"                 "pairwise.prop.test"  
[256] "pairwise.t.test"      "pairwise.table"       "pairwise.wilcox.test"
[259] "pbeta"                "pbinom"               "pbirthday"           
[262] "pcauchy"              "pchisq"               "pexp"                
[265] "pf"                   "pgamma"               "pgeom"               
[268] "phyper"               "plclust"              "plnorm"              
[271] "plogis"               "plot.ecdf"            "plot.spec.coherency" 
[274] "plot.spec.phase"      "plot.stepfun"         "plot.ts"             
[277] "pnbinom"              "pnorm"                "poisson"             
[280] "poisson.test"         "poly"                 "polym"               
[283] "power"                "power.anova.test"     "power.prop.test"     
[286] "power.t.test"         "PP.test"              "ppoints"             
[289] "ppois"                "ppr"                  "prcomp"              
[292] "predict"              "predict.glm"          "predict.lm"          
[295] "preplot"              "princomp"             "printCoefmat"        
[298] "profile"              "proj"                 "promax"              
[301] "prop.test"            "prop.trend.test"      "psignrank"           
[304] "psmirnov"             "pt"                   "ptukey"              
[307] "punif"                "pweibull"             "pwilcox"             
[310] "qbeta"                "qbinom"               "qbirthday"           
[313] "qcauchy"              "qchisq"               "qexp"                
[316] "qf"                   "qgamma"               "qgeom"               
[319] "qhyper"               "qlnorm"               "qlogis"              
[322] "qnbinom"              "qnorm"                "qpois"               
[325] "qqline"               "qqnorm"               "qqplot"              
[328] "qsignrank"            "qsmirnov"             "qt"                  
[331] "qtukey"               "quade.test"           "quantile"            
[334] "quasi"                "quasibinomial"        "quasipoisson"        
[337] "qunif"                "qweibull"             "qwilcox"             
[340] "r2dtable"             "rbeta"                "rbinom"              
[343] "rcauchy"              "rchisq"               "read.ftable"         
[346] "rect.hclust"          "reformulate"          "relevel"             
[349] "reorder"              "replications"         "reshape"             
[352] "resid"                "residuals"            "residuals.glm"       
[355] "residuals.lm"         "rexp"                 "rf"                  
[358] "rgamma"               "rgeom"                "rhyper"              
[361] "rlnorm"               "rlogis"               "rmultinom"           
[364] "rnbinom"              "rnorm"                "rpois"               
[367] "rsignrank"            "rsmirnov"             "rstandard"           
[370] "rstudent"             "rt"                   "runif"               
[373] "runmed"               "rweibull"             "rwilcox"             
[376] "rWishart"             "scatter.smooth"       "screeplot"           
[379] "sd"                   "se.contrast"          "selfStart"           
[382] "setNames"             "shapiro.test"         "sigma"               
[385] "simulate"             "smooth"               "smooth.spline"       
[388] "smoothEnds"           "sortedXyData"         "spec.ar"             
[391] "spec.pgram"           "spec.taper"           "spectrum"            
[394] "spline"               "splinefun"            "splinefunH"          
[397] "SSasymp"              "SSasympOff"           "SSasympOrig"         
[400] "SSbiexp"              "SSD"                  "SSfol"               
[403] "SSfpl"                "SSgompertz"           "SSlogis"             
[406] "SSmicmen"             "SSweibull"            "start"               
[409] "stat.anova"           "step"                 "stepfun"             
[412] "stl"                  "StructTS"             "summary.aov"         
[415] "summary.glm"          "summary.lm"           "summary.manova"      
[418] "summary.stepfun"      "supsmu"               "symnum"              
[421] "t.test"               "termplot"             "terms"               
[424] "terms.formula"        "time"                 "toeplitz"            
[427] "toeplitz2"            "ts"                   "ts.intersect"        
[430] "ts.plot"              "ts.union"             "tsdiag"              
[433] "tsp"                  "tsp&lt;-"                "tsSmooth"            
[436] "TukeyHSD"             "uniroot"              "update"              
[439] "update.default"       "update.formula"       "var"                 
[442] "var.test"             "variable.names"       "varimax"             
[445] "vcov"                 "weighted.mean"        "weighted.residuals"  
[448] "weights"              "wilcox.test"          "window"              
[451] "window&lt;-"             "write.ftable"         "xtabs"               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">ls</span>(<span class="st">"package:dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "%&gt;%"                   "across"                "add_count"            
  [4] "add_count_"            "add_row"               "add_rownames"         
  [7] "add_tally"             "add_tally_"            "all_equal"            
 [10] "all_of"                "all_vars"              "anti_join"            
 [13] "any_of"                "any_vars"              "arrange"              
 [16] "arrange_"              "arrange_all"           "arrange_at"           
 [19] "arrange_if"            "as_data_frame"         "as_label"             
 [22] "as_tibble"             "as.tbl"                "auto_copy"            
 [25] "band_instruments"      "band_instruments2"     "band_members"         
 [28] "bench_tbls"            "between"               "bind_cols"            
 [31] "bind_rows"             "c_across"              "case_match"           
 [34] "case_when"             "changes"               "check_dbplyr"         
 [37] "coalesce"              "collapse"              "collect"              
 [40] "combine"               "common_by"             "compare_tbls"         
 [43] "compare_tbls2"         "compute"               "consecutive_id"       
 [46] "contains"              "copy_to"               "count"                
 [49] "count_"                "cross_join"            "cumall"               
 [52] "cumany"                "cume_dist"             "cummean"              
 [55] "cur_column"            "cur_data"              "cur_data_all"         
 [58] "cur_group"             "cur_group_id"          "cur_group_rows"       
 [61] "current_vars"          "data_frame"            "db_analyze"           
 [64] "db_begin"              "db_commit"             "db_create_index"      
 [67] "db_create_indexes"     "db_create_table"       "db_data_type"         
 [70] "db_desc"               "db_drop_table"         "db_explain"           
 [73] "db_has_table"          "db_insert_into"        "db_list_tables"       
 [76] "db_query_fields"       "db_query_rows"         "db_rollback"          
 [79] "db_save_query"         "db_write_table"        "dense_rank"           
 [82] "desc"                  "dim_desc"              "distinct"             
 [85] "distinct_"             "distinct_all"          "distinct_at"          
 [88] "distinct_if"           "distinct_prepare"      "do"                   
 [91] "do_"                   "dplyr_col_modify"      "dplyr_reconstruct"    
 [94] "dplyr_row_slice"       "ends_with"             "enexpr"               
 [97] "enexprs"               "enquo"                 "enquos"               
[100] "ensym"                 "ensyms"                "eval_tbls"            
[103] "eval_tbls2"            "everything"            "explain"              
[106] "expr"                  "failwith"              "filter"               
[109] "filter_"               "filter_all"            "filter_at"            
[112] "filter_if"             "first"                 "full_join"            
[115] "funs"                  "funs_"                 "glimpse"              
[118] "group_by"              "group_by_"             "group_by_all"         
[121] "group_by_at"           "group_by_drop_default" "group_by_if"          
[124] "group_by_prepare"      "group_cols"            "group_data"           
[127] "group_indices"         "group_indices_"        "group_keys"           
[130] "group_map"             "group_modify"          "group_nest"           
[133] "group_rows"            "group_size"            "group_split"          
[136] "group_trim"            "group_vars"            "group_walk"           
[139] "grouped_df"            "groups"                "id"                   
[142] "ident"                 "if_all"                "if_any"               
[145] "if_else"               "inner_join"            "intersect"            
[148] "is_grouped_df"         "is.grouped_df"         "is.src"               
[151] "is.tbl"                "join_by"               "lag"                  
[154] "last"                  "last_col"              "last_dplyr_warnings"  
[157] "lead"                  "left_join"             "location"             
[160] "lst"                   "make_tbl"              "matches"              
[163] "min_rank"              "mutate"                "mutate_"              
[166] "mutate_all"            "mutate_at"             "mutate_each"          
[169] "mutate_each_"          "mutate_if"             "n"                    
[172] "n_distinct"            "n_groups"              "na_if"                
[175] "near"                  "nest_by"               "nest_join"            
[178] "new_grouped_df"        "new_rowwise_df"        "nth"                  
[181] "ntile"                 "num_range"             "one_of"               
[184] "order_by"              "percent_rank"          "pick"                 
[187] "progress_estimated"    "pull"                  "quo"                  
[190] "quo_name"              "quos"                  "recode"               
[193] "recode_factor"         "reframe"               "relocate"             
[196] "rename"                "rename_"               "rename_all"           
[199] "rename_at"             "rename_if"             "rename_vars"          
[202] "rename_vars_"          "rename_with"           "right_join"           
[205] "row_number"            "rows_append"           "rows_delete"          
[208] "rows_insert"           "rows_patch"            "rows_update"          
[211] "rows_upsert"           "rowwise"               "same_src"             
[214] "sample_frac"           "sample_n"              "select"               
[217] "select_"               "select_all"            "select_at"            
[220] "select_if"             "select_var"            "select_vars"          
[223] "select_vars_"          "semi_join"             "setdiff"              
[226] "setequal"              "show_query"            "slice"                
[229] "slice_"                "slice_head"            "slice_max"            
[232] "slice_min"             "slice_sample"          "slice_tail"           
[235] "sql"                   "sql_escape_ident"      "sql_escape_string"    
[238] "sql_join"              "sql_select"            "sql_semi_join"        
[241] "sql_set_op"            "sql_subquery"          "sql_translate_env"    
[244] "src"                   "src_df"                "src_local"            
[247] "src_mysql"             "src_postgres"          "src_sqlite"           
[250] "src_tbls"              "starts_with"           "starwars"             
[253] "storms"                "summarise"             "summarise_"           
[256] "summarise_all"         "summarise_at"          "summarise_each"       
[259] "summarise_each_"       "summarise_if"          "summarize"            
[262] "summarize_"            "summarize_all"         "summarize_at"         
[265] "summarize_each"        "summarize_each_"       "summarize_if"         
[268] "sym"                   "symdiff"               "syms"                 
[271] "tally"                 "tally_"                "tbl"                  
[274] "tbl_df"                "tbl_nongroup_vars"     "tbl_ptype"            
[277] "tbl_vars"              "tibble"                "top_frac"             
[280] "top_n"                 "transmute"             "transmute_"           
[283] "transmute_all"         "transmute_at"          "transmute_if"         
[286] "tribble"               "type_sum"              "ungroup"              
[289] "union"                 "union_all"             "validate_grouped_df"  
[292] "validate_rowwise_df"   "vars"                  "where"                
[295] "with_groups"           "with_order"            "wrap_dbplyr_obj"      </code></pre>
</div>
</div>
<p>いずれも<code>filter()</code>という関数があることが分かる。これを名前空間の衝突と呼ぶ。それでは<code>filter()</code>関数を実行すると、どのパッケージの<code>filter()</code>関数が呼ばれるだろうか。正解は「あとに読み込んだパッケージの<code>filter()</code>関数」だ。{stats}はR起動と同時に読み込まれ、{dplyr}を含む{tidyverse}は起動後に読み込んだため、{dplyr}の<code>filter()</code>の優先順位が高くなる。</p>
<p>　ここで更に{MASS}パッケージを読み込んでみよう。</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">library</span>(MASS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Attaching package: ‘MASS’

The following object is masked from ‘package:dplyr’:

    select</code></pre>
<p>ここでは{MASS}の<code>select()</code>関数が{dplyr}の<code>select()</code>関数を上書きしたとのメッセージが表示される。実際、{dplyr}にも、{MASS}にも<code>select()</code>関数が存在する。また、{MASS}を{tidyverse}より後に読み込んだため、{MASS}の<code>select()</code>の優先順位が高い。以下のコードは<code>iris</code>というデータセットから<code>Sepal.Length</code>、<code>Sepal.Width</code>、<code>Species</code>列を抽出し、最初の6行を出力するコードであるが、エラーが出る。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">select</span>(Sepal.Length, Sepal.Width, Species) <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in select(iris, Sepal.Length, Sepal.Width, Species): unused arguments (Sepal.Length, Sepal.Width, Species)</code></pre>
</div>
</div>
<p>もし、この<code>select()</code>関数が{dplyr}の<code>select()</code>関数であれば、以上のコードは正しいコードだ。しかし、{MASS}の<code>select()</code>が呼ばれたので、エラーが生じた。</p>
<p>　データハンドリングの際、よく使われるのは{dpylr}の<code>select()</code>である。しかし、{MASS}も{dplyr}もよく使われるパッケージである。{dplyr}の<code>select()</code>を優先したい場合は、{dplyr}を{MASS}より後に読み込んでも良いが、確実な方法は「どのパッケージの関数か」を明記することだ。パッケージ名を指定した関数を書き方が<code>パッケージ名::関数名()</code>である。以下のコードは{dplyr}パッケージの<code>select()</code>関数を使うことを明記したコードであり、問題なく動くことが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Sepal.Length, Sepal.Width, Species) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Species
1          5.1         3.5  setosa
2          4.9         3.0  setosa
3          4.7         3.2  setosa
4          4.6         3.1  setosa
5          5.0         3.6  setosa
6          5.4         3.9  setosa</code></pre>
</div>
</div>
<p>現在の作業環境における名前空間の衝突は<code>conflicts()</code>関数で確認できる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">conflicts</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "%&gt;%"           "%&gt;%"           "intersect"     "select"       
 [5] "setdiff"       "union"         "%&gt;%"           "%&gt;%"          
 [9] "all_of"        "any_of"        "as_tibble"     "contains"     
[13] "ends_with"     "everything"    "last_col"      "matches"      
[17] "num_range"     "one_of"        "starts_with"   "tibble"       
[21] "tribble"       "%&gt;%"           "add_row"       "as_data_frame"
[25] "as_tibble"     "data_frame"    "glimpse"       "lst"          
[29] "tibble"        "tribble"       "type_sum"      "as_label"     
[33] "enexpr"        "enexprs"       "enquo"         "enquos"       
[37] "ensym"         "ensyms"        "expr"          "quo"          
[41] "quo_name"      "quos"          "sym"           "syms"         
[45] "vars"          "filter"        "lag"           "npk"          
[49] "Arith"         "Compare"       "show"          "%||%"         
[53] "as.difftime"   "body&lt;-"        "date"          "intersect"    
[57] "kronecker"     "plot"          "Position"      "setdiff"      
[61] "setequal"      "union"        </code></pre>
</div>
</div>
<p>一部の関数は全く同じ機能をする関数なので来にしなくても良いが、<code>select()</code>関数などは{dplyr}の<code>select()</code>と{MASS}の<code>select()</code>は全く別物なので注意が必要である。</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>道具「屋」とは言っても、パッケージは無料である。<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>他にも<a href="https://about.gitlab.com">GitLab</a>、<a href="https://bitbucket.org/product/">Bitbucket</a>などがある。<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><code>mean()</code>や<code>sum()</code>、<code>lm()</code>のようによく使われる関数（=工具） はRの起動と同時に作業台の上に乗せられる。<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>作業台上に乗せずに、収納棚から必要なときだけ道具を取り出して使うこともできる。この場合、<code>パッケージ名::関数名()</code>のように関数を使う。頻繁に使うパッケージなら読み込む方が効率的だが、1、2回くらいしか使わないパッケージなら、このような使い方をしてもよいだろう。<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>AというパッケージがBというパッケージに依存する場合、Aをインストール際にBもインストールされる。<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><code>p_update(ask = TRUE)</code>を実行すれば個々のパッケージに対してアップデートするかどうかを決めることができるが、ひとつひとつのパッケージについて回答を求められるので、かえって面倒である。<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>コードの長さとわかりやすさの間にはトレードオフがある。短いほうがタイプが楽だが何を表しているかがわかりにくい一方で、長いとタイプするのは面倒だが何を表しているかはわかりやすい。<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/RBook\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./r_customize.html" class="pagination-link" aria-label="分析環境のカスタマイズ">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">分析環境のカスタマイズ</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./project.html" class="pagination-link" aria-label="プロジェクト管理">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">プロジェクト管理</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, <a href="https://www.jaysong.net">Jaehyun Song</a> and <a href="https://yukiyanai.github.io/">Yuki Yanai</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>