<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>私たちのR - 8&nbsp; データの入出力</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./datatype.html" rel="next">
<link href="./r_basic.html" rel="prev">
<link href="./Figs/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "サーチ"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CEHS4C056W"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CEHS4C056W', { 'anonymize_ip': false});
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&amp;display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&amp;display=swap" rel="stylesheet"> 


<meta property="og:title" content="私たちのR: ベストプラクティスの探求">
<meta property="og:description" content="R Not for Everyone: An Esoteric Guide">
<meta property="og:image" content="https://www.jaysong.net/RBook/Figs/favicon.png">
<meta property="og:site_name" content="私たちのR">
<meta property="og:image:height" content="260">
<meta property="og:image:width" content="260">
<meta name="twitter:title" content="私たちのR: ベストプラクティスの探求">
<meta name="twitter:description" content="R Not for Everyone: An Esoteric Guide">
<meta name="twitter:image" content="https://www.jaysong.net/RBook/Figs/favicon.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:image-height" content="260">
<meta name="twitter:image-width" content="260">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./project.html">Rの基礎</a></li><li class="breadcrumb-item"><a href="./io.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">データの入出力</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">私たちのR</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/JaehyunSong/RBook/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="サーチ"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">紹介</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Rの導入</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aboutr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rのインストール</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">IDEの導入</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_customize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">分析環境のカスタマイズ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Rパッケージ</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Rの基礎</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">プロジェクト管理</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">基本的な操作</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./io.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">データの入出力</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datatype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">データ型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datastructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">データ構造</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Rプログラミングの基礎</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">関数の自作</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">データハンドリング</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">データハンドリング [抽出]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">データハンドリング [要約]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datahandling3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">データハンドリング [拡張]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">データハンドリング [factor型]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidydata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">整然データ構造</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">文字列の処理</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">可視化</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">可視化 [理論]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">可視化 [基礎]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">可視化 [応用]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">可視化 [発展]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">表の作成</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">再現可能な研究</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">R Markdown [基礎]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rmarkdown2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">R Markdown [応用]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Quarto入門</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./renv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">分析環境の管理</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">中級者向け</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">反復処理</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">オブジェクト指向プログラミング</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./monte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">モンテカルロ・シミュレーション</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">スクレイピング</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">付録</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">データセット</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./filesystem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">ファイルシステム</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">R Tips</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">本書の執筆環境</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">参考文献</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Quarto [基礎]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Quarto [文書]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Quarto [スライド]</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Quarto [発展]</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#sec-io-read" id="toc-sec-io-read" class="nav-link active" data-scroll-target="#sec-io-read"><span class="header-section-number">8.1</span> データの読み込み</a>
  <ul class="collapse">
  <li><a href="#csvファイルの場合" id="toc-csvファイルの場合" class="nav-link" data-scroll-target="#csvファイルの場合"><span class="header-section-number">8.1.1</span> CSVファイルの場合</a></li>
  <li><a href="#エンコーディングの話" id="toc-エンコーディングの話" class="nav-link" data-scroll-target="#エンコーディングの話"><span class="header-section-number">8.1.2</span> エンコーディングの話</a></li>
  <li><a href="#その他のフォーマット" id="toc-その他のフォーマット" class="nav-link" data-scroll-target="#その他のフォーマット"><span class="header-section-number">8.1.3</span> その他のフォーマット</a></li>
  <li><a href="#rdataファイルの場合" id="toc-rdataファイルの場合" class="nav-link" data-scroll-target="#rdataファイルの場合"><span class="header-section-number">8.1.4</span> RDataファイルの場合</a></li>
  </ul></li>
  <li><a href="#sec-io-export" id="toc-sec-io-export" class="nav-link" data-scroll-target="#sec-io-export"><span class="header-section-number">8.2</span> データの書き出し</a>
  <ul class="collapse">
  <li><a href="#csvファイル" id="toc-csvファイル" class="nav-link" data-scroll-target="#csvファイル"><span class="header-section-number">8.2.1</span> CSVファイル</a></li>
  <li><a href="#rdataファイル" id="toc-rdataファイル" class="nav-link" data-scroll-target="#rdataファイル"><span class="header-section-number">8.2.2</span> RDataファイル</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./project.html">Rの基礎</a></li><li class="breadcrumb-item"><a href="./io.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">データの入出力</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-io" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">データの入出力</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>この章で使うパッケージを読み込む。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, readxl, haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="sec-io-read" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="sec-io-read"><span class="header-section-number">8.1</span> データの読み込み</h2>
<section id="csvファイルの場合" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="csvファイルの場合"><span class="header-section-number">8.1.1</span> CSVファイルの場合</h3>
<p>　データの保存によく利用される保存形式として、CSVファイルがある。CSV とは、comma separated values の略である。多くの人に馴染みがあると思われる Excelファイル (.xlsx) と同じように、表形式（行列形式）のデータを保存することができる。しかし、Excelファイルとは異なり、文字の大きさ、セルの背景色、複数のセルの結合のような情報はもたず、純粋にデータに含まれる変数の名前と各変数の値（数値・文字列）のみが格納されているため、ファイルサイズが小さい。文字データしかもたないテキストファイルなので、テキストエディタでも開くことができる。テキストエディタでCSVファイルを開けば、これが “CSV” と呼ばれる理由がわかるだろう。CSVフォーマットはデータを保存のための標準フォーマットの1つであり、多くのデータがCSV形式で保存されている。現存するデータ分析ソフトでCSV ファイルを開けないものはおそらくないだろう。</p>
<p>　RでもCSV形式のファイルは簡単に読み込める。実際にやってみよう。例として利用するデータのダウンロード方法については本書の、<a href="https://www.jaysong.net/RBook/#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89">巻頭</a>を参照されたい。CSVファイルに保存されたデータをRで読み込むには<code>read.csv()</code>または<code>readr::read_csv()</code>関数を使う<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。読み込む際は<a href="r_basic.html">前章</a>のベクトルの生成同様、何らかの名前を付けて作業環境に保存する。<code>Data</code>フォルダにある <code>FIFA_Women.csv</code> ファイルを読み込み、<code>my_df1</code>と名付ける場合、以下のようなコードを実行する<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。以下のコードで<code>my_df1 &lt;-</code>　の部分を入力しないと、データが画面に出力され、自分の作業スペースには保存されないので注意されたい。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>my_df1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data/FIFA_Women.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　読み込まれたデータの中身を見るには、ベクトルの場合と同様に<code>print()</code>関数を使うか、オブジェクト名を入力する。すると、データ全体が表示される。ただし、表示できる列数・行数に限りがあるため、あまりにも大きなデータの場合は一部のみ表示される[^data-print-note1]。 　 [^data-print-note1]: R MarkdownファイルまたはQuarto ファイルでインライン表示している場合には、最初の10行のみ表示される。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>my_df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID                   Team Rank Points Prev_Points Confederation
1     1                Albania   75   1325        1316          UEFA
2     2                Algeria   85   1271        1271           CAF
3     3         American Samoa  133   1030        1030           OFC
4     4                Andorra  155    749         749          UEFA
5     5                 Angola  121   1117        1117           CAF
6     6    Antigua and Barbuda  153    787         787      CONCACAF
7     7              Argentina   32   1659        1659      CONMEBOL
8     8                Armenia  126   1103        1104          UEFA
9     9                  Aruba  157    724         724      CONCACAF
10   10              Australia    7   1963        1963           AFC
11   11                Austria   22   1792        1797          UEFA
12   12             Azerbaijan   76   1321        1326          UEFA
13   13                Bahrain   84   1274        1274           AFC
14   14             Bangladesh  134   1008        1008           AFC
15   15               Barbados  135   1002        1002      CONCACAF
16   16                Belarus   53   1434        1437          UEFA
17   17                Belgium   17   1819        1824          UEFA
18   18                 Belize  150    824         824      CONCACAF
19   19                Bermuda  136    987         987      CONCACAF
20   20                 Bhutan  154    769         769           AFC
21   21                Bolivia   91   1236        1236      CONMEBOL
22   22 Bosnia and Herzegovina   59   1411        1397          UEFA
23   23               Botswana  148    848         848           CAF
24   24                 Brazil    8   1958        1956      CONMEBOL
25   25               Bulgaria   79   1303        1303          UEFA
26   26               Cameroon   51   1455        1486           CAF
27   27                 Canada    8   1958        1958      CONCACAF
28   28                  Chile   37   1640        1637      CONMEBOL
29   29               China PR   15   1867        1842           AFC
30   30         Chinese Taipei   40   1589        1584           AFC
31   31               Colombia   25   1700        1700      CONMEBOL
32   32                Comoros  156    731         731           CAF
33   33                  Congo  104   1178        1178           CAF
34   34               Congo DR  110   1159        1159           CAF
35   35           Cook Islands  103   1194        1194           OFC
36   36             Costa Rica   36   1644        1630      CONCACAF
37   37          Côte d'Ivoire   63   1392        1392           CAF
38   38                Croatia   52   1453        1439          UEFA
39   39                   Cuba   88   1240        1240      CONCACAF
40   40                 Cyprus  123   1114        1123          UEFA
41   41         Czech Republic   29   1678        1678          UEFA
42   42                Denmark   16   1851        1839          UEFA
43   43     Dominican Republic  105   1173        1173      CONCACAF
44   44            El Salvador  109   1164        1164      CONCACAF
45   45                England    6   1999        2001          UEFA
46   46      Equatorial Guinea   71   1356        1356           CAF
47   47                Estonia   95   1210        1206          UEFA
48   48               Eswatini  151    822         822           CAF
49   49               Ethiopia  111   1151        1151           CAF
50   50          Faroe Islands   86   1259        1262          UEFA
51   51                   Fiji   66   1373        1373           OFC
52   52                Finland   30   1671        1678          UEFA
53   53                 France    3   2036        2033          UEFA
54   54                  Gabon  130   1066        1066           CAF
55   55                 Gambia  113   1143        1183           CAF
56   56                Georgia  115   1138        1145          UEFA
57   57                Germany    2   2090        2078          UEFA
58   58                  Ghana   60   1401        1404           CAF
59   59                 Greece   62   1396        1395          UEFA
60   60                   Guam   82   1282        1282           AFC
61   61              Guatemala   80   1290        1290      CONCACAF
62   62                  Haiti   64   1391        1368      CONCACAF
63   63               Honduras  116   1136        1136      CONCACAF
64   64              Hong Kong   74   1329        1335           AFC
65   65                Hungary   43   1537        1526          UEFA
66   66                Iceland   19   1817        1821          UEFA
67   67                  India   55   1432        1432           AFC
68   68              Indonesia   94   1222        1222           AFC
69   69                IR Iran   70   1358        1358           AFC
70   70                 Israel   67   1369        1371          UEFA
71   71                  Italy   14   1889        1882          UEFA
72   72                Jamaica   50   1460        1461      CONCACAF
73   73                  Japan   11   1937        1942           AFC
74   74                 Jordan   58   1419        1419           AFC
75   75             Kazakhstan   77   1318        1318          UEFA
76   76                  Kenya  137    986         986           CAF
77   77              Korea DPR   10   1940        1940           AFC
78   78         Korea Republic   18   1818        1812           AFC
79   79                 Kosovo  125   1104        1109          UEFA
80   80        Kyrgyz Republic  120   1118        1118           AFC
81   81                 Latvia   93   1223        1223          UEFA
82   82                Lebanon  141    967         967           AFC
83   83                Lesotho  147    850         850           CAF
84   84              Lithuania  107   1169        1168          UEFA
85   85             Luxembourg  119   1124        1124          UEFA
86   86             Madagascar  158    691         691           CAF
87   87                 Malawi  145    887         887           CAF
88   88               Malaysia   90   1238        1238           AFC
89   89               Maldives  142    966         966           AFC
90   90                   Mali   83   1276        1276           CAF
91   91                  Malta  101   1197        1195          UEFA
92   92              Mauritius  159    357         357           CAF
93   93                 Mexico   27   1686        1699      CONCACAF
94   94                Moldova   92   1228        1229          UEFA
95   95               Mongolia  123   1114        1114           AFC
96   96             Montenegro   97   1201        1206          UEFA
97   97                Morocco   81   1289        1280           CAF
98   98             Mozambique  152    814         814           CAF
99   99                Myanmar   45   1511        1527           AFC
100 100                Namibia  143    956         956           CAF
101 101                  Nepal   99   1200        1200           AFC
102 102            Netherlands    4   2032        2035          UEFA
103 103          New Caledonia   96   1208        1208           OFC
104 104            New Zealand   23   1757        1760           OFC
105 105              Nicaragua  122   1116        1116      CONCACAF
106 106                Nigeria   38   1614        1614           CAF
107 107        North Macedonia  129   1072        1073          UEFA
108 108       Northern Ireland   55   1432        1433          UEFA
109 109                 Norway   12   1930        1929          UEFA
110 110              Palestine  117   1131        1131           AFC
111 111                 Panama   60   1401        1437      CONCACAF
112 112       Papua New Guinea   46   1504        1504           OFC
113 113               Paraguay   48   1490        1490      CONMEBOL
114 114                   Peru   65   1376        1376      CONMEBOL
115 115            Philippines   67   1369        1369           AFC
116 116                 Poland   28   1683        1677          UEFA
117 117               Portugal   32   1659        1667          UEFA
118 118            Puerto Rico  106   1172        1172      CONCACAF
119 119    Republic of Ireland   31   1666        1665          UEFA
120 120                Romania   44   1535        1542          UEFA
121 121                 Russia   24   1708        1708          UEFA
122 122                 Rwanda  144    899         899           CAF
123 123                  Samoa  107   1169        1169           OFC
124 124               Scotland   21   1804        1794          UEFA
125 125                Senegal   87   1247        1245           CAF
126 126                 Serbia   41   1558        1553          UEFA
127 127              Singapore  128   1089        1089           AFC
128 128               Slovakia   47   1501        1500          UEFA
129 129               Slovenia   49   1471        1467          UEFA
130 130        Solomon Islands  114   1140        1140           OFC
131 131           South Africa   53   1434        1434           CAF
132 132                  Spain   13   1915        1900          UEFA
133 133              Sri Lanka  140    968         968           AFC
134 134    St. Kitts and Nevis  131   1050        1054      CONCACAF
135 135              St. Lucia  138    982         982      CONCACAF
136 136               Suriname  127   1093        1093      CONCACAF
137 137                 Sweden    5   2007        2022          UEFA
138 138            Switzerland   20   1815        1817          UEFA
139 139                 Tahiti  102   1196        1196           OFC
140 140             Tajikistan  132   1035        1035           AFC
141 141               Tanzania  139    978         978           CAF
142 142               Thailand   39   1596        1620           AFC
143 143                  Tonga   88   1240        1240           OFC
144 144    Trinidad and Tobago   72   1354        1354      CONCACAF
145 145                Tunisia   78   1304        1313           CAF
146 146                 Turkey   69   1365        1361          UEFA
147 147                 Uganda  146    868         868           CAF
148 148                Ukraine   26   1692        1697          UEFA
149 149   United Arab Emirates   97   1201        1201           AFC
150 150                Uruguay   73   1346        1346      CONMEBOL
151 151      US Virgin Islands  149    843         843      CONCACAF
152 152                    USA    1   2181        2174      CONCACAF
153 153             Uzbekistan   42   1543        1543           AFC
154 154                Vanuatu  117   1131        1131           OFC
155 155              Venezuela   57   1425        1425      CONMEBOL
156 156                Vietnam   35   1657        1665           AFC
157 157                  Wales   34   1658        1659          UEFA
158 158                 Zambia  100   1198        1167           CAF
159 159               Zimbabwe  111   1151        1151           CAF</code></pre>
</div>
</div>
<p>　しかし、通常はデータが読み込まれているかどうかを確認するためにデータ全体を見る必要はない。最初の数行のみで問題ないはずだ。そのために、<code>head()</code> 関数を使う。これは最初の6行 (<code>n</code> で表示行数を変えることができる) を表示してくれる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">head</span>(my_df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID                Team Rank Points Prev_Points Confederation
1  1             Albania   75   1325        1316          UEFA
2  2             Algeria   85   1271        1271           CAF
3  3      American Samoa  133   1030        1030           OFC
4  4             Andorra  155    749         749          UEFA
5  5              Angola  121   1117        1117           CAF
6  6 Antigua and Barbuda  153    787         787      CONCACAF</code></pre>
</div>
</div>
<p>　同様に、最後の <code>n</code>行は<code>tail()</code> で表示する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">tail</span>(my_df1, <span class="at">n =</span> <span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID              Team Rank Points Prev_Points Confederation
151 151 US Virgin Islands  149    843         843      CONCACAF
152 152               USA    1   2181        2174      CONCACAF
153 153        Uzbekistan   42   1543        1543           AFC
154 154           Vanuatu  117   1131        1131           OFC
155 155         Venezuela   57   1425        1425      CONMEBOL
156 156           Vietnam   35   1657        1665           AFC
157 157             Wales   34   1658        1659          UEFA
158 158            Zambia  100   1198        1167           CAF
159 159          Zimbabwe  111   1151        1151           CAF</code></pre>
</div>
</div>
<p>　ただし、今後は特殊な事情がない限り<code>read.csv()</code>は使用せず、<code>readr::read_csv()</code>を使う。基本的な使い方は同じである。<code>read_csv()</code>は{tidyverse}の一部である{readr}パッケージに含まれる関数であるため、あらかじめ{tidyverse}（または{readr}そのもの）を読み込んでおく必要がある。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse)</span>
<span id="cb9-2"><a href="#cb9-2"></a>my_df1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/FIFA_Women.csv"</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>my_df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 159 × 6
      ID Team                 Rank Points Prev_Points Confederation
   &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
 1     1 Albania                75   1325        1316 UEFA         
 2     2 Algeria                85   1271        1271 CAF          
 3     3 American Samoa        133   1030        1030 OFC          
 4     4 Andorra               155    749         749 UEFA         
 5     5 Angola                121   1117        1117 CAF          
 6     6 Antigua and Barbuda   153    787         787 CONCACAF     
 7     7 Argentina              32   1659        1659 CONMEBOL     
 8     8 Armenia               126   1103        1104 UEFA         
 9     9 Aruba                 157    724         724 CONCACAF     
10    10 Australia               7   1963        1963 AFC          
# ℹ 149 more rows</code></pre>
</div>
</div>
<p>　同じファイルが読み込まれたが、データを出力すると最初の10行のみが表示される。画面に収まらない大きさのデータであれば、適宜省略し、見やすく出力してくれる。<code>read_csv()</code>で読み込まれたデータは、tibbleと呼ばれるやや特殊なものとして格納される。Rがデフォルトで提供する表形式データの構造はdata.frameだが、tibbleはその拡張版である。詳しくは第<a href="datastructure.html#sec-datastructure-dataframe" class="quarto-xref"><span>10.4</span></a>章を参照されたい。</p>
</section>
<section id="エンコーディングの話" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="エンコーディングの話"><span class="header-section-number">8.1.2</span> エンコーディングの話</h3>
<p>　<code>Vote_ShiftJIS.csv</code> はShift-JIS でエンコーディングされた csvファイルである。このファイルを <code>read.csv()</code> 関数で読み込んでみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>ShiftJIS_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data/Vote_ShiftJIS.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in type.convert.default(data[[i]], as.is = as.is[i], dec = dec, : invalid multibyte string at '&lt;96&gt;k&lt;8a&gt;C&lt;93&gt;&lt;b9&gt;'</code></pre>
</div>
</div>
<p>　Windowsならなんの問題なく読み込まれるだろう。しかし、macOSの場合、以下のようなエラーが表示され、読み込めない。</p>
<pre><code>## Error in type.convert.default(data[[i]], as.is = as.is[i], dec = dec, :  '&lt;96&gt;k&lt;8a&gt;C&lt;93&gt;&lt;b9&gt;' に不正なマルチバイト文字があります</code></pre>
<p>　このファイルは、<code>read.csv()</code>の代わりに {readr}パッケージの<code>read_csv()</code>を使えば読み込むことができる<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。<code>read_csv()</code>で読み込み、中身を確認してみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>ShiftJIS_df1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/Vote_ShiftJIS.csv"</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">head</span>(ShiftJIS_df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
     ID Pref           Zaisei Over65 Under30   LDP   DPJ Komei Ishin   JCP   SDP
  &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1 "\x96k\x8aC\x…  0.419   29.1    24.7  32.8  30.6 13.4   3.43 11.4   1.68
2     2 "\x90\xc2\x90…  0.332   30.1    23.9  40.4  24.6 12.8   3.82  8.92  3.41
3     3 "\x8a\xe2\x8e…  0.341   30.4    24.5  34.9  22.4  8.61  5.16 11.2   5.29
4     4 "\x8b{\x8f\xe…  0.596   25.8    27.3  36.7  25.4 13.4   3.97  9.99  3.62
5     5 "\x8fH\x93c\x…  0.299   33.8    21.4  43.5  22.7 11.2   5.17  7.56  5.12
6     6 "\x8eR\x8c`\x…  0.342   30.8    24.8  42.5  21.5 11.8   4.3   7.6   5.2 </code></pre>
</div>
</div>
<p>　2列目の<code>Pref</code>列には日本語で都道府県名が入っているはずだが、謎の文字列が表示される。Windows で<code>read.csv()</code>を使ったなら、このファイルは問題なく読み込めたはずだ。それは、<code>read.csv()</code>がWindowsではShift-JISを、macOSではUTF-8をファイルの文字コードとして想定しているためだ。一方、<code>read_csv()</code>はOSにかかわらず世界標準であるUTF-8でファイルを読み込む。</p>
<p>　正しい都道府県名を表示する方法はいくつかあるが、ここでは3つの方法を紹介する。</p>
<p><strong>1. <code>read.csv()</code>関数の<code>fileEncoing</code>引数の指定</strong></p>
<p>　第1の方法は、<code>read.csv()</code>関数の <code>fileEncoding</code> 引数を追加するというものである。この引数に、開きたいファイルで使われている文字コードを指定すればよい。Shift-JISの場合、<code>"Shift_JIS"</code> を指定する。ハイフン (<code>-</code>)ではなく、アンダーバー (<code>_</code>) であることに注意されたい。この<code>"Shift_JIS"</code>は<code>"cp932"</code> に書き換えても良い。それではやってみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>ShiftJIS_df2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data/Vote_ShiftJIS.csv"</span>, </span>
<span id="cb16-2"><a href="#cb16-2"></a>                         <span class="at">fileEncoding =</span> <span class="st">"Shift_JIS"</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">head</span>(ShiftJIS_df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID   Pref  Zaisei Over65 Under30   LDP   DPJ Komei Ishin   JCP  SDP
1  1 北海道 0.41903  29.09   24.70 32.82 30.62 13.41  3.43 11.44 1.68
2  2 青森県 0.33190  30.14   23.92 40.44 24.61 12.76  3.82  8.92 3.41
3  3 岩手県 0.34116  30.38   24.48 34.90 22.44  8.61  5.16 11.24 5.29
4  4 宮城県 0.59597  25.75   27.29 36.68 25.40 13.42  3.97  9.99 3.62
5  5 秋田県 0.29862  33.84   21.35 43.46 22.72 11.19  5.17  7.56 5.12
6  6 山形県 0.34237  30.76   24.75 42.49 21.47 11.78  4.30  7.60 5.20</code></pre>
</div>
</div>
<p>　<code>Pref</code>列の日本語が正常に表示された。繰り返しになるが、Windowsなら<code>fileEncoding</code>引数がなくても正しく読み込める。むしろ、UTF-8で書かれたファイルが読み込めない可能性がある。WindowsでUTF-8のファイルを読み込みときは、<code>fileEncoding = "UTF-8"</code>を指定するとよい。</p>
<p><strong>2. <code>read_csv()</code>関数の<code>locale</code>引数の指定</strong></p>
<p>　第2の方法は、 <code>read_csv()</code> 関数の<code>locale</code> 引数を指定する方法である。<code>read_csv()</code>には　<code>fileEncoding</code>という引数の代わりに <code>locale</code> があるので、<code>locale = locale(encoding = "Shift_JIS")</code>を追加する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>ShiftJIS_df3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/Vote_ShiftJIS.csv"</span>, </span>
<span id="cb18-2"><a href="#cb18-2"></a>                         <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">"Shift_JIS"</span>))</span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="fu">head</span>(ShiftJIS_df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
     ID Pref   Zaisei Over65 Under30   LDP   DPJ Komei Ishin   JCP   SDP
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1 北海道  0.419   29.1    24.7  32.8  30.6 13.4   3.43 11.4   1.68
2     2 青森県  0.332   30.1    23.9  40.4  24.6 12.8   3.82  8.92  3.41
3     3 岩手県  0.341   30.4    24.5  34.9  22.4  8.61  5.16 11.2   5.29
4     4 宮城県  0.596   25.8    27.3  36.7  25.4 13.4   3.97  9.99  3.62
5     5 秋田県  0.299   33.8    21.4  43.5  22.7 11.2   5.17  7.56  5.12
6     6 山形県  0.342   30.8    24.8  42.5  21.5 11.8   4.3   7.6   5.2 </code></pre>
</div>
</div>
<p><strong>3. LibreOfficeなどを利用する方法</strong></p>
<p>　第3の方法は、そもそも Shift-JISでではなく、より一般的な UTF-8 でエンコーディングされたファイルを用意し、それを読み込むことである。ただし、この作業のためにはR以外のソフトが必要である。テキストエディタには文字コードを変更する機能がついているものが多いので、その機能を利用して文字コードを Shift-JISからUTF-8に変えればよい。また、オープンソースのオフィススイートである <a href="https://ja.libreoffice.org/">LibreOffice</a> は、CSVを開く際に文字コードを尋ねてくれるので、Shift-JIS を指定してCSV ファイルを開こう。その後、開いたファイルの文字コードをUTF-8に変更し、別名でCSVファイルを保存すれば、文字コード以外の中身が同じファイルができる。そのようにして作ったのが、<code>Vote.csv</code> である。これを読み込んでみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>UTF8_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data/Vote.csv"</span>) <span class="co"># macOSの場合</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>UTF8_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data/Vote.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">"UTF-8"</span>) <span class="co"># Windowsの場合</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">head</span>(UTF8_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID   Pref  Zaisei Over65 Under30   LDP   DPJ Komei Ishin   JCP  SDP
1  1 北海道 0.41903  29.09   24.70 32.82 30.62 13.41  3.43 11.44 1.68
2  2 青森県 0.33190  30.14   23.92 40.44 24.61 12.76  3.82  8.92 3.41
3  3 岩手県 0.34116  30.38   24.48 34.90 22.44  8.61  5.16 11.24 5.29
4  4 宮城県 0.59597  25.75   27.29 36.68 25.40 13.42  3.97  9.99 3.62
5  5 秋田県 0.29862  33.84   21.35 43.46 22.72 11.19  5.17  7.56 5.12
6  6 山形県 0.34237  30.76   24.75 42.49 21.47 11.78  4.30  7.60 5.20</code></pre>
</div>
</div>
<p>　macOSでは第1引数以外の引数を何も指定しなくても、ファイルが正しく読み込まれ、都道府県名が日本語で表示されている。ただし、Windowsで文字化けが生じる場合はファイルのエンコーディングをUTF-8に指定して読み込もう。</p>
</section>
<section id="その他のフォーマット" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="その他のフォーマット"><span class="header-section-number">8.1.3</span> その他のフォーマット</h3>
<p>　データ分析で用いられるデータの多くは表の形で保存されている。表形式のデータは、<code>.csv</code>以外に、<code>.xlsx</code> (Excel)、<code>.dta</code> (Stata)、<code>.sav</code> (SPSS)、<code>.ods</code> (LibreOfficeなど)　などのファイル形式で保存されることがある。ここでは接する機会が多い Excel 形式のファイルと Stata 形式のファイルの読み込みについて説明しよう<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。</p>
<p>　Excelファイルを読み込むためには<strong>readxl</strong>パッケージを使う。インストールされていない場合、コンソール上で<code>install.packages("readxl")</code>を入力し、インストールする（上で <code>pacman::p_load(readxl)</code> を実行したのでインストールされているはずだが）。以下では<strong>readxl</strong>パッケージがインストールされていると想定し、<code>Soccer.xlsx</code>ファイルを読み込み、<code>Excel_DF</code>と名付けてみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>Excel_DF <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Data/Soccer.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　Excelファイルには2つ以上のシートが含まれる場合が多いが、その場合にはどのシートを読み込むかを<code>sheetIndex</code> で指定する。実際、<code>Soccer.xlsx</code>ファイルをExcelまたはLibreOffice Calc で開いてみると、シートが3つある。そのうち、必要なデータは1つ目のシートにあるので、ここでは<code>1</code>を指定した。きちんと読み込たか確認してみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">head</span>(Excel_DF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
     ID Team                 Rank Points Prev_Points Confederation
  &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
1     1 Albania                75   1325        1316 UEFA         
2     2 Algeria                85   1271        1271 CAF          
3     3 American Samoa        133   1030        1030 OFC          
4     4 Andorra               155    749         749 UEFA         
5     5 Angola                121   1117        1117 CAF          
6     6 Antigua and Barbuda   153    787         787 CONCACAF     </code></pre>
</div>
</div>
<p>　Stataの<code>.dta</code>ファイルは<strong>haven</strong>パッケージの<code>read_dta()</code> 関数を使って読み込む。Stata形式で保存された <code>Soccer.dta</code> を読み込み、<code>Stata_DF</code>と名付けてみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>Stata_DF <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"Data/Soccer.dta"</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="fu">head</span>(Stata_DF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
     id team                 rank points prev_points confederation
  &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
1     1 Albania                75   1325        1316 UEFA         
2     2 Algeria                85   1271        1271 CAF          
3     3 American Samoa        133   1030        1030 OFC          
4     4 Andorra               155    749         749 UEFA         
5     5 Angola                121   1117        1117 CAF          
6     6 Antigua and Barbuda   153    787         787 CONCACAF     </code></pre>
</div>
</div>
<p>Excel形式のデータと同じ内容のデータであること確認できる（ただし、変数名は少し異なる）。</p>
<p>　社会科学で扱うデータの多くは<code>.csv</code>、<code>.xlsx</code> (または<code>.xls</code>)、<code>.dta</code>で提供されるめ、以上のやり方で多くのデータの読み込みができる。</p>
</section>
<section id="rdataファイルの場合" class="level3" data-number="8.1.4">
<h3 data-number="8.1.4" class="anchored" data-anchor-id="rdataファイルの場合"><span class="header-section-number">8.1.4</span> RDataファイルの場合</h3>
<p>　データ分析には表形式以外のデータも使われる。データ分析でよく使われるデータの形として、ベクトルや行列のほかに<code>list</code>型がある。表形式だけでなく、Rで扱える様々なデータを含むファイル形式の1つが<code>.RData</code>フォーマットである。<code>.RData</code>にはRが扱える形式のデータを格納するだけでなく、表形式のデータを<strong>複数</strong>格納することができる。また、データだけでなく、分析結果も保存することができる。<code>.RData</code>形式のファイルはRでしか読み込めないため、データの保存方法としては推奨できないが、1つのファイルにさまざまなデータが格納できるという大きな長所があるため、分析の途中経過を保存するためにしばしば利用される。</p>
<p>　ここでは<code>Data</code>フォルダにある<code>Scores.RData</code>を読み込んでみよう。このファイルには学生5人の数学と英語の成績に関するデータがそれぞれ<code>MathScore</code>と<code>EnglishScore</code>という名で保存されている。このデータを読み込む前に、現在の実行環境にどのようなオブジェクトがあるかを <code>ls()</code> 関数を使って確認してみよう<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Excel_DF"     "my_df1"       "ShiftJIS_df1" "ShiftJIS_df2" "ShiftJIS_df3"
[6] "Stata_DF"     "UTF8_df"     </code></pre>
</div>
</div>
<p>　現在の実行環境に7個のオブジェクトがあることがわかる。</p>
<p>　では、<code>Scores.RData</code>を読み込んでみよう。<code>.RData</code> は、<code>load()</code> 関数で読み込む。ただし、これまでのファイルの読み込みとは異なり、保存先のオブジェクト名は指定しない。なぜなら、<code>.Rdata</code> の中に既にオブジェクトが保存されているからだ。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">load</span>(<span class="st">"Data/Scores.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　ここでもう一度実行環境上にあるオブジェクトのリストを確認してみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "EnglishScore" "Excel_DF"     "MathScore"    "my_df1"       "ShiftJIS_df1"
[6] "ShiftJIS_df2" "ShiftJIS_df3" "Stata_DF"     "UTF8_df"     </code></pre>
</div>
</div>
<p>　<code>MathScore</code>と<code>EnglishScore</code>という名前のオブジェクトが追加されていることが分かる。</p>
<p>　このように、<code>load()</code>による<code>.RData</code> の読み込みは、<code>.csv</code>ファイルや<code>.xlsx</code>ファイルの読み込みとは異なる。以下の2点が重要な違いである。</p>
<ol type="1">
<li><code>.RData</code> は、1つのファイルに複数のデータを含むことができる。</li>
<li><code>.RData</code>の中にRのオブジェクトが保存されているので、ファイルの読み込みと同時に名前を付けて格納する必要がない。</li>
</ol>
<p>　問題なく読み込まれているか確認するため、それぞれのオブジェクトの中身を見てみよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">head</span>(MathScore)    <span class="co"># MathScoreの中身を出力</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID    Name Score
1  1 Caracal   100
2  2 Cheetah    37
3  3  Jaguar    55
4  4 Leopard    69
5  5  Serval    95</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">tail</span>(EnglishScore) <span class="co"># EnglishScoreの中身を出力</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID    Name Score
1  1 Caracal    90
2  2 Cheetah    21
3  3  Jaguar    80
4  4 Leopard    45
5  5  Serval    99</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-io-export" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="sec-io-export"><span class="header-section-number">8.2</span> データの書き出し</h2>
<p>　データを手に入れた時点でそのデータ（生データ）が分析に適した状態であることは稀である。多くの場合、分析をするためには手に入れたデータを分析に適した形に整形する必要がある。この作業を「データクリーニング」と呼ぶが、データ分析の作業全体に占めるデータクリーニングの割合は5割から7割ほどで、大部分の作業時間をクリーニングに費やすことになる。（クリーニングの方法については、データハンドリングの章で説明する。）</p>
<p>　データクリーニングが終わったら、生データとクリーニングに使ったコード、クリーニング済みのデータをそれぞれ保存しておこう。クリーニングのコードさえあればいつでも生データからクリーニング済みのデータに変換することができるが、時間的にあまり効率的ではないので、クリーニング済みのデータも保存したほうがよい。そうすれば、いつでもそのデータを読み込んですぐに分析作業に取り組無ことができる<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>。</p>
<section id="csvファイル" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="csvファイル"><span class="header-section-number">8.2.1</span> CSVファイル</h3>
<p>　データを保存する際にまず考えるべきフォーマットは<code>.csv</code> である。データが表の形をしていない場合には次節で紹介する<code>.RData</code>フォーマットが必要になるが、多くの場合、データは表の形をしている。読み込みのところで説明したとおり、<code>.csv</code>ファイルは汎用的なテキストファイルであり、ほとんどの統計ソフトおよび表計算ソフトで読み込むことができるので、特にこだわりがなければ業界標準のフォーマットとも言える CSV形式でデータ保存しておくのが安全だ<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>。</p>
<p>　まずは、架空のデータを作ってみよう。Rにおける表形式のデータは <code>data.frame</code>型で表現する。（詳細については第<a href="datastructure.html" class="quarto-xref"><span>10</span></a>章で説明する。）</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb37-2"><a href="#cb37-2"></a>    <span class="at">ID    =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb37-3"><a href="#cb37-3"></a>    <span class="at">Name  =</span> <span class="fu">c</span>(<span class="st">"Aさん"</span>, <span class="st">"Bさん"</span>, <span class="st">"Cさん"</span>, <span class="st">"Dさん"</span>, <span class="st">"Eさん"</span>),</span>
<span id="cb37-4"><a href="#cb37-4"></a>    <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">60</span>, <span class="dv">93</span>, <span class="dv">51</span>)</span>
<span id="cb37-5"><a href="#cb37-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　上のコードを実行すると、<code>my_data</code>というオブジェクトが生成され、中には以下のようなデータが保持される。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID  Name Score
1  1 Aさん    50
2  2 Bさん    75
3  3 Cさん    60
4  4 Dさん    93
5  5 Eさん    51</code></pre>
</div>
</div>
<p>　このデータを<code>my_data.csv</code>という名前のcsvファイルで保存するには、<code>write.csv()</code>または<code>readr::write_csv()</code>という関数を使う。必須の引数は2つで、1つ目の引数は保存するオブジェクト名、2つ目の引数 <code>file</code> は書き出すファイル名である。プロジェクトフォルダの下位フォルダ、たとえばDataフォルダに保存するなら、ファイル名を<code>"Data/my_ata.csv"</code>のように指定する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">write_csv</span>(my_data, <span class="at">file =</span> <span class="st">"Data/my_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　これを実行すると、プロジェクトのフォルダの中にある <code>Data</code> フォルダに<code>my_data.csv</code>が生成される。<code>LibreOffice</code>や<code>Numbers</code>、<code>Excel</code>などを使って<code>my_data.csv</code>を開いてみると、先ほど作成したデータが保存されていることが確認できる。</p>
<div id="fig-io-export-4" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-io-export-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Figs/IO/Export.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="500">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-io-export-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;8.1: 保存したcsvファイルの中身
</figcaption>
</figure>
</div>
</section>
<section id="rdataファイル" class="level3" data-number="8.2.2">
<h3 data-number="8.2.2" class="anchored" data-anchor-id="rdataファイル"><span class="header-section-number">8.2.2</span> RDataファイル</h3>
<p>最後に<code>.RData</code>形式でデータを書き出してみよう。今回は先ほど作成した<code>my_data</code>と、以下で作成する<code>numeric_vec1</code>、<code>numeric_vec2</code>、<code>character_vec</code>を<code>my_RData.RData</code>という名のファイルとして <code>Data</code>フォルダに書き出す。使用する関数は <code>save()</code> である。引数として保存するオブジェクト名をすべてカンマ区切りで書き、最後に<code>file</code>　引数でファイル名を指定すればよい。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>numeric_vec1  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">99</span>, <span class="dv">2</span>, <span class="dv">8</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a>numeric_vec2  <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>character_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"cheetah"</span>, <span class="st">"lion"</span>,　<span class="st">"tiger"</span>)</span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="fu">save</span>(my_data, numeric_vec1, numeric_vec2, character_vec, </span>
<span id="cb41-5"><a href="#cb41-5"></a>     <span class="at">file =</span> <span class="st">"Data/my_RData.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　実際に<code>my_RData.Rdata</code>ファイルが生成されているかを確認してみよう。ファイルの保存がうまくいっていれば、<code>my_RData.RData</code>を読み込むだけで、<code>my_data</code>、<code>numeric_vec1</code>、<code>numeric_vec2</code>、<code>character_vec</code> という4つのオブジェクトを一挙に作業スペースに読み込むことができるはずだ。実際にできるか確認しよう。そのために、まず現在の実行環境上にある<code>my_ata</code>、<code>numeric_vec1</code>、<code>numeric_vec2</code>、<code>character_vec</code>を削除する。そのために <code>rm()</code> 関数を使う。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">rm</span>(my_data)</span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">rm</span>(numeric_vec1)</span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="fu">rm</span>(numeric_vec2)</span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="fu">rm</span>(character_vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　このコードは以下のように1行のコードに書き換えられる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">"my_data"</span>, <span class="st">"numeric_vec1"</span>, <span class="st">"numeric_vec2"</span>, <span class="st">"character_vec"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　4のオブジェクトが削除されたか、<code>ls()</code>関数で確認しよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "EnglishScore" "Excel_DF"     "MathScore"    "my_df1"       "ShiftJIS_df1"
[6] "ShiftJIS_df2" "ShiftJIS_df3" "Stata_DF"     "UTF8_df"     </code></pre>
</div>
</div>
<p>それでは<code>Data</code>フォルダー内の<code>my_RData.RData</code>を読み込み、4つのオブジェクトが実行環境に読み込まれるか確認しよう。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">load</span>(<span class="st">"Data/my_RData.RData"</span>) <span class="co"># Dataフォルダー内のmy_RData.RDataを読み込む</span></span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="fu">ls</span>()                        <span class="co"># 作業スペース上のオブジェクトのリストを確認する</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "character_vec" "EnglishScore"  "Excel_DF"      "MathScore"    
 [5] "my_data"       "my_df1"        "numeric_vec1"  "numeric_vec2" 
 [9] "ShiftJIS_df1"  "ShiftJIS_df2"  "ShiftJIS_df3"  "Stata_DF"     
[13] "UTF8_df"      </code></pre>
</div>
</div>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p><code>read.csv()</code>で読み込まれた表は <code>data.frame</code> クラス、<code>read_csv()</code>関数で読み込まれた表は <code>tibble</code> クラスとして保存される。詳細は<a href="datastructure.html#sec-datastructure-dataframe" class="quarto-xref"><span>10.4</span></a>節で解説する。<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Rのバージョンが4.0.0 未満の場合は、引数として<code>stringsAsFactors = FALSE</code> を追加する。たとえば、<code>my_df1 &lt;- read.csv("Data/FIFA_Women.csv", stringsAsFactors = FALSE)</code> とする。これを追加しないと、文字列で構成されている列が <code>factor</code> 型として読み込まれる。<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>readr パッケージは tidyverse の一部なので、上で読み込み済みである。<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><code>.sav</code>ファイルは<code>haven</code>パッケージの<code>read_sav()</code>で、<code>.ods</code>は<code>readODS</code>パッケージの<code>read.ods()</code>関数で読み込める。<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>ちなみにRStudioから確認することもできる。第<a href="r_customize.html" class="quarto-xref"><span>4</span></a>章のとおりにRStudioを設定した場合、右下ペインの「Environment」タブに現在の実行環境に存在するオブジェクトが表示されているはずだ。<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>言うまでもないが、データクリーニングのコードと生データも必ず残しておくべきである。<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Excel (<code>.xlsx</code>) も広く使われているが、Excelは有料の商用ソフトであり、持っていない（使える環境にない）人もいることを忘れてはいけない。自分のパソコンに Excel （MS Office）をインストールしていないという人（筆者の1人）もいるのだ。<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/RBook\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./r_basic.html" class="pagination-link" aria-label="基本的な操作">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">基本的な操作</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./datatype.html" class="pagination-link" aria-label="データ型">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">データ型</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, <a href="https://www.jaysong.net">Jaehyun Song</a> and <a href="https://yukiyanai.github.io/">Yuki Yanai</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>